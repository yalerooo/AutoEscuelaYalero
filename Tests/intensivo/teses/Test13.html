<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Autoescuela</title>
    <link rel="stylesheet" href="../../../Assets/style.css">
</head>
<body>

    
    <div class="container">
        <h1 style="text-align: center; color: #ffa5c3;">Test de Autoescuela</h1>
        <div id="test-container">
            <!-- Aquí se generarán dinámicamente las preguntas -->
        </div>
        <div class="pagination">
            <div class="pagination-row" id="pagination-row-1"></div>
            <div class="pagination-row" id="pagination-row-2"></div>
        </div>
        <button id="correct-test">Corregir Test</button>
    </div>

    <!-- Custom Alert HTML -->
    <div class="custom-alert" id="custom-alert">
        <h2>Resultado del Test</h2>
        <p id="alert-message">Aquí irá el mensaje del resultado.</p>
        <button onclick="closeAlert()">Cerrar</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const questions = [
    {
        "text": "Transporta en su turismo una carga que sobresale por la parte trasera, ¿debe señalizarla?",
        "options": [
            "No, en los turismos no es necesario.",
            "Sí, únicamente de noche o en condiciones meteorológicas adversas.",
            "Sí, con un panel colocado en el extremo de la carga."
        ],
        "correct": "C",
        "image": "../../../Assets/img/I4301.jpg"
    },
    {
        "text": "En una carretera convencional, el conductor de una motocicleta, ¿puede rebasar la velocidad máxima genérica en alguna circunstancia?",
        "options": [
            "Sí, para adelantar.",
            "No, en ningún caso.",
            "Sí, siempre que sea necesario."
        ],
        "correct": "B",
        "image": "../../../Assets/img/I4302.jpg"
    },
    {
        "text": "A efectos del número de plazas de los turismos, los menores de 12 años, se computarán como...",
        "options": [
            "media plaza, siempre que no supere el 50% del total de plazas.",
            "una plaza.",
            "no ocupan plaza si son menores de 2 años."
        ],
        "correct": "B",
        "image": "../../../Assets/img/I4303.jpg"
    },
    {
        "text": "Ante un accidente de tráfico, ¿qué es lo primero que toda persona ha de tener en cuenta?",
        "options": [
            "Protegerse a si misma.",
            "Proteger a las víctimas.",
            "Proteger el lugar del accidente."
        ],
        "correct": "A",
        "image": "../../../Assets/img/I4304.jpg"
    },
    {
        "text": "Hace un año que un conductor ha obtenido el permiso de la clase A2 y ahora obtiene el de la clase B. ¿Cuál será su tasa máxima de alcohol permitida?",
        "options": [
            "Una tasa que no supere los 0'5 gramos por litro en sangre.",
            "Durante un año, 0'3 gramos por litro en sangre.",
            "Durante dos años, 0'3 gramos por litro en sangre."
        ],
        "correct": "B",
        "image": "../../../Assets/img/I4305.jpg"
    },
    {
        "text": "Esta señal...",
        "options": [
            "prohíbe el acceso a ciclos.",
            "indica fin de vía reservada para ciclos.",
            "prohíbe el paso a vehículos de dos ruedas."
        ],
        "correct": "B",
        "image": "../../../Assets/img/I4306.jpg"
    },
    {
        "text": "¿Es necesario llevar un mantenimiento regular o revisión de los latiguillos de los frenos?",
        "options": [
            "No, con que revises el líquido de frenos es suficiente.",
            "Sí, para que no tenga escapes y fugas.",
            "No, porque no se estropean."
        ],
        "correct": "B",
        "image": "../../../Assets/img/I4307.jpg"
    },
    {
        "text": "¿Está permitido circular con el dispositivo silenciador de explosiones en mal estado?",
        "options": [
            "Sí.",
            "Únicamente fuera de zona urbana, donde no moleste.",
            "No."
        ],
        "correct": "C",
        "image": "../../../Assets/img/I4308.jpg"
    },
    {
        "text": "¿Es obligatorio el uso del cinturón de seguridad para los ocupantes de un vehículo mixto adaptable de 3.000 kg de MMA?",
        "options": [
            "Sí, en todas las vías.",
            "Sólo en vías urbanas y travesías.",
            "Sólo en vías interurbanas."
        ],
        "correct": "A",
        "image": "../../../Assets/img/I4309.jpg"
    },
    {
        "text": "Los efectos del alcohol en el organismo, ¿están relacionados con el peso?",
        "options": [
            "Sí, como norma general.",
            "No, en ningún caso.",
            "Los efectos del alcohol no dependen del peso."
        ],
        "correct": "A",
        "image": "../../../Assets/img/I4310.jpg"
    },
    {
        "text": "¿Cuál es la velocidad máxima permitida a partir de esta señal?",
        "options": [
            "30 km/h.",
            "60 km/h.",
            "90 km/h."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T510103_250516.jpg"
    },
    {
        "text": "Cuando la luz de marcha atrás está averiada, debemos indicarlo...",
        "options": [
            "advirtiéndolo con el claxon.",
            "moviendo el brazo de arriba a abajo.",
            "con el brazo extendido y la palma de la mano hacia atrás."
        ],
        "correct": "C",
        "image": "../../../Assets/img/I4312.jpg"
    },
    {
        "text": "En el ámbito del tráfico, ¿a qué se llama grupos vulnerables?",
        "options": [
            "A los pasajeros que resultan heridos en un accidente de automóvil.",
            "A los jóvenes menores de 30 años que resultan heridos en accidente.",
            "A los grupos de población más propensos a sufrir un accidente."
        ],
        "correct": "C",
        "image": "../../../Assets/img/I4313.jpg"
    },
    {
        "text": "Circulando con fuerte nevada, ¿qué luz antiniebla se debe utilizar?",
        "options": [
            "La luz antiniebla delantera.",
            "Obligatoriamente la antiniebla delantera y si se dispone de ella la trasera.",
            "La luz antiniebla trasera y si se dispone de ella también la antiniebla delantera."
        ],
        "correct": "C",
        "image": "../../../Assets/img/I4314.jpg"
    },
    {
        "text": "El conductor de una motocicleta, que lleva una persona en el asiento trasero...",
        "options": [
            "debe utilizar el casco protector y será responsable de que lo utilice el acompañante.",
            "debe utilizar el casco protector y será responsable de que lo utilice el acompañante, pero sólo en vías interurbanas.",
            "debe utilizar el casco protector y aconsejar al acompañante que lo utilice."
        ],
        "correct": "A",
        "image": "../../../Assets/img/I4315.jpg"
    },
    {
        "text": "Al adelantar a un ciclista que lleva a un pasajero, es importante...",
        "options": [
            "dejar una separación lateral suficiente, ya que se pueden desestabilizar con facilidad.",
            "mantener la velocidad y estar atento al cumplimiento de la señalización vertical.",
            "al estar cerca de ellos hacer señales acústicas para indicar nuestra presencia."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T513505.jpg"
    },
    {
        "text": "La colocación de los dispositivos de retención infantil resulta más segura en...",
        "options": [
            "el asiento trasero central, ya que resulta menos afectado por los impactos laterales.",
            "cualquiera de los asientos traseros laterales.",
            "el asiento delantero, para que el conductor pueda vigilar al niño."
        ],
        "correct": "A",
        "image": "../../../Assets/img/I4317.jpg"
    },
    {
        "text": "Si estaciona un turismo con un remolque ligero en una pendiente sensible, debe...",
        "options": [
            "accionar el freno de mano, únicamente.",
            "colocar calzos o apoyar las ruedas directrices en el bordillo.",
            "calzar el vehículo con cualquier elemento que sirva para ello."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T514419.jpg"
    },
    {
        "text": "Para reducir las emisiones contaminantes en los coches con motor de gasolina es recomendable iniciar la marcha...",
        "options": [
            "inmediatamente después de arrancar el motor.",
            "esperando unos segundos una vez arrancado el motor.",
            "tras arrancar el motor acelerando a fondo."
        ],
        "correct": "A",
        "image": "../../../Assets/img/I4319.jpg"
    },
    {
        "text": "Si el reglaje del sistema de alumbrado está demasiado bajo...",
        "options": [
            "se tarda más tiempo en percibir un obstáculo en la calzada.",
            "no influye en la percepción de obstáculos en la calzada.",
            "se necesita menos tiempo para percibir un obstáculo en la calzada."
        ],
        "correct": "A",
        "image": "../../../Assets/img/I4320.jpg"
    },
    {
        "text": "Prestar ayuda en un accidente aunque el conductor no esté implicado es...",
        "options": [
            "una opción.",
            "un hecho decisivo.",
            "un deber."
        ],
        "correct": "C",
        "image": "../../../Assets/img/I4321.jpg"
    },
    {
        "text": "¿Por dónde se debe circular en un cambio de rasante de reducida visibilidad?",
        "options": [
            "Dejando completamente libre la mitad de la calzada que corresponda a los que puedan circular en sentido contrario.",
            "Por la izquierda, aunque se invada parte del centro de la calzada.",
            "Por donde más convenga a mi destino."
        ],
        "correct": "A",
        "image": "../../../Assets/img/I4322.jpg"
    },
    {
        "text": "Los vehículos que están autorizados a transportar simultáneamente personas y carga deberán...",
        "options": [
            "en ningún caso se puede transportar personas y mercancías al mismo tiempo.",
            "ir provistos de una protección adecuada a la carga que se transporte para no causar daños a los ocupantes.",
            "estar dotados de un sistema especial para los frenos."
        ],
        "correct": "B",
        "image": "../../../Assets/img/I4323.jpg"
    },
    {
        "text": "Descansar durante un viaje...",
        "options": [
            "es una forma de evitar la aparición de fatiga.",
            "únicamente es necesario para conductores profesionales.",
            "sólo es aconsejable para conductores noveles."
        ],
        "correct": "A",
        "image": "../../../Assets/img/I4324.jpg"
    },
    {
        "text": "Los vehículos para personas de movilidad reducida, ¿están obligados a circular por el arcén?",
        "options": [
            "No, pero pueden circular por el arcén cuando lo crean conveniente.",
            "Sí, en el caso de que no exista vía o parte de la misma que les esté especialmente destinada.",
            "No, dependerá de las indicaciones de los agentes y del tipo de vía."
        ],
        "correct": "B",
        "image": "../../../Assets/img/I4325.jpg"
    },
    {
        "text": "Estas señales indican la velocidad máxima...",
        "options": [
            "aconsejada en la curva.",
            "permitida en toda la vía.",
            "permitida en la curva."
        ],
        "correct": "C",
        "image": "../../../Assets/img/I4326.jpg"
    },
    {
        "text": "¿Qué vehículos deben tener concertado el Seguro Obligatorio?",
        "options": [
            "Todos los vehículos a motor excepto los ciclomotores.",
            "Todos los vehículos que circulen por las vías públicas.",
            "Los vehículos a motor y ciclomotores."
        ],
        "correct": "C",
        "image": "../../../Assets/img/I4327.jpg"
    },
    {
        "text": "¿Se considera el entorno de la vía un factor de riesgo?",
        "options": [
            "No, únicamente es un factor de riesgo la vía.",
            "Sí.",
            "Sí, pero sólo en carreteras convencionales."
        ],
        "correct": "B",
        "image": "../../../Assets/img/I4328.jpg"
    },
    {
        "text": "El tiempo de absorción del alcohol, ¿depende de la bebida ingerida?",
        "options": [
            "No, la absorción se realiza por el organismo a un ritmo constante, independientemente de la bebida.",
            "Sí, se absorbe más rápidamente el alcohol de las bebidas fermentadas.",
            "Sí, se absorbe más rápidamente el alcohol de las bebidas destiladas."
        ],
        "correct": "C",
        "image": "../../../Assets/img/I4329.jpg"
    },
    {
        "text": "En una intersección sin señales de preferencia, ¿cuándo debe ceder el paso a los ciclistas?",
        "options": [
            "Cuando entran por mi derecha.",
            "Cuando entran por mi izquierda.",
            "Nunca, porque yo tengo preferencia sobre los ciclistas."
        ],
        "correct": "A",
        "image": "../../../Assets/img/I4330.jpg"
    }
]
            
            ;

            const container = document.getElementById('test-container');
            const paginationRow1 = document.getElementById('pagination-row-1');
            const paginationRow2 = document.getElementById('pagination-row-2');

            // Generar preguntas
            questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.setAttribute('data-correct', question.correct);
                questionDiv.innerHTML = `
                    <div class="question-image">
                        <img src="${question.image}" alt="Imagen de la pregunta">
                    </div>
                    <div class="question-content">
                        <h3>${index + 1}. ${question.text}</h3>
                        <div class="options">
                            ${question.options.map((option, idx) => `
                                <div class="option" data-answer="${String.fromCharCode(65 + idx)}">
                                    <span class="option-circle">${String.fromCharCode(65 + idx)}</span>
                                    ${option}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                container.appendChild(questionDiv);
            });

            // Generar paginación
            for (let i = 0; i < questions.length; i++) {
                const button = document.createElement('button');
                button.textContent = `${i + 1}`;
                button.addEventListener('click', () => showQuestion(i));
                if (i < 15) {
                    paginationRow1.appendChild(button);
                } else {
                    paginationRow2.appendChild(button);
                }
            }

            // Mostrar la primera pregunta
            showQuestion(0);

            // Función para mostrar una pregunta específica
            function showQuestion(index) {
                document.querySelectorAll('.question').forEach((q, i) => {
                    q.style.display = i === index ? 'flex' : 'none';
                });
                document.querySelectorAll('.pagination button').forEach((btn, i) => {
                    btn.style.backgroundColor = i === index ? '#ff7aa2' : '#ffa5c3';
                });
            }

            // Evento para las opciones de respuesta
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const question = this.closest('.question');
                    const questionIndex = Array.from(container.children).indexOf(question);
                    const isCorrect = this.getAttribute('data-answer') === question.getAttribute('data-correct');
                    
                    if (question.dataset.answered) return;

                    question.dataset.answered = true;

                    question.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                        opt.style.pointerEvents = 'none';
                    });
                    
                    this.classList.add('selected', isCorrect ? 'correct' : 'incorrect');

                    if (!isCorrect) {
                        question.querySelector(`.option[data-answer="${question.getAttribute('data-correct')}"]`).classList.add('correct');
                    }

                    // Actualizar el botón de paginación
                    const paginationButton = questionIndex < 15 ? paginationRow1.children[questionIndex] : paginationRow2.children[questionIndex - 15];
                    paginationButton.classList.add(isCorrect ? 'correct' : 'incorrect');
                });
            });

            // Evento para corregir el test
            document.getElementById('correct-test').addEventListener('click', () => {
                let wrongAnswers = 0;
                document.querySelectorAll('.question').forEach((question, index) => {
                    const selected = question.querySelector('.option.selected');
                    const isCorrect = selected && selected.getAttribute('data-answer') === question.getAttribute('data-correct');
                    if (!isCorrect) {
                        wrongAnswers++;
                    }
                    // Actualizar el botón de paginación si no se ha respondido
                    if (!selected) {
                        const paginationButton = index < 15 ? paginationRow1.children[index] : paginationRow2.children[index - 15];
                        paginationButton.classList.add('incorrect');
                    }
                });
                const resultMessage = `Has fallado ${wrongAnswers} respuestas.`;

                const alert = document.getElementById('custom-alert');
                document.getElementById('alert-message').textContent = resultMessage;
                alert.style.display = 'block';
            });
        });

        function closeAlert() {
            document.getElementById('custom-alert').style.display = 'none';
        }
    </script>

    
</body>
</html>