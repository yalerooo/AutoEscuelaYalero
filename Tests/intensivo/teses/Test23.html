<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Autoescuela</title>
    <link rel="stylesheet" href="../../../Assets/style.css">
</head>
<body>

    
    <div class="container">
        <h1 style="text-align: center; color: #ffa5c3;">Test de Autoescuela</h1>
        <div id="test-container">
            <!-- Aquí se generarán dinámicamente las preguntas -->
        </div>
        <div class="pagination">
            <div class="pagination-row" id="pagination-row-1"></div>
            <div class="pagination-row" id="pagination-row-2"></div>
        </div>
        <button id="correct-test">Corregir Test</button>
    </div>

    <!-- Custom Alert HTML -->
    <div class="custom-alert" id="custom-alert">
        <h2>Resultado del Test</h2>
        <p id="alert-message">Aquí irá el mensaje del resultado.</p>
        <button onclick="closeAlert()">Cerrar</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const questions = [
    {
        "text": "Los límites de velocidad establecidos en las vías tienen como objetivo...",
        "options": [
            "garantizar la seguridad únicamente.",
            "garantizar la seguridad y la fluidez.",
            "adaptar la conducción a las nuevas tecnologías de los vehículos y el medio ambiente."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P0421.jpg"
    },
    {
        "text": "Entre la puesta y la salida del sol, ¿está permitido conducir una motocicleta que arrastra un remolque?",
        "options": [
            "Sí, si se hace a una velocidad un 10 por ciento por debajo de la genérica de la vía.",
            "Sí, como a cualquier otra hora del día.",
            "No."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P2015.jpg"
    },
    {
        "text": "¿Qué indica esta señal?",
        "options": [
            "Peligro por la proximidad de un tramo cuyo pavimento puede resultar muy deslizante a causa del hielo o la nieve.",
            "Peligro por la posible existencia de obstáculos en la vía.",
            "Peligro por la proximidad de una zona de la calzada cuyo pavimento puede resultar muy deslizante."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P1427.jpg"
    },
    {
        "text": "Si se produce un derrape en las ruedas traseras, se debe...",
        "options": [
            "frenar inmediatamente.",
            "dejar de acelerar, no frenar y girar el volante hacia el lado al que derrapan las ruedas traseras.",
            "pisar a fondo el pedal del embrague y girar el volante a derecha e izquierda."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P3004.jpg"
    },
    {
        "text": "Un turismo, ¿qué debe hacer para incorporarse a la circulación?",
        "options": [
            "Seguir siempre las indicaciones de otra persona.",
            "Señalizar la maniobra porque los demás tienen que ceder el paso.",
            "Asegurarse de que puede hacerlo sin peligro para los demás usuarios."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T503920.jpg"
    },
    {
        "text": "¿Cómo puede afectar la depresión durante la conducción?",
        "options": [
            "Recopilando demasiada información relevante, especialmente en situaciones sencillas.",
            "Creando una sensación de falsa seguridad.",
            "Aumentando las distracciones."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P2308.jpg"
    },
    {
        "text": "Ante un semáforo circular de color amarillo fijo, ¿hay que detenerse?",
        "options": [
            "No, pero sí obliga a pasar con precaución.",
            "Sí, a no ser que no pueda hacerse en condiciones de seguridad.",
            "No, porque únicamente avisa que va a cambiar a color rojo."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P1312.jpg"
    },
    {
        "text": "Escuchar la radio a través de auriculares, durante la conducción, ¿está permitido?",
        "options": [
            "Sí, cuando solamente se utilice uno.",
            "Sí, porque la radio no supone distracción del conductor.",
            "No."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P2407.jpg"
    },
    {
        "text": "¿Para qué sirve el carril de aceleración?",
        "options": [
            "Para incorporarse a la vía a una velocidad adecuada a las circunstancias de la circulación.",
            "Para incorporarse lentamente a la vía.",
            "Para alcanzar 120 Km/h antes de incorporarse a la vía."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P0222.jpg"
    },
    {
        "text": "Para hacer la respiración boca-boca a un herido, ¿qué debe hacer primero?",
        "options": [
            "Taparle la nariz.",
            "Limpiar y abrir las vías respiratorias.",
            "Colocar al herido en posición de defensa."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P3117.jpg"
    },
    {
        "text": "El agente tenía los brazos en cruz y ha bajado los brazos. ¿Qué debe hacer?",
        "options": [
            "Continuar detenido hasta que realice otro tipo de señal.",
            "Obedecer las señales o semáforos.",
            "Continuar circulando."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P1216.jpg"
    },
    {
        "text": "Los ocupantes en un turismo, ¿están obligados a llevar el cinturón de seguridad?",
        "options": [
            "Sólo los ocupantes de los asientos delanteros en vías interurbanas.",
            "Sí, todos los ocupantes y en vías fuera de poblado.",
            "Sí, en los asientos delanteros y posteriores, en todo tipo de vías."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P2816.jpg"
    },
    {
        "text": "Aunque esté prohibido el adelantamiento, un turismo podrá rebasar, incluso invadiendo el sentido contrario, a...",
        "options": [
            "cualquier autobús o camión que circule lentamente.",
            "cualquier camión.",
            "conductores de bicicletas."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P0828.jpg"
    },
    {
        "text": "¿Qué es el ABS?",
        "options": [
            "Sistema de control de seguridad.",
            "Sistema de frenado antibloqueo.",
            "Sistema de cierre centralizado."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P2716.jpg"
    },
    {
        "text": "¿Qué indica la señal?",
        "options": [
            "Precaución, túnel o tramo de escasa visibilidad.",
            "Fin de obligación de alumbrado de corto alcance.",
            "Alumbrado de corto alcance obligatorio."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P1708.jpg"
    },
    {
        "text": "La función de los sistemas de seguridad pasiva de un vehículo consiste en...",
        "options": [
            "evitar o disminuir los daños que se produzcan en caso de accidente.",
            "la misma que la de los elementos de seguridad activa.",
            "evitar que se produzca un accidente."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P2627.jpg"
    },
    {
        "text": "Los vehículos prioritarios que circulen en servicio urgente advertirán su presencia...",
        "options": [
            "solamente con la señal acústica.",
            "mediante la utilización simultánea de la señal luminosa y la señal acústica.",
            "con la utilización simultánea de la señal de emergencia y la señal acústica."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T503916.jpg"
    },
    {
        "text": "¿Es obligatorio llevar en un turismo un chaleco reflectante para el acompañante?",
        "options": [
            "No.",
            "No, el chaleco reflectante no es obligatorio para los turismos.",
            "Sí, ya que deberá ponérselo si sale del vehículo y ocupa la calzada en una vía interurbana."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P3224.jpg"
    },
    {
        "text": "La edad mínima para viajar como acompañante en una motocicleta o ciclomotor será de...",
        "options": [
            "tres años, pero siempre con asiento adicional.",
            "siempre 12 años.",
            "12 años y, excepcionalmente, siete años si la motocicleta o ciclomotor van conducidos por el padre, madre o tutor."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P1909.jpg"
    },
    {
        "text": "La fatiga, ¿provoca lentitud y falta de precisión en los movimientos?",
        "options": [
            "No, la fatiga sólo produce calambres.",
            "No.",
            "Sí, por lo cual la conducción se hace más peligrosa."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T510106_150616.jpg"
    },
    {
        "text": "¿En qué situaciones utilizará el alumbrado por el día?",
        "options": [
            "Cuando conduzca una motocicleta en cualquier tipo de vía y los vehículos que circulen por carriles habilitados en sentido contrario.",
            "Conduciendo una motocicleta o un ciclomotor sólo cuando las condiciones meteorológicas disminuyan la visibilidad.",
            "Las motocicletas y los vehículos que circulen por una vía con un carril en sentido contrario."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P1118.jpg"
    },
    {
        "text": "La parte de la vía destinada a la circulación de turismos es...",
        "options": [
            "la calzada.",
            "el arcén.",
            "la mediana."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P0109.jpg"
    },
    {
        "text": "Cuando un carril está delimitado a ambos lados por doble línea discontinua, ¿qué deben hacer los conductores?",
        "options": [
            "Seguir las indicaciones marcadas por semáforos de carril, porque la circulación puede estar regulada en uno o en otro sentido.",
            "Utilizarlo sólo para adelantar.",
            "No circular por él porque la circulación está prohibida."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P1809.jpg"
    },
    {
        "text": "La mayor parte de las víctimas mortales por accidente de circulación se producen en...",
        "options": [
            "vías urbanas.",
            "vías interurbanas.",
            "travesías."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P2110.jpg"
    },
    {
        "text": "En autopista o autovía, por sus especiales características, los adelantamientos se realizarán siempre...",
        "options": [
            "por la derecha o por el arcén.",
            "por la derecha o por la izquierda.",
            "por la izquierda."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T510105_051116.jpg"
    },
    {
        "text": "En esta motocicleta, ¿debe llevar casco?",
        "options": [
            "No, no es obligatorio si lleva abrochado el cinturón de seguridad.",
            "Sí, el casco es obligatorio pero no el cinturón de seguridad.",
            "Sí, y además es obligatorio llevar abrochado el cinturón de seguridad."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P2915.jpg"
    },
    {
        "text": "A la vista de la señal,¿se permite cambiar de dirección a la izquierda?",
        "options": [
            "No.",
            "Sí."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P1525.jpg"
    },
    {
        "text": "Las técnicas de conducción eficiente...",
        "options": [
            "son complementarias a las técnicas de conducción preventiva.",
            "son más eficaces que las técnicas de conducción preventiva.",
            "son lo mismo que las técnicas de conducción preventiva."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P3401.jpg"
    },
    {
        "text": "En una intersección donde no esté señalizada la prioridad, ¿debe ceder el paso a un tranvía?",
        "options": [
            "Sí, el tranvía tiene prioridad tanto si se aproxima por la derecha como por la izquierda.",
            "No, ya que los tranvías no tienen prioridad de paso.",
            "Sólo debe ceder el paso al tranvía si se aproxima por la derecha."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P0516.jpg"
    },
    {
        "text": "Para circular con seguridad debe haber un espacio suficiente...",
        "options": [
            "por detrás, por delante y en los laterales.",
            "por delante, únicamente.",
            "sólo a los lados."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P3307.jpg"
    }
]
            
            ;

            const container = document.getElementById('test-container');
            const paginationRow1 = document.getElementById('pagination-row-1');
            const paginationRow2 = document.getElementById('pagination-row-2');

            // Generar preguntas
            questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.setAttribute('data-correct', question.correct);
                questionDiv.innerHTML = `
                    <div class="question-image">
                        <img src="${question.image}" alt="Imagen de la pregunta">
                    </div>
                    <div class="question-content">
                        <h3>${index + 1}. ${question.text}</h3>
                        <div class="options">
                            ${question.options.map((option, idx) => `
                                <div class="option" data-answer="${String.fromCharCode(65 + idx)}">
                                    <span class="option-circle">${String.fromCharCode(65 + idx)}</span>
                                    ${option}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                container.appendChild(questionDiv);
            });

            // Generar paginación
            for (let i = 0; i < questions.length; i++) {
                const button = document.createElement('button');
                button.textContent = `${i + 1}`;
                button.addEventListener('click', () => showQuestion(i));
                if (i < 15) {
                    paginationRow1.appendChild(button);
                } else {
                    paginationRow2.appendChild(button);
                }
            }

            // Mostrar la primera pregunta
            showQuestion(0);

            // Función para mostrar una pregunta específica
            function showQuestion(index) {
                document.querySelectorAll('.question').forEach((q, i) => {
                    q.style.display = i === index ? 'flex' : 'none';
                });
                document.querySelectorAll('.pagination button').forEach((btn, i) => {
                    btn.style.backgroundColor = i === index ? '#ff7aa2' : '#ffa5c3';
                });
            }

            // Evento para las opciones de respuesta
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const question = this.closest('.question');
                    const questionIndex = Array.from(container.children).indexOf(question);
                    const isCorrect = this.getAttribute('data-answer') === question.getAttribute('data-correct');
                    
                    if (question.dataset.answered) return;

                    question.dataset.answered = true;

                    question.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                        opt.style.pointerEvents = 'none';
                    });
                    
                    this.classList.add('selected', isCorrect ? 'correct' : 'incorrect');

                    if (!isCorrect) {
                        question.querySelector(`.option[data-answer="${question.getAttribute('data-correct')}"]`).classList.add('correct');
                    }

                    // Actualizar el botón de paginación
                    const paginationButton = questionIndex < 15 ? paginationRow1.children[questionIndex] : paginationRow2.children[questionIndex - 15];
                    paginationButton.classList.add(isCorrect ? 'correct' : 'incorrect');
                });
            });

            // Evento para corregir el test
            document.getElementById('correct-test').addEventListener('click', () => {
                let wrongAnswers = 0;
                document.querySelectorAll('.question').forEach((question, index) => {
                    const selected = question.querySelector('.option.selected');
                    const isCorrect = selected && selected.getAttribute('data-answer') === question.getAttribute('data-correct');
                    if (!isCorrect) {
                        wrongAnswers++;
                    }
                    // Actualizar el botón de paginación si no se ha respondido
                    if (!selected) {
                        const paginationButton = index < 15 ? paginationRow1.children[index] : paginationRow2.children[index - 15];
                        paginationButton.classList.add('incorrect');
                    }
                });
                const resultMessage = `Has fallado ${wrongAnswers} respuestas.`;

                const alert = document.getElementById('custom-alert');
                document.getElementById('alert-message').textContent = resultMessage;
                alert.style.display = 'block';
            });
        });

        function closeAlert() {
            document.getElementById('custom-alert').style.display = 'none';
        }
    </script>

    
</body>
</html>