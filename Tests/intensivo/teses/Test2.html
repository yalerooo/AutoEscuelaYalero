<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Autoescuela</title>
    <link rel="stylesheet" href="../../../Assets/style.css">
</head>
<body>

    
    <div class="container">
        <h1 style="text-align: center; color: #ffa5c3;">Test de Autoescuela</h1>
        <div id="test-container">
            <!-- Aquí se generarán dinámicamente las preguntas -->
        </div>
        <div class="pagination">
            <div class="pagination-row" id="pagination-row-1"></div>
            <div class="pagination-row" id="pagination-row-2"></div>
        </div>
        <button id="correct-test">Corregir Test</button>
    </div>

    <!-- Custom Alert HTML -->
    <div class="custom-alert" id="custom-alert">
        <h2>Resultado del Test</h2>
        <p id="alert-message">Aquí irá el mensaje del resultado.</p>
        <button onclick="closeAlert()">Cerrar</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const questions = [
    {
        "text": "Esta señal advierte del peligro que puede existir en esta zona debido a que frecuentemente...",
        "options": [
            "El firme es deslizante por nieve o lluvia.",
            "La visibilidad es reducida.",
            "Llueve abundantemente."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P1428.jpg"
    },
    {
        "text": "Fumar, mientras conduce, puede provocar...",
        "options": [
            "somnolencia.",
            "distracciones y problemas de visión a causa del humo.",
            "un aumento de la capacidad de atención."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P2322.jpg"
    },
    {
        "text": "¿Qué vehículos pueden utilizar un carril adicional circunstancial?",
        "options": [
            "Todos los vehículos autorizados a circular por la calzada de esa vía",
            "Todos los vehículos de motor, excepto los camiones cuya MMA supere los 3.500kg.",
            "Sólo podrán utilizar el carril adicional los turismos sin remolque y las motocicletas, estando prohibido para cualquier otro tipo de vehículo."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P0314.jpg"
    },
    {
        "text": "Una de las técnicas de visión en la conducción preventiva consiste en...",
        "options": [
            "mirar a lo lejos, a los lados y por los retrovisores.",
            "instalar espejos panorámicos.",
            "acostumbrarse a los deslumbramientos."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P3305.jpg"
    },
    {
        "text": "En los estrechamientos en tramos de gran pendiente, si no hay señalización expresa al efecto, tendrá la preferencia de paso el vehículo que circule en sentido...",
        "options": [
            "descendente, salvo si pudiera llegar antes a un apartadero.",
            "ascendente, salvo si pudiera llegar antes a un apartadero.",
            "ascendente, en todo caso."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P0604.jpg"
    },
    {
        "text": "Cuando la calzada está helada, la distancia de frenado puede aumentar hasta...",
        "options": [
            "cinco veces.",
            "diez veces.",
            "el doble."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P3022.jpg"
    },
    {
        "text": "Al dar marcha atrás para estacionar, ¿se puede invadir un cruce de vías?",
        "options": [
            "Sí, siempre que no recorra más de 15 metros.",
            "Sí.",
            "No."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P0929.jpg"
    },
    {
        "text": "El estrés hace que el conductor...",
        "options": [
            "sea más hostil con los demás usuarios.",
            "respete más la señalización.",
            "asuma menos riesgos."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P2307.jpg"
    },
    {
        "text": "Esta señal indica...",
        "options": [
            "el principio de una autovía.",
            "el final de una autovía.",
            "que se circula por un carril que conduce a una autovía."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P1624.jpg"
    },
    {
        "text": "En la disposición más generalizada en los mandos de una motocicleta, el acelerador se acciona con...",
        "options": [
            "la mano izquierda.",
            "la mano derecha.",
            "el pie derecho."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P2608.jpg"
    },
    {
        "text": "En un vehículo de menos de 5 metros de longitud, destinado al transporte de mercancías, ¿cuánto puede sobresalir una carga de longitud indivisible por su parte delantera?",
        "options": [
            "No puede sobresalir nada.",
            "Un tercio de la longitud del vehículo.",
            "Un 15 por 100 de la longitud del vehículo."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P1915.jpg"
    },
    {
        "text": "Es necesario cambiar los neumáticos del vehículo...",
        "options": [
            "al menos cada 5 años, aunque no estén gastados.",
            "sólo si presentan desgastes irregulares, cortes, grietas o deformaciones.",
            "sólo si la profundidad del dibujo es inferior a 1,6 milímetros."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P2713.jpg"
    },
    {
        "text": "Si circulamos por una vía donde hay una línea longitudinal continua adosada a otra discontinua...",
        "options": [
            "debemos tener en cuenta solamente la línea más cercana al carril por el que circulamos.",
            "nos indica que es un carril reversible.",
            "no se puede atravesar en ningún caso."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P1806.jpg"
    },
    {
        "text": "¿Es aconsejable quitar el casco de protección al pasajero de una motocicleta que ha sufrido un accidente?",
        "options": [
            "Sí, siempre que el herido esté consciente.",
            "No, salvo que sea necesario y se conozca la técnica.",
            "Sí, lo antes posible para evitar asfixias."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P3126.jpg"
    },
    {
        "text": "Si circula por un carril de aceleración, ¿debe ceder el paso a los vehículos que circulan por la vía a la que pretende incorporarse?",
        "options": [
            "No, si me incorporo por la derecha.",
            "Sí.",
            "No, porque tengo prioridad."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P0223.jpg"
    },
    {
        "text": "¿Pueden realizarle una prueba para detectar el consumo de drogas en un control de tráfico?",
        "options": [
            "No, si no muestra signos de haber consumido drogas.",
            "No, porque no existen pruebas para detectar el consumo de drogas.",
            "Sí, en las mismas condiciones que en las pruebas de detección de la alcoholemia."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P2520.jpg"
    },
    {
        "text": "Al averiarse el vehículo que conduce dentro de un túnel debe...",
        "options": [
            "esperar dentro del túnel y no abandonar el vehículo en ningún caso.",
            "solicitar el auxilio de otros conductores llegando a ordenar su detención si es preciso.",
            "abandonar el vehículo dentro del túnel y dirigirse al refugio o salida más próximos."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P1028.jpg"
    },
    {
        "text": "El automóvil es un vehículo de motor que sirve normalmente...",
        "options": [
            "para la realización de trabajos agrícolas.",
            "para transportar personas o cosas o ambas a la vez, o para la tracción de otros vehículos con ese fin.",
            "para realizar obras o determinados servicios."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P0102.jpg"
    },
    {
        "text": "¿Qué indica esta señal?",
        "options": [
            "Una vía cortada al tráfico.",
            "Paso a nivel sin barreras.",
            "Paso a nivel con barreras."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P1412.jpg"
    },
    {
        "text": "Las ruedas directrices de un turismo son...",
        "options": [
            "Las ruedas delanteras.",
            "Las ruedas posteriores.",
            "Las ruedas que reciben la fuerza del motor."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P3218.jpg"
    },
    {
        "text": "Al aproximarse a un paso a nivel o a un puente móvil debe...",
        "options": [
            "circular a la velocidad máxima para pasar lo antes posible.",
            "detenerse en todo caso.",
            "extremar la precaución y circular a una velocidad moderada."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P0608.jpg"
    },
    {
        "text": "Los accidentes debidos a distracciones suceden más...",
        "options": [
            "en los meses de invierno.",
            "durante el día y los fines de semana.",
            "durante la tarde."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P2316.jpg"
    },
    {
        "text": "En un túnel con más de un carril en el sentido de la marcha, ¿está permitido adelantar?",
        "options": [
            "No, en los túneles no está permitido adelantar.",
            "Sí.",
            "Sí, pero sólo a camiones y autobuses."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P0827.jpg"
    },
    {
        "text": "¿Es correcto el uso frecuente del freno de mano cuando se circula?",
        "options": [
            "Sí, se debe utilizar en las curvas cerradas.",
            "No, sólo se debe utilizar en los casos de inmovilización del vehículo.",
            "Sí, siempre que el vehículo disponga de ABS."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T510128_050216.jpg"
    },
    {
        "text": "En un tramo de vía con la señal \"túnel\", ¿está permitido hacer un cambio de sentido?",
        "options": [
            "No.",
            "Sí."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P0916.jpg"
    },
    {
        "text": "¿Qué infracciones de los peatones suelen ser una causa de atropello?",
        "options": [
            "Cruzar lentamente.",
            "No utilizar los pasos de peatones.",
            "Cruzar con el semáforo en amarillo intermitente."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P2121.jpg"
    },
    {
        "text": "¿Qué indica la señal?",
        "options": [
            "Un paso a nivel con barreras.",
            "Un cruce donde tienen preferencia los que entran por la derecha.",
            "Una intersección con cuatro o más vías."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P1405.jpg"
    },
    {
        "text": "¿Qué debe tener en cuenta si conduce una motocicleta llevando a un pasajero?",
        "options": [
            "Que la distancia de detención será menor porque la motocicleta pesa más.",
            "Que debido al aumento de peso la distancia de frenado será mayor.",
            "Que es más fácil que se bloqueen las ruedas al frenar."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P3326.jpg"
    },
    {
        "text": "Dentro de poblado, en vías de un único carril por sentido de circulación, como norma general, ¿cuál es la velocidad máxima genérica?",
        "options": [
            "30 km/h.",
            "80 km/h.",
            "50 km/h."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T510106_050216.jpg"
    },
    {
        "text": "¿Cuáles son los daños que cubre el seguro obligatorio al causante de un accidente?",
        "options": [
            "Los daños del vehículo del causante.",
            "Los daños del otro vehículo.",
            "Los daños de los dos vehículos."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P2030.jpg"
    }
]
            
            ;

            const container = document.getElementById('test-container');
            const paginationRow1 = document.getElementById('pagination-row-1');
            const paginationRow2 = document.getElementById('pagination-row-2');

            // Generar preguntas
            questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.setAttribute('data-correct', question.correct);
                questionDiv.innerHTML = `
                    <div class="question-image">
                        <img src="${question.image}" alt="Imagen de la pregunta">
                    </div>
                    <div class="question-content">
                        <h3>${index + 1}. ${question.text}</h3>
                        <div class="options">
                            ${question.options.map((option, idx) => `
                                <div class="option" data-answer="${String.fromCharCode(65 + idx)}">
                                    <span class="option-circle">${String.fromCharCode(65 + idx)}</span>
                                    ${option}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                container.appendChild(questionDiv);
            });

            // Generar paginación
            for (let i = 0; i < questions.length; i++) {
                const button = document.createElement('button');
                button.textContent = `${i + 1}`;
                button.addEventListener('click', () => showQuestion(i));
                if (i < 15) {
                    paginationRow1.appendChild(button);
                } else {
                    paginationRow2.appendChild(button);
                }
            }

            // Mostrar la primera pregunta
            showQuestion(0);

            // Función para mostrar una pregunta específica
            function showQuestion(index) {
                document.querySelectorAll('.question').forEach((q, i) => {
                    q.style.display = i === index ? 'flex' : 'none';
                });
                document.querySelectorAll('.pagination button').forEach((btn, i) => {
                    btn.style.backgroundColor = i === index ? '#ff7aa2' : '#ffa5c3';
                });
            }

            // Evento para las opciones de respuesta
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const question = this.closest('.question');
                    const questionIndex = Array.from(container.children).indexOf(question);
                    const isCorrect = this.getAttribute('data-answer') === question.getAttribute('data-correct');
                    
                    if (question.dataset.answered) return;

                    question.dataset.answered = true;

                    question.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                        opt.style.pointerEvents = 'none';
                    });
                    
                    this.classList.add('selected', isCorrect ? 'correct' : 'incorrect');

                    if (!isCorrect) {
                        question.querySelector(`.option[data-answer="${question.getAttribute('data-correct')}"]`).classList.add('correct');
                    }

                    // Actualizar el botón de paginación
                    const paginationButton = questionIndex < 15 ? paginationRow1.children[questionIndex] : paginationRow2.children[questionIndex - 15];
                    paginationButton.classList.add(isCorrect ? 'correct' : 'incorrect');
                });
            });

            // Evento para corregir el test
            document.getElementById('correct-test').addEventListener('click', () => {
                let wrongAnswers = 0;
                document.querySelectorAll('.question').forEach((question, index) => {
                    const selected = question.querySelector('.option.selected');
                    const isCorrect = selected && selected.getAttribute('data-answer') === question.getAttribute('data-correct');
                    if (!isCorrect) {
                        wrongAnswers++;
                    }
                    // Actualizar el botón de paginación si no se ha respondido
                    if (!selected) {
                        const paginationButton = index < 15 ? paginationRow1.children[index] : paginationRow2.children[index - 15];
                        paginationButton.classList.add('incorrect');
                    }
                });
                const resultMessage = `Has fallado ${wrongAnswers} respuestas.`;

                const alert = document.getElementById('custom-alert');
                document.getElementById('alert-message').textContent = resultMessage;
                alert.style.display = 'block';
            });
        });

        function closeAlert() {
            document.getElementById('custom-alert').style.display = 'none';
        }
    </script>

    
</body>
</html>