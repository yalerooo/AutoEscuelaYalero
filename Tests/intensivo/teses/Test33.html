<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Autoescuela</title>
    <link rel="stylesheet" href="../../../Assets/style.css">
</head>
<body>

    
    <div class="container">
        <h1 style="text-align: center; color: #ffa5c3;">Test de Autoescuela</h1>
        <div id="test-container">
            <!-- Aquí se generarán dinámicamente las preguntas -->
        </div>
        <div class="pagination">
            <div class="pagination-row" id="pagination-row-1"></div>
            <div class="pagination-row" id="pagination-row-2"></div>
        </div>
        <button id="correct-test">Corregir Test</button>
    </div>

    <!-- Custom Alert HTML -->
    <div class="custom-alert" id="custom-alert">
        <h2>Resultado del Test</h2>
        <p id="alert-message">Aquí irá el mensaje del resultado.</p>
        <button onclick="closeAlert()">Cerrar</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const questions = [
    {
        "text": "¿Qué indica esta señal?",
        "options": [
            "Entrada prohibida a todos los vehículos, salvo ciclomotores.",
            "Calle cortada.",
            "Entrada prohibida a toda clase de vehículos."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P1507.jpg"
    },
    {
        "text": "Se estima que de cada 100 siniestros, los debidos al factor humano son...",
        "options": [
            "entre 4 y 13.",
            "entre 10 y 35.",
            "entre 70 y 90."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P2113.jpg"
    },
    {
        "text": "Se considera que una vía está insuficientemente iluminada cuando...",
        "options": [
            "no pueda distinguir la placa de matrícula de otro vehículo a 50 metros.",
            "la vía no permita ver con claridad.",
            "con vista normal no se puede leer una placa de matrícula a 10 metros o distinguir un vehículo pintado de oscuro a 50 metros."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P1102.jpg"
    },
    {
        "text": "El conductor de un vehículo está obligado a mostrar a los agentes de la autoridad que se lo soliciten...",
        "options": [
            "únicamente el permiso de circulación.",
            "el permiso de circulación, la tarjeta de inspección técnica y el seguro obligatorio.",
            "solamente la tarjeta de inspección técnica."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P2001.jpg"
    },
    {
        "text": "Cuando aumente la velocidad, debe...",
        "options": [
            "mirar a lo lejos una distancia mayor.",
            "mirar hacia atrás con menor frecuencia.",
            "aumentar la visión por los laterales."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P0425.jpg"
    },
    {
        "text": "Si conduce una motocicleta, ¿es obligatorio llevar puesto un chaleco reflectante?",
        "options": [
            "Sí, para utilizarlo en caso de avería en una vía interurbana.",
            "No, no es obligatorio pero es recomendable.",
            "Sí, porque en caso de lluvia es obligatorio llevarlo puesto."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P3330.jpg"
    },
    {
        "text": "Los conductores de vehículos obligados a circular por el arcén, como norma general, ¿tienen prohibido adelantar a otro si la duración de marcha en paralelo supera los 15 segundos o 200 metros?",
        "options": [
            "Los vehículos obligados a circular por el arcén tienen prohibido adelantar a otro usuario.",
            "Sí, excepto las bicicletas.",
            "No."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T510123_250617.jpg"
    },
    {
        "text": "El uso del teléfono móvil mientras se conduce, ¿cuándo está permitido?",
        "options": [
            "Sólo cuando se disponga de un dispositivo de manos libres.",
            "Siempre.",
            "Nunca, porque puede producir distracciones."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P2408.jpg"
    },
    {
        "text": "En un turismo, ¿pueden viajar más ocupantes que los correspondientes a las plazas autorizadas?",
        "options": [
            "No.",
            "Sí, siempre que no supere la masa máxima autorizada del vehículo.",
            "Sí, siempre que no moleste la posición del conductor y no quite visibilidad por la ventanilla superior."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P1901.jpg"
    },
    {
        "text": "Retrovisor es el dispositivo que tiene por finalidad...",
        "options": [
            "permitir una visibilidad clara hacia atrás y hacia los lados del vehículo.",
            "permitir una visibilidad clara solo hacia atrás del vehículo.",
            "dotar al vehículo de menor resistencia al viento."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T513324.jpg"
    },
    {
        "text": "Esta señal indica peligro ante la proximidad...",
        "options": [
            "de un puente móvil.",
            "de un resalto o badén en el pavimento.",
            "de un muelle."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P1410.jpg"
    },
    {
        "text": "¿Qué factores pueden hacer que aumente la distancia de reacción?",
        "options": [
            "El mal estado del conductor.",
            "El mal estado de los amortiguadores.",
            "El mal estado de la calzada."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P2204.jpg"
    },
    {
        "text": "Detiene su vehículo al ver a un agente que tiene el brazo extendido horizontalmente, puede reanudar la marcha cuando el agente...",
        "options": [
            "emita unos toques de silbato cortos y frecuentes.",
            "baje el brazo.",
            "lo indique con otra señal."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P1217.jpg"
    },
    {
        "text": "¿Cómo debe conducir con nieve?",
        "options": [
            "Con las luces de emergencia encendidas.",
            "Frenando y acelerando con suavidad.",
            "Por el arcén."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P3017.jpg"
    },
    {
        "text": "Quiere girar a la derecha. ¿Cómo debe avisar a los demás conductores?",
        "options": [
            "Con el brazo o con el claxon.",
            "Con las luces o con el claxon.",
            "Con los intermitentes o con el brazo."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P0707.jpg"
    },
    {
        "text": "En las personas que toman drogas de abuso y conducen, la probabilidad de sufrir un accidente es...",
        "options": [
            "mayor.",
            "menor.",
            "la misma."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P2516.jpg"
    },
    {
        "text": "Si va a realizar un nuevo adelantamiento, ¿está permitido seguir circulando por el carril izquierdo?",
        "options": [
            "Sí, cuando no obstaculiza a los vehículos que circulen más rápido por detrás.",
            "Sí, si circula a la máxima velocidad permitida en la vía.",
            "No, tiene que volver obligatoriamente a la derecha."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P0207.jpg"
    },
    {
        "text": "¿Pueden algunas motocicletas llevar sistemas de estabilidad de frenado o airbag?",
        "options": [
            "No, estos sistemas solo están disponibles para los turismos.",
            "No, está prohibido.",
            "Sí, para evitar accidentes o reducir la gravedad de las lesiones."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P2928.jpg"
    },
    {
        "text": "Esta señal indica...",
        "options": [
            "el lugar reservado para parada de autobuses.",
            "un carril reservado a la circulación de autobuses y taxis.",
            "un carril reservado exclusivamente a la circulación de autobuses."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P1716.jpg"
    },
    {
        "text": "La presión de inflado del neumático...",
        "options": [
            "debe comprobarse, como mínimo, dos veces al año.",
            "debe comprobarse cada tres meses.",
            "debe comprobarse con frecuencia, y siempre antes de iniciar un viaje largo."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P2705.jpg"
    },
    {
        "text": "La flecha verde está iluminada. Si quiere girar a la derecha, ¿tiene preferencia de paso?",
        "options": [
            "Sí, porque la flecha verde me obliga a girar.",
            "No, porque la flecha verde me permite pasar pero debo ceder el paso al vehículo que se aproxima.",
            "No, porque la luz roja me prohíbe girar."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P1317.jpg"
    },
    {
        "text": "Un cambio de rasante es:",
        "options": [
            "Un tramo de vía donde no se ve el ancho total de la calzada.",
            "Un lugar en el que se encuentran dos tramos de vía de distinta inclinación.",
            "Un tramo de vía donde hay un cambio de dirección."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P0110.jpg"
    },
    {
        "text": "Los ciclistas tienen prioridad de paso respecto a los vehículos de motor...",
        "options": [
            "cuando circulen por un carril bici debidamente señalizado.",
            "únicamente en los pasos para ciclistas.",
            "siempre que circulen en grupo."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P0529.jpg"
    },
    {
        "text": "En general, ¿en qué tipo de vías suelen producirse más accidentes por fatiga o somnolencia?",
        "options": [
            "En autopistas y autovías.",
            "En carreteras con trazado sinuoso.",
            "En vías urbanas."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P2221.jpg"
    },
    {
        "text": "Al cambiar el sentido de la marcha, ¿qué debe tener en cuenta?",
        "options": [
            "Que no ponga en peligro ni obstaculice a otros usuarios.",
            "Que siempre debe existir un lugar acondicionado en la vía para realizar la maniobra.",
            "Que debe dejar una distancia de más de 100 metros con el vehículo que circula delante."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P0909.jpg"
    },
    {
        "text": "Antes de la inmovilización completa del vehículo, está prohibido...",
        "options": [
            "encender las luces de emergencia.",
            "desabrocharse el cinturón de seguridad, cuando se está estacionando.",
            "abrir las puertas."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P1001.jpg"
    },
    {
        "text": "Una línea blanca continua sobre la calzada, sensiblemente más ancha que en el caso general...",
        "options": [
            "indica la existencia de un carril especial.",
            "indica el borde de la calzada.",
            "sirve para delimitar, únicamente, los carriles bus."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P1808.jpg"
    },
    {
        "text": "Un vehículo circula con poca presión de aire en las ruedas. ¿Cuánto carburante consumirá?",
        "options": [
            "Igual que con la presión normal.",
            "Menos que con la presión normal.",
            "Más que con la presión normal."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P3416.jpg"
    },
    {
        "text": "Esta señal indica...",
        "options": [
            "una prohibición.",
            "un peligro.",
            "una obligación."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P1401.jpg"
    },
    {
        "text": "Utilizar pinzas para retener el cinturón de seguridad...",
        "options": [
            "es conveniente, porque reduce la presión del cinturón sobre el pecho.",
            "es necesario, como complemento del airbag, en los vehículos dotados del mismo.",
            "es peligroso, porque reduce la eficacia del cinturón."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P2811.jpg"
    }
]
            
            ;

            const container = document.getElementById('test-container');
            const paginationRow1 = document.getElementById('pagination-row-1');
            const paginationRow2 = document.getElementById('pagination-row-2');

            // Generar preguntas
            questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.setAttribute('data-correct', question.correct);
                questionDiv.innerHTML = `
                    <div class="question-image">
                        <img src="${question.image}" alt="Imagen de la pregunta">
                    </div>
                    <div class="question-content">
                        <h3>${index + 1}. ${question.text}</h3>
                        <div class="options">
                            ${question.options.map((option, idx) => `
                                <div class="option" data-answer="${String.fromCharCode(65 + idx)}">
                                    <span class="option-circle">${String.fromCharCode(65 + idx)}</span>
                                    ${option}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                container.appendChild(questionDiv);
            });

            // Generar paginación
            for (let i = 0; i < questions.length; i++) {
                const button = document.createElement('button');
                button.textContent = `${i + 1}`;
                button.addEventListener('click', () => showQuestion(i));
                if (i < 15) {
                    paginationRow1.appendChild(button);
                } else {
                    paginationRow2.appendChild(button);
                }
            }

            // Mostrar la primera pregunta
            showQuestion(0);

            // Función para mostrar una pregunta específica
            function showQuestion(index) {
                document.querySelectorAll('.question').forEach((q, i) => {
                    q.style.display = i === index ? 'flex' : 'none';
                });
                document.querySelectorAll('.pagination button').forEach((btn, i) => {
                    btn.style.backgroundColor = i === index ? '#ff7aa2' : '#ffa5c3';
                });
            }

            // Evento para las opciones de respuesta
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const question = this.closest('.question');
                    const questionIndex = Array.from(container.children).indexOf(question);
                    const isCorrect = this.getAttribute('data-answer') === question.getAttribute('data-correct');
                    
                    if (question.dataset.answered) return;

                    question.dataset.answered = true;

                    question.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                        opt.style.pointerEvents = 'none';
                    });
                    
                    this.classList.add('selected', isCorrect ? 'correct' : 'incorrect');

                    if (!isCorrect) {
                        question.querySelector(`.option[data-answer="${question.getAttribute('data-correct')}"]`).classList.add('correct');
                    }

                    // Actualizar el botón de paginación
                    const paginationButton = questionIndex < 15 ? paginationRow1.children[questionIndex] : paginationRow2.children[questionIndex - 15];
                    paginationButton.classList.add(isCorrect ? 'correct' : 'incorrect');
                });
            });

            // Evento para corregir el test
            document.getElementById('correct-test').addEventListener('click', () => {
                let wrongAnswers = 0;
                document.querySelectorAll('.question').forEach((question, index) => {
                    const selected = question.querySelector('.option.selected');
                    const isCorrect = selected && selected.getAttribute('data-answer') === question.getAttribute('data-correct');
                    if (!isCorrect) {
                        wrongAnswers++;
                    }
                    // Actualizar el botón de paginación si no se ha respondido
                    if (!selected) {
                        const paginationButton = index < 15 ? paginationRow1.children[index] : paginationRow2.children[index - 15];
                        paginationButton.classList.add('incorrect');
                    }
                });
                const resultMessage = `Has fallado ${wrongAnswers} respuestas.`;

                const alert = document.getElementById('custom-alert');
                document.getElementById('alert-message').textContent = resultMessage;
                alert.style.display = 'block';
            });
        });

        function closeAlert() {
            document.getElementById('custom-alert').style.display = 'none';
        }
    </script>

    
</body>
</html>