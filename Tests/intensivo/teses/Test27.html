<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Autoescuela</title>
    <link rel="stylesheet" href="../../../Assets/style.css">
</head>
<body>

    
    <div class="container">
        <h1 style="text-align: center; color: #ffa5c3;">Test de Autoescuela</h1>
        <div id="test-container">
            <!-- Aquí se generarán dinámicamente las preguntas -->
        </div>
        <div class="pagination">
            <div class="pagination-row" id="pagination-row-1"></div>
            <div class="pagination-row" id="pagination-row-2"></div>
        </div>
        <button id="correct-test">Corregir Test</button>
    </div>

    <!-- Custom Alert HTML -->
    <div class="custom-alert" id="custom-alert">
        <h2>Resultado del Test</h2>
        <p id="alert-message">Aquí irá el mensaje del resultado.</p>
        <button onclick="closeAlert()">Cerrar</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const questions = [
    {
        "text": "Si advierte que un vehículo va a adelantarle, deberá...",
        "options": [
            "Disminuir la velocidad para facilitarle la maniobra.",
            "Encender el indicador de dirección derecho, para indicarle que puede adelantar.",
            "Arrimarse al borde derecho de la calzada."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P0816.jpg"
    },
    {
        "text": "Para conducir con hielo en la calzada de una forma preventiva debe...",
        "options": [
            "tener especial cuidado durante el día.",
            "disminuir la velocidad y utilizar marchas cortas.",
            "disminuir la velocidad y utilizar marchas largas."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P3311.jpg"
    },
    {
        "text": "Esta señal indica que empieza...",
        "options": [
            "una carretera con un paso elevado.",
            "una autovía.",
            "una autopista."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P1623.jpg"
    },
    {
        "text": "Al fumar no se debe arrojar el cigarro por la ventanilla porque...",
        "options": [
            "puede molestar a las personas que no fuman.",
            "está prohibido y puede provocar un incendio.",
            "en ese momento el conductor maneja el volante con una sola mano."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T501625.jpg"
    },
    {
        "text": "Las órdenes de los agentes de tráfico...",
        "options": [
            "solamente hay que cumplirlas cuando exista una situación de peligro.",
            "hay que cumplirlas siempre.",
            "sólo deben cumplirse en las intersecciones."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P1212.jpg"
    },
    {
        "text": "¿Cuántas son las pulsaciones normales en una persona adulta?",
        "options": [
            "De 60 a 80 pulsaciones por minuto.",
            "De 100 a 110 pulsaciones por minuto.",
            "De 120 a 130 pulsaciones por minuto."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P3119.jpg"
    },
    {
        "text": "Las luces de los semáforos con la silueta de un ciclo, afectan...",
        "options": [
            "a ciclos solamente.",
            "a ciclomotores solamente.",
            "exclusivamente a ciclos y ciclomotores."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P1329.jpg"
    },
    {
        "text": "Está prohibido conducir un camión de menos de 3.500 kg de MMA con una tasa de alcohol en aire espirado superior a...",
        "options": [
            "0,25 miligramos por litro.",
            "0,15 miligramos por litro.",
            "0,30 miligramos por litro."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P2509.jpg"
    },
    {
        "text": "Un conjunto de vehículos, cuya longitud es de 7,30 metros, circula por una vía con tres carriles por sentido de la circulación, ¿qué carriles puede utilizar?",
        "options": [
            "Cualquiera de ellos indistintamente.",
            "El de la derecha y el inmediato únicamente cuando las circunstancias del tráfico o de la vía lo aconsejen.",
            "Solamente el de la derecha."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P0211.jpg"
    },
    {
        "text": "Está detenido en un semáforo y aprovecha para llamar con su móvil. Ya que no dispone de manos libres, ¿es correcto?",
        "options": [
            "No.",
            "Sí, porque no estoy en movimiento.",
            "Sí, cuando no haya otros usuarios."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P2411.jpg"
    },
    {
        "text": "¿Qué indica esta señal?",
        "options": [
            "Estacionamiento prohibido la primera quincena.",
            "Estacionamiento prohibido los días impares.",
            "Estacionamiento y parada prohibidos los días impares."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P1601.jpg"
    },
    {
        "text": "¿Pueden los agentes inmovilizar un vehículo si produce un ruido excesivo?",
        "options": [
            "Sí, cuando el ruido supere los niveles permitidos.",
            "No, sólo pueden multarle.",
            "No, ya que no supone ningún peligro para la circulación."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P3429.jpg"
    },
    {
        "text": "Al aproximarse a un paso a nivel o a un puente móvil, ¿cuándo se debe extremar la prudencia y reducir la velocidad?",
        "options": [
            "Solo cuando se encuentran abiertos.",
            "Sólo cuando se encuentran cerrados.",
            "Siempre."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P0609.jpg"
    },
    {
        "text": "¿Para qué sirve el sistema de suspensión?",
        "options": [
            "Para amortiguar las vibraciones y mantener la estabilidad del vehículo.",
            "Para no patinar.",
            "Para mover las ruedas."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P3215.jpg"
    },
    {
        "text": "¿Está permitido que los vehículos prioritarios en servicio de urgencia utilicen únicamente la señal luminosa?",
        "options": [
            "Sí, cuando no suponga un peligro para los demás usuarios.",
            "No, tienen que utilizar simultáneamente la señal luminosa y acústica.",
            "Sí, cuando circulen por vía urbana."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P0620.jpg"
    },
    {
        "text": "¿Cuándo está bien colocado en el asiento para conducir?",
        "options": [
            "Cuando llevo las piernas dobladas y el cuerpo hacia adelante.",
            "Cuando llevo las piernas un poco dobladas y el cuerpo recto.",
            "Cuando llevo las piernas rectas y el cuerpo hacia atrás."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P2602.jpg"
    },
    {
        "text": "¿Qué alumbrado debe utilizar si circula antes de la salida del sol, pero con buena visibilidad?",
        "options": [
            "El de posición y el de corto alcance.",
            "No es necesario que utilice ningún alumbrado.",
            "Únicamente, el alumbrado de posición."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P1104.jpg"
    },
    {
        "text": "El aquaplaning produce...",
        "options": [
            "una pérdida de visibilidad en caso de lluvia.",
            "un aumento de adherencia en caso de lluvia.",
            "una pérdida de adherencia en caso de lluvia."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T500916.jpg"
    },
    {
        "text": "Esta señal indica...",
        "options": [
            "la existencia de una vía para peatones y ciclos segregada del tráfico motorizado.",
            "la intersección con una vía ciclista.",
            "que el acceso está prohibido a ciclos."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P1706.jpg"
    },
    {
        "text": "En general, el sueño aparece con mayor frecuencia...",
        "options": [
            "en las primeras horas de la mañana y al final de la tarde.",
            "durante la madrugada y en las primeras horas de la tarde.",
            "durante las horas centrales de la mañana y en las primeras horas de la tarde."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P2220.jpg"
    },
    {
        "text": "Si en vía interurbana un ciclomotor de dos ruedas quiere girar a la izquierda y no hay carril acondicionado para ello:",
        "options": [
            "No puede realizar el giro.",
            "Debe situarse a la derecha, e iniciarlo siempre desde dentro de la calzada.",
            "Debe situarse a la derecha, e iniciarlo fuera de la calzada siempre que sea posible."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P0906.jpg"
    },
    {
        "text": "Cuando se padece una alergia respiratoria y se tiene una crisis de estornudos...",
        "options": [
            "el conductor mantiene la misma concentración en el tráfico.",
            "la capacidad del conductor para mantener la concentración en el tráfico disminuye.",
            "la capacidad de concentración del conductor aumenta."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P2305.jpg"
    },
    {
        "text": "Estas marcas viales azules indican...",
        "options": [
            "la zona en que se permite estacionar, al igual que las marcas blancas.",
            "que en ciertos periodos del día, la duración del estacionamiento está limitada.",
            "que está prohibido estacionar."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P1827.jpg"
    },
    {
        "text": "La probabilidad de sufrir un accidente de tráfico...",
        "options": [
            "sólo depende de la capacidad del conductor.",
            "puede reducirse evitando los factores de riesgo.",
            "es siempre independiente del conductor."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P2106.jpg"
    },
    {
        "text": "Un niño va sujeto con un sistema de retención orientado hacia atrás. ¿Está permitido?",
        "options": [
            "Sí, pero el airbag debe estar desactivado.",
            "Sí, pero el airbag debe estar activado.",
            "No."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P1907.jpg"
    },
    {
        "text": "Cuando aumenta la velocidad...",
        "options": [
            "disminuye el tiempo de reacción.",
            "aumenta la capacidad de reacción.",
            "aumenta la distancia de reacción."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T501108.jpg"
    },
    {
        "text": "Esta señal indica la situación de...",
        "options": [
            "un extintor de incendios y un teléfono de emergencia en un apartadero.",
            "una salida de emergencia.",
            "un puesto de socorro."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P1729.jpg"
    },
    {
        "text": "¿Es conveniente darle una presión diferente a los neumáticos en invierno y en verano?",
        "options": [
            "Sí, se debe disminuir en el verano y aumentar en invierno.",
            "Sí, se debe aumentar en verano y disminuir en invierno.",
            "No."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P2704.jpg"
    },
    {
        "text": "Como norma general, las maniobras deben advertirse utilizando...",
        "options": [
            "preferentemente el brazo.",
            "preferentemente la señalización luminosa del vehículo.",
            "indistintamente el brazo o las señales luminosas."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P0705.jpg"
    },
    {
        "text": "En un carril reservado para uso exclusivo del transporte público urbano fuera del horario de servicio, ¿se puede estacionar?",
        "options": [
            "Sí, parar y estacionar.",
            "No.",
            "Sí, si conocemos perfectamente el horario de la línea de autobuses."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P1012.jpg"
    }
]
            
            ;

            const container = document.getElementById('test-container');
            const paginationRow1 = document.getElementById('pagination-row-1');
            const paginationRow2 = document.getElementById('pagination-row-2');

            // Generar preguntas
            questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.setAttribute('data-correct', question.correct);
                questionDiv.innerHTML = `
                    <div class="question-image">
                        <img src="${question.image}" alt="Imagen de la pregunta">
                    </div>
                    <div class="question-content">
                        <h3>${index + 1}. ${question.text}</h3>
                        <div class="options">
                            ${question.options.map((option, idx) => `
                                <div class="option" data-answer="${String.fromCharCode(65 + idx)}">
                                    <span class="option-circle">${String.fromCharCode(65 + idx)}</span>
                                    ${option}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                container.appendChild(questionDiv);
            });

            // Generar paginación
            for (let i = 0; i < questions.length; i++) {
                const button = document.createElement('button');
                button.textContent = `${i + 1}`;
                button.addEventListener('click', () => showQuestion(i));
                if (i < 15) {
                    paginationRow1.appendChild(button);
                } else {
                    paginationRow2.appendChild(button);
                }
            }

            // Mostrar la primera pregunta
            showQuestion(0);

            // Función para mostrar una pregunta específica
            function showQuestion(index) {
                document.querySelectorAll('.question').forEach((q, i) => {
                    q.style.display = i === index ? 'flex' : 'none';
                });
                document.querySelectorAll('.pagination button').forEach((btn, i) => {
                    btn.style.backgroundColor = i === index ? '#ff7aa2' : '#ffa5c3';
                });
            }

            // Evento para las opciones de respuesta
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const question = this.closest('.question');
                    const questionIndex = Array.from(container.children).indexOf(question);
                    const isCorrect = this.getAttribute('data-answer') === question.getAttribute('data-correct');
                    
                    if (question.dataset.answered) return;

                    question.dataset.answered = true;

                    question.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                        opt.style.pointerEvents = 'none';
                    });
                    
                    this.classList.add('selected', isCorrect ? 'correct' : 'incorrect');

                    if (!isCorrect) {
                        question.querySelector(`.option[data-answer="${question.getAttribute('data-correct')}"]`).classList.add('correct');
                    }

                    // Actualizar el botón de paginación
                    const paginationButton = questionIndex < 15 ? paginationRow1.children[questionIndex] : paginationRow2.children[questionIndex - 15];
                    paginationButton.classList.add(isCorrect ? 'correct' : 'incorrect');
                });
            });

            // Evento para corregir el test
            document.getElementById('correct-test').addEventListener('click', () => {
                let wrongAnswers = 0;
                document.querySelectorAll('.question').forEach((question, index) => {
                    const selected = question.querySelector('.option.selected');
                    const isCorrect = selected && selected.getAttribute('data-answer') === question.getAttribute('data-correct');
                    if (!isCorrect) {
                        wrongAnswers++;
                    }
                    // Actualizar el botón de paginación si no se ha respondido
                    if (!selected) {
                        const paginationButton = index < 15 ? paginationRow1.children[index] : paginationRow2.children[index - 15];
                        paginationButton.classList.add('incorrect');
                    }
                });
                const resultMessage = `Has fallado ${wrongAnswers} respuestas.`;

                const alert = document.getElementById('custom-alert');
                document.getElementById('alert-message').textContent = resultMessage;
                alert.style.display = 'block';
            });
        });

        function closeAlert() {
            document.getElementById('custom-alert').style.display = 'none';
        }
    </script>

    
</body>
</html>