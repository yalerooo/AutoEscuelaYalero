<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Autoescuela</title>
    <link rel="stylesheet" href="../../../Assets/style.css">
</head>
<body>

    
    <div class="container">
        <h1 style="text-align: center; color: #ffa5c3;">Test de Autoescuela</h1>
        <div id="test-container">
            <!-- Aquí se generarán dinámicamente las preguntas -->
        </div>
        <div class="pagination">
            <div class="pagination-row" id="pagination-row-1"></div>
            <div class="pagination-row" id="pagination-row-2"></div>
        </div>
        <button id="correct-test">Corregir Test</button>
    </div>

    <!-- Custom Alert HTML -->
    <div class="custom-alert" id="custom-alert">
        <h2>Resultado del Test</h2>
        <p id="alert-message">Aquí irá el mensaje del resultado.</p>
        <button onclick="closeAlert()">Cerrar</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const questions = [
    {
        "text": "Según los estudios ¿qué días de la semana son los que registran más accidentes de tráfico?",
        "options": [
            "Los lunes y martes.",
            "Los fines de semana.",
            "Ninguno, puesto que la accidentalidad es muy baja en cómputo semanal."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T511202.jpg"
    },
    {
        "text": "¿Está permitido adelantar a la vez a estos dos camiones?",
        "options": [
            "No, salvo que el adelantamiento se realice en autopista o autovía.",
            "No, porque son camiones.",
            "Sí, si tiene la seguridad de poder terminar el adelantamiento sin peligro."
        ],
        "correct": "C",
        "image": "../../../Assets/img/I4602.jpg"
    },
    {
        "text": "Los peatones, cuando circulen de noche en grupo, deben señalizar su posición...",
        "options": [
            "con una señal manual de STOP.",
            "con unos triángulos de preseñalización de peligro.",
            "con una luz blanca o amarilla que ilumine hacia adelante y otra roja hacia atrás."
        ],
        "correct": "C",
        "image": "../../../Assets/img/I4603.jpg"
    },
    {
        "text": "El consumo de drogas o medicamentos puede producir en el conductor...",
        "options": [
            "alteración del estado físico y mental apropiado para conducir sin peligro.",
            "una mejor apreciación de la velocidad y distancia de seguridad.",
            "disminución de la distancia de frenado."
        ],
        "correct": "A",
        "image": "../../../Assets/img/I4604.jpg"
    },
    {
        "text": "¿Qué debemos tener en cuenta a la hora de comprar un casco?",
        "options": [
            "Que esté homologado, además de su talla y el material con que esté fabricado.",
            "Únicamente que sea de color claro y resistente.",
            "La marca."
        ],
        "correct": "A",
        "image": "../../../Assets/img/I4605.jpg"
    },
    {
        "text": "¿Quién tiene preferencia en este cruce?",
        "options": [
            "El rojo.",
            "La motocicleta.",
            "El verde."
        ],
        "correct": "C",
        "image": "../../../Assets/img/I4606.jpg"
    },
    {
        "text": "Esta señal indica...",
        "options": [
            "zona prohibida para animales domésticos.",
            "peligro, paso de animales domésticos.",
            "aproximación a granja de animales."
        ],
        "correct": "B",
        "image": "../../../Assets/img/I4607.jpg"
    },
    {
        "text": "Si la detención de un vehículo es de más de 60 segundos, es importante...",
        "options": [
            "conectar la señal de emergencia.",
            "encender todas las luces.",
            "apagar el motor."
        ],
        "correct": "C",
        "image": "../../../Assets/img/I4608.jpg"
    },
    {
        "text": "La póliza de seguro, ¿qué vehículos tienen la obligación de contratarla?",
        "options": [
            "Los vehículos automóviles y los remolques cuando vayan enganchados.",
            "Todos los vehículos motor, los ciclomotores, los remolques y los semiremolques.",
            "Todos los vehículos automóviles."
        ],
        "correct": "B",
        "image": "../../../Assets/img/I4609.jpg"
    },
    {
        "text": "Los vehículos especiales...",
        "options": [
            "sólo pueden realizar actividades agrícolas.",
            "no pueden ser vehículos de motor.",
            "pueden ser autopropulsados o remolcados."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T510124_050316.jpg"
    },
    {
        "text": "En un vehículo de anchura inferior a un metro, ¿puede sobresalir la carga por delante o por detrás?",
        "options": [
            "No, en ningún caso.",
            "Sólo por detrás hasta 25 centímetros.",
            "Sí, hasta 25 centímetros, por delante y por detrás."
        ],
        "correct": "B",
        "image": "../../../Assets/img/I4611.jpg"
    },
    {
        "text": "La fatiga ocular en un conductor, ¿a qué puede deberse?",
        "options": [
            "A un aumento de la capacidad para percibir el entorno.",
            "A un aumento del campo visual.",
            "A los efectos del sueño."
        ],
        "correct": "C",
        "image": "../../../Assets/img/I4612.jpg"
    },
    {
        "text": "¿Qué enfermedades tienen mayor riesgo de accidente?",
        "options": [
            "Los trastornos neurológicos y las enfermedades mentales.",
            "Las dermatológicas.",
            "Las respiratorias."
        ],
        "correct": "A",
        "image": "../../../Assets/img/I4613.jpg"
    },
    {
        "text": "Cuando tenga que bajar del vehículo para descargar el equipaje, ¿debe apagar el motor?",
        "options": [
            "No, no es necesario si se trata de una parada breve.",
            "No, sólo debe dejar accionado el freno de mano.",
            "Sí, y además debe desconectar el sistema de arranque o contacto."
        ],
        "correct": "C",
        "image": "../../../Assets/img/I4614.jpg"
    },
    {
        "text": "¿Pueden los ocupantes de un vehículo transitar por el arcén de una autopista?",
        "options": [
            "No.",
            "No, excepto en caso de una avería.",
            "Sí."
        ],
        "correct": "A",
        "image": "../../../Assets/img/I4615.jpg"
    },
    {
        "text": "Cuando la cantidad de aire en las ruedas es muy baja, ¿qué le ocurre a la cubierta?",
        "options": [
            "Se desgasta más que con aire normal.",
            "Se desgasta igual que con aire normal.",
            "Se desgasta menos que con aire normal."
        ],
        "correct": "A",
        "image": "../../../Assets/img/I4616.jpg"
    },
    {
        "text": "Colocar en la posición de defensa a un herido en accidente de tráfico...",
        "options": [
            "se debe hacer con todos los heridos.",
            "protege al herido de la asfixia.",
            "es la postura correcta para evitar los daños en la columna cervical."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T513416.jpg"
    },
    {
        "text": "¿Podrá utilizar un carril VAO un turismo que transporta a cuatro personas con remolque?",
        "options": [
            "No.",
            "Sí.",
            "Sólo si el carril no está ocupado."
        ],
        "correct": "A",
        "image": "../../../Assets/img/I4618.jpg"
    },
    {
        "text": "Llevar una fotocopia del permiso de conducción, en lugar del original, ¿está permitido?",
        "options": [
            "No.",
            "Sí, siempre que la fotocopia esté debidamente cotejada.",
            "Sí, sólo si es a color."
        ],
        "correct": "B",
        "image": "../../../Assets/img/I4619.jpg"
    },
    {
        "text": "Como norma general, para un vehículo de transporte colectivo de viajeros, ¿cuál es la velocidad máxima permitida en vías urbanas de dos o más carriles por sentido de circulación?",
        "options": [
            "40 km/h.",
            "20 km/h.",
            "50 km/h."
        ],
        "correct": "C",
        "image": "../../../Assets/img/I4620.jpg"
    },
    {
        "text": "Para evitar los accidentes, es importante...",
        "options": [
            "llevar incorporado al vehículo un GPS.",
            "reducir la velocidad en las zonas con radares.",
            "conducir con la máxima seguridad en todo momento."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T513316.jpg"
    },
    {
        "text": "En esta glorieta, ¿quién tiene preferencia?",
        "options": [
            "El que primero llegue.",
            "El turismo.",
            "La motocicleta."
        ],
        "correct": "B",
        "image": "../../../Assets/img/I4622.jpg"
    },
    {
        "text": "El factor de riesgo que influye en la mayor parte de los accidentes, ¿cuál es?",
        "options": [
            "El factor vía y entorno.",
            "El factor vehículo.",
            "El factor humano."
        ],
        "correct": "C",
        "image": "../../../Assets/img/I4623.jpg"
    },
    {
        "text": "¿Es fácil que el dispositivo del airbag se dispare mientras realiza un estacionamiento?",
        "options": [
            "Este tipo de cuestiones dependerá de la marca del automóvil.",
            "No, puesto que los sistemas de airbag actuales son muy precisos a la hora de determinar cuándo deben hincharse.",
            "Sí, un airbag puede ponerse en funcionamiento en cualquier momento."
        ],
        "correct": "B",
        "image": "../../../Assets/img/I4624.jpg"
    },
    {
        "text": "¿Es importante cumplir con los límites inferiores de velocidad?",
        "options": [
            "Sí, pero sólo para no ser sancionado.",
            "Sí, para evitar causar accidentes.",
            "No, ya que los límites inferiores son sólo orientativos."
        ],
        "correct": "B",
        "image": "../../../Assets/img/I4625.jpg"
    },
    {
        "text": "¿Cuándo finaliza la prohibición de circular a velocidad superior a la indicada?",
        "options": [
            "Al rebasar la vertical de la próxima señal de fin de limitación de velocidad.",
            "Al llegar a la intersección.",
            "Al rebasar la intersección."
        ],
        "correct": "C",
        "image": "../../../Assets/img/I4626.jpg"
    },
    {
        "text": "Una de las infracciones de los conductores que implica más riesgo para los peatones es...",
        "options": [
            "estacionar sobre la acera, obligando al peatón a invadir la calzada.",
            "no utilizar los cinturones de seguridad.",
            "el exceso de velocidad en autopistas."
        ],
        "correct": "A",
        "image": "../../../Assets/img/I4627.jpg"
    },
    {
        "text": "¿Es necesario renovar el permiso de circulación?",
        "options": [
            "Sí, cada 4 años.",
            "Sí, cuando el vehículo cambia de titular.",
            "No, es un documento que nunca se renueva."
        ],
        "correct": "B",
        "image": "../../../Assets/img/I4628.jpg"
    },
    {
        "text": "¿En qué tipo de accidentes es más frecuente que se produzca el latigazo cervical?",
        "options": [
            "En las colisiones por alcance.",
            "Es la lesión más frecuente que se da en los accidentes en solitario.",
            "Es especialmente frecuente en los atropellos."
        ],
        "correct": "A",
        "image": "../../../Assets/img/I4629.jpg"
    },
    {
        "text": "Se entiende por vía insuficientemente iluminada aquella en la que...",
        "options": [
            "no puede leerse la matrícula a 50 metros o no se distingue un vehículo oscuro a 10 metros de distancia.",
            "no puede distinguirse un vehículo a 20 metros de distancia.",
            "no puede leerse la matrícula a 10 metros o no se distingue un vehículo oscuro a 50 metros de distancia."
        ],
        "correct": "C",
        "image": "../../../Assets/img/I4630.jpg"
    }
]
            
            ;

            const container = document.getElementById('test-container');
            const paginationRow1 = document.getElementById('pagination-row-1');
            const paginationRow2 = document.getElementById('pagination-row-2');

            // Generar preguntas
            questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.setAttribute('data-correct', question.correct);
                questionDiv.innerHTML = `
                    <div class="question-image">
                        <img src="${question.image}" alt="Imagen de la pregunta">
                    </div>
                    <div class="question-content">
                        <h3>${index + 1}. ${question.text}</h3>
                        <div class="options">
                            ${question.options.map((option, idx) => `
                                <div class="option" data-answer="${String.fromCharCode(65 + idx)}">
                                    <span class="option-circle">${String.fromCharCode(65 + idx)}</span>
                                    ${option}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                container.appendChild(questionDiv);
            });

            // Generar paginación
            for (let i = 0; i < questions.length; i++) {
                const button = document.createElement('button');
                button.textContent = `${i + 1}`;
                button.addEventListener('click', () => showQuestion(i));
                if (i < 15) {
                    paginationRow1.appendChild(button);
                } else {
                    paginationRow2.appendChild(button);
                }
            }

            // Mostrar la primera pregunta
            showQuestion(0);

            // Función para mostrar una pregunta específica
            function showQuestion(index) {
                document.querySelectorAll('.question').forEach((q, i) => {
                    q.style.display = i === index ? 'flex' : 'none';
                });
                document.querySelectorAll('.pagination button').forEach((btn, i) => {
                    btn.style.backgroundColor = i === index ? '#ff7aa2' : '#ffa5c3';
                });
            }

            // Evento para las opciones de respuesta
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const question = this.closest('.question');
                    const questionIndex = Array.from(container.children).indexOf(question);
                    const isCorrect = this.getAttribute('data-answer') === question.getAttribute('data-correct');
                    
                    if (question.dataset.answered) return;

                    question.dataset.answered = true;

                    question.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                        opt.style.pointerEvents = 'none';
                    });
                    
                    this.classList.add('selected', isCorrect ? 'correct' : 'incorrect');

                    if (!isCorrect) {
                        question.querySelector(`.option[data-answer="${question.getAttribute('data-correct')}"]`).classList.add('correct');
                    }

                    // Actualizar el botón de paginación
                    const paginationButton = questionIndex < 15 ? paginationRow1.children[questionIndex] : paginationRow2.children[questionIndex - 15];
                    paginationButton.classList.add(isCorrect ? 'correct' : 'incorrect');
                });
            });

            // Evento para corregir el test
            document.getElementById('correct-test').addEventListener('click', () => {
                let wrongAnswers = 0;
                document.querySelectorAll('.question').forEach((question, index) => {
                    const selected = question.querySelector('.option.selected');
                    const isCorrect = selected && selected.getAttribute('data-answer') === question.getAttribute('data-correct');
                    if (!isCorrect) {
                        wrongAnswers++;
                    }
                    // Actualizar el botón de paginación si no se ha respondido
                    if (!selected) {
                        const paginationButton = index < 15 ? paginationRow1.children[index] : paginationRow2.children[index - 15];
                        paginationButton.classList.add('incorrect');
                    }
                });
                const resultMessage = `Has fallado ${wrongAnswers} respuestas.`;

                const alert = document.getElementById('custom-alert');
                document.getElementById('alert-message').textContent = resultMessage;
                alert.style.display = 'block';
            });
        });

        function closeAlert() {
            document.getElementById('custom-alert').style.display = 'none';
        }
    </script>

    
</body>
</html>