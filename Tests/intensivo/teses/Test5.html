<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Autoescuela</title>
    <link rel="stylesheet" href="../../../Assets/style.css">
</head>
<body>

    
    <div class="container">
        <h1 style="text-align: center; color: #ffa5c3;">Test de Autoescuela</h1>
        <div id="test-container">
            <!-- Aquí se generarán dinámicamente las preguntas -->
        </div>
        <div class="pagination">
            <div class="pagination-row" id="pagination-row-1"></div>
            <div class="pagination-row" id="pagination-row-2"></div>
        </div>
        <button id="correct-test">Corregir Test</button>
    </div>

    <!-- Custom Alert HTML -->
    <div class="custom-alert" id="custom-alert">
        <h2>Resultado del Test</h2>
        <p id="alert-message">Aquí irá el mensaje del resultado.</p>
        <button onclick="closeAlert()">Cerrar</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const questions = [
    {
        "text": "En caso de accidente, ¿quienes tienen mayor probabilidad de morir o de sufrir lesiones?",
        "options": [
            "Los conductores de vehículos pesados.",
            "Los conductores de motocicletas, ciclomotores y bicicletas.",
            "Los conductores de turismos."
        ],
        "correct": "B",
        "image": "../../../Assets/img/I3501.jpg"
    },
    {
        "text": "¿Cuándo debe dejar 1,5 metros o más en un adelantamiento?",
        "options": [
            "Cuando adelanto a cualquier vehículo.",
            "Cuando adelanto a vehículos especiales.",
            "Cuando adelanto a vehículos de dos ruedas o de tracción animal."
        ],
        "correct": "C",
        "image": "../../../Assets/img/I3502.jpg"
    },
    {
        "text": "A la vista de la señal que realiza el agente, ¿cuándo podrá reanudar la marcha?",
        "options": [
            "Sólo cuando cambie de posición o efectúe otra señal.",
            "Cuando baje los brazos.",
            "Sólo cuando lo indique con otra señal."
        ],
        "correct": "A",
        "image": "../../../Assets/img/I3503.jpg"
    },
    {
        "text": "Los accidentes que sufren los jóvenes suelen asociarse a...",
        "options": [
            "el consumo de alcohol y drogas y la prudencia al volante.",
            "la falta de coordinación al volante.",
            "la falta de experiencia al volante y al consumo de alcohol y drogas."
        ],
        "correct": "C",
        "image": "../../../Assets/img/I3504.jpg"
    },
    {
        "text": "¿Cuándo se producen más atropellos a peatones?",
        "options": [
            "Durante la noche.",
            "En autopista.",
            "Cuando los vehículos circulan marcha atrás."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T510128_250717.jpg"
    },
    {
        "text": "En esta situación, para salir de la vía, un turismo o una motocicleta, ¿puede circular por el arcén?",
        "options": [
            "Sí, cuando la velocidad sea inferior a la mínima permitida.",
            "No, porque es peligroso y está prohibido.",
            "Si, pero llevando conectada la señal de emergencia."
        ],
        "correct": "B",
        "image": "../../../Assets/img/I3506.jpg"
    },
    {
        "text": "Se detiene en un carril esperando para realizar un cambio de sentido, ¿está permitido?",
        "options": [
            "Sí, siempre que no obstaculice a los vehículos que circulen detrás.",
            "No, debe salir siempre a la derecha.",
            "No, en ningún caso."
        ],
        "correct": "A",
        "image": "../../../Assets/img/I3507.jpg"
    },
    {
        "text": "El funcionamiento del airbag, ¿puede llegar a ser peligroso en un accidente?",
        "options": [
            "Sí, siempre.",
            "Sí, si no se lleva puesto el cinturón de seguridad.",
            "No."
        ],
        "correct": "B",
        "image": "../../../Assets/img/I3508.jpg"
    },
    {
        "text": "Cuando tomamos alcohol con otras drogas...",
        "options": [
            "se anulan los efectos negativos para conducir.",
            "sólo tiene efectos negativos en los menores.",
            "se potencian los efectos negativos sobre la capacidad para conducir."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T511828.jpg"
    },
    {
        "text": "Entre los síntomas de la alergia se encuentran...",
        "options": [
            "somnolencia y estrés.",
            "ojos irritados y dolores musculares.",
            "continuos estornudos y ojos irritados."
        ],
        "correct": "C",
        "image": "../../../Assets/img/I3510.jpg"
    },
    {
        "text": "La distribución de la carga, ¿afecta significativamente al consumo de combustible?",
        "options": [
            "Sí, por lo que hay que utilizar la baca como última opción.",
            "No afecta al consumo.",
            "Sí, por lo que hay que utilizar la baca como primera opción."
        ],
        "correct": "A",
        "image": "../../../Assets/img/I3511.jpg"
    },
    {
        "text": "Si conduce este vehículo, ¿tiene obligación de utilizar el casco?",
        "options": [
            "Solamente cuando circule por vías interurbanas.",
            "No, en ningún caso.",
            "Cuando circule tanto en vías urbanas como interurbanas."
        ],
        "correct": "C",
        "image": "../../../Assets/img/I3512.jpg"
    },
    {
        "text": "Al prestar ayuda en un accidente, ¿debe ponerse el chaleco reflectante?",
        "options": [
            "No, ya que es una situación de emergencia.",
            "Sí, antes de salir del vehículo.",
            "Sólo si el accidente ocurre en zona urbana."
        ],
        "correct": "B",
        "image": "../../../Assets/img/I3513.jpg"
    },
    {
        "text": "¿Puede parar en un carril bus?",
        "options": [
            "No.",
            "Sí, si utiliza la señal de emergencia.",
            "Sí, cuando sea por un tiempo inferior a 2 minutos."
        ],
        "correct": "A",
        "image": "../../../Assets/img/I3514.jpg"
    },
    {
        "text": "Circula en su vehículo cerca de un ciclista por una vía urbana, ¿qué debe tener en cuenta?",
        "options": [
            "Que debe adelantar muy rápido al ciclista.",
            "Que la bicicleta es un vehículo frágil y vulnerable.",
            "Que el ciclista no debe circular por la calzada."
        ],
        "correct": "B",
        "image": "../../../Assets/img/I3515.jpg"
    },
    {
        "text": "¿Cómo debe comprobar el funcionamiento de su cinturón de seguridad?",
        "options": [
            "Acelerando el vehículo bruscamente con el cinturón abrochado.",
            "No es necesario revisarlo.",
            "Revisando anclajes y cierres."
        ],
        "correct": "C",
        "image": "../../../Assets/img/I3516.jpg"
    },
    {
        "text": "¿Qué se debe hacer con el aceite usado del vehículo?",
        "options": [
            "Tirarlo en tierra.",
            "Entregarlo en un contenedor de recuperación de aceite.",
            "Tirarlo en una alcantarilla o desagüe."
        ],
        "correct": "B",
        "image": "../../../Assets/img/I3517.jpg"
    },
    {
        "text": "Un vehículo para minusválidos, ¿puede circular por el carril VAO?",
        "options": [
            "Sí.",
            "Sí, pero sólo sí lleva el número de ocupantes indicado para dicho carril.",
            "No."
        ],
        "correct": "A",
        "image": "../../../Assets/img/I3518.jpg"
    },
    {
        "text": "Conductor es...",
        "options": [
            "la persona que conduce a pie un ciclo o ciclomotor de dos ruedas.",
            "la persona que maneja el volante de un vehículo cuando circula en prácticas.",
            "la persona que maneja el mecanismo de dirección o va al mando de un vehículo."
        ],
        "correct": "C",
        "image": "../../../Assets/img/I3519.jpg"
    },
    {
        "text": "Si pretende adelantar al vehículo de la fotografía, ¿está permitido disminuir la distancia de seguridad?",
        "options": [
            "Sí, para hacer el adelantamiento más seguro.",
            "Sí, porque así tiene mejor visión del sentido contrario.",
            "No, se debe mantener siempre la distancia de seguridad."
        ],
        "correct": "C",
        "image": "../../../Assets/img/I3520.jpg"
    },
    {
        "text": "Un factor que favorece la distracción del conductor es...",
        "options": [
            "una situación de tráfico excesivamente sencilla.",
            "la alta luminosidad del ambiente.",
            "la baja luminosidad del ambiente."
        ],
        "correct": "C",
        "image": "../../../Assets/img/I3521.jpg"
    },
    {
        "text": "El vehículo blanco, ¿adelanta correctamente?",
        "options": [
            "Sí.",
            "No."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T510119_250116.jpg"
    },
    {
        "text": "Un vehículo de tres ruedas, ¿puede arrastrar un remolque?",
        "options": [
            "Sí.",
            "No."
        ],
        "correct": "A",
        "image": "../../../Assets/img/I3523.jpg"
    },
    {
        "text": "¿Qué experimenta el conductor con el efecto túnel?",
        "options": [
            "Sólo percibe el centro de la calzada y dejar de ver los laterales.",
            "Una pérdida de la sensación de velocidad.",
            "Una disminución de la fatiga."
        ],
        "correct": "A",
        "image": "../../../Assets/img/I3524.jpg"
    },
    {
        "text": "Si el sistema de navegación del GPS es portátil, ¿qué es recomendable?",
        "options": [
            "Seguir siempre las instrucciones del dispositivo frente al juicio del conductor.",
            "Intentar colocarlo cerca de un airbag.",
            "Utilizar el sistema de soporte adecuado al dispositivo."
        ],
        "correct": "C",
        "image": "../../../Assets/img/I3525.jpg"
    },
    {
        "text": "¿Pueden llevar las motocicletas la luz antiniebla delantera?",
        "options": [
            "Sí, todas las motocicletas, con o sin sidecar.",
            "Sí, pero sólo las motocicletas con sidecar.",
            "No, las motocicletas no pueden llevar luces antiniebla."
        ],
        "correct": "A",
        "image": "../../../Assets/img/I3526.jpg"
    },
    {
        "text": "¿Es obligatorio llevar un extintor como equipamiento de un automóvil que circula en servicio particular?",
        "options": [
            "No, sólo lo llevan los autobuses.",
            "Sí, todos los vehículos deben llevarlo.",
            "No, si se trata de un turismo o de una motocicleta."
        ],
        "correct": "C",
        "image": "../../../Assets/img/I3527.jpg"
    },
    {
        "text": "Una motocicleta nueva, ¿cuándo debe pasar la primera ITV?",
        "options": [
            "A los tres años de haber sido matriculada.",
            "A los dos años de haber sido matriculada.",
            "A los cuatro años de haber sido matriculada."
        ],
        "correct": "C",
        "image": "../../../Assets/img/I3528.jpg"
    },
    {
        "text": "Es recomendable que los guantes que se utilicen para conducir una motocicleta...",
        "options": [
            "sean muy gruesos.",
            "permitan un agarre firme.",
            "sean reflectantes."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T511222.jpg"
    },
    {
        "text": "La señal afecta a...",
        "options": [
            "todos los vehículos cuya masa en carga supere la indicada.",
            "los vehículos de transporte de mercancías, exclusivamente.",
            "los vehículos automóviles, exclusivamente."
        ],
        "correct": "A",
        "image": "../../../Assets/img/I3530.jpg"
    }
]
            
            ;

            const container = document.getElementById('test-container');
            const paginationRow1 = document.getElementById('pagination-row-1');
            const paginationRow2 = document.getElementById('pagination-row-2');

            // Generar preguntas
            questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.setAttribute('data-correct', question.correct);
                questionDiv.innerHTML = `
                    <div class="question-image">
                        <img src="${question.image}" alt="Imagen de la pregunta">
                    </div>
                    <div class="question-content">
                        <h3>${index + 1}. ${question.text}</h3>
                        <div class="options">
                            ${question.options.map((option, idx) => `
                                <div class="option" data-answer="${String.fromCharCode(65 + idx)}">
                                    <span class="option-circle">${String.fromCharCode(65 + idx)}</span>
                                    ${option}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                container.appendChild(questionDiv);
            });

            // Generar paginación
            for (let i = 0; i < questions.length; i++) {
                const button = document.createElement('button');
                button.textContent = `${i + 1}`;
                button.addEventListener('click', () => showQuestion(i));
                if (i < 15) {
                    paginationRow1.appendChild(button);
                } else {
                    paginationRow2.appendChild(button);
                }
            }

            // Mostrar la primera pregunta
            showQuestion(0);

            // Función para mostrar una pregunta específica
            function showQuestion(index) {
                document.querySelectorAll('.question').forEach((q, i) => {
                    q.style.display = i === index ? 'flex' : 'none';
                });
                document.querySelectorAll('.pagination button').forEach((btn, i) => {
                    btn.style.backgroundColor = i === index ? '#ff7aa2' : '#ffa5c3';
                });
            }

            // Evento para las opciones de respuesta
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const question = this.closest('.question');
                    const questionIndex = Array.from(container.children).indexOf(question);
                    const isCorrect = this.getAttribute('data-answer') === question.getAttribute('data-correct');
                    
                    if (question.dataset.answered) return;

                    question.dataset.answered = true;

                    question.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                        opt.style.pointerEvents = 'none';
                    });
                    
                    this.classList.add('selected', isCorrect ? 'correct' : 'incorrect');

                    if (!isCorrect) {
                        question.querySelector(`.option[data-answer="${question.getAttribute('data-correct')}"]`).classList.add('correct');
                    }

                    // Actualizar el botón de paginación
                    const paginationButton = questionIndex < 15 ? paginationRow1.children[questionIndex] : paginationRow2.children[questionIndex - 15];
                    paginationButton.classList.add(isCorrect ? 'correct' : 'incorrect');
                });
            });

            // Evento para corregir el test
            document.getElementById('correct-test').addEventListener('click', () => {
                let wrongAnswers = 0;
                document.querySelectorAll('.question').forEach((question, index) => {
                    const selected = question.querySelector('.option.selected');
                    const isCorrect = selected && selected.getAttribute('data-answer') === question.getAttribute('data-correct');
                    if (!isCorrect) {
                        wrongAnswers++;
                    }
                    // Actualizar el botón de paginación si no se ha respondido
                    if (!selected) {
                        const paginationButton = index < 15 ? paginationRow1.children[index] : paginationRow2.children[index - 15];
                        paginationButton.classList.add('incorrect');
                    }
                });
                const resultMessage = `Has fallado ${wrongAnswers} respuestas.`;

                const alert = document.getElementById('custom-alert');
                document.getElementById('alert-message').textContent = resultMessage;
                alert.style.display = 'block';
            });
        });

        function closeAlert() {
            document.getElementById('custom-alert').style.display = 'none';
        }
    </script>

    
</body>
</html>