<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Autoescuela</title>
    <link rel="stylesheet" href="../../../Assets/style.css">
</head>
<body>

    
    <div class="container">
        <h1 style="text-align: center; color: #ffa5c3;">Test de Autoescuela</h1>
        <div id="test-container">
            <!-- Aquí se generarán dinámicamente las preguntas -->
        </div>
        <div class="pagination">
            <div class="pagination-row" id="pagination-row-1"></div>
            <div class="pagination-row" id="pagination-row-2"></div>
        </div>
        <button id="correct-test">Corregir Test</button>
    </div>

    <!-- Custom Alert HTML -->
    <div class="custom-alert" id="custom-alert">
        <h2>Resultado del Test</h2>
        <p id="alert-message">Aquí irá el mensaje del resultado.</p>
        <button onclick="closeAlert()">Cerrar</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const questions = [
    {
        "text": "Para evitar atropellos a peatones hay que tener especial cuidado...",
        "options": [
            "en todas las maniobras.",
            "al dar marcha atrás.",
            "en las autopistas."
        ],
        "correct": "B",
        "image": "../../../Assets/img/I4901.jpg"
    },
    {
        "text": "¿Es importante no superar la velocidad máxima genérica de 50 km/h en vías urbanas de dos o más carriles por sentido de circulación?",
        "options": [
            "Sí, a partir de 50 km/h la probabilidad de que un atropello sea mortal supera el 50%.",
            "No, a partir de esa velocidad el consumo de combustible es bajo.",
            "No, una mayor velocidad aumenta la fluidez del tráfico sin mayor riesgo de accidentes."
        ],
        "correct": "A",
        "image": "../../../Assets/img/I4902.jpg"
    },
    {
        "text": "Un vehículo con esta señal indica que...",
        "options": [
            "es lento y no puede superar los 40 Km/h.",
            "transporta mercancías peligrosas.",
            "es especial y está realizando trabajos en la vía."
        ],
        "correct": "A",
        "image": "../../../Assets/img/I4903.jpg"
    },
    {
        "text": "Su vehículo se incendia y no tiene extintor. ¿Cómo debe apagarlo?",
        "options": [
            "Con tierra.",
            "Con aire.",
            "Con agua."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T510112_050116.jpg"
    },
    {
        "text": "El seguro obligatorio, ¿cubre los daños del conductor responsable del accidente?",
        "options": [
            "Sí, cubre los daños de todos los ocupantes.",
            "No.",
            "Sí, sólo cubre los daños personales."
        ],
        "correct": "B",
        "image": "../../../Assets/img/I4905.jpg"
    },
    {
        "text": "Si en un estrechamiento sin señalizar han entrado a la vez un autobús y un vehículo de tracción animal, ¿cuál de los dos vehículos tendrá preferencia de paso?",
        "options": [
            "El vehículo de tracción animal.",
            "El que tenga que dar marcha atrás una mayor distancia.",
            "El autobús."
        ],
        "correct": "A",
        "image": "../../../Assets/img/I4906.jpg"
    },
    {
        "text": "Esta señal, ¿prohíbe la entrada a los camiones?",
        "options": [
            "Sí, en cualquier caso.",
            "No.",
            "Sólo si la masa máxima del camión no supera las 2 toneladas."
        ],
        "correct": "B",
        "image": "../../../Assets/img/I4907.jpg"
    },
    {
        "text": "El exceso de velocidad en la conducción hace que la capacidad de anticipación ante una situación del tráfico sea...",
        "options": [
            "menor.",
            "mayor.",
            "la misma que a poca velocidad."
        ],
        "correct": "A",
        "image": "../../../Assets/img/I4908.jpg"
    },
    {
        "text": "En esta intersección con señal de STOP, ¿qué debe hacer?",
        "options": [
            "Detenerme, pero sólo cuando se acerque otro vehículo.",
            "Detenerme donde vea mejor.",
            "Detenerme siempre, antes de la línea transversal."
        ],
        "correct": "C",
        "image": "../../../Assets/img/I4909.jpg"
    },
    {
        "text": "Para controlar el ángulo muerto, ¿qué se puede hacer?",
        "options": [
            "Girar levemente la cabeza para completar la visión del retrovisor.",
            "Circular por el centro del carril.",
            "Mover los retrovisores hacia afuera."
        ],
        "correct": "A",
        "image": "../../../Assets/img/I4910.jpg"
    },
    {
        "text": "Como norma general, un niño de 10 años, que mida 130 cm de estatura, ¿puede viajar en los asientos delanteros?",
        "options": [
            "Sí.",
            "No."
        ],
        "correct": "B",
        "image": "../../../Assets/img/I4911.jpg"
    },
    {
        "text": "¿Está permitido estacionar en el arcén transitable de una travesía?",
        "options": [
            "No, porque en la parte transitable del arcén no se puede parar ni estacionar.",
            "No, porque una travesía no es una vía urbana.",
            "Sí."
        ],
        "correct": "C",
        "image": "../../../Assets/img/I4912.jpg"
    },
    {
        "text": "Un accidente por un fallo de los frenos...",
        "options": [
            "es imposible que suceda.",
            "puede evitarse con un correcto mantenimiento.",
            "no se puede evitar."
        ],
        "correct": "B",
        "image": "../../../Assets/img/I4913.jpg"
    },
    {
        "text": "Las motocicletas están obligadas a llevar encendida la luz de cruce...",
        "options": [
            "durante todo el día por cualquier vía.",
            "sólo entre la puesta y la salida del sol.",
            "durante el día por vías interurbanas y solo entre la puesta y la salida del sol por vías urbanas."
        ],
        "correct": "A",
        "image": "../../../Assets/img/I4914.jpg"
    },
    {
        "text": "Entre los principales gastos sanitarios provocados por los accidentes de tráfico están...",
        "options": [
            "los antidepresivos.",
            "los medicamentos.",
            "los de rehabilitación y adaptaciones para las personas accidentadas."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T513002.jpg"
    },
    {
        "text": "Los navegadores GPS pueden ser de gran ayuda al conductor...",
        "options": [
            "porque disminuyen las causas de distracción al proporcionarle información importante.",
            "sólo si se presta atención a las instrucciones de voz y se mira al mapa de la pantalla del GPS.",
            "pero también pueden suponer una importante causa de distracción."
        ],
        "correct": "C",
        "image": "../../../Assets/img/I4916.jpg"
    },
    {
        "text": "Cuando la calzada está helada...",
        "options": [
            "la distancia de frenado se mantiene igual que en condiciones normales.",
            "la distancia de frenado aumenta.",
            "la distancia de frenado disminuye."
        ],
        "correct": "B",
        "image": "../../../Assets/img/I4917.jpg"
    },
    {
        "text": "Las señales acústicas, ¿se pueden utilizar para evitar un posible accidente?",
        "options": [
            "Sí, pero sólo en vías estrechas con muchas curvas.",
            "Sí, en cualquier tipo de vía.",
            "No."
        ],
        "correct": "B",
        "image": "../../../Assets/img/I4918.jpg"
    },
    {
        "text": "La señal, ¿qué indica?",
        "options": [
            "Peligro por hielo o nieve.",
            "Peligro por hielo únicamente.",
            "Peligro por nieve únicamente."
        ],
        "correct": "A",
        "image": "../../../Assets/img/I4919.jpg"
    },
    {
        "text": "Debe moderar la velocidad ante la proximidad de...",
        "options": [
            "vehículos estacionados en poblado.",
            "un autobús en situación de parada.",
            "vehículos estacionados en poblado y fuera de poblado."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T512203.jpg"
    },
    {
        "text": "La señal luminosa giratoria que llevan los tractores agrícolas indica...",
        "options": [
            "que tienen prioridad sobre el resto de vehículos.",
            "su presencia en la vía.",
            "que puede ser un obstáculo para los demás usuarios."
        ],
        "correct": "B",
        "image": "../../../Assets/img/I4921.jpg"
    },
    {
        "text": "En un tramo recto, de noche, sin condiciones atmosféricas adversas, ¿es correcto el alumbrado que lleva encendido este vehículo?",
        "options": [
            "No.",
            "Sí.",
            "Únicamente cuando circule por una carretera estrecha."
        ],
        "correct": "A",
        "image": "../../../Assets/img/I4922.jpg"
    },
    {
        "text": "¿Qué velocidades o marchas dan más fuerza al vehículo?",
        "options": [
            "La 1ª y la 2ª.",
            "La 3ª y la 4ª.",
            "La 4ª y la 5ª."
        ],
        "correct": "A",
        "image": "../../../Assets/img/I4923.jpg"
    },
    {
        "text": "¿Dónde se producen más accidentes?",
        "options": [
            "Curva con radio grande.",
            "Curva radio pequeño.",
            "Recta monótona."
        ],
        "correct": "C",
        "image": "../../../Assets/img/I4924.jpg"
    },
    {
        "text": "En una autopista, ¿es correcto que este vehículo circule por el carril central teniendo libre el carril de la derecha?",
        "options": [
            "Sí, mientras no moleste a nadie.",
            "Sí, si es el que más conviene a su destino.",
            "No, debe ir por el carril de la derecha."
        ],
        "correct": "C",
        "image": "../../../Assets/img/I4925.jpg"
    },
    {
        "text": "El vehículo de la fotografía lleva las puertas abiertas y sujetas ya que la carga no cabe dentro del mismo. ¿Es correcto?",
        "options": [
            "Sí, porque la carga está debidamente sujeta.",
            "No.",
            "Sí, porque la carga puede sobresalir en estos vehículos hasta un tercio de su longitud."
        ],
        "correct": "B",
        "image": "../../../Assets/img/I4926.jpg"
    },
    {
        "text": "En caso de siniestro, el seguro obligatorio del vehículo responsable del accidente cubrirá los daños producidos a la parte contraria...",
        "options": [
            "en todo caso, excepto si el vehículo causante hubiera sido robado.",
            "en todo caso, hasta los límites máximos establecidos en la póliza.",
            "sólo cuando el conductor del vehículo causante sea el tomador del seguro."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T510102_150317.jpg"
    },
    {
        "text": "¿Se puede circular con una motocicleta arrastrando un remolque cuya masa no supere el 50% de la masa en vacío del vehículo tractor?",
        "options": [
            "Sí, pero la velocidad deberá reducirse un 20% respecto a las velocidades genéricas del vehículo para ese tipo de vía.",
            "No, nunca.",
            "Sí, pero de día y en condiciones que no disminuyan la visibilidad."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T510124_151016.jpg"
    },
    {
        "text": "Entre los costes humanos derivados de los accidentes de tráfico se encuentran...",
        "options": [
            "el aumento de la capacidad productiva.",
            "la alta capacidad de rehabilitaciones.",
            "la pérdida de capacidad productiva."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T513904.jpg"
    },
    {
        "text": "Las motocicletas sin sidecar, ¿cuántas luces de corto alcance deben llevar instaladas?",
        "options": [
            "Una o dos delante.",
            "Sólo una delante.",
            "Dos, obligatoriamente, una delante y otra detrás."
        ],
        "correct": "A",
        "image": "../../../Assets/img/I4930.jpg"
    }
]
            
            ;

            const container = document.getElementById('test-container');
            const paginationRow1 = document.getElementById('pagination-row-1');
            const paginationRow2 = document.getElementById('pagination-row-2');

            // Generar preguntas
            questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.setAttribute('data-correct', question.correct);
                questionDiv.innerHTML = `
                    <div class="question-image">
                        <img src="${question.image}" alt="Imagen de la pregunta">
                    </div>
                    <div class="question-content">
                        <h3>${index + 1}. ${question.text}</h3>
                        <div class="options">
                            ${question.options.map((option, idx) => `
                                <div class="option" data-answer="${String.fromCharCode(65 + idx)}">
                                    <span class="option-circle">${String.fromCharCode(65 + idx)}</span>
                                    ${option}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                container.appendChild(questionDiv);
            });

            // Generar paginación
            for (let i = 0; i < questions.length; i++) {
                const button = document.createElement('button');
                button.textContent = `${i + 1}`;
                button.addEventListener('click', () => showQuestion(i));
                if (i < 15) {
                    paginationRow1.appendChild(button);
                } else {
                    paginationRow2.appendChild(button);
                }
            }

            // Mostrar la primera pregunta
            showQuestion(0);

            // Función para mostrar una pregunta específica
            function showQuestion(index) {
                document.querySelectorAll('.question').forEach((q, i) => {
                    q.style.display = i === index ? 'flex' : 'none';
                });
                document.querySelectorAll('.pagination button').forEach((btn, i) => {
                    btn.style.backgroundColor = i === index ? '#ff7aa2' : '#ffa5c3';
                });
            }

            // Evento para las opciones de respuesta
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const question = this.closest('.question');
                    const questionIndex = Array.from(container.children).indexOf(question);
                    const isCorrect = this.getAttribute('data-answer') === question.getAttribute('data-correct');
                    
                    if (question.dataset.answered) return;

                    question.dataset.answered = true;

                    question.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                        opt.style.pointerEvents = 'none';
                    });
                    
                    this.classList.add('selected', isCorrect ? 'correct' : 'incorrect');

                    if (!isCorrect) {
                        question.querySelector(`.option[data-answer="${question.getAttribute('data-correct')}"]`).classList.add('correct');
                    }

                    // Actualizar el botón de paginación
                    const paginationButton = questionIndex < 15 ? paginationRow1.children[questionIndex] : paginationRow2.children[questionIndex - 15];
                    paginationButton.classList.add(isCorrect ? 'correct' : 'incorrect');
                });
            });

            // Evento para corregir el test
            document.getElementById('correct-test').addEventListener('click', () => {
                let wrongAnswers = 0;
                document.querySelectorAll('.question').forEach((question, index) => {
                    const selected = question.querySelector('.option.selected');
                    const isCorrect = selected && selected.getAttribute('data-answer') === question.getAttribute('data-correct');
                    if (!isCorrect) {
                        wrongAnswers++;
                    }
                    // Actualizar el botón de paginación si no se ha respondido
                    if (!selected) {
                        const paginationButton = index < 15 ? paginationRow1.children[index] : paginationRow2.children[index - 15];
                        paginationButton.classList.add('incorrect');
                    }
                });
                const resultMessage = `Has fallado ${wrongAnswers} respuestas.`;

                const alert = document.getElementById('custom-alert');
                document.getElementById('alert-message').textContent = resultMessage;
                alert.style.display = 'block';
            });
        });

        function closeAlert() {
            document.getElementById('custom-alert').style.display = 'none';
        }
    </script>

    
</body>
</html>