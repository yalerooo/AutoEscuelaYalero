<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Autoescuela</title>
    <link rel="stylesheet" href="../../../Assets/style.css">
</head>
<body>

    
    <div class="container">
        <h1 style="text-align: center; color: #ffa5c3;">Test de Autoescuela</h1>
        <div id="test-container">
            <!-- Aquí se generarán dinámicamente las preguntas -->
        </div>
        <div class="pagination">
            <div class="pagination-row" id="pagination-row-1"></div>
            <div class="pagination-row" id="pagination-row-2"></div>
        </div>
        <button id="correct-test">Corregir Test</button>
    </div>

    <!-- Custom Alert HTML -->
    <div class="custom-alert" id="custom-alert">
        <h2>Resultado del Test</h2>
        <p id="alert-message">Aquí irá el mensaje del resultado.</p>
        <button onclick="closeAlert()">Cerrar</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const questions = [
    {
        "text": "Un vehículo tiene una anchura superior a 2,10 metros. ¿Cuándo es obligatorio encender la luz de gálibo?",
        "options": [
            "Sólo cuando circule por un tunel insuficientemente iluminado.",
            "Sólo cuando circule por un túnel entre la puesta y la salida del sol.",
            "Cuando circule por un túnel a cualquier hora del día."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P1129.jpg"
    },
    {
        "text": "Un turismo con remolque, ¿es obligatorio que lleve una rueda de repuesto del remolque?",
        "options": [
            "No.",
            "Sí, cuando el remolque no es ligero.",
            "Sí."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P3228.jpg"
    },
    {
        "text": "¿Qué indica la señal?",
        "options": [
            "Paso a nivel con barreras a 300 metros.",
            "Zona de frenado de emergencia a 300 metros.",
            "La existencia de una salida a 300 metros."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P1703.jpg"
    },
    {
        "text": "Una carrocería de gran resistencia, ¿puede sustituir a otros sistemas de seguridad pasiva?",
        "options": [
            "No.",
            "Sí, por ejemplo al airbag.",
            "Sí, en los vehículos todo-terreno."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T510113_050117.jpg"
    },
    {
        "text": "Para cambiar el sentido de la marcha, ¿qué opción es válida?",
        "options": [
            "La ruta roja.",
            "Ambas rutas pueden ser correctas.",
            "La ruta azul."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P0215.jpg"
    },
    {
        "text": "En una retención con los vehículos detenidos, ¿está permitido usar el teléfono móvil?",
        "options": [
            "Sí, porque el vehículo no está en movimiento.",
            "Únicamente si dispone de un dispositivo de manos libres que no precise auriculares.",
            "Sí, si la inmovilización dura más de dos minutos."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P2412.jpg"
    },
    {
        "text": "Se prohíbe circular por autopistas a los...",
        "options": [
            "vehículos que transporten mercancías peligrosas.",
            "vehículos con remolque.",
            "vehículos que no sean capaces de alcanzar en llano 60 km/h."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P0203.jpg"
    },
    {
        "text": "De noche, si la calzada está mojada...",
        "options": [
            "La visibilidad es mejor.",
            "La visibilidad es peor."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P3009.jpg"
    },
    {
        "text": "En una intersección señalizada en la que se encuentra un agente regulando el tráfico, ¿qué debe hacer?",
        "options": [
            "Aplicar las normas generales de prioridad de paso de los vehículos que se acerquen por la derecha.",
            "Obedecer las señales del agente.",
            "Obedecer las señales de tráfico que regulan la prioridad."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P1213.jpg"
    },
    {
        "text": "Un tractor agrícola de más de 3.500 kilogramos de M.M.A, ¿se puede conducir con el permiso B?",
        "options": [
            "No, porque sobrepasa los 3.500 kilogramos de masa máxima autorizada.",
            "Sí.",
            "Sí, cuando la velocidad máxima autorizada no exceda de 40 km/h."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P2004.jpg"
    },
    {
        "text": "La señal prohíbe...",
        "options": [
            "girar a la derecha.",
            "cambiar el sentido de la marcha.",
            "girar a la izquierda."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P1524.jpg"
    },
    {
        "text": "¿Se puede dar de beber agua a un herido, que nos parezca leve, en un accidente de circulación?",
        "options": [
            "No, como norma general.",
            "Sí, siempre que nos lo pida y no vomite.",
            "No, nunca."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P3114.jpg"
    },
    {
        "text": "La inscripción \"BUS\" dentro de un carril indica que es...",
        "options": [
            "un carril destinado al estacionamiento de autobuses.",
            "un carril reservado para la circulación de autobuses.",
            "una zona de la vía reservada sólo a turismos y autobuses."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P0302.jpg"
    },
    {
        "text": "¿Está permitida la colocación en un turismo de vidrios tintados no homologados?",
        "options": [
            "No, están prohibidos.",
            "Sí, puesto que no son elementos que influyan en la seguridad vial.",
            "Sí, pero solamente en las ventanillas delanteras."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P0117.jpg"
    },
    {
        "text": "Las señales circunstanciales, en caso de contradicción, prevalecen sobre...",
        "options": [
            "Las señales de los agentes.",
            "Todas las demás señales.",
            "Las señales verticales."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P1301.jpg"
    },
    {
        "text": "El turismo blanco de la fotografía, circula por una vía de poblado, ¿a qué velocidad máxima puede circular por esta vía en ausencia de señalización?",
        "options": [
            "50 km/h.",
            "20 km/h.",
            "30 km/h."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T511807.jpg"
    },
    {
        "text": "Las flechas de selección de carril...",
        "options": [
            "obligan a seguir las direcciones indicadas por las flechas, prohibiendo siempre el cambio de carril.",
            "aconsejan seguir las direcciones indicadas por las flechas.",
            "obligan a seguir la dirección o las direcciones indicadas, pero si la señalización lo permite autorizan el cambio de carril."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P1815.jpg"
    },
    {
        "text": "Si tiene que circular con su motocicleta por una zona especialmente deslizante, ¿qué precauciones debe tomar?",
        "options": [
            "Frenar en la zona para controlar la trayectoria.",
            "Disminuir la velocidad antes de llegar y mantener la motocicleta vertical al pasar sobre ella.",
            "Acelerar para pasar por la zona en el menor tiempo posible."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P3322.jpg"
    },
    {
        "text": "¿Qué indica esta señal?",
        "options": [
            "Vía reservada para ciclos.",
            "Vía reservada a ciclomotores.",
            "Prohibición de entrada a ciclomotores."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P1614.jpg"
    },
    {
        "text": "Circula conduciendo un turismo por una autovía. ¿Cuál es la velocidad máxima permitida a partir de esta señal?",
        "options": [
            "100 km/h.",
            "60 km/h.",
            "120 km/h."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T510115_050916.jpg"
    },
    {
        "text": "Si la velocidad máxima que alcanza una motocicleta es inferior a 100 kilómetros por hora, ¿cuántos retrovisores debe llevar?",
        "options": [
            "Uno obligatorio en el lado derecho y opcionalmente otro en el lado izquierdo.",
            "Dos, uno a cada lado de la motocicleta.",
            "Uno obligatorio en el lado izquierdo, y opcionalmente otro en el lado derecho."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P2624.jpg"
    },
    {
        "text": "La distancia de detención, ¿de qué depende?",
        "options": [
            "De la velocidad, solamente.",
            "De la velocidad, del tiempo de reacción y del tiempo de frenado.",
            "Del tipo de vehículo solamente."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P2214.jpg"
    },
    {
        "text": "En una intersección que no tiene señal de preferencia. ¿Cuándo debe ceder el paso a un vehículo de tracción animal?",
        "options": [
            "Nunca, porque no es un vehículo de motor.",
            "Siempre, porque tienen preferencia.",
            "Cuando entra por mi derecha."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P0527.jpg"
    },
    {
        "text": "Durante un viaje largo, ¿el conductor debe tomar algún alimento?",
        "options": [
            "No, porque puede producir somnolencia.",
            "Sí, siempre que no sea una comida copiosa, ni beba alcohol.",
            "Sí, pero sólo debe beber agua, zumos o refrescos."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P2227.jpg"
    },
    {
        "text": "Un dispositivo de retención infantil, ¿cómo se debe elegir?",
        "options": [
            "El de mayor tamaño, para que pueda usarse durante más tiempo.",
            "En función del peso del niño.",
            "En función de la edad."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P1906.jpg"
    },
    {
        "text": "¿Qué condiciones tienen que tener los neumáticos de una motocicleta?",
        "options": [
            "Las dos ruedas tienen que ser del mismo tamaño y características.",
            "No tienen que presentar cortes, roces, deformaciones, etc.",
            "Las ranuras de la banda de rodadura tienen que tener una profundidad mínima de 1'6 mm."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P2714.jpg"
    },
    {
        "text": "Este panel, colocado bajo una señal de prohibición, indica...",
        "options": [
            "la distancia en que se aplica la prohibición a ambos lados de la calzada.",
            "la distancia al comienzo de la prohibición.",
            "la distancia en que se aplica la prohibición en el sentido de la flecha."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P1724.jpg"
    },
    {
        "text": "¿Cuándo debe desactivar el airbag frontal de un asiento?",
        "options": [
            "Cuando en ese asiento viaje una mujer embarazada.",
            "En ningún caso.",
            "Cuando en ese asiento instale un dispositivo de retención para niños orientado hacia atrás."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P2901.jpg"
    },
    {
        "text": "¿Cuál es la velocidad máxima por diseño a la que le está permitido circular al conductor de un vehículo de movilidad personal?",
        "options": [
            "15 km/h.",
            "25 km/h.",
            "50 km/h."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T510130_180322.jpg"
    },
    {
        "text": "¿Son todas las drogas iguales?",
        "options": [
            "No, unas son peligrosas y otras no.",
            "Sí.",
            "No, aunque todas son peligrosas para la seguridad vial."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P2524.jpg"
    }
]
            
            ;

            const container = document.getElementById('test-container');
            const paginationRow1 = document.getElementById('pagination-row-1');
            const paginationRow2 = document.getElementById('pagination-row-2');

            // Generar preguntas
            questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.setAttribute('data-correct', question.correct);
                questionDiv.innerHTML = `
                    <div class="question-image">
                        <img src="${question.image}" alt="Imagen de la pregunta">
                    </div>
                    <div class="question-content">
                        <h3>${index + 1}. ${question.text}</h3>
                        <div class="options">
                            ${question.options.map((option, idx) => `
                                <div class="option" data-answer="${String.fromCharCode(65 + idx)}">
                                    <span class="option-circle">${String.fromCharCode(65 + idx)}</span>
                                    ${option}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                container.appendChild(questionDiv);
            });

            // Generar paginación
            for (let i = 0; i < questions.length; i++) {
                const button = document.createElement('button');
                button.textContent = `${i + 1}`;
                button.addEventListener('click', () => showQuestion(i));
                if (i < 15) {
                    paginationRow1.appendChild(button);
                } else {
                    paginationRow2.appendChild(button);
                }
            }

            // Mostrar la primera pregunta
            showQuestion(0);

            // Función para mostrar una pregunta específica
            function showQuestion(index) {
                document.querySelectorAll('.question').forEach((q, i) => {
                    q.style.display = i === index ? 'flex' : 'none';
                });
                document.querySelectorAll('.pagination button').forEach((btn, i) => {
                    btn.style.backgroundColor = i === index ? '#ff7aa2' : '#ffa5c3';
                });
            }

            // Evento para las opciones de respuesta
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const question = this.closest('.question');
                    const questionIndex = Array.from(container.children).indexOf(question);
                    const isCorrect = this.getAttribute('data-answer') === question.getAttribute('data-correct');
                    
                    if (question.dataset.answered) return;

                    question.dataset.answered = true;

                    question.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                        opt.style.pointerEvents = 'none';
                    });
                    
                    this.classList.add('selected', isCorrect ? 'correct' : 'incorrect');

                    if (!isCorrect) {
                        question.querySelector(`.option[data-answer="${question.getAttribute('data-correct')}"]`).classList.add('correct');
                    }

                    // Actualizar el botón de paginación
                    const paginationButton = questionIndex < 15 ? paginationRow1.children[questionIndex] : paginationRow2.children[questionIndex - 15];
                    paginationButton.classList.add(isCorrect ? 'correct' : 'incorrect');
                });
            });

            // Evento para corregir el test
            document.getElementById('correct-test').addEventListener('click', () => {
                let wrongAnswers = 0;
                document.querySelectorAll('.question').forEach((question, index) => {
                    const selected = question.querySelector('.option.selected');
                    const isCorrect = selected && selected.getAttribute('data-answer') === question.getAttribute('data-correct');
                    if (!isCorrect) {
                        wrongAnswers++;
                    }
                    // Actualizar el botón de paginación si no se ha respondido
                    if (!selected) {
                        const paginationButton = index < 15 ? paginationRow1.children[index] : paginationRow2.children[index - 15];
                        paginationButton.classList.add('incorrect');
                    }
                });
                const resultMessage = `Has fallado ${wrongAnswers} respuestas.`;

                const alert = document.getElementById('custom-alert');
                document.getElementById('alert-message').textContent = resultMessage;
                alert.style.display = 'block';
            });
        });

        function closeAlert() {
            document.getElementById('custom-alert').style.display = 'none';
        }
    </script>

    
</body>
</html>