<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Autoescuela</title>
    <link rel="stylesheet" href="../../../Assets/style.css">
</head>
<body>

    
    <div class="container">
        <h1 style="text-align: center; color: #ffa5c3;">Test de Autoescuela</h1>
        <div id="test-container">
            <!-- Aquí se generarán dinámicamente las preguntas -->
        </div>
        <div class="pagination">
            <div class="pagination-row" id="pagination-row-1"></div>
            <div class="pagination-row" id="pagination-row-2"></div>
        </div>
        <button id="correct-test">Corregir Test</button>
    </div>

    <!-- Custom Alert HTML -->
    <div class="custom-alert" id="custom-alert">
        <h2>Resultado del Test</h2>
        <p id="alert-message">Aquí irá el mensaje del resultado.</p>
        <button onclick="closeAlert()">Cerrar</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const questions = [
    {
        "text": "La luz antiniebla delantera, podrá utilizarse...",
        "options": [
            "cuando existan condiciones meteorológicas o ambientales que disminuyan sensiblemente la visibilidad.",
            "siempre que se circule de noche.",
            "siempre entre la puesta y la salida del sol, para complementar a las otras luces."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P1120.jpg"
    },
    {
        "text": "A un motorista herido en accidente, ¿debe quitarle el casco?",
        "options": [
            "Haré lo que él me diga.",
            "Sí, para que respire mejor.",
            "No, como norma general."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P3125.jpg"
    },
    {
        "text": "Esta señal, ¿qué indica?",
        "options": [
            "La velocidad máxima aconsejada.",
            "La velocidad máxima permitida.",
            "La velocidad mínima aconsejada."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P1522.jpg"
    },
    {
        "text": "Cuando se aproxime a niños o ancianos...",
        "options": [
            "debe adoptar las precauciones necesarias para no ponerles en peligro.",
            "les avisará con señales acústicas.",
            "se detendrá para cederles el paso."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P3309.jpg"
    },
    {
        "text": "Para abandonar una autovía por un carril de deceleración, debe situarse con la suficiente antelación en el carril...",
        "options": [
            "de la izquierda.",
            "de la derecha.",
            "más próximo a la salida."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P0229.jpg"
    },
    {
        "text": "¿El conductor de un automóvil debe vigilar periódicamente el nivel del líquido de frenos?",
        "options": [
            "No, se mirará sólo en las revisiones periódicas que realicen los talleres.",
            "Sí, debemos vigilar que se encuentre entre los límites de máximo y mínimo.",
            "El líquido de frenos va en un circuito cerrado y no tiene un nivel concreto que mantener."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P3214.jpg"
    },
    {
        "text": "Los animales conducidos en manada o en rebaño...",
        "options": [
            "atravesarán las vías por cualquier lugar, siempre que estén custodiados por una persona mayor de 18 años.",
            "no podrán circular por la noche a no ser que el conductor disponga de elementos retrorreflectantes.",
            "irán al paso, lo más cerca al borde derecho de la vía y sin ocupar más de la mitad derecha de la calzada."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P0325.jpg"
    },
    {
        "text": "¿Qué puede hacer para evitar los peligros que causa el uso del teléfono móvil durante la conducción?",
        "options": [
            "Esperar a detenerse en un semáforo o en un paso de peatones para usarlo.",
            "Detener el vehículo en un lugar seguro para poder usar el teléfono.",
            "Colgar las llamadas cuando suenen."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P2416.jpg"
    },
    {
        "text": "En un tramo de la vía muy estrecho sin señalizar en el que sea imposible el paso simultáneo de dos vehículos, tendrá preferencia...",
        "options": [
            "el que tenga más dificultades de maniobra.",
            "el que tenga que retroceder mayor distancia.",
            "el que haya entrado primero en el estrechamiento."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P0601.jpg"
    },
    {
        "text": "Desde el punto de vista de la circulación, ¿es una motocicleta un automóvil?",
        "options": [
            "No, porque los automóviles son los turismos.",
            "Sí, porque es un vehículo que se mueve por sí mismo.",
            "Sí."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P0107.jpg"
    },
    {
        "text": "Las señales y placas de la parte trasera del camión, ¿qué indican?",
        "options": [
            "Que transporta mercancías peligrosas y que mide más de 12 metros.",
            "Que su peso y dimensiones son mayores que los normales.",
            "Que transporta productos alimenticios."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P1929.jpg"
    },
    {
        "text": "Un vehículo tiene el ralentí demasiado alto, ¿influye en el consumo de carburante?",
        "options": [
            "Sí, porque al girar el motor más deprisa, consume más.",
            "Sí, porque consume menos carburante.",
            "No, tal circunstancia no influye ni altera el consumo."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P3418.jpg"
    },
    {
        "text": "En esta situación, ¿debe ceder el paso a los ciclistas?",
        "options": [
            "No, los vehículos de motor tienen prioridad sobre las bicicletas.",
            "Sí, pero sólo a los dos primeros ciclistas que están dentro de la intersección.",
            "Sí."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P0528.jpg"
    },
    {
        "text": "Los agentes podrán inmovilizar un vehículo...",
        "options": [
            "sólo cuando el resultado de la prueba de alcoholemia sea positivo.",
            "cuando el conductor se niegue a efectuar la prueba de alcoholemia.",
            "aunque el resultado de la prueba de alcoholemia sea negativo."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P2513.jpg"
    },
    {
        "text": "¿Qué peligro indica esta señal?",
        "options": [
            "Firme deslizante.",
            "Curva peligrosa.",
            "Obstrucción en la calzada."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P1426.jpg"
    },
    {
        "text": "Si utiliza un casco sin pantalla o visera, ¿es aconsejable utilizar gafas de seguridad?",
        "options": [
            "No, no es necesario.",
            "Sí, para proteger los ojos.",
            "No, porque es obligatorio que todos los cascos lleven pantalla."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P2923.jpg"
    },
    {
        "text": "¿Cuántos puntos, como máximo, se pueden recuperar mediante la realización de un curso de recuperación parcial?",
        "options": [
            "4 puntos.",
            "8 puntos.",
            "6 puntos."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P2012.jpg"
    },
    {
        "text": "Si inmoviliza el vehículo junto al borde de esta calzada, ¿incumple alguna norma de circulación?",
        "options": [
            "No, si es para efectuar una parada.",
            "No, ya que esta marca vial no prohíbe parar ni estacionar.",
            "Sí, porque es una zona de carga y descarga y está prohibido cualquier tipo de inmovilización."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P1825.jpg"
    },
    {
        "text": "Cuando llueve, ¿hay que prestar especial atención a alguna zona de la vía en particular?",
        "options": [
            "No, puesto que circular con lluvia es muy peligroso en todas partes.",
            "Sí, a los badenes y a las zonas en las que se pueden producir charcos.",
            "No, únicamente hay que prestar atención cuando hay niños en las proximidades."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P3012.jpg"
    },
    {
        "text": "Para incorporarse a la circulación, ¿se puede dar marcha atrás?",
        "options": [
            "Sí, es una de las maniobras en las que está permitido.",
            "No, en ningún caso.",
            "Sí, pero sólo en vías urbanas."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P0925.jpg"
    },
    {
        "text": "La pérdida de vidas, de capacidad productiva y el sufrimiento físico y psicológico, ¿cómo se llaman?",
        "options": [
            "Costes sanitarios.",
            "Costes humanos.",
            "Costes materiales."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T504210.jpg"
    },
    {
        "text": "¿Qué separación lateral están obligadas a dejar las motocicletas al cruzarse con otros vehículos que circulen en sentido contrario?",
        "options": [
            "1,5 metros como máximo.",
            "1,5 metros como mínimo en cualquier caso.",
            "Una separación lateral suficiente para que el cruce pueda realizarse con seguridad y sin peligro."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P0814.jpg"
    },
    {
        "text": "La velocidad a la que circula un vehículo, ¿influye en la distancia de reacción del conductor?",
        "options": [
            "No.",
            "Sí, porque durante el tiempo de reacción el vehículo recorrerá más distancia.",
            "No, sólo afecta a la distancia de detención."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P2206.jpg"
    },
    {
        "text": "Estas señales, sobre autopista o autovía, indican salida inmediata hacia...",
        "options": [
            "la población indicada.",
            "una autopista o autovía.",
            "una carretera convencional."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P1719.jpg"
    },
    {
        "text": "En caso de incendio en un túnel debe...",
        "options": [
            "abandonar el vehículo, dejando las puertas cerradas con llave.",
            "aproximar el vehículo todo lo posible a la derecha, apagar el motor, dejar las llaves puestas y las puertas abiertas.",
            "encender las luces de emergencia y las de posición, sin abandonar el vehículo hasta que no lleguen los servicios de emergencia."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P1030.jpg"
    },
    {
        "text": "¿Qué indica este agente?",
        "options": [
            "Detención para todos los usuarios que se acerquen de frente o por su espalda..",
            "Detención para los vehículos que se acerquen de frente al agente.",
            "Detención para todos los usuarios que se acerquen al agente."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P1214.jpg"
    },
    {
        "text": "El freno de mano, ¿para qué sirve?",
        "options": [
            "Para dejar inmovilizado el vehículo cuando estaciono.",
            "Para frenar el vehículo en ciudad.",
            "Para frenar el vehículo cuando circulo cuesta abajo."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P2723.jpg"
    },
    {
        "text": "Un semáforo cambia de rojo a verde. ¿Está permitido emplear el claxon para advertir a otro conductor que ya se puede pasar?",
        "options": [
            "No, en ningún caso.",
            "Sí, cuando se trate de una vía interurbana.",
            "Sí, cuando se trate de una vía urbana."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P0719.jpg"
    },
    {
        "text": "Después de un accidente, ¿debe revisar los cinturones de seguridad?",
        "options": [
            "No es necesario.",
            "No, mientras siga funcionando el cierre.",
            "Sí, y cambiarlos por unos nuevos si han sufrido daños."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P2826.jpg"
    },
    {
        "text": "¿Cuáles son los 4 distintivos ambientales para clasificar los vehículos por su potencial contaminante?",
        "options": [
            "Sin emisiones, ECO, A y B.",
            "0 emisiones, ECO, C y D.",
            "0 emisiones, ECO, C y B."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T510101_250121.jpg"
    }
]
            
            ;

            const container = document.getElementById('test-container');
            const paginationRow1 = document.getElementById('pagination-row-1');
            const paginationRow2 = document.getElementById('pagination-row-2');

            // Generar preguntas
            questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.setAttribute('data-correct', question.correct);
                questionDiv.innerHTML = `
                    <div class="question-image">
                        <img src="${question.image}" alt="Imagen de la pregunta">
                    </div>
                    <div class="question-content">
                        <h3>${index + 1}. ${question.text}</h3>
                        <div class="options">
                            ${question.options.map((option, idx) => `
                                <div class="option" data-answer="${String.fromCharCode(65 + idx)}">
                                    <span class="option-circle">${String.fromCharCode(65 + idx)}</span>
                                    ${option}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                container.appendChild(questionDiv);
            });

            // Generar paginación
            for (let i = 0; i < questions.length; i++) {
                const button = document.createElement('button');
                button.textContent = `${i + 1}`;
                button.addEventListener('click', () => showQuestion(i));
                if (i < 15) {
                    paginationRow1.appendChild(button);
                } else {
                    paginationRow2.appendChild(button);
                }
            }

            // Mostrar la primera pregunta
            showQuestion(0);

            // Función para mostrar una pregunta específica
            function showQuestion(index) {
                document.querySelectorAll('.question').forEach((q, i) => {
                    q.style.display = i === index ? 'flex' : 'none';
                });
                document.querySelectorAll('.pagination button').forEach((btn, i) => {
                    btn.style.backgroundColor = i === index ? '#ff7aa2' : '#ffa5c3';
                });
            }

            // Evento para las opciones de respuesta
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const question = this.closest('.question');
                    const questionIndex = Array.from(container.children).indexOf(question);
                    const isCorrect = this.getAttribute('data-answer') === question.getAttribute('data-correct');
                    
                    if (question.dataset.answered) return;

                    question.dataset.answered = true;

                    question.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                        opt.style.pointerEvents = 'none';
                    });
                    
                    this.classList.add('selected', isCorrect ? 'correct' : 'incorrect');

                    if (!isCorrect) {
                        question.querySelector(`.option[data-answer="${question.getAttribute('data-correct')}"]`).classList.add('correct');
                    }

                    // Actualizar el botón de paginación
                    const paginationButton = questionIndex < 15 ? paginationRow1.children[questionIndex] : paginationRow2.children[questionIndex - 15];
                    paginationButton.classList.add(isCorrect ? 'correct' : 'incorrect');
                });
            });

            // Evento para corregir el test
            document.getElementById('correct-test').addEventListener('click', () => {
                let wrongAnswers = 0;
                document.querySelectorAll('.question').forEach((question, index) => {
                    const selected = question.querySelector('.option.selected');
                    const isCorrect = selected && selected.getAttribute('data-answer') === question.getAttribute('data-correct');
                    if (!isCorrect) {
                        wrongAnswers++;
                    }
                    // Actualizar el botón de paginación si no se ha respondido
                    if (!selected) {
                        const paginationButton = index < 15 ? paginationRow1.children[index] : paginationRow2.children[index - 15];
                        paginationButton.classList.add('incorrect');
                    }
                });
                const resultMessage = `Has fallado ${wrongAnswers} respuestas.`;

                const alert = document.getElementById('custom-alert');
                document.getElementById('alert-message').textContent = resultMessage;
                alert.style.display = 'block';
            });
        });

        function closeAlert() {
            document.getElementById('custom-alert').style.display = 'none';
        }
    </script>

    
</body>
</html>