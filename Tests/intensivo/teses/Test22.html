<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Autoescuela</title>
    <link rel="stylesheet" href="../../../Assets/style.css">
</head>
<body>

    
    <div class="container">
        <h1 style="text-align: center; color: #ffa5c3;">Test de Autoescuela</h1>
        <div id="test-container">
            <!-- Aquí se generarán dinámicamente las preguntas -->
        </div>
        <div class="pagination">
            <div class="pagination-row" id="pagination-row-1"></div>
            <div class="pagination-row" id="pagination-row-2"></div>
        </div>
        <button id="correct-test">Corregir Test</button>
    </div>

    <!-- Custom Alert HTML -->
    <div class="custom-alert" id="custom-alert">
        <h2>Resultado del Test</h2>
        <p id="alert-message">Aquí irá el mensaje del resultado.</p>
        <button onclick="closeAlert()">Cerrar</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const questions = [
    {
        "text": "¿Qué debe hacer si durante la marcha su vehículo no puede alcanzar la velocidad mínima exigida y existe peligro de alcance?",
        "options": [
            "Utilizar la señal de emergencia.",
            "Realizar destellos con las luces de largo alcance.",
            "Pisar de forma intermitente el freno para advertir con las luces de frenado que va a reducir la marcha."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P1130.jpg"
    },
    {
        "text": "El consumo de alcohol, ¿qué produce en el conductor?",
        "options": [
            "Aumento del tiempo de reacción (= actúa más lento).",
            "Disminución del tiempo de reacción (=actúa más rápido).",
            "Aumento del campo visual (=ve mejor)."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P2417.jpg"
    },
    {
        "text": "¿Qué significa esta señal?",
        "options": [
            "Cruce de tranvía.",
            "Paso a nivel con barreras.",
            "Paso a nivel sin barreras."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P1409.jpg"
    },
    {
        "text": "El lavaparabrisas del vehículo...",
        "options": [
            "no necesita ningún mantenimiento.",
            "necesita que se vigile el nivel de agua de su propio depósito.",
            "necesita que se vigile el nivel del circuito de refrigeración de donde toma el agua."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P2908.jpg"
    },
    {
        "text": "Queda atascado con su turismo en una zona de barro donde patinan las ruedas motrices. ¿Cuál es la forma más adecuada de actuar para seguir circulando?",
        "options": [
            "Preparar un terreno estable colocando el material adecuado cerca de las ruedas motrices para que estas tengan la adherencia suficiente.",
            "Empujar el vehículo por uno de los laterales hacia una mejor superficie con adherencia.",
            "Pisar a fondo el pedal acelerador para conseguir mayor tracción en las ruedas y así lograr mayor adherencia."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T510101_151221.jpg"
    },
    {
        "text": "¿Es obligatorio apagar el motor cuando está cargando combustible?",
        "options": [
            "No.",
            "Sí, pero no es necesario si es el empleado de la gasolinera quien llena el depósito.",
            "Sí, siempre."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P0115.jpg"
    },
    {
        "text": "Cuando se aproxima a un puente móvil, ¿cómo debe actuar?",
        "options": [
            "Reduciendo la velocidad pero sólo, si el puente se encuentra en movimiento.",
            "Reduciendo la velocidad por debajo de la máxima permitida.",
            "Extremando la precaución y deteniéndose siempre antes de pasar."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P0614.jpg"
    },
    {
        "text": "¿Es eficaz el airbag en el caso de que los ocupantes del vehículo no utilicen el cinturón de seguridad?",
        "options": [
            "No, y puede provocar graves lesiones.",
            "Sí, pero sólo para el conductor.",
            "Sí."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P2828.jpg"
    },
    {
        "text": "¿Cuándo termina la prohibición de adelantar?",
        "options": [
            "Cuando llegue al estrechamiento.",
            "Cuando salga del estrechamiento.",
            "Cuando rebase la vertical de la señal de fin de prohibición de adelantamiento."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P1208.jpg"
    },
    {
        "text": "La probabilidad de que un accidente de tráfico sea mortal es mucho mayor en...",
        "options": [
            "un turismo que en un vehículo de dos ruedas.",
            "los vehículos de cuatro ruedas que en los vehiculos de dos ruedas.",
            "un vehículo de dos ruedas que en un turismo."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P2109.jpg"
    },
    {
        "text": "Ante un paso para peatones señalizado con marca vial solamente, ¿cuándo hay que detenerse?",
        "options": [
            "Cuando el peatón ya está atravesándolo, pero no cuando sólo demuestra su intención de hacerlo.",
            "Sólo cuando lo indique un agente.",
            "Siempre que un peatón esté atravesándolo o demuestre su intención de hacerlo."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P1810.jpg"
    },
    {
        "text": "El permiso de circulación es obligatorio para los remolques y semirremolques...",
        "options": [
            "cualquiera que sea su MMA.",
            "que tengan una MMA no superior a 750 kg.",
            "que tengan una MMA superior a 750 kg."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P2016.jpg"
    },
    {
        "text": "En un carril VAO, ¿puede circular un turismo que arrastra un remolque de menos de 750 kg de M.M.A.?",
        "options": [
            "No.",
            "Sí, pero sólo de día",
            "Sí, siempre."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P0309.jpg"
    },
    {
        "text": "Si lleva instalado un navegador GPS debe tener en cuenta que...",
        "options": [
            "el criterio del conductor debe prevalecer en todo momento.",
            "las instrucciones del navegador deben prevalecer en todo momento.",
            "debe mirar siempre al mapa de la pantalla."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P2330.jpg"
    },
    {
        "text": "Esta señal, informa de...",
        "options": [
            "Que el pago del peaje se puede efectuar en efectivo o mediante el dispositivo de telepeaje.",
            "Que la vía está cortada más adelante.",
            "Se pueden seguir diferentes direcciones según el carril por el que se circule."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P1705.jpg"
    },
    {
        "text": "Cargar un vehículo con más carga de la autorizada...",
        "options": [
            "sólo afecta a los neumáticos, por lo que se deberá incrementar su presión.",
            "no influye para nada en la seguridad vial.",
            "influye, especialmente, en la aceleración, frenado y estabilidad del vehículo."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T510126_050116.jpg"
    },
    {
        "text": "En esta calzada de doble sentido de circulación, el vehículo rojo quiere girar a la izquierda, ¿está bien colocado?",
        "options": [
            "No.",
            "Sí."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P0902.jpg"
    },
    {
        "text": "La capacidad de respuesta de un conductor ante las exigencias de la circulación, ¿puede verse afectada por su formación?",
        "options": [
            "No.",
            "Sí."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P2216.jpg"
    },
    {
        "text": "A la vista de estas circunstancias, ¿qué distancia frontal debe mantener con el vehículo que le precede en esta vía, si no tiene intención de adelantarlo?",
        "options": [
            "50 metros como mínimo.",
            "Una distancia tal que me permita detenerme en caso de frenado brusco sin colisionar con el vehículo que me precede.",
            "Una distancia tal que me permita detenerme en caso de frenado brusco sin colisionar con el vehículo que me precede y que, además, permita al que a su vez venga detrás, adelantarme con seguridad."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P0502.jpg"
    },
    {
        "text": "Cuando conduce una motocicleta, debe tener en cuenta que...",
        "options": [
            "cuanto mayor es la velocidad, hay mayor dificultad para mantener el equilibrio.",
            "es menos estable y más frágil que el resto de los vehículos.",
            "es más visible que otros automóviles."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T500406.jpg"
    },
    {
        "text": "¿Tiene que ceder el paso a este autobús que quiere incorporarse a la circulación?",
        "options": [
            "Sí, en la medida de lo posible, llegando incluso a detener el vehículo.",
            "No, porque se trata de una vía urbana.",
            "No, porque los turismos tienen preferencia."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P0729.jpg"
    },
    {
        "text": "¿Qué precauciones deberá tomar antes de examinar a las victimas de un accidente?",
        "options": [
            "Inmovilizar mi vehículo en lugar seguro, parar el motor, señalizar el accidente y cortar el encendido de los vehículos implicados.",
            "Avisar a la Autoridad judicial.",
            "Comprobar la identidad de los implicados en el accidente."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P3106.jpg"
    },
    {
        "text": "Un turismo, ¿puede transportar carga en la baca?",
        "options": [
            "Sí, cuando no comprometa la estabilidad del vehículo.",
            "Sí, pero sólo si circula de día.",
            "No."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P1911.jpg"
    },
    {
        "text": "El consumo de drogas de abuso, ¿tiene relación con los accidentes más graves?",
        "options": [
            "Sí, gran parte está causado por este consumo.",
            "Sólo cuando se mezclan con alcohol.",
            "No, se relaciona generalmente con los accidentes de menor gravedad."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P2515.jpg"
    },
    {
        "text": "¿Se considera adelantamiento si los vehículos de un carril circulan más rápido que los del otro?",
        "options": [
            "No.",
            "Sí.",
            "Sí, si los vehículos cambian de carril."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P0801.jpg"
    },
    {
        "text": "Para que el apoyacabezas esté regulado correctamente, la distancia respecto a la cabeza debe ser...",
        "options": [
            "superior a 4 cm.",
            "la mínima posible y nunca superior a 4 cm.",
            "la que resulte más cómoda para el conductor."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P2906.jpg"
    },
    {
        "text": "¿Está permitido estacionar el día 16 a las ocho de la mañana en el lado de la calzada en que esté situada esta señal?",
        "options": [
            "No.",
            "Sí, porque la señal sólo prohíbe la parada.",
            "Sí, porque sólo prohíbe estacionar hasta el día 15."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P1604.jpg"
    },
    {
        "text": "Para contaminar lo menos posible es recomendable...",
        "options": [
            "mantener siempre la misma velocidad.",
            "mantener la velocidad lo más uniforme posible evitando acelerones y frenazos innecesarios.",
            "utilizar lo menos posible el transporte público."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T500102.jpg"
    },
    {
        "text": "El vehículo de la imagen quiere cambiar de dirección a la derecha, ¿está obligado a detenerse?",
        "options": [
            "No, puede continuar la marcha con precaución.",
            "Sí.",
            "No, las indicaciones del semáforo sólo le afectan si pretende seguir de frente."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P1319.jpg"
    },
    {
        "text": "El ciclista, ¿puede quitarse el casco en vías interurbanas?",
        "options": [
            "No.",
            "En caso de rampas ascendentes prolongadas, en condiciones extremas de calor o por razones médicas.",
            "Sólo en rampas ascendentes prolongadas."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P2930.jpg"
    }
]
            
            ;

            const container = document.getElementById('test-container');
            const paginationRow1 = document.getElementById('pagination-row-1');
            const paginationRow2 = document.getElementById('pagination-row-2');

            // Generar preguntas
            questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.setAttribute('data-correct', question.correct);
                questionDiv.innerHTML = `
                    <div class="question-image">
                        <img src="${question.image}" alt="Imagen de la pregunta">
                    </div>
                    <div class="question-content">
                        <h3>${index + 1}. ${question.text}</h3>
                        <div class="options">
                            ${question.options.map((option, idx) => `
                                <div class="option" data-answer="${String.fromCharCode(65 + idx)}">
                                    <span class="option-circle">${String.fromCharCode(65 + idx)}</span>
                                    ${option}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                container.appendChild(questionDiv);
            });

            // Generar paginación
            for (let i = 0; i < questions.length; i++) {
                const button = document.createElement('button');
                button.textContent = `${i + 1}`;
                button.addEventListener('click', () => showQuestion(i));
                if (i < 15) {
                    paginationRow1.appendChild(button);
                } else {
                    paginationRow2.appendChild(button);
                }
            }

            // Mostrar la primera pregunta
            showQuestion(0);

            // Función para mostrar una pregunta específica
            function showQuestion(index) {
                document.querySelectorAll('.question').forEach((q, i) => {
                    q.style.display = i === index ? 'flex' : 'none';
                });
                document.querySelectorAll('.pagination button').forEach((btn, i) => {
                    btn.style.backgroundColor = i === index ? '#ff7aa2' : '#ffa5c3';
                });
            }

            // Evento para las opciones de respuesta
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const question = this.closest('.question');
                    const questionIndex = Array.from(container.children).indexOf(question);
                    const isCorrect = this.getAttribute('data-answer') === question.getAttribute('data-correct');
                    
                    if (question.dataset.answered) return;

                    question.dataset.answered = true;

                    question.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                        opt.style.pointerEvents = 'none';
                    });
                    
                    this.classList.add('selected', isCorrect ? 'correct' : 'incorrect');

                    if (!isCorrect) {
                        question.querySelector(`.option[data-answer="${question.getAttribute('data-correct')}"]`).classList.add('correct');
                    }

                    // Actualizar el botón de paginación
                    const paginationButton = questionIndex < 15 ? paginationRow1.children[questionIndex] : paginationRow2.children[questionIndex - 15];
                    paginationButton.classList.add(isCorrect ? 'correct' : 'incorrect');
                });
            });

            // Evento para corregir el test
            document.getElementById('correct-test').addEventListener('click', () => {
                let wrongAnswers = 0;
                document.querySelectorAll('.question').forEach((question, index) => {
                    const selected = question.querySelector('.option.selected');
                    const isCorrect = selected && selected.getAttribute('data-answer') === question.getAttribute('data-correct');
                    if (!isCorrect) {
                        wrongAnswers++;
                    }
                    // Actualizar el botón de paginación si no se ha respondido
                    if (!selected) {
                        const paginationButton = index < 15 ? paginationRow1.children[index] : paginationRow2.children[index - 15];
                        paginationButton.classList.add('incorrect');
                    }
                });
                const resultMessage = `Has fallado ${wrongAnswers} respuestas.`;

                const alert = document.getElementById('custom-alert');
                document.getElementById('alert-message').textContent = resultMessage;
                alert.style.display = 'block';
            });
        });

        function closeAlert() {
            document.getElementById('custom-alert').style.display = 'none';
        }
    </script>

    
</body>
</html>