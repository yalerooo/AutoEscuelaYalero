<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Autoescuela</title>
    <link rel="stylesheet" href="../../../Assets/style.css">
</head>
<body>

    
    <div class="container">
        <h1 style="text-align: center; color: #ffa5c3;">Test de Autoescuela</h1>
        <div id="test-container">
            <!-- Aquí se generarán dinámicamente las preguntas -->
        </div>
        <div class="pagination">
            <div class="pagination-row" id="pagination-row-1"></div>
            <div class="pagination-row" id="pagination-row-2"></div>
        </div>
        <button id="correct-test">Corregir Test</button>
    </div>

    <!-- Custom Alert HTML -->
    <div class="custom-alert" id="custom-alert">
        <h2>Resultado del Test</h2>
        <p id="alert-message">Aquí irá el mensaje del resultado.</p>
        <button onclick="closeAlert()">Cerrar</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const questions = [
    {
        "text": "¿Qué luz obliga a detenerse?",
        "options": [
            "La amarilla intermitente.",
            "La amarilla fija.",
            "La verde."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P1314.jpg"
    },
    {
        "text": "El alcohol, ¿influye en la distancia de reacción?",
        "options": [
            "Sí, porque afecta al tiempo de reacción.",
            "No, el estado del conductor no influye en la distancia de reacción, sólo depende del estado del vehículo.",
            "No, pero sí influye en la distancia de frenado."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P2207.jpg"
    },
    {
        "text": "Esta señal de peligro, ¿qué indica?",
        "options": [
            "Paso a nivel con barreras con más de una vía férrea.",
            "Paso a nivel sin barreras con más de una vía férrea.",
            "Paso a nivel con barreras de una vía férrea."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P1413.jpg"
    },
    {
        "text": "Un turismo, ¿puede circular sin uno de los espejos retrovisores exteriores si coloca uno interior panorámico?",
        "options": [
            "Únicamente sin el espejo derecho y sólo cuando su uso no sea obligatorio por las condiciones del vehículo o del conductor.",
            "Sí, cuando el que falta es el izquierdo.",
            "No, siempre deberá circular con los dos espejos retrovisores exteriores."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P2619.jpg"
    },
    {
        "text": "Si se ve en la necesidad de transportar en su vehículo a un herido, ¿está obligado a respetar las normas de circulación?",
        "options": [
            "Sí, pero sólo en las intersecciones.",
            "Sí, en todo caso.",
            "No."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P0624.jpg"
    },
    {
        "text": "El riesgo de accidente cuando se usa el teléfono móvil es...",
        "options": [
            "igual que si no se utiliza.",
            "casi inexistente cuando se usa manos libres porque no hay pérdida de concentración.",
            "mayor que si no se utiliza."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P2401.jpg"
    },
    {
        "text": "¿Qué es la velocidad inadecuada?",
        "options": [
            "La velocidad que no se adapta a las condiciones del tráfico, de la vía o del conductor.",
            "La velocidad permitida en la vía.",
            "La que no rebasa el límite máximo de velocidad para la vía."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P0426.jpg"
    },
    {
        "text": "Para evitar ruidos excesivos e innecesarios en la conducción, se debe...",
        "options": [
            "cuidar de que el tubo de escape y el silenciador del vehículo estén siempre en buen estado.",
            "utilizar el claxon frecuentemente pero sin producir ruidos estridentes o notas musicales.",
            "circular con el tubo de escape libre."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P3216.jpg"
    },
    {
        "text": "Esta señal prohibe...",
        "options": [
            "el paso a los vehículos de menos de 4,5 metros de ancho,",
            "el paso a los vehículos de más de 4,5 metros de ancho, incluída la carga.",
            "el paso a todos los vehículos cuando su carga sobresale por los lados."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P1518.jpg"
    },
    {
        "text": "¿Cómo afecta el cannabis a la conducción?",
        "options": [
            "Aumenta la somnolencia.",
            "Disminuye la somnolencia y la concentración.",
            "Disminuye el tiempo de reacción."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P2525.jpg"
    },
    {
        "text": "Es obligatorio utilizar la luz antiniebla trasera...",
        "options": [
            "cuando las condiciones meteorológicas o ambientales sean especialmente desfavorables.",
            "en caso de lluvia, nevada o nubes de polvo o de humo.",
            "cuando existan condiciones meteorológicas o ambientales que disminuyan la visibilidad."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P1127.jpg"
    },
    {
        "text": "Un ciclomotor de dos ruedas es un vehículo con un motor de cilindrada...",
        "options": [
            "no superior a 50 centímetros cúbicos y una velocidad máxima no superior a 45 km/h.",
            "inferior a 50 centímetros cúbicos.",
            "no superior a 50 centímetros cúbicos si es de combustión interna."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P0106.jpg"
    },
    {
        "text": "En una calzada se produce un estrechamiento sin señalizar. En él, coinciden un turismo y un camión que circula en sentido contrario. ¿Quién retrocederá?",
        "options": [
            "El camión.",
            "El turismo."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P0605.jpg"
    },
    {
        "text": "Los síntomas de las alergias respiratorias pueden producir...",
        "options": [
            "un retraso en la aparición del sueño.",
            "una menor capacidad para mantener la concentración en el tráfico.",
            "una disminución del tiempo de reacción."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P2303.jpg"
    },
    {
        "text": "Esta señal, ¿prohíbe el paso a los vehículos para personas de movilidad reducida?",
        "options": [
            "Sí.",
            "No, sólo lo prohíbe a los ciclomotores."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P1510.jpg"
    },
    {
        "text": "El tiempo de reacción de un conductor, desde que observa un peligro hasta su reacción, ¿es variable?",
        "options": [
            "Sí, depende del estado físico de cada conductor.",
            "No, es de entre medio y un segundo.",
            "No."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P2202.jpg"
    },
    {
        "text": "¿Cómo debe distribuir la carga en una furgoneta?",
        "options": [
            "Encima del eje trasero, un poco hacia atrás.",
            "Encima del eje trasero, un poco hacia delante.",
            "Lo más próximo al conductor."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T510123_050617.jpg"
    },
    {
        "text": "Cuando avise de un accidente, ¿qué información es útil que aporte a los servicios de emergencia?",
        "options": [
            "Cómo ha ocurrido el accidente y los vehículos accidentados.",
            "El lugar del accidente, el número de víctimas y su identificación.",
            "El lugar del accidente y el número de matrícula de los vehículos."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P3108.jpg"
    },
    {
        "text": "Advertir a otros usuarios de que se va a realizar una maniobra, ¿es obligatorio?",
        "options": [
            "No, sólo es obligatorio advertir a los conductores.",
            "No, pero es siempre muy aconsejable.",
            "Sí, siempre."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P0702.jpg"
    },
    {
        "text": "¿Cómo se puede ahorrar combustible?",
        "options": [
            "Cambiando a una marcha inferior lo antes posible.",
            "Cambiando a una marcha superior lo antes posible.",
            "Circulando, con frecuencia, a altas revoluciones."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P3407.jpg"
    },
    {
        "text": "El turismo amarillo va a realizar un cambio de sentido de la marcha, ¿es correcto?",
        "options": [
            "No, porque obstaculiza a los vehículos que le siguen.",
            "Sí, porque hace la maniobra de un solo movimiento.",
            "No, porque está prohibido en las vías interurbanas."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P0911.jpg"
    },
    {
        "text": "Los sistemas de seguridad activa incluyen...",
        "options": [
            "cinturones de seguridad, airbags, apoyacabezas y casco.",
            "alumbrado, neumáticos, frenos y suspensión.",
            "frenos, neumáticos, airbags y cinturones de seguridad."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T512230.jpg"
    },
    {
        "text": "Un agente de tráfico que circula delante muestra una bandera de color amarillo, ¿qué está indicando?",
        "options": [
            "Que la calzada queda temporalmente cerrada al tráfico.",
            "La necesidad de extremar la atención o la proximidad de un peligro.",
            "Que la calzada queda abierta al tráfico."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P1225.jpg"
    },
    {
        "text": "El calor, ¿influye en el desgaste de los neumáticos?",
        "options": [
            "Sí, aumenta el desgaste.",
            "Sí, reduce el desgaste.",
            "No."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P2711.jpg"
    },
    {
        "text": "¿Qué indica la señal?",
        "options": [
            "Fin de velocidad mínima obligatoria.",
            "Fin de velocidad máxima aconsejable.",
            "Fin de velocidad máxima permitida."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P1622.jpg"
    },
    {
        "text": "Los agentes de la Autoridad de Tráfico, ¿cuándo podrán proceder a la inmovilización de una motocicleta?",
        "options": [
            "Cuando su conductor no lleve puesto el casco.",
            "Cuando el pasajero de la misma circule sin el casco",
            "En ningún caso."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P2916.jpg"
    },
    {
        "text": "En esta vía con tres calzadas separadas, ¿por qué calzada debe circular?",
        "options": [
            "Sólo por la calzada de la derecha.",
            "Por la calzada de la derecha y por la central cuando haya señales que así me lo permiten.",
            "Sólo por la calzada central."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P0201.jpg"
    },
    {
        "text": "¿En qué caso el estacionamiento perturba gravemente la circulación?",
        "options": [
            "Cuando la distancia entre el vehículo y el borde opuesto de la calzada sea inferior a 5 metros.",
            "Cuando se efectúa en las medianas, separadores, isletas u otros elementos de canalización del tráfico.",
            "En una zona reservada a carga y descarga, fuera de las horas de utilización."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P1020.jpg"
    },
    {
        "text": "Estos vehículos circulan por un carril habilitado en sentido contrario al habitual, ¿pueden desplazarse al carril normal de circulación?",
        "options": [
            "Sí, siempre que al hacerlo, no derriben los conos que delimitan ese carril.",
            "No, ni siquiera para adelantar.",
            "Sí, pero sólo para adelantar."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P0316.jpg"
    },
    {
        "text": "La mayoría de los accidentes de circulación...",
        "options": [
            "son inevitables.",
            "se pueden evitar.",
            "casi nunca se pueden evitar."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P2101.jpg"
    }
]
            
            ;

            const container = document.getElementById('test-container');
            const paginationRow1 = document.getElementById('pagination-row-1');
            const paginationRow2 = document.getElementById('pagination-row-2');

            // Generar preguntas
            questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.setAttribute('data-correct', question.correct);
                questionDiv.innerHTML = `
                    <div class="question-image">
                        <img src="${question.image}" alt="Imagen de la pregunta">
                    </div>
                    <div class="question-content">
                        <h3>${index + 1}. ${question.text}</h3>
                        <div class="options">
                            ${question.options.map((option, idx) => `
                                <div class="option" data-answer="${String.fromCharCode(65 + idx)}">
                                    <span class="option-circle">${String.fromCharCode(65 + idx)}</span>
                                    ${option}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                container.appendChild(questionDiv);
            });

            // Generar paginación
            for (let i = 0; i < questions.length; i++) {
                const button = document.createElement('button');
                button.textContent = `${i + 1}`;
                button.addEventListener('click', () => showQuestion(i));
                if (i < 15) {
                    paginationRow1.appendChild(button);
                } else {
                    paginationRow2.appendChild(button);
                }
            }

            // Mostrar la primera pregunta
            showQuestion(0);

            // Función para mostrar una pregunta específica
            function showQuestion(index) {
                document.querySelectorAll('.question').forEach((q, i) => {
                    q.style.display = i === index ? 'flex' : 'none';
                });
                document.querySelectorAll('.pagination button').forEach((btn, i) => {
                    btn.style.backgroundColor = i === index ? '#ff7aa2' : '#ffa5c3';
                });
            }

            // Evento para las opciones de respuesta
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const question = this.closest('.question');
                    const questionIndex = Array.from(container.children).indexOf(question);
                    const isCorrect = this.getAttribute('data-answer') === question.getAttribute('data-correct');
                    
                    if (question.dataset.answered) return;

                    question.dataset.answered = true;

                    question.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                        opt.style.pointerEvents = 'none';
                    });
                    
                    this.classList.add('selected', isCorrect ? 'correct' : 'incorrect');

                    if (!isCorrect) {
                        question.querySelector(`.option[data-answer="${question.getAttribute('data-correct')}"]`).classList.add('correct');
                    }

                    // Actualizar el botón de paginación
                    const paginationButton = questionIndex < 15 ? paginationRow1.children[questionIndex] : paginationRow2.children[questionIndex - 15];
                    paginationButton.classList.add(isCorrect ? 'correct' : 'incorrect');
                });
            });

            // Evento para corregir el test
            document.getElementById('correct-test').addEventListener('click', () => {
                let wrongAnswers = 0;
                document.querySelectorAll('.question').forEach((question, index) => {
                    const selected = question.querySelector('.option.selected');
                    const isCorrect = selected && selected.getAttribute('data-answer') === question.getAttribute('data-correct');
                    if (!isCorrect) {
                        wrongAnswers++;
                    }
                    // Actualizar el botón de paginación si no se ha respondido
                    if (!selected) {
                        const paginationButton = index < 15 ? paginationRow1.children[index] : paginationRow2.children[index - 15];
                        paginationButton.classList.add('incorrect');
                    }
                });
                const resultMessage = `Has fallado ${wrongAnswers} respuestas.`;

                const alert = document.getElementById('custom-alert');
                document.getElementById('alert-message').textContent = resultMessage;
                alert.style.display = 'block';
            });
        });

        function closeAlert() {
            document.getElementById('custom-alert').style.display = 'none';
        }
    </script>

    
</body>
</html>