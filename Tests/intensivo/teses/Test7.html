<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Autoescuela</title>
    <link rel="stylesheet" href="../../../Assets/style.css">
</head>
<body>

    
    <div class="container">
        <h1 style="text-align: center; color: #ffa5c3;">Test de Autoescuela</h1>
        <div id="test-container">
            <!-- Aquí se generarán dinámicamente las preguntas -->
        </div>
        <div class="pagination">
            <div class="pagination-row" id="pagination-row-1"></div>
            <div class="pagination-row" id="pagination-row-2"></div>
        </div>
        <button id="correct-test">Corregir Test</button>
    </div>

    <!-- Custom Alert HTML -->
    <div class="custom-alert" id="custom-alert">
        <h2>Resultado del Test</h2>
        <p id="alert-message">Aquí irá el mensaje del resultado.</p>
        <button onclick="closeAlert()">Cerrar</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const questions = [
    {
        "text": "¿Puede el conductor reducir la probabilidad de accidente debida al \"factor vía\"?",
        "options": [
            "Sí, adaptando su conducción a las condiciones del medio.",
            "Sí, si su vehículo cuenta con los últimos avances de seguridad.",
            "No, porque no puede actuar sobre la vía ni sobre el entorno."
        ],
        "correct": "A",
        "image": "../../../Assets/img/I3701.jpg"
    },
    {
        "text": "Una motocicleta adelanta a un turismo en carretera. ¿Qué distancia lateral debe dejar?",
        "options": [
            "1,5 metros o más.",
            "No hay distancia mínima obligatoria.",
            "2 metros o más."
        ],
        "correct": "A",
        "image": "../../../Assets/img/I3702.jpg"
    },
    {
        "text": "En esta vía se ha habilitado un carril adicional, ¿a qué velocidad como máximo circulará el vehículo amarillo?",
        "options": [
            "A 80 kilómetros por hora.",
            "A 60 kilómetros por hora.",
            "A la genérica de la vía."
        ],
        "correct": "A",
        "image": "../../../Assets/img/I3703.jpg"
    },
    {
        "text": "¿Tomar un café o un té reduce la tasa de alcoholemia?",
        "options": [
            "No.",
            "Sí, pero sólo el café.",
            "Sí."
        ],
        "correct": "A",
        "image": "../../../Assets/img/I3704.jpg"
    },
    {
        "text": "El casco debe cambiarse cuando...",
        "options": [
            "los colores hayan pasado de moda.",
            "cambie de motocicleta.",
            "sufra algún golpe ya que puede haberse dañado."
        ],
        "correct": "C",
        "image": "../../../Assets/img/I3705.jpg"
    },
    {
        "text": "En un estacionamiento con limitación horaria, ¿está permitido estacionar sin colocar el ticket correspondiente?",
        "options": [
            "No, y únicamente puede ser sancionado.",
            "No, y además de la sanción, los agentes pueden inmovilizar el vehículo.",
            "Sí, si es por un corto espacio de tiempo."
        ],
        "correct": "B",
        "image": "../../../Assets/img/I3706.jpg"
    },
    {
        "text": "Los ciclistas, ¿están obligados a encender el alumbrado cuando circulan de noche?",
        "options": [
            "Sí, siempre.",
            "No, cuando la vía está iluminada.",
            "No, cuando llevan alguna prenda reflectante."
        ],
        "correct": "A",
        "image": "../../../Assets/img/I3707.jpg"
    },
    {
        "text": "El cinturón de seguridad deber ir...",
        "options": [
            "holgado para que la conducción sea cómoda y no aparezca la fatiga.",
            "bien ceñido para evitar el efecto submarino.",
            "sobre el abdomen para que sea realmente eficaz."
        ],
        "correct": "B",
        "image": "../../../Assets/img/I3708.jpg"
    },
    {
        "text": "Una motocicleta de mayor cilindrada, ¿consume más combustible que una de menor cilindrada?",
        "options": [
            "Sí.",
            "No.",
            "No, si se conduce de un modo adecuado a las circunstancias."
        ],
        "correct": "A",
        "image": "../../../Assets/img/I3709.jpg"
    },
    {
        "text": "Un vehículo de dos ruedas sin sidecar, con una cilindrada superior a 50 centímetros cúbicos, se considera...",
        "options": [
            "un ciclomotor de dos ruedas.",
            "una motocicleta.",
            "un ciclomotor o un cuadriciclo ligero."
        ],
        "correct": "B",
        "image": "../../../Assets/img/I3710.jpg"
    },
    {
        "text": "¿Qué hay que revisar con más frecuencia?",
        "options": [
            "Los neumáticos.",
            "El líquido de frenos.",
            "El líquido refrigerante."
        ],
        "correct": "A",
        "image": "../../../Assets/img/I3711.jpg"
    },
    {
        "text": "¿Hay que renovar el permiso de circulación?",
        "options": [
            "No, este documento no se renueva nunca.",
            "Sí, cada 4 años.",
            "Sí, si cambia el titular del vehículo."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T510130_050116.jpg"
    },
    {
        "text": "Los retrovisores deben observarse...",
        "options": [
            "únicamente al realizar maniobras.",
            "sólo cuando sea necesario.",
            "con regularidad durante la marcha."
        ],
        "correct": "C",
        "image": "../../../Assets/img/I3713.jpg"
    },
    {
        "text": "¿Debe facilitar el paso a una ambulancia que utiliza la señal luminosa pero no la señal acústica?",
        "options": [
            "No, porque no circula en servicio urgente.",
            "No, porque si no utiliza la señal acústica se debe a que tiene suficiente espacio para pasar.",
            "Sí, porque está advirtiendo que circula en servicio urgente."
        ],
        "correct": "C",
        "image": "../../../Assets/img/I3714.jpg"
    },
    {
        "text": "¿Puede sentir mayor sensación de fatiga si sufre de estrés?",
        "options": [
            "Sí.",
            "Sólo si además tiene problemas de sueño.",
            "No."
        ],
        "correct": "A",
        "image": "../../../Assets/img/I3715.jpg"
    },
    {
        "text": "Los navegadores pueden ser de gran ayuda al conductor...",
        "options": [
            "porque disminuyen las causas de distracción al proporcionarle información importante.",
            "sólo si se presta atención a las instrucciones de voz y se mira al mapa de la pantalla.",
            "pero también pueden suponer una importante causa de distracción."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T513508.jpg"
    },
    {
        "text": "Si conduciendo una motocicleta tiene que atravesar una zona con poca adherencia, debe hacerlo...",
        "options": [
            "aumentando la velocidad para pasar rápidamente.",
            "frenando para disminuir el peligro.",
            "con la motocicleta perpendicular al suelo y sin acelerar o frenar bruscamente."
        ],
        "correct": "C",
        "image": "../../../Assets/img/I3717.jpg"
    },
    {
        "text": "¿Qué significado tiene esta señal?",
        "options": [
            "Peligro por la proximidad de un cruce con una línea de tranvía.",
            "Peligro por la proximidad de un paso a nivel sin barreras de más de una vía férrea.",
            "Peligro por la proximidad de un paso a nivel provisto de barreras o semibarreras."
        ],
        "correct": "C",
        "image": "../../../Assets/img/I3718.jpg"
    },
    {
        "text": "Si está bajo tratamiento farmacológico, ¿es necesario que renuncie a conducir?",
        "options": [
            "Sí, en todo caso.",
            "No, nunca.",
            "No, salvo en casos extremos."
        ],
        "correct": "C",
        "image": "../../../Assets/img/I3719.jpg"
    },
    {
        "text": "La furgoneta está en doble fila, ¿puede hacer una parada para descargar?",
        "options": [
            "No, porque está prohibido.",
            "Sí, cuando no hay un lugar de descarga cerca.",
            "Sí, el tiempo que quiera."
        ],
        "correct": "B",
        "image": "../../../Assets/img/I3720.jpg"
    },
    {
        "text": "Para anticiparse al peligro y tomar decisiones seguras, ¿qué debe hacer el conductor?",
        "options": [
            "Limitarse a mirar al vehículo que circula delante.",
            "Mirar únicamente a los vehículos que circulan detrás.",
            "Observar constantemente lo que sucede en la vía y su entorno."
        ],
        "correct": "C",
        "image": "../../../Assets/img/I3721.jpg"
    },
    {
        "text": "En esta intersección, ¿cuándo está permitido adelantar por la derecha?",
        "options": [
            "Cuando el vehículo que va delante va a girar a la izquierda.",
            "Cuando no hay señales de detención obligatoria o ceda el paso.",
            "Cuando no hay señales de vía preferente."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T510101_250216.jpg"
    },
    {
        "text": "Este turismo circula en llano. ¿Cuándo necesita más distancia (espacio) para frenar?",
        "options": [
            "Cuando el vehículo lleva poco peso.",
            "Cuando el vehículo lleva mucho peso.",
            "Frena siempre igual, porque los frenos se adaptan al peso."
        ],
        "correct": "B",
        "image": "../../../Assets/img/I3723.jpg"
    },
    {
        "text": "Invertir en la seguridad de un vehículo es...",
        "options": [
            "importante, ya que puede contribuir a evitar que se produzca un accidente.",
            "poco importante, ya que lo fundamental es mejorar las condiciones de la vía.",
            "poco importante, ya que sólo el conductor puede evitar los accidentes."
        ],
        "correct": "A",
        "image": "../../../Assets/img/I3724.jpg"
    },
    {
        "text": "En esta vía, la velocidad máxima permitida a los turismos es...",
        "options": [
            "80 kilómetros por hora.",
            "100 kilómetros por hora.",
            "90 kilómetros por hora."
        ],
        "correct": "C",
        "image": "../../../Assets/img/I3725.jpg"
    },
    {
        "text": "Cuando estamos repostando combustible, ¿es obligatorio apagar el motor del vehículo?",
        "options": [
            "Sí, siempre.",
            "Sí, pero no es necesario si es el empleado de la gasolinera quien llena el depósito.",
            "No."
        ],
        "correct": "A",
        "image": "../../../Assets/img/I3726.jpg"
    },
    {
        "text": "En un vehículo sobrecargado...",
        "options": [
            "se ve afectada la distancia de reacción.",
            "se disminuye la estabilidad y la capacidad de frenado.",
            "únicamente aumenta el consumo de combustible."
        ],
        "correct": "B",
        "image": "../../../Assets/img/I3727.jpg"
    },
    {
        "text": "¿Dónde está permitido que viaje un niño que no alcance los 135 centímetros de estatura?",
        "options": [
            "En cualquiera de los asientos traseros utilizando el cinturón para adultos.",
            "En un asiento delantero o trasero, utilizando un dispositivo de retención homologado en función de su talla y peso.",
            "En un asiento trasero utilizando siempre un dispositivo de retención homologado en función de su talla y peso."
        ],
        "correct": "C",
        "image": "../../../Assets/img/I3728.jpg"
    },
    {
        "text": "Respetar la prioridad de paso por parte de los conductores de motocicletas, ¿puede evitar accidentes?",
        "options": [
            "Sí.",
            "No, porque estos conductores no dificultan la visibilidad.",
            "No, porque ocupan poco lugar en la calzada."
        ],
        "correct": "A",
        "image": "../../../Assets/img/I3729.jpg"
    },
    {
        "text": "¿Puede mantener encendida la luz de largo alcance cuando efectúe una parada?",
        "options": [
            "No, está prohibido.",
            "Sí, cuando la vía está insuficientemente iluminada.",
            "Sí, en vías interurbanas."
        ],
        "correct": "A",
        "image": "../../../Assets/img/I3730.jpg"
    }
]
            
            ;

            const container = document.getElementById('test-container');
            const paginationRow1 = document.getElementById('pagination-row-1');
            const paginationRow2 = document.getElementById('pagination-row-2');

            // Generar preguntas
            questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.setAttribute('data-correct', question.correct);
                questionDiv.innerHTML = `
                    <div class="question-image">
                        <img src="${question.image}" alt="Imagen de la pregunta">
                    </div>
                    <div class="question-content">
                        <h3>${index + 1}. ${question.text}</h3>
                        <div class="options">
                            ${question.options.map((option, idx) => `
                                <div class="option" data-answer="${String.fromCharCode(65 + idx)}">
                                    <span class="option-circle">${String.fromCharCode(65 + idx)}</span>
                                    ${option}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                container.appendChild(questionDiv);
            });

            // Generar paginación
            for (let i = 0; i < questions.length; i++) {
                const button = document.createElement('button');
                button.textContent = `${i + 1}`;
                button.addEventListener('click', () => showQuestion(i));
                if (i < 15) {
                    paginationRow1.appendChild(button);
                } else {
                    paginationRow2.appendChild(button);
                }
            }

            // Mostrar la primera pregunta
            showQuestion(0);

            // Función para mostrar una pregunta específica
            function showQuestion(index) {
                document.querySelectorAll('.question').forEach((q, i) => {
                    q.style.display = i === index ? 'flex' : 'none';
                });
                document.querySelectorAll('.pagination button').forEach((btn, i) => {
                    btn.style.backgroundColor = i === index ? '#ff7aa2' : '#ffa5c3';
                });
            }

            // Evento para las opciones de respuesta
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const question = this.closest('.question');
                    const questionIndex = Array.from(container.children).indexOf(question);
                    const isCorrect = this.getAttribute('data-answer') === question.getAttribute('data-correct');
                    
                    if (question.dataset.answered) return;

                    question.dataset.answered = true;

                    question.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                        opt.style.pointerEvents = 'none';
                    });
                    
                    this.classList.add('selected', isCorrect ? 'correct' : 'incorrect');

                    if (!isCorrect) {
                        question.querySelector(`.option[data-answer="${question.getAttribute('data-correct')}"]`).classList.add('correct');
                    }

                    // Actualizar el botón de paginación
                    const paginationButton = questionIndex < 15 ? paginationRow1.children[questionIndex] : paginationRow2.children[questionIndex - 15];
                    paginationButton.classList.add(isCorrect ? 'correct' : 'incorrect');
                });
            });

            // Evento para corregir el test
            document.getElementById('correct-test').addEventListener('click', () => {
                let wrongAnswers = 0;
                document.querySelectorAll('.question').forEach((question, index) => {
                    const selected = question.querySelector('.option.selected');
                    const isCorrect = selected && selected.getAttribute('data-answer') === question.getAttribute('data-correct');
                    if (!isCorrect) {
                        wrongAnswers++;
                    }
                    // Actualizar el botón de paginación si no se ha respondido
                    if (!selected) {
                        const paginationButton = index < 15 ? paginationRow1.children[index] : paginationRow2.children[index - 15];
                        paginationButton.classList.add('incorrect');
                    }
                });
                const resultMessage = `Has fallado ${wrongAnswers} respuestas.`;

                const alert = document.getElementById('custom-alert');
                document.getElementById('alert-message').textContent = resultMessage;
                alert.style.display = 'block';
            });
        });

        function closeAlert() {
            document.getElementById('custom-alert').style.display = 'none';
        }
    </script>

    
</body>
</html>