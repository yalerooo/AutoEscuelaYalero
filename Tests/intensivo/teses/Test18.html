<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Autoescuela</title>
    <link rel="stylesheet" href="../../../Assets/style.css">
</head>
<body>

    
    <div class="container">
        <h1 style="text-align: center; color: #ffa5c3;">Test de Autoescuela</h1>
        <div id="test-container">
            <!-- Aquí se generarán dinámicamente las preguntas -->
        </div>
        <div class="pagination">
            <div class="pagination-row" id="pagination-row-1"></div>
            <div class="pagination-row" id="pagination-row-2"></div>
        </div>
        <button id="correct-test">Corregir Test</button>
    </div>

    <!-- Custom Alert HTML -->
    <div class="custom-alert" id="custom-alert">
        <h2>Resultado del Test</h2>
        <p id="alert-message">Aquí irá el mensaje del resultado.</p>
        <button onclick="closeAlert()">Cerrar</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const questions = [
    {
        "text": "Las circunstancias que aumentan la probabilidad de que ocurra un accidente se denominan...",
        "options": [
            "marcadores de riesgo.",
            "factores de accidentalidad directa.",
            "factores de riesgo."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T500714.jpg"
    },
    {
        "text": "La luz antiniebla trasera deberá utilizarse en caso de...",
        "options": [
            "Circulación intensa.",
            "Lluvia muy intensa.",
            "Fuerte viento."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T510109_050517.jpg"
    },
    {
        "text": "¿Quién tiene preferencia de paso en esta intersección?",
        "options": [
            "El tranvía.",
            "El automóvil.",
            "El que circule por la vía principal."
        ],
        "correct": "A",
        "image": "../../../Assets/img/I4803.jpg"
    },
    {
        "text": "La conducción bajo los efectos del alcohol o de las drogas, ¿está considerada delito en el código penal?",
        "options": [
            "No, las sanciones son exclusivamente económicas.",
            "La conducción bajo los efectos del alcohol no, la conducción bajo los efectos de las drogas sí.",
            "Sí."
        ],
        "correct": "C",
        "image": "../../../Assets/img/I4804.jpg"
    },
    {
        "text": "Se prohíbe circular con el llamado escape libre...",
        "options": [
            "sólo en vías interurbanas.",
            "sólo en vías urbanas.",
            "tanto en vías urbanas como interurbanas."
        ],
        "correct": "C",
        "image": "../../../Assets/img/I4805.jpg"
    },
    {
        "text": "Esta señal indica...",
        "options": [
            "peligro por la existencia de un tramo de vía con fuerte pendiente ascendente.",
            "peligro por posible proyección de gravilla al paso de los vehículos.",
            "peligro por la proximidad a una zona con desprendimientos frecuentes."
        ],
        "correct": "C",
        "image": "../../../Assets/img/I4806.jpg"
    },
    {
        "text": "El vehículo lleva dos rectángulos amarillos con borde rojo. ¿Qué indican?",
        "options": [
            "Que el vehículo transporta mercancías peligrosas.",
            "Que es un vehículo largo y mide más de 12 metros.",
            "Que es un vehículo ancho y mide más de 2 metros."
        ],
        "correct": "B",
        "image": "../../../Assets/img/I4807.jpg"
    },
    {
        "text": "¿Cuándo se producen más accidentes de ciclistas, en verano o en invierno?",
        "options": [
            "Es indiferente.",
            "En invierno, debido a las condiciones meteorológicas adversas.",
            "En verano, puesto que con la llegada del buen tiempo hay más ciclistas en las carreteras."
        ],
        "correct": "C",
        "image": "../../../Assets/img/I4808.jpg"
    },
    {
        "text": "Un automóvil de tres ruedas dispuestas asimétricamente, provisto de un motor de cilindrada superior a 50 cm³, si es de combustión interna, y/o con una velocidad máxima por construcción superior a 45 km/h es...",
        "options": [
            "un cuadriciclo ligero.",
            "una motocicleta con sidecar.",
            "un vehículo de tres ruedas."
        ],
        "correct": "B",
        "image": "../../../Assets/img/I4809.jpg"
    },
    {
        "text": "La vía, su entorno y el propio vehículo, ¿pueden favorecer la aparición de distracciones al volante?",
        "options": [
            "Sí, el vehículo y la vía pero no su entorno.",
            "Sí, la vía pero no su entorno.",
            "Sí."
        ],
        "correct": "C",
        "image": "../../../Assets/img/I4810.jpg"
    },
    {
        "text": "En una carretera convencional, la velocidad máxima genérica a la que puede circular un automóvil derivado de turismo es de...",
        "options": [
            "80 km/h.",
            "90 km/h.",
            "120 km/h."
        ],
        "correct": "B",
        "image": "../../../Assets/img/I4811.jpg"
    },
    {
        "text": "El seguro obligatorio, ¿cubre los daños ocasionados en el vehículo asegurado?",
        "options": [
            "Sí.",
            "No.",
            "Sí, cuando su conductor no sea culpable del accidente."
        ],
        "correct": "B",
        "image": "../../../Assets/img/I4812.jpg"
    },
    {
        "text": "Un ciclomotor de dos ruedas está obligado a llevar...",
        "options": [
            "sólo el retrovisor derecho.",
            "sólo el retrovisor izquierdo.",
            "dos retrovisores, uno en cada lado."
        ],
        "correct": "B",
        "image": "../../../Assets/img/I4813.jpg"
    },
    {
        "text": "Ante un tratamiento farmacológico, ¿reaccionan todas las personas de igual forma?",
        "options": [
            "Sí, ya que los medicamentos siempre producen los mismos efectos.",
            "No, depende únicamente del estado físico.",
            "No, ya que circunstancias individuales como la fatiga o estar en ayunas pueden variar los efectos."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T510114_150916.jpg"
    },
    {
        "text": "Bajo los efectos de la fatiga...",
        "options": [
            "aparecen los cambios de postura frecuentes y los estiramientos.",
            "aumenta la concentración en la conducción.",
            "la sensibilidad auditiva aumenta."
        ],
        "correct": "A",
        "image": "../../../Assets/img/I4815.jpg"
    },
    {
        "text": "En un día de frío y lluvia, circula conduciendo su motocicleta. En estas circunstancias...",
        "options": [
            "al frenar, la distancia de detención es siempre menor, sobre todo si la motocicleta dispone de frenos de tambor.",
            "la conducción será más cómoda y segura si la motocicleta dispone de carenado.",
            "conviene tomar algún estimulante o bebida alcohólica para combatir el frío."
        ],
        "correct": "B",
        "image": "../../../Assets/img/I4816.jpg"
    },
    {
        "text": "¿Es obligatorio llevar un juego de cadenas para la nieve en el vehículo?",
        "options": [
            "No.",
            "Sí.",
            "Sólo en invierno."
        ],
        "correct": "A",
        "image": "../../../Assets/img/I4817.jpg"
    },
    {
        "text": "El semáforo de la derecha está verde y el de la izquierda está rojo; para continuar de frente, ¿qué se debe hacer?",
        "options": [
            "Seguir de frente porque me lo permite el de la derecha.",
            "Cambiar al carril izquierdo y esperar a que se ponga verde el de la izquierda.",
            "Esperar a que se pongan los dos verdes."
        ],
        "correct": "B",
        "image": "../../../Assets/img/I4818.jpg"
    },
    {
        "text": "El medio ambiente, ¿se ve afectado por los accidentes de tráfico?",
        "options": [
            "No.",
            "Sí.",
            "Únicamente en vía interurbana."
        ],
        "correct": "B",
        "image": "../../../Assets/img/I4819.jpg"
    },
    {
        "text": "Circular marcha atrás, ¿está prohibido?",
        "options": [
            "No, excepto en autopistas y autovías.",
            "Sí, si hay otros usuarios en las proximidades.",
            "Sí, salvo que no pueda marchar hacia delante o cambiar de dirección o sentido."
        ],
        "correct": "C",
        "image": "../../../Assets/img/I4820.jpg"
    },
    {
        "text": "Los cinturones de seguridad y los airbags son sistemas de...",
        "options": [
            "conducción eficiente.",
            "seguridad activa.",
            "seguridad pasiva."
        ],
        "correct": "C",
        "image": "../../../Assets/img/I4821.jpg"
    },
    {
        "text": "No está permitido utilizar la luz de largo alcance...",
        "options": [
            "para avisar a otros usuarios de un posible peligro.",
            "si el vehículo está parado o estacionado.",
            "en túneles y tramos de vía afectados por señal de túnel."
        ],
        "correct": "B",
        "image": "../../../Assets/img/I4822.jpg"
    },
    {
        "text": "Una motocicleta de 250 c.c., ¿cuántas placas de matrícula lleva?",
        "options": [
            "Una sola placa en la parte posterior, en posición vertical.",
            "Una sola placa en la parte delantera.",
            "Dos, una en la parte delantera y la otra en la parte posterior."
        ],
        "correct": "A",
        "image": "../../../Assets/img/I4823.jpg"
    },
    {
        "text": "Los medicamentos naturales, ¿pueden tener efectos negativos para la conducción?",
        "options": [
            "Sí, todos.",
            "Sí, en algunos casos.",
            "No, son siempre inofensivos."
        ],
        "correct": "B",
        "image": "../../../Assets/img/I4824.jpg"
    },
    {
        "text": "¿Tiene alguna obligación cuando su vehículo va a ser adelantado?",
        "options": [
            "No, la responsabilidad es del vehículo que adelanta.",
            "Sí, ceñirse al borde derecho de la calzada para facilitar la maniobra.",
            "Sí, señalizar con el intermitente derecho para indicar que puede realizar la maniobra con seguridad."
        ],
        "correct": "B",
        "image": "../../../Assets/img/I4825.jpg"
    },
    {
        "text": "En los vehículos de anchura inferior a un metro la carga no debe sobresalir lateralmente más de...",
        "options": [
            "0,50 metros a cada lado del eje longitudinal del vehículo.",
            "0,50 metros a cada lado del vehículo.",
            "0,40 metros a cada lado del vehículo."
        ],
        "correct": "A",
        "image": "../../../Assets/img/I4826.jpg"
    },
    {
        "text": "¿Cuándo tiene que pasar la ITV un camión de 2.700 kg de MMA y que tiene siete años de antigüedad?",
        "options": [
            "Cada seis meses.",
            "Cada dos años.",
            "Anualmente."
        ],
        "correct": "C",
        "image": "../../../Assets/img/I4827.jpg"
    },
    {
        "text": "¿El exceso de ruido afecta más a las personas mayores en la conducción?",
        "options": [
            "Sí, porque escuchan peor.",
            "Afecta de igual modo que al resto de personas.",
            "No."
        ],
        "correct": "A",
        "image": "../../../Assets/img/I4828.jpg"
    },
    {
        "text": "El permiso de la clase B, ¿autoriza a conducir un cuadriciclo ligero?",
        "options": [
            "No.",
            "Sí.",
            "Sí, cuando no se dedica al transporte de mercancías."
        ],
        "correct": "B",
        "image": "../../../Assets/img/I4829.jpg"
    },
    {
        "text": "Circulas por...",
        "options": [
            "una carretera convencional y la salida es hacia una vía para automóviles.",
            "una autopista y la salida es hacia carretera convencional.",
            "una autopista y la salida es hacia autovía."
        ],
        "correct": "B",
        "image": "../../../Assets/img/I4830.jpg"
    }
]
            
            ;

            const container = document.getElementById('test-container');
            const paginationRow1 = document.getElementById('pagination-row-1');
            const paginationRow2 = document.getElementById('pagination-row-2');

            // Generar preguntas
            questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.setAttribute('data-correct', question.correct);
                questionDiv.innerHTML = `
                    <div class="question-image">
                        <img src="${question.image}" alt="Imagen de la pregunta">
                    </div>
                    <div class="question-content">
                        <h3>${index + 1}. ${question.text}</h3>
                        <div class="options">
                            ${question.options.map((option, idx) => `
                                <div class="option" data-answer="${String.fromCharCode(65 + idx)}">
                                    <span class="option-circle">${String.fromCharCode(65 + idx)}</span>
                                    ${option}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                container.appendChild(questionDiv);
            });

            // Generar paginación
            for (let i = 0; i < questions.length; i++) {
                const button = document.createElement('button');
                button.textContent = `${i + 1}`;
                button.addEventListener('click', () => showQuestion(i));
                if (i < 15) {
                    paginationRow1.appendChild(button);
                } else {
                    paginationRow2.appendChild(button);
                }
            }

            // Mostrar la primera pregunta
            showQuestion(0);

            // Función para mostrar una pregunta específica
            function showQuestion(index) {
                document.querySelectorAll('.question').forEach((q, i) => {
                    q.style.display = i === index ? 'flex' : 'none';
                });
                document.querySelectorAll('.pagination button').forEach((btn, i) => {
                    btn.style.backgroundColor = i === index ? '#ff7aa2' : '#ffa5c3';
                });
            }

            // Evento para las opciones de respuesta
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const question = this.closest('.question');
                    const questionIndex = Array.from(container.children).indexOf(question);
                    const isCorrect = this.getAttribute('data-answer') === question.getAttribute('data-correct');
                    
                    if (question.dataset.answered) return;

                    question.dataset.answered = true;

                    question.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                        opt.style.pointerEvents = 'none';
                    });
                    
                    this.classList.add('selected', isCorrect ? 'correct' : 'incorrect');

                    if (!isCorrect) {
                        question.querySelector(`.option[data-answer="${question.getAttribute('data-correct')}"]`).classList.add('correct');
                    }

                    // Actualizar el botón de paginación
                    const paginationButton = questionIndex < 15 ? paginationRow1.children[questionIndex] : paginationRow2.children[questionIndex - 15];
                    paginationButton.classList.add(isCorrect ? 'correct' : 'incorrect');
                });
            });

            // Evento para corregir el test
            document.getElementById('correct-test').addEventListener('click', () => {
                let wrongAnswers = 0;
                document.querySelectorAll('.question').forEach((question, index) => {
                    const selected = question.querySelector('.option.selected');
                    const isCorrect = selected && selected.getAttribute('data-answer') === question.getAttribute('data-correct');
                    if (!isCorrect) {
                        wrongAnswers++;
                    }
                    // Actualizar el botón de paginación si no se ha respondido
                    if (!selected) {
                        const paginationButton = index < 15 ? paginationRow1.children[index] : paginationRow2.children[index - 15];
                        paginationButton.classList.add('incorrect');
                    }
                });
                const resultMessage = `Has fallado ${wrongAnswers} respuestas.`;

                const alert = document.getElementById('custom-alert');
                document.getElementById('alert-message').textContent = resultMessage;
                alert.style.display = 'block';
            });
        });

        function closeAlert() {
            document.getElementById('custom-alert').style.display = 'none';
        }
    </script>

    
</body>
</html>