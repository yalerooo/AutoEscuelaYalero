<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Autoescuela</title>
    <link rel="stylesheet" href="../../../Assets/style.css">
</head>
<body>

    
    <div class="container">
        <h1 style="text-align: center; color: #ffa5c3;">Test de Autoescuela</h1>
        <div id="test-container">
            <!-- Aquí se generarán dinámicamente las preguntas -->
        </div>
        <div class="pagination">
            <div class="pagination-row" id="pagination-row-1"></div>
            <div class="pagination-row" id="pagination-row-2"></div>
        </div>
        <button id="correct-test">Corregir Test</button>
    </div>

    <!-- Custom Alert HTML -->
    <div class="custom-alert" id="custom-alert">
        <h2>Resultado del Test</h2>
        <p id="alert-message">Aquí irá el mensaje del resultado.</p>
        <button onclick="closeAlert()">Cerrar</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const questions = [
    {
        "text": "Cuando en una carretera se ha habilitado un carril adicional circunstancial, ¿qué vehículos están obligados a utilizar la luz de cruce tanto de día como de noche?",
        "options": [
            "Los vehículos que circulen por el carril adicional circunstancial.",
            "Todos los vehículos que circulen por la vía.",
            "Los vehículos que circulen por los arcenes."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P0315.jpg"
    },
    {
        "text": "Si el resultado de las pruebas de alcoholemia es positivo el agente podrá inmovilizar el vehículo, a no ser...",
        "options": [
            "que el conductor haga efectiva en el acto la sanción económica impuesta.",
            "que en el vehículo viajen niños o ancianos.",
            "que pueda hacerse cargo de su conducción otra persona debidamente habilitada."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P2512.jpg"
    },
    {
        "text": "Esta señal indica...",
        "options": [
            "la entrada a una autopista o autovía de dos carriles.",
            "una calzada de sentido único y dos carriles.",
            "que se permite la circulación en paralelo."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P1628.jpg"
    },
    {
        "text": "Los cristales de su vehículo están cubiertos de hielo. Antes de ponerse en marcha, ¿qué debe hacer?",
        "options": [
            "Limpiar solamente el parabrisas.",
            "Limpiar solamente los cristales de la zona delantera.",
            "Limpiar todos los cristales."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P3027.jpg"
    },
    {
        "text": "¿Está permitido llevar las puertas o el maletero abiertos para aumentar la capacidad de carga?",
        "options": [
            "Las puertas no, pero sí el maletero si está sujeto de forma que no pueda caer la carga.",
            "No, excepto en los vehículos destinados al transporte de mercancías.",
            "No."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P1923.jpg"
    },
    {
        "text": "¿Qué factores intervienen en un accidente?",
        "options": [
            "El factor humano, el factor vía y entorno y el factor vehículo.",
            "El factor humano, exclusivamente.",
            "El factor vía y el factor humano exclusivamente."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T501604.jpg"
    },
    {
        "text": "Si al llegar a la intersección nos encontramos que junto a la señal vertical de \"stop\" tenemos un semáforo que está en fase de amarillo intermitente, ¿qué debemos hacer?",
        "options": [
            "Detenernos para cumplir con la señal de stop.",
            "Pasar con precaución porque el semáforo prevalece sobre el stop. ",
            "Si giro a la derecha, respetaré la señal de stop. "
        ],
        "correct": "A",
        "image": "../../../Assets/img/P1204.jpg"
    },
    {
        "text": "Al comprar un casco, ¿qué debe tener en cuenta?",
        "options": [
            "Que esté homologado, además de su talla y el material con que esté fabricado.",
            "Únicamente que esté homologado.",
            "La marca."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P2919.jpg"
    },
    {
        "text": "Como norma general, ¿en qué vías está prohibido circular marcha atrás?",
        "options": [
            "Sólo en las vías urbanas.",
            "Sólo en las autopistas y autovías.",
            "En todas las vías, salvo como complemento a determinadas maniobras."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P0922.jpg"
    },
    {
        "text": "Con el permiso B, ¿se puede conducir algún vehículo de más de 3.500 kg?",
        "options": [
            "No.",
            "Sí.",
            "Sí, pero debe tener una antigüedad superior a 3 años."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P2002.jpg"
    },
    {
        "text": "Es obligatorio finalizar un adelantamiento...",
        "options": [
            "incorporándose al carril derecho a la mayor velocidad posible.",
            "únicamente señalizando el desplazamiento lateral.",
            "incorporándose al carril de forma gradual sin obstaculizar."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P0815.jpg"
    },
    {
        "text": "En el borde izquierdo de una calzada, ¿se puede parar con carácter general?",
        "options": [
            "Sí, siempre que no obstaculice la circulación.",
            "No, en ningún caso.",
            "Sí, en vías urbanas de sentido único."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P1009.jpg"
    },
    {
        "text": "En esta intersección no hay línea de detención. ¿Dónde hay que detenerse?",
        "options": [
            "A una distancia mínima de 5 metros antes de la intersección.",
            "Dentro de la intersección.",
            "Antes de entrar en la intersección."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P0519.jpg"
    },
    {
        "text": "¿Cuántos espejos retrovisores llevará como máximo un turismo?",
        "options": [
            "3",
            "4",
            "2"
        ],
        "correct": "A",
        "image": "../../../Assets/img/P2620.jpg"
    },
    {
        "text": "Esta señal prohíbe el paso a los vehículos que superen...",
        "options": [
            "la anchura máxima indicada en la señal.",
            "la altura máxima, sin incluir la carga, indicada en la señal.",
            "la altura máxima, incluida la carga, indicada en la señal."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P1519.jpg"
    },
    {
        "text": "La dirección del vehículo es un sistema de seguridad...",
        "options": [
            "activa y pasiva a la vez.",
            "activa.",
            "pasiva."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P2727.jpg"
    },
    {
        "text": "Si conduce un ciclomotor, ¿puede atravesar este cebreado?",
        "options": [
            "Sí, porque está obligado a circular por el arcén.",
            "No, por las zonas cebreadas está prohibido circular siempre.",
            "Sí, porque los vehículos de dos ruedas pueden circular por estas zonas."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P1821.jpg"
    },
    {
        "text": "En general, ¿a quiénes afecta más el alcohol?",
        "options": [
            "A los hombres.",
            "A las mujeres.",
            "Los efectos del alcohol no dependen del sexo de la persona."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P2422.jpg"
    },
    {
        "text": "Su vehículo que no tiene luces antiniebla delanteras, ¿qué alumbrado debe encender cuando hay niebla?",
        "options": [
            "El de corto alcance o el de largo alcance.",
            "El de posición solamente.",
            "El de largo alcance, solamente."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P1125.jpg"
    },
    {
        "text": "¿Qué medidas debe adoptar si se produce un accidente?",
        "options": [
            "Auxiliar a los heridos lo antes posible y avisar a las autoridades.",
            "Detener el tráfico, auxiliar a los heridos y después avisar a las autoridades.",
            "Detener su vehículo sin crear peligro, avisar a la autoridad o sus agentes y auxiliar a los heridos."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P3103.jpg"
    },
    {
        "text": "Se debe circular a velocidad moderada y, si fuera preciso, detener el vehículo, al aproximarse a un...",
        "options": [
            "paso a nivel.",
            "vehículo inmovilizado en la calzada, fuera o dentro de poblado.",
            "semáforo."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P0429.jpg"
    },
    {
        "text": "Los peatones, ¿tienen los mismos derechos que los conductores para utilizar las vías públicas?",
        "options": [
            "No.",
            "Sí.",
            "Sólo en las calles residenciales."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P0123.jpg"
    },
    {
        "text": "¿Está permitido advertir con el brazo que va a efectuar una maniobra?",
        "options": [
            "No, porque no se deben sacar los brazos fuera del turismo.",
            "No, debe advertirlo también con los intermitentes.",
            "Sí, cuando la señal sea perceptible para los demás usuarios."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P0704.jpg"
    },
    {
        "text": "¿Cuáles son las ruedas motrices en un vehículo?",
        "options": [
            "Las delanteras, las traseras, o todas ellas, dependiendo de qué eje, o ejes, reciban la potencia del motor.",
            "Las delanteras, siempre que el motor esté situado en la parte delantera del vehículo.",
            "Las ruedas motrices son siempre las traseras, independientemente del lugar donde el vehículo lleve situado el motor."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P3219.jpg"
    },
    {
        "text": "Esta señal advierte de la proximidad de...",
        "options": [
            "una calzada con pavimento en mal estado.",
            "un cambio de rasante.",
            "un paso para peatones elevado."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P1415.jpg"
    },
    {
        "text": "Los distribuidores de mercancías, ¿están exentos de utilizar el cinturón de seguridad?",
        "options": [
            "Sí, en vías de poblado cuando realicen operaciones frecuentes de carga y descarga.",
            "No, aunque realicen operaciones frecuentes de carga y descarga.",
            "Sí, en todas las vías cuando realicen operaciones de carga y descarga a corta distancia."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P2822.jpg"
    },
    {
        "text": "Circulando observa que se aproxima una ambulancia en servicio urgente. Debe tener en cuenta que...",
        "options": [
            "deberá circular a mayor velocidad para abrirle paso.",
            "puede saltarse algún semáforo para dejar pasar a la ambulancia.",
            "debe facilitarle el paso apartándose a la derecha o deteniéndose si fuera preciso."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T503916.jpg"
    },
    {
        "text": "Para realizar una conducción económica se recomienda en los motores de gasolina realizar los cambios de marcha...",
        "options": [
            "entre 1.500 rpm a 2.000 revoluciones por minuto.",
            "entre 3.000 rpm a 3.500 revoluciones por minuto.",
            "entre 2.000 rpm a 2.500 revoluciones por minuto."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P3408.jpg"
    },
    {
        "text": "La flecha verde del semáforo de carril, ¿qué indica?",
        "options": [
            "Que el carril está abierto, pero se deben obedecer las señales y normas de preferencia.",
            "Que el carril está abierto y otorga preferencia sobre los demás vehículos.",
            "Que el carril está abierto, excepto para vehículos pesados."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P1322.jpg"
    },
    {
        "text": "El alumbrado, los neumáticos y los frenos pertenecen al sistema de...",
        "options": [
            "conducción eficiente.",
            "seguridad pasiva.",
            "seguridad activa."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P3310.jpg"
    }
]
            
            ;

            const container = document.getElementById('test-container');
            const paginationRow1 = document.getElementById('pagination-row-1');
            const paginationRow2 = document.getElementById('pagination-row-2');

            // Generar preguntas
            questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.setAttribute('data-correct', question.correct);
                questionDiv.innerHTML = `
                    <div class="question-image">
                        <img src="${question.image}" alt="Imagen de la pregunta">
                    </div>
                    <div class="question-content">
                        <h3>${index + 1}. ${question.text}</h3>
                        <div class="options">
                            ${question.options.map((option, idx) => `
                                <div class="option" data-answer="${String.fromCharCode(65 + idx)}">
                                    <span class="option-circle">${String.fromCharCode(65 + idx)}</span>
                                    ${option}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                container.appendChild(questionDiv);
            });

            // Generar paginación
            for (let i = 0; i < questions.length; i++) {
                const button = document.createElement('button');
                button.textContent = `${i + 1}`;
                button.addEventListener('click', () => showQuestion(i));
                if (i < 15) {
                    paginationRow1.appendChild(button);
                } else {
                    paginationRow2.appendChild(button);
                }
            }

            // Mostrar la primera pregunta
            showQuestion(0);

            // Función para mostrar una pregunta específica
            function showQuestion(index) {
                document.querySelectorAll('.question').forEach((q, i) => {
                    q.style.display = i === index ? 'flex' : 'none';
                });
                document.querySelectorAll('.pagination button').forEach((btn, i) => {
                    btn.style.backgroundColor = i === index ? '#ff7aa2' : '#ffa5c3';
                });
            }

            // Evento para las opciones de respuesta
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const question = this.closest('.question');
                    const questionIndex = Array.from(container.children).indexOf(question);
                    const isCorrect = this.getAttribute('data-answer') === question.getAttribute('data-correct');
                    
                    if (question.dataset.answered) return;

                    question.dataset.answered = true;

                    question.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                        opt.style.pointerEvents = 'none';
                    });
                    
                    this.classList.add('selected', isCorrect ? 'correct' : 'incorrect');

                    if (!isCorrect) {
                        question.querySelector(`.option[data-answer="${question.getAttribute('data-correct')}"]`).classList.add('correct');
                    }

                    // Actualizar el botón de paginación
                    const paginationButton = questionIndex < 15 ? paginationRow1.children[questionIndex] : paginationRow2.children[questionIndex - 15];
                    paginationButton.classList.add(isCorrect ? 'correct' : 'incorrect');
                });
            });

            // Evento para corregir el test
            document.getElementById('correct-test').addEventListener('click', () => {
                let wrongAnswers = 0;
                document.querySelectorAll('.question').forEach((question, index) => {
                    const selected = question.querySelector('.option.selected');
                    const isCorrect = selected && selected.getAttribute('data-answer') === question.getAttribute('data-correct');
                    if (!isCorrect) {
                        wrongAnswers++;
                    }
                    // Actualizar el botón de paginación si no se ha respondido
                    if (!selected) {
                        const paginationButton = index < 15 ? paginationRow1.children[index] : paginationRow2.children[index - 15];
                        paginationButton.classList.add('incorrect');
                    }
                });
                const resultMessage = `Has fallado ${wrongAnswers} respuestas.`;

                const alert = document.getElementById('custom-alert');
                document.getElementById('alert-message').textContent = resultMessage;
                alert.style.display = 'block';
            });
        });

        function closeAlert() {
            document.getElementById('custom-alert').style.display = 'none';
        }
    </script>

    
</body>
</html>