<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Autoescuela</title>
    <link rel="stylesheet" href="../../../Assets/style.css">
</head>
<body>

    
    <div class="container">
        <h1 style="text-align: center; color: #ffa5c3;">Test de Autoescuela</h1>
        <div id="test-container">
            <!-- Aquí se generarán dinámicamente las preguntas -->
        </div>
        <div class="pagination">
            <div class="pagination-row" id="pagination-row-1"></div>
            <div class="pagination-row" id="pagination-row-2"></div>
        </div>
        <button id="correct-test">Corregir Test</button>
    </div>

    <!-- Custom Alert HTML -->
    <div class="custom-alert" id="custom-alert">
        <h2>Resultado del Test</h2>
        <p id="alert-message">Aquí irá el mensaje del resultado.</p>
        <button onclick="closeAlert()">Cerrar</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const questions = [
    {
        "text": "La señal indica peligro por...",
        "options": [
            "una intersección con cambio obligatorio del sentido de la marcha.",
            "una intersección con prioridad.",
            "la proximidad de una intersección donde la circulación es giratoria."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P1407.jpg"
    },
    {
        "text": "Durante el primer año de conducción, ¿qué limitaciones hay?",
        "options": [
            "No puede circular a más de 80 Km/h.",
            "No puede circular por autopistas.",
            "No puede circular sin la placa"
        ],
        "correct": "C",
        "image": "../../../Assets/img/P2005.jpg"
    },
    {
        "text": "¿Qué debe hacer un conductor que ha sido deslumbrado?",
        "options": [
            "Desviarse siempre a la derecha para detenerse en el arcén.",
            "Reducir la velocidad, incluso hasta llegar a detenerse totalmente, si fuera necesario.",
            "Encender el alumbrado de largo alcance."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P1111.jpg"
    },
    {
        "text": "La mayoría de los accidentes se deben...",
        "options": [
            "al estado del vehículo.",
            "al estado de la vía.",
            "al factor humano."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T500813.jpg"
    },
    {
        "text": "En una vía de doble sentido, ¿por qué lado de una isleta se circulará?",
        "options": [
            "Por su derecha.",
            "Por su izquierda.",
            "Por su derecha o por su izquierda, indistintamente."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P0216.jpg"
    },
    {
        "text": "Un peatón, ¿está obligado a someterse a una prueba de control de alcoholemia?",
        "options": [
            "Sí, cuando se pueda sospechar que está bajo la influencia de bebidas alcohólicas.",
            "Sí, cuando esté implicado directamente como posible responsable de un accidente, o haya cometido una infracción.",
            "No, en ningún caso."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P2501.jpg"
    },
    {
        "text": "El vehículo estacionado se quiere incorporar a la circulación. ¿Qué debe hacer?",
        "options": [
            "Debe advertirlo tocando el claxon.",
            "No tiene obligación de advertirlo.",
            "Debe advertirlo con los indicadores de dirección."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P0724.jpg"
    },
    {
        "text": "Un turismo debe llevar las herramientas indispensables para...",
        "options": [
            "el cambio de la rueda de repuesto.",
            "efectuar pequeñas reparaciones.",
            "el cambio de manguitos, correas y bujías."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P3227.jpeg"
    },
    {
        "text": "¿Puede circular cualquier vehículo por esta vía?",
        "options": [
            "Sí, excepto camiones y furgones.",
            "No, porque es una vía exclusiva para automóviles.",
            "Sí, cualquier vehículo."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P1611.jpg"
    },
    {
        "text": "En un accidente de tráfico puede sufrir un latigazo cervical si...",
        "options": [
            "lleva mal regulado el cinturón de seguridad.",
            "lleva mal regulado el apoyacabezas.",
            "se produce el efecto submarino."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P2907.jpg"
    },
    {
        "text": "Un vehículo lleva más carga que la Masa Máxima Autorizada (M.M.A.). ¿Está permitido circular así?",
        "options": [
            "Sí, pero solamente cuando transporta equipaje y personas dentro de poblado.",
            "Sí, cuando es un vehículo de transporte de mercancías.",
            "No, porque es peligroso."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P1921.jpg"
    },
    {
        "text": "En las motocicletas, la postura del conductor ha de ser...",
        "options": [
            "lo más aerodinámica posible, encorvando el cuerpo cuanto más mejor.",
            "suelta y no forzada, sin encorvar el cuerpo más de lo necesario.",
            "un poco forzada, para evitar relajamientos."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T504216.jpg"
    },
    {
        "text": "En los pasos para peatones y en sus proximidades, ¿está permitido adelantar?",
        "options": [
            "No, en ningún caso.",
            "Sí, cuando se realice a una velocidad tan reducida que permita detenerse a tiempo si surgiera peligro de atropello.",
            "Sí, cuando se haga a vehículos de dos ruedas que no impidan la visibilidad"
        ],
        "correct": "B",
        "image": "../../../Assets/img/P0822.jpg"
    },
    {
        "text": "Para repostar carburante, ¿cómo debe actuar?",
        "options": [
            "Sólo parar el motor y poner la primera relación de marchas.",
            "Solo apagar las luces.",
            "Parar el motor, apagar las luces, los equipos eléctricos y el móvil."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P0116.jpg"
    },
    {
        "text": "La velocidad máxima para un vehículo mixto adaptable en autopista es...",
        "options": [
            "100 km/h.",
            "120 km/h.",
            "90 km/h."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P0404.jpg"
    },
    {
        "text": "Para recordar las pautas básicas de actuación en un accidente se utiliza la regla PAS. Estas siglas significan...",
        "options": [
            "proteger, alertar y socorrer.",
            "prevenir, atender y servir.",
            "precaución, atención y seguridad."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P3105.jpg"
    },
    {
        "text": "¿Puede usted circular sobre las marcas viales del centro de la calzada?",
        "options": [
            "Sí, porque es un tramo recto y hay visibilidad.",
            "No.",
            "Sí, porque son discontinuas."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P1801.jpg"
    },
    {
        "text": "Las malas condiciones meteorológicas, como lluvia, viento o hielo, ¿pueden influir en los accidentes de motocicleta?",
        "options": [
            "No, las condiciones meteorológicas no influyen en la conducción de motocicletas.",
            "Sí, pero solamente cuando el conductor no va bien equipado.",
            "Sí, ya que existe mayor probabilidad de movimientos bruscos o caídas de los motoristas."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P3319.jpg"
    },
    {
        "text": "La señal significa...",
        "options": [
            "vía obligatoria para los autobuses.",
            "parada de autobuses.",
            "carril reservado para autobuses."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P1715.jpg"
    },
    {
        "text": "En una bajada, ¿qué hay que hacer para que no se calienten los frenos?",
        "options": [
            "Poner una velocidad más corta.",
            "Poner una velocidad más larga.",
            "Poner el freno de mano."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P3313.jpg"
    },
    {
        "text": "¿Está permitido estacionar en una zona señalizada para uso exclusivo de personas con movilidad reducida?",
        "options": [
            "No, está prohibido.",
            "Sí, siempre que no esté siendo utilizada por un vehículo autorizado.",
            "Solo si se estaciona durante menos de 30 minutos."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T510119_150616.jpg"
    },
    {
        "text": "Las enfermedades y los medicamentos, ¿pueden ser causa de un accidente?",
        "options": [
            "No, porque depende de otros factores.",
            "Sí, porque pueden afectar a las capacidades básicas para conducir.",
            "No, en ningún caso."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P2301.jpg"
    },
    {
        "text": "¿Está permitido circular marcha atrás para estacionar?",
        "options": [
            "Sí, la distancia indispensable, aunque sobrepase los 15 metros.",
            "Sí, 15 metros como máximo.",
            "No, está prohibido."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P0928.jpg"
    },
    {
        "text": "¿Qué debe hacer si sufre una avería en un túnel?",
        "options": [
            "Encender las luces de largo alcance para que se vea mejor y que todos los ocupantes desciendan del vehículo.",
            "Si la avería permite la marcha del vehículo, debe continuar hasta salir del túnel o hasta una zona reservada para emergencias.",
            "Detener el vehículo en cualquier lugar del túnel para evitar el peligro, aunque la avería permita la marcha del vehículo."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P1027.jpg"
    },
    {
        "text": "Los vehículos prioritarios, ¿tienen prioridad de paso sobre el resto de los usuarios de la vía?",
        "options": [
            "Sí.",
            "No.",
            "Sólo cuando circulen en servicio de urgencia."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T514727.jpg"
    },
    {
        "text": "¿Se debe aumentar la distancia de seguridad cuando exista niebla?",
        "options": [
            "La distancia no influye en la detención cuando hay niebla.",
            "Sí, para tener más espacio para reaccionar ante cualquier frenada del vehículo que va delante.",
            "No, si se llevan las luces encendidas."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P3006.jpg"
    },
    {
        "text": "¿Qué indica la señal?",
        "options": [
            "Carril obligatorio para ciclistas.",
            "Peligro por la proximidad de un paso para ciclistas.",
            "Prohíbe el paso a los ciclistas."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P1420.jpg"
    },
    {
        "text": "El tiempo de reacción...",
        "options": [
            "es el que tarda en detener totalmente el vehículo.",
            "es el que transcurre hasta que se observa una maniobra.",
            "es el que transcurre desde que un conductor observa un peligro hasta que ejecuta una maniobra."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P2201.jpg"
    },
    {
        "text": "¿Cuáles son los límites de velocidad que se aplican en los carriles reversibles?",
        "options": [
            "Se considerará como velocidad máxima permitida la de 80 km/h y como mínima permitida la de 60 km/h, siempre que no haya señales que indiquen lo contrario.",
            "Se considerará como máxima permitida los 70 km/h y como mínima los 50 km/h, como norma general.",
            "Se aplicarán los límites genéricos de la vía en la que se encuentre dicho carril."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P0312.jpg"
    },
    {
        "text": "El freno de pie, ¿sobre qué ruedas actúa?",
        "options": [
            "Las ruedas motrices.",
            "Las cuatro ruedas.",
            "Las ruedas delanteras."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P2715.jpg"
    }
]
            
            ;

            const container = document.getElementById('test-container');
            const paginationRow1 = document.getElementById('pagination-row-1');
            const paginationRow2 = document.getElementById('pagination-row-2');

            // Generar preguntas
            questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.setAttribute('data-correct', question.correct);
                questionDiv.innerHTML = `
                    <div class="question-image">
                        <img src="${question.image}" alt="Imagen de la pregunta">
                    </div>
                    <div class="question-content">
                        <h3>${index + 1}. ${question.text}</h3>
                        <div class="options">
                            ${question.options.map((option, idx) => `
                                <div class="option" data-answer="${String.fromCharCode(65 + idx)}">
                                    <span class="option-circle">${String.fromCharCode(65 + idx)}</span>
                                    ${option}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                container.appendChild(questionDiv);
            });

            // Generar paginación
            for (let i = 0; i < questions.length; i++) {
                const button = document.createElement('button');
                button.textContent = `${i + 1}`;
                button.addEventListener('click', () => showQuestion(i));
                if (i < 15) {
                    paginationRow1.appendChild(button);
                } else {
                    paginationRow2.appendChild(button);
                }
            }

            // Mostrar la primera pregunta
            showQuestion(0);

            // Función para mostrar una pregunta específica
            function showQuestion(index) {
                document.querySelectorAll('.question').forEach((q, i) => {
                    q.style.display = i === index ? 'flex' : 'none';
                });
                document.querySelectorAll('.pagination button').forEach((btn, i) => {
                    btn.style.backgroundColor = i === index ? '#ff7aa2' : '#ffa5c3';
                });
            }

            // Evento para las opciones de respuesta
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const question = this.closest('.question');
                    const questionIndex = Array.from(container.children).indexOf(question);
                    const isCorrect = this.getAttribute('data-answer') === question.getAttribute('data-correct');
                    
                    if (question.dataset.answered) return;

                    question.dataset.answered = true;

                    question.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                        opt.style.pointerEvents = 'none';
                    });
                    
                    this.classList.add('selected', isCorrect ? 'correct' : 'incorrect');

                    if (!isCorrect) {
                        question.querySelector(`.option[data-answer="${question.getAttribute('data-correct')}"]`).classList.add('correct');
                    }

                    // Actualizar el botón de paginación
                    const paginationButton = questionIndex < 15 ? paginationRow1.children[questionIndex] : paginationRow2.children[questionIndex - 15];
                    paginationButton.classList.add(isCorrect ? 'correct' : 'incorrect');
                });
            });

            // Evento para corregir el test
            document.getElementById('correct-test').addEventListener('click', () => {
                let wrongAnswers = 0;
                document.querySelectorAll('.question').forEach((question, index) => {
                    const selected = question.querySelector('.option.selected');
                    const isCorrect = selected && selected.getAttribute('data-answer') === question.getAttribute('data-correct');
                    if (!isCorrect) {
                        wrongAnswers++;
                    }
                    // Actualizar el botón de paginación si no se ha respondido
                    if (!selected) {
                        const paginationButton = index < 15 ? paginationRow1.children[index] : paginationRow2.children[index - 15];
                        paginationButton.classList.add('incorrect');
                    }
                });
                const resultMessage = `Has fallado ${wrongAnswers} respuestas.`;

                const alert = document.getElementById('custom-alert');
                document.getElementById('alert-message').textContent = resultMessage;
                alert.style.display = 'block';
            });
        });

        function closeAlert() {
            document.getElementById('custom-alert').style.display = 'none';
        }
    </script>

    
</body>
</html>