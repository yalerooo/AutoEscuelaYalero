<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Autoescuela</title>
    <link rel="stylesheet" href="../../../Assets/style.css">
</head>
<body>

    
    <div class="container">
        <h1 style="text-align: center; color: #ffa5c3;">Test de Autoescuela</h1>
        <div id="test-container">
            <!-- Aquí se generarán dinámicamente las preguntas -->
        </div>
        <div class="pagination">
            <div class="pagination-row" id="pagination-row-1"></div>
            <div class="pagination-row" id="pagination-row-2"></div>
        </div>
        <button id="correct-test">Corregir Test</button>
    </div>

    <!-- Custom Alert HTML -->
    <div class="custom-alert" id="custom-alert">
        <h2>Resultado del Test</h2>
        <p id="alert-message">Aquí irá el mensaje del resultado.</p>
        <button onclick="closeAlert()">Cerrar</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const questions = [
    {
        "text": "Esta señal...",
        "options": [
            "obliga a las bicicletas a circular por la vía que señaliza, pero no prohíbe hacerlo a los demás usuarios.",
            "indica que se trata de una vía reservada para ciclos y peatones.",
            "obliga a las bicicletas a circular por la vía que señaliza, y prohíbe hacerlo a los demás usuarios."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T513127.jpg"
    },
    {
        "text": "Un vehículo de una o más ruedas dotado de una única plaza y propulsado exclusivamente por motores eléctricos que pueden proporcionar al vehículo una velocidad máxima por diseño comprendida entre los 6 y los 25 km/h es:",
        "options": [
            "un cuadriciclo ligero.",
            "un vehículo de movilidad personal.",
            "un vehículo de tres ruedas."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T514926.jpg"
    },
    {
        "text": "En esta intersección con un semáforo en amarillo intermitente, ¿qué debe hacer?",
        "options": [
            "Extremar la precaución y, en su caso, ceder el paso a ambos lados.",
            "Continuar con precaución, el semáforo en amarillo intermitente exime de cumplir la señal vertical.",
            "Detener el vehículo."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T510118_050723.jpg"
    },
    {
        "text": "¿Cuál es la sanción por utilizar, sujetando con la mano, el teléfono móvil mientras se encuentra en un semáforo en rojo?",
        "options": [
            "Pérdida de 6 puntos y 200 euros.",
            "Pérdida de 6 puntos y 500 euros.",
            "Pérdida de 3 puntos y 200 euros."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T507018.jpg"
    },
    {
        "text": "Si no pretende adelantar, ¿cuándo deberá mantener una distancia de seguridad de, al menos, 100 metros, con el vehículo que circule delante?",
        "options": [
            "Cuando circule por un túnel.",
            "Al llegar a un paso a nivel.",
            "Cuando circule por un paso elevado."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T512610.jpg"
    },
    {
        "text": "Al acercarse a un centro docente, ¿qué precauciones se deben tomar?",
        "options": [
            "Mantener la velocidad y estar atento al cumplimiento de la señalización vertical.",
            "Hacer señales acústicas para indicar nuestra presencia.",
            "Moderar la velocidad y, si fuera preciso, detener el vehículo."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T510121_250217.jpg"
    },
    {
        "text": "En una calzada con dos sentidos hay un refugio en el centro. ¿Por qué lado está permitido circular?",
        "options": [
            "Por el lado derecho del refugio.",
            "Por cualquiera de ellos, indistintamente.",
            "Por el lado izquierdo del refugio."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T514417.jpg"
    },
    {
        "text": "Una persona que obtiene el permiso de la clase B a los 18 años, ¿debe renovarlo posteriormente?",
        "options": [
            "No, porque este permiso no pierde nunca su validez.",
            "Sí, a los diez años de su expedición, como norma general.",
            "No, salvo que obtenga cualquier otro permiso o licencia de conducción."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T510118_150316.jpg"
    },
    {
        "text": "En caso de colisión, ¿qué sistema ADAS registra y almacena la información básica del vehículo?",
        "options": [
            "El sistema EDR.",
            "El sistema ESP.",
            "El sistema ABS."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T500134_ADAS.jpg"
    },
    {
        "text": "Si los paneles de mensaje variable indican que los turismos con distintivo ambiental B pueden circular por un carril VAO, ¿qué ocupación mínima debe tener el vehículo?",
        "options": [
            "Un ocupante.",
            "Dos ocupantes, sin incluir al conductor.",
            "Dos ocupantes, incluido el conductor."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T510101_050719.jpg"
    },
    {
        "text": "En una carretera convencional, ¿cuál es la velocidad máxima a la que le está permitido circular al conductor de un turismo que arrastre un remolque?",
        "options": [
            "80 kilómetros por hora.",
            "90 kilómetros por hora.",
            "100 kilómetros por hora."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T510106_250217.jpg"
    },
    {
        "text": "Para abandonar una autopista debe incorporarse al carril de deceleración...",
        "options": [
            "en cualquier lugar del mismo.",
            "al final del mismo.",
            "lo antes posible."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T503520.jpg"
    },
    {
        "text": "Los carriles reversibles están delimitados por marcas longitudinales...",
        "options": [
            "dobles discontinuas a ambos lados.",
            "discontinuas con una separación sensiblemente más corta.",
            "discontinuas simples a ambos lados."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T512821.jpg"
    },
    {
        "text": "¿Puede circular conduciendo un ciclomotor a partir de la señal?",
        "options": [
            "Sí.",
            "No, prohíbe el paso a ciclos y ciclomotores.",
            "No, prohíbe el paso a todos los vehículos de dos ruedas con motor."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T504227.jpg"
    },
    {
        "text": "El conductor de un conjunto de vehículos de más de 3.500 kg de MMA que circula por un túnel y no pretende adelantar debe dejar con el vehículo que le precede una separación de al menos...",
        "options": [
            "50 metros.",
            "150 metros.",
            "100 metros."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T510123_151016.jpg"
    },
    {
        "text": "Si se sale de un garaje para incorporarse a la circulación, se debe ceder el paso...",
        "options": [
            "exclusivamente a los vehículos que se aproximen por la izquierda.",
            "exclusivamente a los vehículos que se aproximen por la derecha.",
            "tanto a los vehículos que se aproximen por la derecha como por la izquierda."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T504519.jpg"
    },
    {
        "text": "Las materias que produzcan polvo o puedan caer, es obligatorio transportarlas...",
        "options": [
            "cubriéndolas total y eficazmente.",
            "en vehículos totalmente cerrados.",
            "en contenedores de pequeño tamaño."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T500929.jpg"
    },
    {
        "text": "Si un vehículo dispone de sistema de alumbrado automático, ¿en qué momento se activa?",
        "options": [
            "Cuando un sensor detecta una disminución de la visibilidad.",
            "Cuando un sensor detecta que el conductor está fatigado.",
            "A partir de una hora determinada."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T500124_ADAS.jpg"
    },
    {
        "text": "A la entrada y salida del colegio, para evitar riesgos, ¿qué precauciones deberá tomar cuando los niños desciendan del vehículo, además de la previa vigilancia del entorno?",
        "options": [
            "Para mayor seguridad lo harán siempre por la puerta del conductor.",
            "Deberán bajar del vehículo por la puerta más alejada del borde de la vía.",
            "No deberán abrir las puertas ni apearse antes de la completa inmovilización del vehículo."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T5101_251020_07.jpg"
    },
    {
        "text": "¿Cuál es la finalidad de la cámara de marcha atrás instalada en el vehículo?",
        "options": [
            "Poder circular más de 15 metros para realizar un estacionamiento.",
            "Tener un mejor visionado de la parte trasera del vehículo.",
            "Realizar la maniobra de estacionamiento de forma rápida y segura."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T500117_ADAS.jpg"
    },
    {
        "text": "¿Puede viajar en el asiento delantero un menor de 1 año si todas las plazas traseras están ocupadas por niños con sistemas de retención infantil?",
        "options": [
            "Sí, con un sistema de retención infantil adaptado a su talla y peso.",
            "Sí, pero con el cinturón de seguridad.",
            "No, porque no debe viajar en el asiento delantero."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T510126_050723.jpg"
    },
    {
        "text": "La celebración de marchas ciclistas organizadas, ¿requieren autorización previa?",
        "options": [
            "Sí, siempre que el número de participantes sea superior a 50.",
            "No.",
            "Sólo en días festivos."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T510106_150117.jpg"
    },
    {
        "text": "¿Puede sobresalir la carga por los lados de una motocicleta?",
        "options": [
            "No.",
            "Sí, hasta 40 centímetros de cada lateral.",
            "Sí, hasta 50 centímetros del eje longitudinal de la motocicleta."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T503813.jpg"
    },
    {
        "text": "Conducir bajo los efectos de anfetaminas es peligroso porque...",
        "options": [
            "disminuye la sensación de fatiga.",
            "disminuye la somnolencia y el conductor infravalora sus propias capacidades.",
            "aumenta la sensación de fatiga."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T510114_150723.jpg"
    },
    {
        "text": "En caso de avería del alumbrado, ¿puede circular por la noche un vehículo con un alumbrado de intensidad inferior?",
        "options": [
            "Sí, manteniendo una velocidad que le permita detener el vehículo dentro de la zona iluminada.",
            "No, no podrá continuar el viaje.",
            "Sí, pero sólo hasta el taller más próximo."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T514105.jpg"
    },
    {
        "text": "Si un agente de tráfico interviene el permiso de circulación de un vehículo por no estar al día de las inspecciones técnicas, ¿qué plazo tiene su propietario para pasar la ITV?",
        "options": [
            "24 horas.",
            "10 días.",
            "30 días."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T500802.jpg"
    },
    {
        "text": "Si la parte rígida de la carrocería es de gran resistencia, ¿es aconsejable no usar el cinturón de seguridad?",
        "options": [
            "Sólo en los vehículos todo terreno o en los de más de 3.500 kg de MMA.",
            "No.",
            "Sí, porque los ocupantes del vehículo están bien protegidos."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T507030.jpg"
    },
    {
        "text": "La señal de limitación de velocidad afecta a los vehículos que circulen por...",
        "options": [
            "el lado de la vía sobre el que está situada.",
            "toda la calzada.",
            "el carril sobre el que está situada."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T501503.jpg"
    },
    {
        "text": "Si un conductor circula a velocidad inadecuada, ¿lo hace siempre por encima de la velocidad máxima permitida o por debajo de la velocidad mínima establecida?",
        "options": [
            "Sí, la velocidad inadecuada siempre es superior a la velocidad máxima establecida.",
            "Sí, la velocidad inadecuada siempre es inferior a la velocidad mínima establecida.",
            "No, la velocidad puede ser inadecuada aunque esté dentro de los límites establecidos."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T511616.jpg"
    },
    {
        "text": "Esta señal advierte del peligro de ángulos muertos a...",
        "options": [
            "todos los usuarios de la vía.",
            "los usuarios vulnerables de la vía.",
            "los vehículos de grandes dimensiones."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T510101_050623.jpg"
    }
]
            
            ;

            const container = document.getElementById('test-container');
            const paginationRow1 = document.getElementById('pagination-row-1');
            const paginationRow2 = document.getElementById('pagination-row-2');

            // Generar preguntas
            questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.setAttribute('data-correct', question.correct);
                questionDiv.innerHTML = `
                    <div class="question-image">
                        <img src="${question.image}" alt="Imagen de la pregunta">
                    </div>
                    <div class="question-content">
                        <h3>${index + 1}. ${question.text}</h3>
                        <div class="options">
                            ${question.options.map((option, idx) => `
                                <div class="option" data-answer="${String.fromCharCode(65 + idx)}">
                                    <span class="option-circle">${String.fromCharCode(65 + idx)}</span>
                                    ${option}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                container.appendChild(questionDiv);
            });

            // Generar paginación
            for (let i = 0; i < questions.length; i++) {
                const button = document.createElement('button');
                button.textContent = `${i + 1}`;
                button.addEventListener('click', () => showQuestion(i));
                if (i < 15) {
                    paginationRow1.appendChild(button);
                } else {
                    paginationRow2.appendChild(button);
                }
            }

            // Mostrar la primera pregunta
            showQuestion(0);

            // Función para mostrar una pregunta específica
            function showQuestion(index) {
                document.querySelectorAll('.question').forEach((q, i) => {
                    q.style.display = i === index ? 'flex' : 'none';
                });
                document.querySelectorAll('.pagination button').forEach((btn, i) => {
                    btn.style.backgroundColor = i === index ? '#ff7aa2' : '#ffa5c3';
                });
            }

            // Evento para las opciones de respuesta
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const question = this.closest('.question');
                    const questionIndex = Array.from(container.children).indexOf(question);
                    const isCorrect = this.getAttribute('data-answer') === question.getAttribute('data-correct');
                    
                    if (question.dataset.answered) return;

                    question.dataset.answered = true;

                    question.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                        opt.style.pointerEvents = 'none';
                    });
                    
                    this.classList.add('selected', isCorrect ? 'correct' : 'incorrect');

                    if (!isCorrect) {
                        question.querySelector(`.option[data-answer="${question.getAttribute('data-correct')}"]`).classList.add('correct');
                    }

                    // Actualizar el botón de paginación
                    const paginationButton = questionIndex < 15 ? paginationRow1.children[questionIndex] : paginationRow2.children[questionIndex - 15];
                    paginationButton.classList.add(isCorrect ? 'correct' : 'incorrect');
                });
            });

            // Evento para corregir el test
            document.getElementById('correct-test').addEventListener('click', () => {
                let wrongAnswers = 0;
                document.querySelectorAll('.question').forEach((question, index) => {
                    const selected = question.querySelector('.option.selected');
                    const isCorrect = selected && selected.getAttribute('data-answer') === question.getAttribute('data-correct');
                    if (!isCorrect) {
                        wrongAnswers++;
                    }
                    // Actualizar el botón de paginación si no se ha respondido
                    if (!selected) {
                        const paginationButton = index < 15 ? paginationRow1.children[index] : paginationRow2.children[index - 15];
                        paginationButton.classList.add('incorrect');
                    }
                });
                const resultMessage = `Has fallado ${wrongAnswers} respuestas.`;

                const alert = document.getElementById('custom-alert');
                document.getElementById('alert-message').textContent = resultMessage;
                alert.style.display = 'block';
            });
        });

        function closeAlert() {
            document.getElementById('custom-alert').style.display = 'none';
        }
    </script>

    
</body>
</html>