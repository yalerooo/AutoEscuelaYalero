<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Autoescuela</title>
    <link rel="stylesheet" href="../../../Assets/style.css">
</head>
<body>

    
    <div class="container">
        <h1 style="text-align: center; color: #ffa5c3;">Test de Autoescuela</h1>
        <div id="test-container">
            <!-- Aquí se generarán dinámicamente las preguntas -->
        </div>
        <div class="pagination">
            <div class="pagination-row" id="pagination-row-1"></div>
            <div class="pagination-row" id="pagination-row-2"></div>
        </div>
        <button id="correct-test">Corregir Test</button>
    </div>

    <!-- Custom Alert HTML -->
    <div class="custom-alert" id="custom-alert">
        <h2>Resultado del Test</h2>
        <p id="alert-message">Aquí irá el mensaje del resultado.</p>
        <button onclick="closeAlert()">Cerrar</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const questions = [
    {
        "text": "¿Qué indica la señal?",
        "options": [
            "Estacionamiento para usuarios del ferrocarril.",
            "Estacionamiento para usuarios de autobús.",
            "Estacionamiento para usuarios del ferrocarril inferior."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T510111_050723.jpg"
    },
    {
        "text": "Con un herido con parada respiratoria, ¿qué debe hacer?",
        "options": [
            "Hacerle la respiración artificial.",
            "Colocarle en posición de defensa.",
            "Darle masaje."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T510117_150723.jpg"
    },
    {
        "text": "Cuando viaje con su mascota, ¿en qué lugar del vehículo podrá situarse para evitar que interfiera en la conducción?",
        "options": [
            "Donde no comprometa su seguridad ni la del resto de pasajeros, además de ir sujeta con el dispositivo adecuado.",
            "En los asientos traseros sujeta con el cinturón de seguridad como un pasajero más.",
            "En el asiento delantero ya que si dispone de airbag frontal estará doblemente protegida."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T510110_0512.jpg"
    },
    {
        "text": "Un conductor con sueño...",
        "options": [
            "analiza situaciones de tráfico complejas en menos tiempo.",
            "tarda más tiempo en reaccionar.",
            "tarda menos tiempo en reaccionar."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T510104_250617.jpg"
    },
    {
        "text": "Para rebasar un obstáculo, ¿puede desplazarse al carril contiguo?",
        "options": [
            "Sí, siempre que no esté ocupado dicho carril.",
            "No, en ningún caso.",
            "Sí, esté o no ocupado el otro carril."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T502229.jpg"
    },
    {
        "text": "Como norma general, ¿está permitido que los conductores de bicicletas mayores de 18 años, circulen con sus vehículos por las aceras?",
        "options": [
            "Solo si circulan a una velocidad igual o inferior a 15 km/h.",
            "No.",
            "Sí."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T510101_050723.jpg"
    },
    {
        "text": "Si tiene que reducir considerablemente la velocidad del vehículo que conduce, ¿cómo debe avisar a los vehículos que circulan detrás?",
        "options": [
            "Encendiendo las luces de posición.",
            "Sólo con el intermitente derecho.",
            "Mediante el empleo reiterado de las luces de frenado."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T501928.jpg"
    },
    {
        "text": "De las siguientes, ¿cuál es una obligación que corresponde al titular del vehículo?",
        "options": [
            "Identificar ante la Administración al conductor del vehículo en el momento de cometerse una infracción.",
            "Comprobar que todos los ocupantes del vehículo hacen uso del cinturón de seguridad.",
            "Verificar que las placas de matrícula del vehículo no presentan obstáculos que impidan su lectura."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T510124_250317.jpg"
    },
    {
        "text": "En vías interurbanas con tres carriles para el mismo sentido, ¿le está permitido circular por el carril izquierdo a un turismo con remolque?",
        "options": [
            "Sí, pero sólo para adelantar a otros vehículos.",
            "No, en ningún caso.",
            "Sí, cuando la longitud del conjunto no supere los 7 metros."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T511003.jpg"
    },
    {
        "text": "¿Puede el vehículo de movilidad personal tener sillín?",
        "options": [
            "Sí.",
            "Sí, si está dotado de sistema de autoequilibrado.",
            "No porque ya no se consideraría vehículo de movilidad personal."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T510130_180322.jpg"
    },
    {
        "text": "Si un vehículo estacionado se incorpora a la circulación, ¿tiene preferencia para realizar la maniobra?",
        "options": [
            "Sí, si se ha señalizado previamente.",
            "No.",
            "Sí, en cualquier caso."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T509311.jpg"
    },
    {
        "text": "¿Cuál es la velocidad máxima permitida a cuadriciclos ligeros?",
        "options": [
            "90 Km/h.",
            "70 Km/h.",
            "45 Km/h."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T505017.jpg"
    },
    {
        "text": "Circula con un turismo por una autovía con tráfico muy denso, ¿está permitido circular por el arcén para tomar la siguiente salida?",
        "options": [
            "Sí, con las luces de emergencia.",
            "Sí, para facilitar la fluidez.",
            "No."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T505329.jpg"
    },
    {
        "text": "El sistema de ayuda de salida en pendiente o \"Hill Holder\", ¿cómo ayudará al conductor?",
        "options": [
            "Activará el freno de estacionamiento de manera automática y no lo desactivará hasta que el conductor presione el acelerador, evitando así que el vehículo se vaya hacia atrás.",
            "A través de un sensor que detecta el ángulo de inclinación del vehículo e impide que se vaya hacia atrás al levantar el pie de freno.",
            "Acelerará rápidamente el motor para evitar que el vehículo se vaya hacia atrás al levantar el pie del freno."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T500119_ADAS.jpg"
    },
    {
        "text": "¿Qué indica esta señal?",
        "options": [
            "La prohibición de acceder al peaje.",
            "La prohibición de detenerse en el peaje.",
            "La prohibición de pasar sin detenerse en el peaje."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T510102_050121.jpg"
    },
    {
        "text": "Si Ud. circula por un carril reversible, ¿tiene alguna obligación?",
        "options": [
            "Sí, llevar encendida la luz de cruce.",
            "No.",
            "Sí, circular como mínimo a 60 Km/h. y encender la luz de cruce."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T510129_051117.jpg"
    },
    {
        "text": "Una persona en silla de ruedas, ¿debe obedecer las señales de los Agentes y semáforos cuando circula por el arcén de una vía fuera de poblado?",
        "options": [
            "Sí, siempre.",
            "Solo obedecerá las señales de los agentes, pero no las de los semáforos.",
            "No, no está obligado porque es un peatón."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T510117_050723.jpg"
    },
    {
        "text": "La maniobra de marcha atrás deberá realizarse...",
        "options": [
            "rápidamente.",
            "lentamente y con precaución.",
            "con el cinturón de seguridad abrochado."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T514621.jpg"
    },
    {
        "text": "¿Qué finalidad tiene el sistema ADAS “Detección de fatiga”?",
        "options": [
            "Evitar un posible accidente por fatiga o sueño.",
            "Realizar una detención de emergencia cuando detecta que el conductor no se encuentra en condiciones óptimas de continuar la marcha.",
            "Tomar el control de la dirección del vehículo en caso de somnolencia del conductor."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T500118_ADAS.jpg"
    },
    {
        "text": "El alcohol desaparece de la sangre...",
        "options": [
            "inmediatamente después de su consumo a través del sudor y de la orina.",
            "muy lentamente, eliminándose por completo varias horas después de su consumo.",
            "rápidamente, eliminándose por completo una hora después de su consumo."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T508220.jpg"
    },
    {
        "text": "A la vista de la situación, para seguir de frente, ¿hay que detenerse?",
        "options": [
            "Sí, cuando vienen vehículos por la vía transversal.",
            "Sí.",
            "No, porque el semáforo prevalece sobre la señal de stop."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T510121_251016.jpg"
    },
    {
        "text": "¿Se puede atravesar la línea de conos para cambiar de carril?",
        "options": [
            "Sí, para realizar una parada.",
            "Sí, para adelantar.",
            "No, porque está prohibido."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T502726.jpg"
    },
    {
        "text": "El sistema E-CALL...",
        "options": [
            "es un sistema de aviso de emergencia en caso de accidente.",
            "detecta los vehículos que se aproximan por detrás en los carriles contiguos y alerta al conductor.",
            "alerta al conductor y ante una situación crítica puede ayudar al conductor a detener el vehículo con el fin de evitar la colisión."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T510115_150623.jpg"
    },
    {
        "text": "Una parada obstaculiza gravemente la circulación cuando...",
        "options": [
            "se efectúa en una parada de transporte público señalizada y delimitada.",
            "se efectúa en doble fila.",
            "obstaculiza el acceso normal a un inmueble de personas o animales."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T504513.jpg"
    },
    {
        "text": "En una vía con un carril para cada sentido de la marcha, ¿está permitido que un conductor adelante a varios vehículos a la vez?",
        "options": [
            "Solo si puede volver a la derecha sin causar peligro en caso de encontrar vehículos de frente.",
            "Sí, siempre que adelante a vehículos de grandes dimensiones.",
            "No, en ningún caso."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T503318.jpg"
    },
    {
        "text": "¿Qué es el sistema ISOFIX?",
        "options": [
            "Es un sistema de seguridad pasiva.",
            "Es una técnica de conducción preventiva.",
            "Es un sistema de seguridad activa."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T510125_050723.jpg"
    },
    {
        "text": "El agente tenía los brazos extendidos en cruz y los ha bajado. ¿Qué debemos hacer?",
        "options": [
            "Continuar circulando.",
            "Continuar detenido hasta que realice otro tipo de señal.",
            "Obedecer las señales o semáforos."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T505030.jpg"
    },
    {
        "text": "En el borde izquierdo de una calzada, ¿se puede parar con carácter general?",
        "options": [
            "Sí, siempre que no obstaculice la circulación.",
            "No, en ningún caso.",
            "Sí, en vías urbanas de sentido único."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T504607.jpg"
    },
    {
        "text": "En función de su nivel de emisiones y combustible empleado, se clasifican en la categoría 0 emisiones...",
        "options": [
            "los vehículos con motor de combustión interna.",
            "los vehículos propulsados por gas licuado del petróleo (GLP).",
            "los vehículos eléctricos de batería."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T510119_050723.jpg"
    },
    {
        "text": "Los sistemas ADAS (sistemas avanzados de ayuda a la conducción) instalados en el vehículo, ¿pueden ser desconectados en algún momento?",
        "options": [
            "Sí, de forma permanente o temporal.",
            "No pueden desconectarse en ningún caso.",
            "Pueden desconectarse de forma permanente pero nunca de forma temporal."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T500123_ADAS.jpg"
    }
]
            
            ;

            const container = document.getElementById('test-container');
            const paginationRow1 = document.getElementById('pagination-row-1');
            const paginationRow2 = document.getElementById('pagination-row-2');

            // Generar preguntas
            questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.setAttribute('data-correct', question.correct);
                questionDiv.innerHTML = `
                    <div class="question-image">
                        <img src="${question.image}" alt="Imagen de la pregunta">
                    </div>
                    <div class="question-content">
                        <h3>${index + 1}. ${question.text}</h3>
                        <div class="options">
                            ${question.options.map((option, idx) => `
                                <div class="option" data-answer="${String.fromCharCode(65 + idx)}">
                                    <span class="option-circle">${String.fromCharCode(65 + idx)}</span>
                                    ${option}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                container.appendChild(questionDiv);
            });

            // Generar paginación
            for (let i = 0; i < questions.length; i++) {
                const button = document.createElement('button');
                button.textContent = `${i + 1}`;
                button.addEventListener('click', () => showQuestion(i));
                if (i < 15) {
                    paginationRow1.appendChild(button);
                } else {
                    paginationRow2.appendChild(button);
                }
            }

            // Mostrar la primera pregunta
            showQuestion(0);

            // Función para mostrar una pregunta específica
            function showQuestion(index) {
                document.querySelectorAll('.question').forEach((q, i) => {
                    q.style.display = i === index ? 'flex' : 'none';
                });
                document.querySelectorAll('.pagination button').forEach((btn, i) => {
                    btn.style.backgroundColor = i === index ? '#ff7aa2' : '#ffa5c3';
                });
            }

            // Evento para las opciones de respuesta
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const question = this.closest('.question');
                    const questionIndex = Array.from(container.children).indexOf(question);
                    const isCorrect = this.getAttribute('data-answer') === question.getAttribute('data-correct');
                    
                    if (question.dataset.answered) return;

                    question.dataset.answered = true;

                    question.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                        opt.style.pointerEvents = 'none';
                    });
                    
                    this.classList.add('selected', isCorrect ? 'correct' : 'incorrect');

                    if (!isCorrect) {
                        question.querySelector(`.option[data-answer="${question.getAttribute('data-correct')}"]`).classList.add('correct');
                    }

                    // Actualizar el botón de paginación
                    const paginationButton = questionIndex < 15 ? paginationRow1.children[questionIndex] : paginationRow2.children[questionIndex - 15];
                    paginationButton.classList.add(isCorrect ? 'correct' : 'incorrect');
                });
            });

            // Evento para corregir el test
            document.getElementById('correct-test').addEventListener('click', () => {
                let wrongAnswers = 0;
                document.querySelectorAll('.question').forEach((question, index) => {
                    const selected = question.querySelector('.option.selected');
                    const isCorrect = selected && selected.getAttribute('data-answer') === question.getAttribute('data-correct');
                    if (!isCorrect) {
                        wrongAnswers++;
                    }
                    // Actualizar el botón de paginación si no se ha respondido
                    if (!selected) {
                        const paginationButton = index < 15 ? paginationRow1.children[index] : paginationRow2.children[index - 15];
                        paginationButton.classList.add('incorrect');
                    }
                });
                const resultMessage = `Has fallado ${wrongAnswers} respuestas.`;

                const alert = document.getElementById('custom-alert');
                document.getElementById('alert-message').textContent = resultMessage;
                alert.style.display = 'block';
            });
        });

        function closeAlert() {
            document.getElementById('custom-alert').style.display = 'none';
        }
    </script>

    
</body>
</html>