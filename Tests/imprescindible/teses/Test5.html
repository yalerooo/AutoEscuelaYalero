<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Autoescuela</title>
    <link rel="stylesheet" href="../../../Assets/style.css">
</head>
<body>

    
    <div class="container">
        <h1 style="text-align: center; color: #ffa5c3;">Test de Autoescuela</h1>
        <div id="test-container">
            <!-- Aquí se generarán dinámicamente las preguntas -->
        </div>
        <div class="pagination">
            <div class="pagination-row" id="pagination-row-1"></div>
            <div class="pagination-row" id="pagination-row-2"></div>
        </div>
        <button id="correct-test">Corregir Test</button>
    </div>

    <!-- Custom Alert HTML -->
    <div class="custom-alert" id="custom-alert">
        <h2>Resultado del Test</h2>
        <p id="alert-message">Aquí irá el mensaje del resultado.</p>
        <button onclick="closeAlert()">Cerrar</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const questions = [
    {
        "text": "Un conductor, ¿está obligado a colaborar en las pruebas de detección de emisión de gases contaminantes de su vehículo?",
        "options": [
            "Sí, están obligados todos los conductores de vehículos.",
            "Sí, pero únicamente cuando pase la ITV.",
            "No, únicamente está obligado a colaborar en las pruebas de alcoholemia."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T510103_150723.jpg"
    },
    {
        "text": "¿Está permitido que las motocicletas circulen por un carril reservado para vehículos con alta ocupación (VAO)?",
        "options": [
            "Solo si lleva algún ocupante, además del conductor.",
            "No.",
            "Sí."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T510123_250116.jpg"
    },
    {
        "text": "En los vehículos comerciales y pesados, ¿es obligatorio colocar la señal de advertencia de peligro de ángulos muertos para advertir del riesgo a los usuarios vulnerables?",
        "options": [
            "Sí; es obligatoria su colocación para poder circular.",
            "No; es una señal que se colocará de forma voluntaria en algunos de ellos.",
            "No; es obligatoria para los vehículos pesados, pero es voluntaria para los comerciales."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T510101_050623.jpg"
    },
    {
        "text": "En esta vía, dentro de poblado, en ausencia de limitación de velocidad, ¿a qué velocidad máxima puede circular el turismo rojo de la fotografía?",
        "options": [
            "20 km/h.",
            "30 km/h.",
            "50 km/h."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T510105_050621.jpg"
    },
    {
        "text": "El vehículo estacionado le dificulta la visibilidad, ¿puede no detenerse antes de la línea transversal de detención y hacerlo un poco después de la misma?",
        "options": [
            "Sí, puedo detenerme directamente en un lugar desde el que hay visibilidad.",
            "No, y puedo cruzar sin detenerme si no circulan vehículos en la vía transversal.",
            "No, debo detenerme primero antes de la línea de detención."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T510116_050723.jpg"
    },
    {
        "text": "En vías fuera de poblado que no dispongan de espacio especialmente reservado para ellos, a los peatones, ¿les está permitido circular por su derecha?",
        "options": [
            "Sí; los peatones siempre circularán por su derecha en este tipo de vías.",
            "Solo excepcionalmente si existen razones de mayor seguridad.",
            "No, en ningún caso."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T503219.jpg"
    },
    {
        "text": "Las circunstancias personales como el estrés, ¿pueden influir en los efectos del alcohol?",
        "options": [
            "No, sólo dependen de la cantidad y el tipo de alcohol ingerido.",
            "No, el alcohol sólo afecta a las características físicas.",
            "Sí."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T510112_150723.jpg"
    },
    {
        "text": "En las glorietas, ¿está prohibido adelantar?",
        "options": [
            "Sí, porque son intersecciones.",
            "Sí, en vías interurbanas solamente.",
            "No."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T502520.jpg"
    },
    {
        "text": "¿De qué color es el dispositivo luminoso de preseñalización de peligro?",
        "options": [
            "Azul.",
            "Amarillo auto.",
            "Rojo."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T510106_010721.jpg"
    },
    {
        "text": "Se considera que un estacionamiento obstaculiza gravemente la circulación cuando se realiza...",
        "options": [
            "en medio de la calzada.",
            "en zonas señalizadas para uso exclusivo de personas con movilidad reducida.",
            "en doble fila, aunque permanezca el conductor en el interior del vehículo."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T510110_050723.jpg"
    },
    {
        "text": "Los conductores de bicicletas tienen prioridad de paso respecto a los vehículos de motor:",
        "options": [
            "Siempre.",
            "Nunca.",
            "Cuando, circulando en grupo, el primer ciclista haya iniciado ya el cruce o haya entrado en una glorieta."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T501324.jpg"
    },
    {
        "text": "En vía urbana, las personas que circulan por la calzada o por el arcén empujando un ciclomotor de dos ruedas, ¿por qué lado están obligados a circular?",
        "options": [
            "indistintamente por su derecha o por su izquierda.",
            "por su izquierda.",
            "por su derecha."
        ],
        "correct": "C",
        "image": "../../../Assets/img/902318.jpg"
    },
    {
        "text": "Cuando se aproxima a un puente móvil, ¿cómo debe actuar?",
        "options": [
            "Reduciendo la velocidad pero sólo, si el puente se encuentra en movimiento.",
            "Reduciendo la velocidad por debajo de la máxima permitida.",
            "Extremando la precaución y deteniéndose siempre antes de pasar."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T501906.jpg"
    },
    {
        "text": "El vehículo de la fotografía lleva las puertas abiertas y sujetas ya que la carga no cabe dentro del mismo. ¿Es correcto?",
        "options": [
            "Sí, porque la carga está debidamente sujeta.",
            "No.",
            "Sí, porque la carga pùede sobresalir en estos vehículos hasta un tercio de su longitud."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T512605.jpg"
    },
    {
        "text": "¿Qué indica esta señal?",
        "options": [
            "Subida de fuerte pendiente.",
            "Bajada de fuerte pendiente.",
            "Pendiente deslizante."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T510113_151215.jpg"
    },
    {
        "text": "¿Está permitido que los vehículos prioritarios en servicio de urgencia utilicen únicamente la señal luminosa?",
        "options": [
            "Sí, cuando no suponga un peligro para los demás usuarios.",
            "No, tienen que utilizar simultáneamente la señal luminosa y acústica.",
            "Sí, cuando circulen por vía urbana."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T500612.jpg"
    },
    {
        "text": "A un menor de estatura inferior a 135 cm que utiliza un sistema de retención infantil, ¿le está permitido viajar en el asiento delantero de un turismo de cinco plazas?",
        "options": [
            "No, en ningún caso.",
            "Sí, siempre que vaya mirando hacia atrás y esté activado el airbag frontal.",
            "Solo por motivos excepcionales."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T513830.jpg"
    },
    {
        "text": "En una travesía, ¿está permitido circular con la luz de largo alcance encendida?",
        "options": [
            "Sí, en cualquier tipo de travesía.",
            "Sí, en travesías insuficientemente iluminadas.",
            "No."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T504927.jpg"
    },
    {
        "text": "¿Cómo se podrían haber evitado algunos esguinces cervicales severos provocados por los accidentes de tráfico?",
        "options": [
            "Evitando el efecto submarino.",
            "Mediante la colocación de airbags de cortina.",
            "Regulando, adecuadamente el reposacabezas."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T507726.jpg"
    },
    {
        "text": "La tasa máxima de alcoholemia permitida en sangre para conductores profesionales es...",
        "options": [
            "0,50 gramos por litro.",
            "0,30 miligramos por litro.",
            "0,30 gramos por litro."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T505726.jpg"
    },
    {
        "text": "Al acercarse a un mercado, ¿qué precauciones se deben tomar?",
        "options": [
            "Moderar la velocidad y si fuera preciso, detener el vehículo.",
            "Mantener la velocidad y estar atento al cumplimiento de la señalización vertical.",
            "Hacer señales acústicas para indicar nuestra presencia."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T510104_050723.jpg"
    },
    {
        "text": "El orden de prioridad entre los distintos tipos de las señales es...",
        "options": [
            "agentes, semáforos y marcas viales.",
            "agentes, marcas viales y semaforos.",
            "semáforos, agentes y marcas viales."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T511625.jpg"
    },
    {
        "text": "¿En qué territorio podrá acreditar ante la policía de tráfico, que es titular de un permiso de conducción, presentándolo en formato digital a través de la aplicación móvil miDGT?",
        "options": [
            "En todo el territorio nacional.",
            "En todo el territorio de la Unión Europea.",
            "En todos los países del mundo."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T510117_250723.jpg"
    },
    {
        "text": "¿Qué tiene que hacer si el resultado de la ITV resulta negativo?",
        "options": [
            "Circular con el vehículo hasta el taller para reparar los defectos encontrados.",
            "Llevar el vehículo al taller en una grúa y volver a pasar una inspección en un plazo inferior a 2 meses.",
            "Reparar los defectos encontrados en el plazo de un año como máximo."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T514308.jpg"
    },
    {
        "text": "En una zona de obras se encuentra un panel direccional provisional, ¿qué indica?",
        "options": [
            "La presencia de una curva y su dirección en una zona de obras.",
            "Prohíbe el paso e informa sobre el sentido de la circulación.",
            "Advierte del peligro por obras."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T504019.jpg"
    },
    {
        "text": "Un vehículo con esta señal indica que...",
        "options": [
            "es lento y no puede superar los 40 Km/h.",
            "transporta mercancías peligrosas.",
            "es especial y está realizando trabajos en la vía."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T512617.jpg"
    },
    {
        "text": "¿Cómo debe distribuir la carga en una furgoneta?",
        "options": [
            "Encima del eje trasero, un poco hacia atrás.",
            "Encima del eje trasero, un poco hacia delante.",
            "Lo más próximo al conductor."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T510123_050617.jpg"
    },
    {
        "text": "¿Puede circular por la calzada de una vía urbana con un vehículo de movilidad personal?",
        "options": [
            "Sí, excepto por travesías y túneles urbanos.",
            "No, debo circular por la acera.",
            "No, en ningún caso."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T510102_050723.jpg"
    },
    {
        "text": "Un agente de la circulación ordena reanudar la marcha con la ayuda de un silbato, ¿cómo serán los toques?",
        "options": [
            "Largos.",
            "Cortos y frecuentes.",
            "El silbato no se utiliza para dar órdenes."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T509413.jpg"
    },
    {
        "text": "¿Qué significa este pictograma en el envase de un medicamento?",
        "options": [
            "Ver el prospecto por los posibles efectos secundarios que afectan a la conducción.",
            "Está prohibida la circulación mientras se consuma el medicamento.",
            "Evitar las altas temperaturas del interior de un vehículo estacionado al sol."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T510105_150723.jpg"
    }
]
            
            ;

            const container = document.getElementById('test-container');
            const paginationRow1 = document.getElementById('pagination-row-1');
            const paginationRow2 = document.getElementById('pagination-row-2');

            // Generar preguntas
            questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.setAttribute('data-correct', question.correct);
                questionDiv.innerHTML = `
                    <div class="question-image">
                        <img src="${question.image}" alt="Imagen de la pregunta">
                    </div>
                    <div class="question-content">
                        <h3>${index + 1}. ${question.text}</h3>
                        <div class="options">
                            ${question.options.map((option, idx) => `
                                <div class="option" data-answer="${String.fromCharCode(65 + idx)}">
                                    <span class="option-circle">${String.fromCharCode(65 + idx)}</span>
                                    ${option}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                container.appendChild(questionDiv);
            });

            // Generar paginación
            for (let i = 0; i < questions.length; i++) {
                const button = document.createElement('button');
                button.textContent = `${i + 1}`;
                button.addEventListener('click', () => showQuestion(i));
                if (i < 15) {
                    paginationRow1.appendChild(button);
                } else {
                    paginationRow2.appendChild(button);
                }
            }

            // Mostrar la primera pregunta
            showQuestion(0);

            // Función para mostrar una pregunta específica
            function showQuestion(index) {
                document.querySelectorAll('.question').forEach((q, i) => {
                    q.style.display = i === index ? 'flex' : 'none';
                });
                document.querySelectorAll('.pagination button').forEach((btn, i) => {
                    btn.style.backgroundColor = i === index ? '#ff7aa2' : '#ffa5c3';
                });
            }

            // Evento para las opciones de respuesta
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const question = this.closest('.question');
                    const questionIndex = Array.from(container.children).indexOf(question);
                    const isCorrect = this.getAttribute('data-answer') === question.getAttribute('data-correct');
                    
                    if (question.dataset.answered) return;

                    question.dataset.answered = true;

                    question.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                        opt.style.pointerEvents = 'none';
                    });
                    
                    this.classList.add('selected', isCorrect ? 'correct' : 'incorrect');

                    if (!isCorrect) {
                        question.querySelector(`.option[data-answer="${question.getAttribute('data-correct')}"]`).classList.add('correct');
                    }

                    // Actualizar el botón de paginación
                    const paginationButton = questionIndex < 15 ? paginationRow1.children[questionIndex] : paginationRow2.children[questionIndex - 15];
                    paginationButton.classList.add(isCorrect ? 'correct' : 'incorrect');
                });
            });

            // Evento para corregir el test
            document.getElementById('correct-test').addEventListener('click', () => {
                let wrongAnswers = 0;
                document.querySelectorAll('.question').forEach((question, index) => {
                    const selected = question.querySelector('.option.selected');
                    const isCorrect = selected && selected.getAttribute('data-answer') === question.getAttribute('data-correct');
                    if (!isCorrect) {
                        wrongAnswers++;
                    }
                    // Actualizar el botón de paginación si no se ha respondido
                    if (!selected) {
                        const paginationButton = index < 15 ? paginationRow1.children[index] : paginationRow2.children[index - 15];
                        paginationButton.classList.add('incorrect');
                    }
                });
                const resultMessage = `Has fallado ${wrongAnswers} respuestas.`;

                const alert = document.getElementById('custom-alert');
                document.getElementById('alert-message').textContent = resultMessage;
                alert.style.display = 'block';
            });
        });

        function closeAlert() {
            document.getElementById('custom-alert').style.display = 'none';
        }
    </script>

    
</body>
</html>