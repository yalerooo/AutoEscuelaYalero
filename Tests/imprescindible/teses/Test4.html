<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Autoescuela</title>
    <link rel="stylesheet" href="../../../Assets/style.css">
</head>
<body>

    
    <div class="container">
        <h1 style="text-align: center; color: #ffa5c3;">Test de Autoescuela</h1>
        <div id="test-container">
            <!-- Aquí se generarán dinámicamente las preguntas -->
        </div>
        <div class="pagination">
            <div class="pagination-row" id="pagination-row-1"></div>
            <div class="pagination-row" id="pagination-row-2"></div>
        </div>
        <button id="correct-test">Corregir Test</button>
    </div>

    <!-- Custom Alert HTML -->
    <div class="custom-alert" id="custom-alert">
        <h2>Resultado del Test</h2>
        <p id="alert-message">Aquí irá el mensaje del resultado.</p>
        <button onclick="closeAlert()">Cerrar</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const questions = [
    {
        "text": "Circula con su turismo por esta carretera. ¿Cuál es la velocidad máxima permitida?",
        "options": [
            "100 km/h.",
            "80 km/h.",
            "90 km/h."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T510102_0512.jpg"
    },
    {
        "text": "¿En qué clase clasificarías a un coche eléctrico de batería y un híbrido enchufable con una autonomía mínima de 40 km?",
        "options": [
            "En la clase A.",
            "0 emisiones.",
            "ECO."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T510123_050723.jpg"
    },
    {
        "text": "En poblado, ¿está permitido que los vehículos hagan uso de las advertencias acústicas?",
        "options": [
            "Sí, salvo que exista señal que lo prohíba.",
            "Sí, para advertir al conductor de otro vehículo el propósito de adelantarlo.",
            "Sólo excepcionalmente para evitar un posible accidente."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T507011.jpg"
    },
    {
        "text": "A un turismo, ¿le está permitido circular si tiene roto el espejo retrovisor exterior izquierdo?",
        "options": [
            "Solo si el vehículo tiene espejo retrovisor interior.",
            "No, cuando el conductor no pueda ver la circulación por detrás del vehículo.",
            "Sí, porque el retrovisor exterior izquierdo no es obligatorio."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T510104_150723.jpg"
    },
    {
        "text": "No se tendrán en cuenta, a efectos de la normal utilización, los carriles...",
        "options": [
            "reversibles.",
            "reservados a determinados vehículos.",
            "especiales, únicamente."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T510105_150316.jpg"
    },
    {
        "text": "Es importante mantener limpio el cristal de los faros ya que la suciedad...",
        "options": [
            "provoca la corrosión del cristal disminuyendo la estanqueidad.",
            "elimina la superficie rugosa que forman los prismas de la superficie exterior.",
            "modifica la dirección de los rayos luminosos provocando deslumbramientos."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T510128_050723.jpg"
    },
    {
        "text": "En vías interurbanas, los ciclos y ciclomotores de dos ruedas, ¿dónde deben situarse para girar a la izquierda?",
        "options": [
            "A la derecha, fuera de la calzada si es posible, e iniciarlo desde ese lugar.",
            "En el centro, sin invadir el sentido contrario.",
            "En el carril izquierdo."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T503403.jpg"
    },
    {
        "text": "Circulando entre la puesta y la salida del sol, ¿qué finalidad tiene el sistema ADAS “Asistente de visión nocturna”?",
        "options": [
            "Detectar un vehículo inmovilizado fuera de la calzada y de la parte transitable del arcén.",
            "Detectar peatones o animales marcándolos en un color u otro en la pantalla de información del conductor.",
            "Poder desconectar el alumbrado al cruzarse con otro vehículo para evitar el deslumbramiento."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T500112_ADAS.jpg"
    },
    {
        "text": "¿Cuáles son los 4 distintivos ambientales para clasificar los vehículos por su potencial contaminante?",
        "options": [
            "Sin emisiones, ECO, A y B.",
            "0 emisiones, ECO, C y D.",
            "0 emisiones, ECO, C y B."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T510101_250121.jpg"
    },
    {
        "text": "¿Se puede circular marcha atrás en una autopista?",
        "options": [
            "Sí, para salir de la autopista.",
            "No."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T505006.jpg"
    },
    {
        "text": "Hace un año que ha obtenido el permiso de la clase A1, y obtiene un permiso de la clase B, ¿cuál será la tasa máxima de alcohol permitida?",
        "options": [
            "Durante dos años, 0,3 gramos por litro en sangre.",
            "Una tasa que no supere los 0,5 gramos por litro en sangre.",
            "Durante un año, 0,3 gramos por litro en sangre."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T514230.jpg"
    },
    {
        "text": "¿Está obligado a circular cualquier automóvil por una calzada así señalizada?",
        "options": [
            "Sí, excepto camiones y furgones",
            "Sí, excepto motocicletas sin sidecar",
            "Sí, porque es una vía exclusiva para automóviles."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T502811.jpg"
    },
    {
        "text": "El vehículo que sale de una vía no pavimentada, ¿a qué vehículos debe ceder el paso?",
        "options": [
            "Únicamente a los que se aproximen por la izquierda.",
            "A todos los que circulen por la vía pavimentada.",
            "Únicamente a los vehículos de motor que se aproximen por la derecha."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T501326.jpg"
    },
    {
        "text": "Como norma general, ¿dónde está prohibido adelantar?",
        "options": [
            "En todas las curvas y cambios de rasante.",
            "En las intersecciones y en sus proximidades.",
            "En las calzadas de menos de 8 m de anchura."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T510103_150517.jpg"
    },
    {
        "text": "¿Puede perder puntos de su saldo si pone en peligro a un grupo de ciclistas durante un adelantamiento?",
        "options": [
            "No; es una infracción que no supone la pérdida de puntos.",
            "No, porque es un delito contra la seguridad vial no una infracción administrativa.",
            "Sí, es una infracción que supone la pérdida de 6 puntos."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T506409.jpg"
    },
    {
        "text": "Si queda detenido por avería en autopista o autovía y no dispone del dispositivo de preseñalización de peligro luminoso, ¿debe colocar los triángulos de preseñalización de peligro?",
        "options": [
            "No,  ya que compromete gravemente la seguridad de la persona que tiene que transitar por la calzada para su colocación.",
            "Sí, uno por delante y otro por detrás del vehículo a 50 metros.",
            "Sí, uno por detrás del vehículo a 50 metros como mínimo."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T503604.jpg"
    },
    {
        "text": "De noche, ¿cómo se debe señalizar la carga que sobresale por delante y por detrás?",
        "options": [
            "Solamente con el panel de franjas oblicuas rojas y blancas.",
            "Con una luz blanca por delante, una luz roja por detrás y el panel de franjas oblicuas rojas y blancas.",
            "Con un catadióptrico blanco por delante y uno rojo por detrás."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T505024.jpg"
    },
    {
        "text": "¿Qué sistema proyecta información, como la velocidad o las instrucciones del navegador, sobre el parabrisas o una pequeña pantalla situada sobre el salpicadero?",
        "options": [
            "El \"Head Up Display\".",
            "El \"Hill Holder\".",
            "El \"ISA\"."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T500135_ADAS.jpg"
    },
    {
        "text": "En una explanada de peaje de una autopista, ¿está permitido recoger a una persona que hace autostop?",
        "options": [
            "No.",
            "Sí, siempre que no se origine una situación de peligro.",
            "Sí."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T505918.jpg"
    },
    {
        "text": "¿Dónde debe ir colocada la placa \"L\" de conductor novel en un turismo?",
        "options": [
            "En cualquier lugar visible de la parte posterior.",
            "En un lugar visible en la parte posterior derecha.",
            "En un lugar visible en la parte posterior izquierda."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T512825.jpg"
    },
    {
        "text": "¿Qué vehículo tendrá preferencia de paso en un estrechamiento cuando la prioridad no esté expresamente señalizada?",
        "options": [
            "El vehículo que haya entrado primero.",
            "El vehículo que haya llegado primero.",
            "El vehículo que tenga que dar marcha atrás mayor distancia."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T504507.jpg"
    },
    {
        "text": "Un autobús realiza transporte urbano. ¿Cuál es su velocidad máxima permitida dentro de poblado en vías de dos carriles por sentido?",
        "options": [
            "40 kilómetros por hora.",
            "50 kilómetros por hora.",
            "30 kilómetros por hora."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T510105_050723.jpg"
    },
    {
        "text": "En un túnel, en caso de incendio, debe...",
        "options": [
            "encender las luces de emergencia y las de posición, sin abandonar el vehículo hasta que no lleguen los servicios de emergencia.",
            "abandonar el vehículo, dejando las puertas cerradas con llave.",
            "aproximar el vehículo todo lo posible a la derecha, apagar el motor, dejar las llaves puestas y las puertas abiertas."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T514025.jpg"
    },
    {
        "text": "La marca longitudinal discontinua amarilla, ¿qué prohíbe?",
        "options": [
            "La parada.",
            "El estacionamiento.",
            "Ambos."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T513221.jpg"
    },
    {
        "text": "La flecha verde está iluminada. Si quiere girar a la derecha, ¿tiene preferencia de paso?",
        "options": [
            "Sí, porque la flecha verde me obliga a girar.",
            "No, porque la flecha verde me permite pasar pero debo ceder el paso al vehículo que se aproxima.",
            "No, porque la luz roja me prohíbe girar."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T501913.jpg"
    },
    {
        "text": "La distancia de detención es el espacio que recorre el vehículo...",
        "options": [
            "desde que el conductor frena hasta que se detiene el vehículo.",
            "desde que el conductor percibe un peligro hasta que el vehículo se detiene.",
            "durante el tiempo que pasa desde que el conductor reacciona hasta que pisa el pedal del freno."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T501125.jpg"
    },
    {
        "text": "En esta situación, ¿qué debe hacer?",
        "options": [
            "Ceder el paso y si es necesario, detenerse.",
            "Obedecer a la señal de Stop.",
            "Ceder el paso sin sobrepasar la línea de detención."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T510121_050723.jpg"
    },
    {
        "text": "En un accidente entre dos vehículos, ¿qué tipo de daños cubre el seguro de responsabilidad civil de suscripción obligatoria?",
        "options": [
            "Solamente los daños personales.",
            "Solamente los daños materiales.",
            "Los daños personales y los materiales del vehículo no causante del accidente."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T510130_050316.jpg"
    },
    {
        "text": "¿En qué momento entra en funcionamiento el sistema de frenado automático de emergencia o “AEBS”?",
        "options": [
            "En caso de despiste del conductor y riesgo de colisión por alcance.",
            "Únicamente en caso de una colisión inevitable.",
            "Cuando exista un peligro, en todo caso."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T500129_ADAS.jpg"
    },
    {
        "text": "Los transportes especiales o en régimen de transporte especial, en caso de avería de la señal luminosa V-2...",
        "options": [
            "deben encender la luz de cruce junto con la señal de emergencia.",
            "pueden circular únicamente con la luz de cruce encendida.",
            "tienen prohibida la circulación."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T510117_050216.jpg"
    }
]
            
            ;

            const container = document.getElementById('test-container');
            const paginationRow1 = document.getElementById('pagination-row-1');
            const paginationRow2 = document.getElementById('pagination-row-2');

            // Generar preguntas
            questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.setAttribute('data-correct', question.correct);
                questionDiv.innerHTML = `
                    <div class="question-image">
                        <img src="${question.image}" alt="Imagen de la pregunta">
                    </div>
                    <div class="question-content">
                        <h3>${index + 1}. ${question.text}</h3>
                        <div class="options">
                            ${question.options.map((option, idx) => `
                                <div class="option" data-answer="${String.fromCharCode(65 + idx)}">
                                    <span class="option-circle">${String.fromCharCode(65 + idx)}</span>
                                    ${option}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                container.appendChild(questionDiv);
            });

            // Generar paginación
            for (let i = 0; i < questions.length; i++) {
                const button = document.createElement('button');
                button.textContent = `${i + 1}`;
                button.addEventListener('click', () => showQuestion(i));
                if (i < 15) {
                    paginationRow1.appendChild(button);
                } else {
                    paginationRow2.appendChild(button);
                }
            }

            // Mostrar la primera pregunta
            showQuestion(0);

            // Función para mostrar una pregunta específica
            function showQuestion(index) {
                document.querySelectorAll('.question').forEach((q, i) => {
                    q.style.display = i === index ? 'flex' : 'none';
                });
                document.querySelectorAll('.pagination button').forEach((btn, i) => {
                    btn.style.backgroundColor = i === index ? '#ff7aa2' : '#ffa5c3';
                });
            }

            // Evento para las opciones de respuesta
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const question = this.closest('.question');
                    const questionIndex = Array.from(container.children).indexOf(question);
                    const isCorrect = this.getAttribute('data-answer') === question.getAttribute('data-correct');
                    
                    if (question.dataset.answered) return;

                    question.dataset.answered = true;

                    question.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                        opt.style.pointerEvents = 'none';
                    });
                    
                    this.classList.add('selected', isCorrect ? 'correct' : 'incorrect');

                    if (!isCorrect) {
                        question.querySelector(`.option[data-answer="${question.getAttribute('data-correct')}"]`).classList.add('correct');
                    }

                    // Actualizar el botón de paginación
                    const paginationButton = questionIndex < 15 ? paginationRow1.children[questionIndex] : paginationRow2.children[questionIndex - 15];
                    paginationButton.classList.add(isCorrect ? 'correct' : 'incorrect');
                });
            });

            // Evento para corregir el test
            document.getElementById('correct-test').addEventListener('click', () => {
                let wrongAnswers = 0;
                document.querySelectorAll('.question').forEach((question, index) => {
                    const selected = question.querySelector('.option.selected');
                    const isCorrect = selected && selected.getAttribute('data-answer') === question.getAttribute('data-correct');
                    if (!isCorrect) {
                        wrongAnswers++;
                    }
                    // Actualizar el botón de paginación si no se ha respondido
                    if (!selected) {
                        const paginationButton = index < 15 ? paginationRow1.children[index] : paginationRow2.children[index - 15];
                        paginationButton.classList.add('incorrect');
                    }
                });
                const resultMessage = `Has fallado ${wrongAnswers} respuestas.`;

                const alert = document.getElementById('custom-alert');
                document.getElementById('alert-message').textContent = resultMessage;
                alert.style.display = 'block';
            });
        });

        function closeAlert() {
            document.getElementById('custom-alert').style.display = 'none';
        }
    </script>

    
</body>
</html>