<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Autoescuela</title>
    <link rel="stylesheet" href="../../../Assets/style.css">
</head>
<body>

    
    <div class="container">
        <h1 style="text-align: center; color: #ffa5c3;">Test de Autoescuela</h1>
        <div id="test-container">
            <!-- Aquí se generarán dinámicamente las preguntas -->
        </div>
        <div class="pagination">
            <div class="pagination-row" id="pagination-row-1"></div>
            <div class="pagination-row" id="pagination-row-2"></div>
        </div>
        <button id="correct-test">Corregir Test</button>
    </div>

    <!-- Custom Alert HTML -->
    <div class="custom-alert" id="custom-alert">
        <h2>Resultado del Test</h2>
        <p id="alert-message">Aquí irá el mensaje del resultado.</p>
        <button onclick="closeAlert()">Cerrar</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const questions = [
    {
        "text": "El conductor de la furgoneta, ¿puede hacer una parada en doble fila para descargar?",
        "options": [
            "Sí, excepcionalmente y respetando las normas sobre paradas.",
            "Solo si la parada tiene una duración igual o inferior a 1 minuto.",
            "No, está prohibido."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T513205.jpg"
    },
    {
        "text": "¿Qué indica esta señal?",
        "options": [
            "Estacionamiento para usuarios de ferrocarril.",
            "Zona reservada para el estacionamiento de autobuses.",
            "Estacionamiento para usuarios de autobús."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T510125_150623.jpg"
    },
    {
        "text": "¿Es conveniente hacer una revisión exhaustiva del estado de nuestro vehículo si el humo que despide el tubo de escape es de color negro?",
        "options": [
            "Sí, porque el motor puede estar quemando aceite.",
            "No, porque solo es un problema de refrigeración que suele desaparecer.",
            "Sí, porque en este caso puede deberse a una mala combustión."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T510104_251117.jpg"
    },
    {
        "text": "¿Cuál es la velocidad máxima genérica en vías urbanas que dispongan de plataforma única de calzada y acera?",
        "options": [
            "20 km/h.",
            "30 km/h.",
            "50 km/h."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T514914.jpg"
    },
    {
        "text": "El sistema “RCTA o Alerta de tráfico cruzado”...",
        "options": [
            "ayuda a los conductores a detectar cuándo el vehículo que circula por delante está realizando una frenada de emergencia.",
            "en caso de despiste del conductor y riesgo de colisión por alcance, el sistema es capaz de detectar un peligro inminente y actuar.",
            "supervisa el tráfico trasero en sentido transversal al salir marcha atrás de un hueco de aparcamiento en batería."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T500101_ADAS.jpg"
    },
    {
        "text": "En esta vía urbana, ¿está permitido adelantar por la derecha?",
        "options": [
            "Sí, porque es una vía de sentido único y los carriles están delimitados.",
            "Sí, pero solamente cuando el vehículo de delante va a girar a la izquierda.",
            "No, el adelantamiento siempre se realizará por la izquierda."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T510101_150918.jpg"
    },
    {
        "text": "Una fila de escolares está cruzando la calzada. ¿Debe cederles el paso?",
        "options": [
            "No, cuando no llevan paleta de STOP.",
            "Solamente en los pasos para peatones.",
            "Si."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T506505.jpg"
    },
    {
        "text": "Si conduce un ciclomotor, ¿puede atravesar este cebreado?",
        "options": [
            "Sí, porque está obligado a circular por el arcén.",
            "No, por las zonas cebreadas está prohibido circular siempre.",
            "Sí, porque los vehículos de dos ruedas pueden circular por estas zonas."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T503410.jpg"
    },
    {
        "text": "El distintivo de la ITV, ¿dónde debe ir colocado?",
        "options": [
            "En el ángulo superior izquierdo interno.",
            "En el ángulo superior derecho interno.",
            "Indistintamente."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T510124_050723.jpg"
    },
    {
        "text": "¿Es obligatorio facilitar a un autobús la incorporación, en zona urbana, desde una parada señalizada?",
        "options": [
            "No, no es obligatorio, pero sí recomendable.",
            "Sí, y además es obligatorio detenerse.",
            "Sí."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T514011.jpg"
    },
    {
        "text": "Esta señal advierte del peligro por...",
        "options": [
            "cruce de tranvía.",
            "parada de vehículos que circulan sin raíles.",
            "situación de un paso a nivel sin barreras."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T504915.jpg"
    },
    {
        "text": "En una calzada cortada, no se puede cambiar de dirección ni de sentido, ¿cómo se debe salir marcha atrás?",
        "options": [
            "Recorriendo como máximo 15 metros.",
            "Recorriendo el espacio indispensable, aun teniendo que invadir un cruce.",
            "Recorriendo, como máximo, 15 metros y sin invadir ningún cruce."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T512221.jpg"
    },
    {
        "text": "El consumo de LSD produce en el conductor...",
        "options": [
            "estabilidad emocional.",
            "fatiga.",
            "alucinaciones y distorsiones en la percepción."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T512416.jpg"
    },
    {
        "text": "El conductor indica con el brazo que va a girar a la izquierda y lleva encendido el intermitente derecho. ¿Qué señal tiene validez?",
        "options": [
            "La del brazo.",
            "La del intermitente.",
            "Ninguna."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T503618.jpg"
    },
    {
        "text": "Si su turismo ha pasado favorablemente la primera ITV, ¿cuándo tiene que pasar la próxima inspección?",
        "options": [
            "Dentro de 4 años.",
            "Dentro de 2 años.",
            "Al año siguiente."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T510120_250216.jpg"
    },
    {
        "text": "Como norma general se prohíbe cambiar el sentido de la marcha...",
        "options": [
            "en las calzadas con prioridad.",
            "en las plazas de circulación giratoria.",
            "en los tramos de vía en los que esté prohibido adelantar."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T510111_250116.jpg"
    },
    {
        "text": "Si el recorrido que va a realizar con su vehículo es corto, ¿está permitido llevar a un niño pequeño en brazos?",
        "options": [
            "No; es obligatorio usar un sistema de retención infantil.",
            "Solo si se circula a una velocidad igual o inferior a 30 km/h.",
            "Sí, cuando todo el recorrido transcurre por vías urbanas."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T505121.jpg"
    },
    {
        "text": "Los distintivos ambientales clasifican a los vehículos en función de...",
        "options": [
            "su ahorro energético.",
            "su contaminación acústica.",
            "su potencial contaminante."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T510122_050723.jpg"
    },
    {
        "text": "Con esta señal, ¿tiene prioridad de paso en el estrechamiento?",
        "options": [
            "No, la prioridad la tiene el vehículo que circula en sentido contrario.",
            "Sí.",
            "No, la señal concede prioridad al sentido contrario."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T500603.jpg"
    },
    {
        "text": "En esta situación, si pretende seguir de frente, ¿a cuál de los dos semáforos debe obedecer?",
        "options": [
            "Como la señalización es contradictoria, prevalece la más restrictiva.",
            "Al semáforo de la izquierda.",
            "Al semáforo de la derecha."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T503429.jpg"
    },
    {
        "text": "En un camión de longitud superior a 5 metros, ¿cuánto podrá sobresalir la carga indivisible por su parte posterior?",
        "options": [
            "Un tercio de su longitud como máximo.",
            "2 metros como máximo.",
            "3 metros como máximo."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T513511.jpg"
    },
    {
        "text": "¿Qué documentos relativos al vehículo debe llevar consigo un conductor de una motocicleta?",
        "options": [
            "La tarjeta de inspección técnica, solamente.",
            "El permiso de circulación, solamente.",
            "La tarjeta de inspección técnica y el permiso de circulación."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T505914.jpg"
    },
    {
        "text": "La luz antiniebla trasera deberá utilizarse siempre que...",
        "options": [
            "circule por un túnel.",
            "circule con fuerte nevada.",
            "circule por un puerto de montaña."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T510113_250216.jpg"
    },
    {
        "text": "Esta señal en la entrada de un camino, ¿permite el paso a turismos?",
        "options": [
            "Sí, aunque deben circular con precaución.",
            "No, pero está permitido a ciclomotores y motocicletas.",
            "No, porque está reservado a vehículos de tracción animal."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T510115_050723.jpg"
    },
    {
        "text": "¿Puede adelantar al agente con bandera verde?",
        "options": [
            "Sí, extermando la precaución.",
            "Sí, por el lado derecho, ya que el carril de la izquierda va a quedar cerrado al tráfico.",
            "No, ya que por delante del agente la calzada está cerrada al tráfico."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T504909.jpg"
    },
    {
        "text": "¿Qué sistema ADAS supervisa mediante unos sensores o cámaras el comportamiento del conductor al volante en relación con las marcas de carril y otros factores?",
        "options": [
            "El “LTS o Sistema de trazado de carril”.",
            "El “Head-up Display”.",
            "El “Sistema de detección de fatiga”."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T500108_ADAS.jpg"
    },
    {
        "text": "Una cuadrícula de marcas amarillas pintada en el suelo indica...",
        "options": [
            "que no se puede franquear la intersección.",
            "que no se debe entrar en la intersección si se puede quedar detenido en ella, obstaculizando la circulación.",
            "que el estacionamiento está prohibido."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T502412.jpg"
    },
    {
        "text": "La señal significa...",
        "options": [
            "vía obligatoria para los autobuses.",
            "parada de autobuses.",
            "carril reservado para autobuses."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T502718.jpg"
    },
    {
        "text": "Un vehículo derivado de turismo y un camión entran a la vez en un tramo muy estrecho de la calzada sin señalizar, ¿qué vehículo está obligado a retroceder?",
        "options": [
            "El vehículo que tenga mayor masa máxima autorizada.",
            "El vehículo derivado de turismo.",
            "El camión."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T510119_150316.jpg"
    },
    {
        "text": "Cuando las luces de su vehículo apuntan demasiado bajo...",
        "options": [
            "se acorta la iluminación a larga distancia.",
            "se mejora la iluminación de la vía a larga distancia.",
            "se puede deslumbrar a los conductores de otros vehículos."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T510102_150723.jpg"
    }
]
            
            ;

            const container = document.getElementById('test-container');
            const paginationRow1 = document.getElementById('pagination-row-1');
            const paginationRow2 = document.getElementById('pagination-row-2');

            // Generar preguntas
            questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.setAttribute('data-correct', question.correct);
                questionDiv.innerHTML = `
                    <div class="question-image">
                        <img src="${question.image}" alt="Imagen de la pregunta">
                    </div>
                    <div class="question-content">
                        <h3>${index + 1}. ${question.text}</h3>
                        <div class="options">
                            ${question.options.map((option, idx) => `
                                <div class="option" data-answer="${String.fromCharCode(65 + idx)}">
                                    <span class="option-circle">${String.fromCharCode(65 + idx)}</span>
                                    ${option}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                container.appendChild(questionDiv);
            });

            // Generar paginación
            for (let i = 0; i < questions.length; i++) {
                const button = document.createElement('button');
                button.textContent = `${i + 1}`;
                button.addEventListener('click', () => showQuestion(i));
                if (i < 15) {
                    paginationRow1.appendChild(button);
                } else {
                    paginationRow2.appendChild(button);
                }
            }

            // Mostrar la primera pregunta
            showQuestion(0);

            // Función para mostrar una pregunta específica
            function showQuestion(index) {
                document.querySelectorAll('.question').forEach((q, i) => {
                    q.style.display = i === index ? 'flex' : 'none';
                });
                document.querySelectorAll('.pagination button').forEach((btn, i) => {
                    btn.style.backgroundColor = i === index ? '#ff7aa2' : '#ffa5c3';
                });
            }

            // Evento para las opciones de respuesta
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const question = this.closest('.question');
                    const questionIndex = Array.from(container.children).indexOf(question);
                    const isCorrect = this.getAttribute('data-answer') === question.getAttribute('data-correct');
                    
                    if (question.dataset.answered) return;

                    question.dataset.answered = true;

                    question.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                        opt.style.pointerEvents = 'none';
                    });
                    
                    this.classList.add('selected', isCorrect ? 'correct' : 'incorrect');

                    if (!isCorrect) {
                        question.querySelector(`.option[data-answer="${question.getAttribute('data-correct')}"]`).classList.add('correct');
                    }

                    // Actualizar el botón de paginación
                    const paginationButton = questionIndex < 15 ? paginationRow1.children[questionIndex] : paginationRow2.children[questionIndex - 15];
                    paginationButton.classList.add(isCorrect ? 'correct' : 'incorrect');
                });
            });

            // Evento para corregir el test
            document.getElementById('correct-test').addEventListener('click', () => {
                let wrongAnswers = 0;
                document.querySelectorAll('.question').forEach((question, index) => {
                    const selected = question.querySelector('.option.selected');
                    const isCorrect = selected && selected.getAttribute('data-answer') === question.getAttribute('data-correct');
                    if (!isCorrect) {
                        wrongAnswers++;
                    }
                    // Actualizar el botón de paginación si no se ha respondido
                    if (!selected) {
                        const paginationButton = index < 15 ? paginationRow1.children[index] : paginationRow2.children[index - 15];
                        paginationButton.classList.add('incorrect');
                    }
                });
                const resultMessage = `Has fallado ${wrongAnswers} respuestas.`;

                const alert = document.getElementById('custom-alert');
                document.getElementById('alert-message').textContent = resultMessage;
                alert.style.display = 'block';
            });
        });

        function closeAlert() {
            document.getElementById('custom-alert').style.display = 'none';
        }
    </script>

    
</body>
</html>