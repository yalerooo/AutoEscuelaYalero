<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Autoescuela</title>
    <link rel="stylesheet" href="../../../Assets/style.css">
</head>
<body>

    
    <div class="container">
        <h1 style="text-align: center; color: #ffa5c3;">Test de Autoescuela</h1>
        <div id="test-container">
            <!-- Aquí se generarán dinámicamente las preguntas -->
        </div>
        <div class="pagination">
            <div class="pagination-row" id="pagination-row-1"></div>
            <div class="pagination-row" id="pagination-row-2"></div>
        </div>
        <button id="correct-test">Corregir Test</button>
    </div>

    <!-- Custom Alert HTML -->
    <div class="custom-alert" id="custom-alert">
        <h2>Resultado del Test</h2>
        <p id="alert-message">Aquí irá el mensaje del resultado.</p>
        <button onclick="closeAlert()">Cerrar</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const questions = [
    {
        "text": "Esta señal indica que los carriles sobre los que están situadas las señales de velocidad mínima...",
        "options": [
            "sólo puede utilizarlos si circula a una velocidad inferior a la indicada.",
            "son para vehículos rápidos y el carril situado más a la derecha es para vehículos lentos.",
            "sólo puede utilizarlos si circula a una velocidad igual o superior a la indicada."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T505701.jpg"
    },
    {
        "text": "La retirada del permiso debido a la pérdida de todos los puntos, ¿cuándo surte efecto?",
        "options": [
            "Cuando se comete la infracción.",
            "Cuando el agente formula la denuncia.",
            "Cuando se le comunica al titular del permiso."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T510120_150116.jpg"
    },
    {
        "text": "Bajo condiciones de luminosidad desfavorables, el alumbrado...",
        "options": [
            "permite percibir posibles peligros únicamente cuando se circula con la luz de carretera.",
            "permite percibir posibles peligros con tiempo suficiente para reaccionar.",
            "no es de mucha utilidad."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T505703.jpg"
    },
    {
        "text": "A un peatón de edad avanzada, ¿le afecta el exceso de ruido?",
        "options": [
            "Sí, y le puede impedir oír y darse cuenta si se acerca un vehículo.",
            "No.",
            "Sí, el exceso de ruido afecta a cualquier tipo de peatón por igual."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T512806.jpg"
    },
    {
        "text": "Hay una marca longitudinal continua adosada a otra discontinua, ¿cuál de las dos se debe tener en cuenta?",
        "options": [
            "La marca situada en el lado contrario por el que se circula.",
            "La marca situada en el lado por el que se circula.",
            "Ninguna de las dos."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T505705.jpg"
    },
    {
        "text": "Un ciclista ha consumido estupefacientes, ¿puede circular?",
        "options": [
            "Sí, si ha consumido poca cantidad.",
            "No.",
            "Sí, porque la bicicleta no es un vehículo a motor."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T505706.jpg"
    },
    {
        "text": "La obligación de dejar espacio suficiente para permitir el adelantamiento no será aplicable...",
        "options": [
            "en vías con un único carril para cada sentido.",
            "donde esté prohibido el adelantamiento.",
            "en carreteras convencionales."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T505707.jpg"
    },
    {
        "text": "Circular por una vía con mucho tráfico...",
        "options": [
            "favorece la aparición de la fatiga.",
            "retrasa la aparición de la fatiga.",
            "no es una circunstancia que afecte a la fatiga."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T505708.jpg"
    },
    {
        "text": "¿Dónde está permitido parar en una vía interurbana?",
        "options": [
            "En el lado derecho, fuera de la calzada y de la parte transitable del arcén.",
            "En cualquier lado, siempre fuera de la calzada y de la parte transitable del arcén.",
            "Si es por necesidades del tráfico, en el arcén si es transitable."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T505709.jpg"
    },
    {
        "text": "El efecto submarino, que en un accidente de tráfico puede provocar graves lesiones al conductor, está relacionado con..",
        "options": [
            "Una incorrecta presión de los neumáticos.",
            "Un consumo excesivo de alcohol, medicamentos o drogas de abuso.",
            "Un mal uso del cinturón de seguridad."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T506410.jpg"
    },
    {
        "text": "¿Qué finalidad tiene el sistema ADAS “Detección de fatiga”?",
        "options": [
            "Evitar un posible accidente por fatiga o sueño.",
            "Realizar una detención de emergencia cuando detecta que el conductor no se encuentra en condiciones óptimas de continuar la marcha.",
            "Tomar el control de la dirección del vehículo en caso de somnolencia del conductor."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T500118_ADAS.jpg"
    },
    {
        "text": "Si tiene su permiso B desde hace más de un año, y ahora obtiene el de la clase A, ¿está obligado a llevar la placa L en su motocicleta?",
        "options": [
            "Sí, durante un año, en la parte trasera.",
            "No.",
            "Sí, en la parte delantera, durante un año."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T505712.jpg"
    },
    {
        "text": "La señal prohíbe la entrada a...",
        "options": [
            "toda clase de vehículos.",
            "vehículos de motor.",
            "turismos y motocicletas."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T505713.jpg"
    },
    {
        "text": "Mirarse en el espejo retrovisor mientras se conduce, ¿puede aumentar el riesgo de accidente?",
        "options": [
            "Sí, porque el tiempo que se mira al espejo no se presta atención a la conducción.",
            "Sí, pero solamente de noche.",
            "No, porque es posible mirarse al espejo y conducir a la vez."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T505714.jpg"
    },
    {
        "text": "¿Cómo debe realizarse un cambio de carril en una vía saturada?",
        "options": [
            "Utilizando el arcén.",
            "Realizando la maniobra rápidamente para no estorbar.",
            "Advirtiéndolo con suficiente antelación."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T505715.jpg"
    },
    {
        "text": "Tomar café o té, ¿reduce la tasa de alcoholemia?",
        "options": [
            "Sí.",
            "Sí, pero sólo el café.",
            "No."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T505716.jpg"
    },
    {
        "text": "El carril que se observa a la izquierda está abierto para circular en sentido contrario. ¿Cual es la velocidad máxima permitida en ese carril?",
        "options": [
            "100 kilómetros por hora.",
            "90 kilómetros por hora.",
            "80 kilómetros por hora."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T505717.jpg"
    },
    {
        "text": "Es recomendable revisar la dirección del vehículo cuando...",
        "options": [
            "se vuelve demasiado dura o demasiado floja.",
            "el vehiculo no se desvía al soltar el volante.",
            "los neumáticos se desgastan de forma regular."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T505718.jpg"
    },
    {
        "text": "En las motocicletas, ¿qué es obligatorio tener en cuenta con el equipaje transportado?",
        "options": [
            "Que no sobresalga por la parte trasera.",
            "Que no sobresalga lateralmente.",
            "Que vaya colocado y sujeto de forma que no afecte a estabilidad de la motocicleta."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T505719.jpg"
    },
    {
        "text": "¿Qué tipo de sanción conlleva la utilización de dispositivos de intercomunicación no autorizados en las pruebas para la obtención del permiso de conducir?",
        "options": [
            "Multa de 200 euros y la inhabilitación de volver a presentarse a las pruebas en el plazo de tres meses.",
            "Multa de 500 euros y la inhabilitación de volver a presentarse a las pruebas en el plazo de seis meses.",
            "Ninguna."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T510106_150723.jpg"
    },
    {
        "text": "Dos vehículos del mismo tipo se encuentran en un estrechamiento y no se sabe cuál tiene preferencia, ¿cuál de ellos tiene prioridad?",
        "options": [
            "El vehículo que tenga que dar marcha atrás mayor distancia.",
            "El vehículo que tenga que dar marcha atrás una menor distancia.",
            "El vehículo que tenga mayor anchura o longitud."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T505721.jpg"
    },
    {
        "text": "Si la temperatura en el interior del vehículo es muy alta, ¿puede influir en el tiempo de reacción del conductor?",
        "options": [
            "No, no influye.",
            "Sí, aumentándolo.",
            "Sí, disminuyéndolo."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T505722.jpg"
    },
    {
        "text": "En caso de contradicción entre señales del mismo tipo, ¿cuál prevalecerá?",
        "options": [
            "La menos restrictiva.",
            "Ninguna de las señales.",
            "La más restrictiva."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T505723.jpg"
    },
    {
        "text": "Los pasajeros, ¿pueden viajar sin ponerse el cinturón de seguridad?",
        "options": [
            "Sí, en los asientos traseros de los taxis.",
            "No, es obligatorio en todas las plazas del vehículo.",
            "Sólo cuando se realizan trayectos cortos."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T505724.jpg"
    },
    {
        "text": "Circulando marcha atrás, ¿está permitido invadir un cruce de vías?",
        "options": [
            "No, está prohibido.",
            "Sí, mientras no recorra más de 15 metros.",
            "Sí, en cualquier caso."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T505725.jpg"
    },
    {
        "text": "La tasa máxima de alcoholemia permitida en sangre para conductores profesionales es...",
        "options": [
            "0,50 gramos por litro.",
            "0,30 miligramos por litro.",
            "0,30 gramos por litro."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T505726.jpg"
    },
    {
        "text": "La señal, ¿qué indica?",
        "options": [
            "Peligro por hielo o nieve.",
            "Peligro por hielo únicamente.",
            "Peligro por nieve únicamente."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T505727.jpg"
    },
    {
        "text": "En un accidente de circulación, ¿es obligatorio avisar a la Autoridad si no hay heridos y la seguridad de la circulación está restablecida?",
        "options": [
            "No.",
            "Sí.",
            "Sí, cuando alguna de las personas implicadas en el accidente lo solicita."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T505728.jpg"
    },
    {
        "text": "En esta autopista, ¿cuándo se puede circular por el arcén derecho?",
        "options": [
            "Cuando hay muchos vehículos circulando.",
            "Nunca.",
            "Cuando por emergencia o avería se circule a velocidad anormalmente reducida."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T505729.jpg"
    },
    {
        "text": "En condiciones favorables de visibilidad, para evitar la aparición de la fatiga durante una conducción prolongada, lo mejor es descansar...",
        "options": [
            "cada tres horas.",
            "cada media hora, como mínimo.",
            "cada dos horas."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T505730.jpg"
    }
]
            
            ;

            const container = document.getElementById('test-container');
            const paginationRow1 = document.getElementById('pagination-row-1');
            const paginationRow2 = document.getElementById('pagination-row-2');

            // Generar preguntas
            questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.setAttribute('data-correct', question.correct);
                questionDiv.innerHTML = `
                    <div class="question-image">
                        <img src="${question.image}" alt="Imagen de la pregunta">
                    </div>
                    <div class="question-content">
                        <h3>${index + 1}. ${question.text}</h3>
                        <div class="options">
                            ${question.options.map((option, idx) => `
                                <div class="option" data-answer="${String.fromCharCode(65 + idx)}">
                                    <span class="option-circle">${String.fromCharCode(65 + idx)}</span>
                                    ${option}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                container.appendChild(questionDiv);
            });

            // Generar paginación
            for (let i = 0; i < questions.length; i++) {
                const button = document.createElement('button');
                button.textContent = `${i + 1}`;
                button.addEventListener('click', () => showQuestion(i));
                if (i < 15) {
                    paginationRow1.appendChild(button);
                } else {
                    paginationRow2.appendChild(button);
                }
            }

            // Mostrar la primera pregunta
            showQuestion(0);

            // Función para mostrar una pregunta específica
            function showQuestion(index) {
                document.querySelectorAll('.question').forEach((q, i) => {
                    q.style.display = i === index ? 'flex' : 'none';
                });
                document.querySelectorAll('.pagination button').forEach((btn, i) => {
                    btn.style.backgroundColor = i === index ? '#ff7aa2' : '#ffa5c3';
                });
            }

            // Evento para las opciones de respuesta
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const question = this.closest('.question');
                    const questionIndex = Array.from(container.children).indexOf(question);
                    const isCorrect = this.getAttribute('data-answer') === question.getAttribute('data-correct');
                    
                    if (question.dataset.answered) return;

                    question.dataset.answered = true;

                    question.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                        opt.style.pointerEvents = 'none';
                    });
                    
                    this.classList.add('selected', isCorrect ? 'correct' : 'incorrect');

                    if (!isCorrect) {
                        question.querySelector(`.option[data-answer="${question.getAttribute('data-correct')}"]`).classList.add('correct');
                    }

                    // Actualizar el botón de paginación
                    const paginationButton = questionIndex < 15 ? paginationRow1.children[questionIndex] : paginationRow2.children[questionIndex - 15];
                    paginationButton.classList.add(isCorrect ? 'correct' : 'incorrect');
                });
            });

            // Evento para corregir el test
            document.getElementById('correct-test').addEventListener('click', () => {
                let wrongAnswers = 0;
                document.querySelectorAll('.question').forEach((question, index) => {
                    const selected = question.querySelector('.option.selected');
                    const isCorrect = selected && selected.getAttribute('data-answer') === question.getAttribute('data-correct');
                    if (!isCorrect) {
                        wrongAnswers++;
                    }
                    // Actualizar el botón de paginación si no se ha respondido
                    if (!selected) {
                        const paginationButton = index < 15 ? paginationRow1.children[index] : paginationRow2.children[index - 15];
                        paginationButton.classList.add('incorrect');
                    }
                });
                const resultMessage = `Has fallado ${wrongAnswers} respuestas.`;

                const alert = document.getElementById('custom-alert');
                document.getElementById('alert-message').textContent = resultMessage;
                alert.style.display = 'block';
            });
        });

        function closeAlert() {
            document.getElementById('custom-alert').style.display = 'none';
        }
    </script>

    
</body>
</html>