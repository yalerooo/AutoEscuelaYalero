<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Autoescuela</title>
    <link rel="stylesheet" href="../../../Assets/style.css">
</head>
<body>

    
    <div class="container">
        <h1 style="text-align: center; color: #ffa5c3;">Test de Autoescuela</h1>
        <div id="test-container">
            <!-- Aquí se generarán dinámicamente las preguntas -->
        </div>
        <div class="pagination">
            <div class="pagination-row" id="pagination-row-1"></div>
            <div class="pagination-row" id="pagination-row-2"></div>
        </div>
        <button id="correct-test">Corregir Test</button>
    </div>

    <!-- Custom Alert HTML -->
    <div class="custom-alert" id="custom-alert">
        <h2>Resultado del Test</h2>
        <p id="alert-message">Aquí irá el mensaje del resultado.</p>
        <button onclick="closeAlert()">Cerrar</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const questions = [
    {
        "text": "¿Qué es un catadióptrico?",
        "options": [
            "Una placa de matrícula reflectante.",
            "Un dispositivo de alumbrado del vehículo.",
            "Un dispositivo que refleja la luz procedente de una fuente luminosa."
        ],
        "correct": "C",
        "image": "../../../Assets/img/C702111.jpg"
    },
    {
        "text": "En esta vía con tres calzadas separadas, ¿por qué calzada debe circular?",
        "options": [
            "Sólo por la calzada de la derecha.",
            "Por la calzada de la derecha y por la central cuando haya señales que así me lo permiten.",
            "Sólo por la calzada central."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T504201.jpg"
    },
    {
        "text": "¿Puede emplear pinzas de sujeción o reguladores en el cinturón de seguridad?",
        "options": [
            "Sí, ya que aumenta la eficacia del cinturón.",
            "Sí, pero sólo si el cinturón ejerce demasiada presión.",
            "No, porque disminuye la eficacia del cinturón."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T506312.jpg"
    },
    {
        "text": "En esta carretera convencional, ¿a qué velocidad máxima puede adelantar una motocicleta?",
        "options": [
            "A 120 km/h.",
            "A 100 km/h.",
            "A 90 km/h."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T510103_250916.jpg"
    },
    {
        "text": "¿Es conveniente darle una presión diferente a los neumáticos en invierno y en verano?",
        "options": [
            "Sí, se debe disminuir en el verano y aumentar en invierno.",
            "Sí, se debe aumentar en verano y disminuir en invierno.",
            "No."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T504204.jpg"
    },
    {
        "text": "En un cruce, se enciende la luz roja y el vehículo azul bloquea el paso. ¿Qué debe hacer?",
        "options": [
            "Esperar a que se encienda la luz verde.",
            "Salir del cruce, pero sin molestar a otros usuarios.",
            "Esperar a que se encienda la luz intermitente amarilla."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T510111_150316.jpg"
    },
    {
        "text": "En esta intersección, en la que los dos vehículos tienen de frente una señal de ceda el paso, ¿quién pasará primero?",
        "options": [
            "El conductor del autobús porque tiene mayor dificultad de maniobra.",
            "El conductor del autobús porque se aplica la regla general de prioridad de paso.",
            "El conductor del vehículo rojo porque tiene preferencia de paso."
        ],
        "correct": "C",
        "image": "../../../Assets/img/060520_03.jpg"
    },
    {
        "text": "Invadir marcha atrás una intersección para incorporarse a la circulación, ¿está permitido?",
        "options": [
            "Sí, si no obstaculiza la circulación a otros vehículos.",
            "No, porque está prohibido invadir un cruce de vías.",
            "Sí, si no recorre marcha atrás más de 15 metros."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T504207.jpg"
    },
    {
        "text": "Las pruebas de detección de sustancias estupefacientes, ¿son obligatorias?",
        "options": [
            "Sí, pero sólo cuando el conductor esté implicado en un accidente.",
            "Sí, igual que las pruebas de investigación de alcoholemia.",
            "No, las únicas pruebas obligatorias son las de alcoholemia."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T504208.jpg"
    },
    {
        "text": "La pérdida de vidas, de capacidad productiva y el sufrimiento físico y psicológico, ¿cómo se llaman?",
        "options": [
            "Costes sanitarios.",
            "Costes humanos.",
            "Costes materiales."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T504210.jpg"
    },
    {
        "text": "Si se detiene ante la línea continua y observa que no tiene visibilidad, ¿qué debe hacer?",
        "options": [
            "Pasar con precaución.",
            "Detener nuevamente el vehículo sólo si se aproximan vehículos.",
            "Detener nuevamente el vehículo donde tenga visibilidad sin poner en peligro a otros usuarios."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T504211.jpg"
    },
    {
        "text": "Un vehículo tiene el ralentí demasiado alto, ¿influye en el consumo de carburante?",
        "options": [
            "Sí, porque al girar el motor más deprisa, consume más.",
            "Sí, porque consume menos carburante.",
            "No, tal circunstancia no influye ni altera el consumo."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T504212.jpg"
    },
    {
        "text": "Esta señalización recomienda circular a 70 kilómetros por hora...",
        "options": [
            "en cualquier caso.",
            "sólo cuando las condiciones meteorológicas y ambientales sean favorables.",
            "sólo cuando está lloviendo."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T504213.jpg"
    },
    {
        "text": "Manejar un GPS mientras se conduce, ¿es peligroso?",
        "options": [
            "Sí, ya que distrae de la conducción.",
            "No, cuando hay poco tráfico.",
            "No es peligroso manejarlo en marcha."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T507814.jpg"
    },
    {
        "text": "En los pasos a nivel, ¿está prohibido adelantar a un turismo?",
        "options": [
            "No.",
            "Sólo cuando hay señales que prohíben adelantar.",
            "Sí."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T504215.jpg"
    },
    {
        "text": "En las motocicletas, la postura del conductor ha de ser...",
        "options": [
            "lo más aerodinámica posible, encorvando el cuerpo cuanto más mejor.",
            "suelta y no forzada, sin encorvar el cuerpo más de lo necesario.",
            "un poco forzada, para evitar relajamientos."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T504216.jpg"
    },
    {
        "text": "¿En qué caso el estacionamiento perturba gravemente la circulación?",
        "options": [
            "Cuando la distancia entre el vehículo y el borde opuesto de la calzada sea inferior a 5 metros.",
            "Cuando se efectúa en las medianas, separadores, isletas u otros elementos de canalización del tráfico.",
            "En una zona reservada a carga y descarga, fuera de las horas de utilización."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T504217.jpg"
    },
    {
        "text": "En caso de venta de un vehículo, ¿quién tiene que notificarlo a la Jefatura de Tráfico correspondiente?",
        "options": [
            "Tanto el comprador como el vendedor en el plazo más breve posible.",
            "El comprador, en un plazo máximo de 15 días.",
            "El vendedor, en el plazo de 10 días."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T504218.jpg"
    },
    {
        "text": "De noche, si la calzada está mojada...",
        "options": [
            "La visibilidad es mejor.",
            "La visibilidad es peor."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T504219.jpg"
    },
    {
        "text": "¿Se pueden llevar objetos o paquetes que salgan por las ventanillas de los lados?",
        "options": [
            "No.",
            "Sí, hasta 30 centímetros.",
            "Sí, con una tela de color rojo."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T504220.jpg"
    },
    {
        "text": "Una de las infracciones de los conductores que implica más riesgo para los peatones es...",
        "options": [
            "estacionar en los pasos para peatones.",
            "no utilizar los cinturones de seguridad.",
            "el exceso de velocidad en autopista."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T505607.jpg"
    },
    {
        "text": "Si presencia un accidente de circulación en el que no está implicado, ¿está obligado a auxiliar a los heridos?",
        "options": [
            "No.",
            "Sí."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T504222.jpg"
    },
    {
        "text": "Las órdenes de los agentes de tráfico...",
        "options": [
            "solamente hay que cumplirlas cuando exista una situación de peligro.",
            "hay que cumplirlas siempre.",
            "sólo deben cumplirse en las intersecciones."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T504223.jpg"
    },
    {
        "text": "El tiempo de reacción y, en consecuencia, la distancia que se recorre, ¿puede variar en una misma persona?",
        "options": [
            "Sí, de acuerdo con el estado que se encuentre.",
            "No, el tiempo de reacción es constante en cada persona.",
            "No, el tiempo de reacción en todas las personas está entre medio y un segundo."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T504224.jpg"
    },
    {
        "text": "En esta curva de visibilidad reducida, ¿está permitido cambiar de sentido?",
        "options": [
            "No, en ningún caso.",
            "Sí, porque no hay señal que lo prohíba",
            "Sí, siempre que no se obstaculice a los vehículos que circulen detrás"
        ],
        "correct": "A",
        "image": "../../../Assets/img/T504225.jpg"
    },
    {
        "text": "Para combatir la fatiga, ¿cuál es el remedio más adecuado?",
        "options": [
            "Apoyarse sobre el reposacabezas.",
            "Abrir todas las ventanillas.",
            "Dejar de conducir, descansar y, si es preciso, dormir un rato."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T504226.jpg"
    },
    {
        "text": "¿Puede circular conduciendo un ciclomotor a partir de la señal?",
        "options": [
            "Sí.",
            "No, porque no pueden circular los vehículos de dos ruedas.",
            "No, porque prohíbe el paso a todos los vehículos de dos ruedas con motor."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T504227.jpg"
    },
    {
        "text": "Un conductor novel, ¿qué tasa máxima de alcoholemia tiene permitida en aire espirado para circular?",
        "options": [
            "0,50 miligramos por litro.",
            "0,25 miligramos por litro.",
            "0,15 miligramos por litro."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T504228.jpg"
    },
    {
        "text": "Si una ambulancia circula en servicio urgente, para facilitarle el paso se debe...",
        "options": [
            "aminorar la marcha, arrimarse a la derecha e incluso detenerse si es necesario.",
            "continuar con precaución.",
            "sólo le facilitaré el paso en los cruces."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T504229.jpg"
    },
    {
        "text": "Conducir muy cerca del volante, ¿es más seguro?",
        "options": [
            "Sí, porque los movimientos son más precisos al tener los mandos más cerca.",
            "No, porque los movimientos son más forzados y menos rápidos.",
            "Es sólo una cuestión de costumbre."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T504230.jpg"
    }
]
            
            ;

            const container = document.getElementById('test-container');
            const paginationRow1 = document.getElementById('pagination-row-1');
            const paginationRow2 = document.getElementById('pagination-row-2');

            // Generar preguntas
            questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.setAttribute('data-correct', question.correct);
                questionDiv.innerHTML = `
                    <div class="question-image">
                        <img src="${question.image}" alt="Imagen de la pregunta">
                    </div>
                    <div class="question-content">
                        <h3>${index + 1}. ${question.text}</h3>
                        <div class="options">
                            ${question.options.map((option, idx) => `
                                <div class="option" data-answer="${String.fromCharCode(65 + idx)}">
                                    <span class="option-circle">${String.fromCharCode(65 + idx)}</span>
                                    ${option}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                container.appendChild(questionDiv);
            });

            // Generar paginación
            for (let i = 0; i < questions.length; i++) {
                const button = document.createElement('button');
                button.textContent = `${i + 1}`;
                button.addEventListener('click', () => showQuestion(i));
                if (i < 15) {
                    paginationRow1.appendChild(button);
                } else {
                    paginationRow2.appendChild(button);
                }
            }

            // Mostrar la primera pregunta
            showQuestion(0);

            // Función para mostrar una pregunta específica
            function showQuestion(index) {
                document.querySelectorAll('.question').forEach((q, i) => {
                    q.style.display = i === index ? 'flex' : 'none';
                });
                document.querySelectorAll('.pagination button').forEach((btn, i) => {
                    btn.style.backgroundColor = i === index ? '#ff7aa2' : '#ffa5c3';
                });
            }

            // Evento para las opciones de respuesta
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const question = this.closest('.question');
                    const questionIndex = Array.from(container.children).indexOf(question);
                    const isCorrect = this.getAttribute('data-answer') === question.getAttribute('data-correct');
                    
                    if (question.dataset.answered) return;

                    question.dataset.answered = true;

                    question.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                        opt.style.pointerEvents = 'none';
                    });
                    
                    this.classList.add('selected', isCorrect ? 'correct' : 'incorrect');

                    if (!isCorrect) {
                        question.querySelector(`.option[data-answer="${question.getAttribute('data-correct')}"]`).classList.add('correct');
                    }

                    // Actualizar el botón de paginación
                    const paginationButton = questionIndex < 15 ? paginationRow1.children[questionIndex] : paginationRow2.children[questionIndex - 15];
                    paginationButton.classList.add(isCorrect ? 'correct' : 'incorrect');
                });
            });

            // Evento para corregir el test
            document.getElementById('correct-test').addEventListener('click', () => {
                let wrongAnswers = 0;
                document.querySelectorAll('.question').forEach((question, index) => {
                    const selected = question.querySelector('.option.selected');
                    const isCorrect = selected && selected.getAttribute('data-answer') === question.getAttribute('data-correct');
                    if (!isCorrect) {
                        wrongAnswers++;
                    }
                    // Actualizar el botón de paginación si no se ha respondido
                    if (!selected) {
                        const paginationButton = index < 15 ? paginationRow1.children[index] : paginationRow2.children[index - 15];
                        paginationButton.classList.add('incorrect');
                    }
                });
                const resultMessage = `Has fallado ${wrongAnswers} respuestas.`;

                const alert = document.getElementById('custom-alert');
                document.getElementById('alert-message').textContent = resultMessage;
                alert.style.display = 'block';
            });
        });

        function closeAlert() {
            document.getElementById('custom-alert').style.display = 'none';
        }
    </script>

    
</body>
</html>