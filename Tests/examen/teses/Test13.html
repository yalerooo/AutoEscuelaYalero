<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Autoescuela</title>
    <link rel="stylesheet" href="../../../Assets/style.css">
</head>
<body>

    
    <div class="container">
        <h1 style="text-align: center; color: #ffa5c3;">Test de Autoescuela</h1>
        <div id="test-container">
            <!-- Aquí se generarán dinámicamente las preguntas -->
        </div>
        <div class="pagination">
            <div class="pagination-row" id="pagination-row-1"></div>
            <div class="pagination-row" id="pagination-row-2"></div>
        </div>
        <button id="correct-test">Corregir Test</button>
    </div>

    <!-- Custom Alert HTML -->
    <div class="custom-alert" id="custom-alert">
        <h2>Resultado del Test</h2>
        <p id="alert-message">Aquí irá el mensaje del resultado.</p>
        <button onclick="closeAlert()">Cerrar</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const questions = [
    {
        "text": "El turismo blanco de la fotografía, circula por una vía de poblado, ¿a qué velocidad máxima puede circular por esta vía en ausencia de señalización?",
        "options": [
            "50 km/h.",
            "20 km/h.",
            "30 km/h."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T511807.jpg"
    },
    {
        "text": "En su turismo lleva enganchado un remolque, ¿debe concertar el seguro obligatorio para el remolque?",
        "options": [
            "No, sólo para el turismo.",
            "Sí, cualquiera que sea la MMA del remolque.",
            "Sí, pero sólo si la MMA del remolque supera los 750 Kg."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T511302.jpg"
    },
    {
        "text": "Esta señal indica...",
        "options": [
            "la velocidad mínima obligatoria.",
            "la velocidad máxima permitida.",
            "la velocidad máxima recomendable."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T511303.jpg"
    },
    {
        "text": "La somnolencia hace que...",
        "options": [
            "resulte más fácil mantener la concentración en el tráfico.",
            "resulte más difícil mantener la concentración en el tráfico.",
            "disminuya el tiempo de reacción."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T511304.jpg"
    },
    {
        "text": "En los lugares donde se impida la visibilidad de la señalización a los usuarios a quienes les afecta está prohibido...",
        "options": [
            "parar, pero está permitido estacionar.",
            "estacionar, pero está permitido parar.",
            "parar y estacionar."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T510105_151116.jpg"
    },
    {
        "text": "En caso de niebla densa, ¿qué precauciones se deben tomar?",
        "options": [
            "Ninguna si no vienen vehículos en sentido contrario.",
            "Mantener la velocidad y estar atento al cumplimiento de la señalización vertical.",
            "Moderar la velocidad y si fuera preciso, detener el vehículo."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T511306.jpg"
    },
    {
        "text": "¿Cómo debe señalizar la carga que sobresale de una motocicleta?",
        "options": [
            "En las motocicletas la carga no es necesario señalizarla.",
            "Con un panel reglamentario en el extremo de la carga.",
            "De noche con una luz roja por la parte trasera."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T511307.jpg"
    },
    {
        "text": "¿Cuántas horas necesita dormir una persona para que el descanso se considere adecuado?",
        "options": [
            "De 3 a 4 horas.",
            "De 7 a 9 horas.",
            "De 10 a 12 horas."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T513126.jpg"
    },
    {
        "text": "En una intersección sin señalizar, ¿está obligado un turismo a ceder el paso a un tranvía?",
        "options": [
            "No.",
            "Sí.",
            "Sólo si se aproxima por mi derecha."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T511309.jpg"
    },
    {
        "text": "El alcohol, ¿qué alteración puede provocar en el comportamiento del conductor?",
        "options": [
            "Respuestas impulsivas y agresivas ante los demás conductores.",
            "Falta de sensibilidad a los deslumbramientos.",
            "Disminución del tiempo de reacción."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T511310.jpg"
    },
    {
        "text": "Se detiene en un carril esperando para realizar un cambio de sentido, ¿está permitido?",
        "options": [
            "Sí, siempre que no obstaculice a los vehículos que circulen detrás.",
            "No, debe salir siempre a la derecha.",
            "No, en ningún caso."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T511311.jpg"
    },
    {
        "text": "El tiempo de reacción puede aumentar...",
        "options": [
            "después de una fuerte discusión.",
            "después de una comida ligera.",
            "si usamos gafas graduadas."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T511312.jpg"
    },
    {
        "text": "Está prohibido adelantar en...",
        "options": [
            "las intersecciones con vías para ciclistas.",
            "las glorietas.",
            "todas las intersecciones aunque la señalización lo permita."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T511313.jpg"
    },
    {
        "text": "¿Cuál es la finalidad principal del airbag?",
        "options": [
            "Evitar, en caso de accidente, el impacto de los ocupantes del vehículo contra los elementos del automóvil.",
            "Ninguna, es un elemento decorativo.",
            "Disminuir el consumo de combustible."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T511314.jpg"
    },
    {
        "text": "Al llegar a una intersección sin línea de detención, regulada por la señal de la fotografía, y tras asegurarnos de que no viene ningún vehículo... ¿Estamos obligados a detener el vehículo?",
        "options": [
            "Sí, inmediatamente antes de la intersección.",
            "Sí, siempre a la altura de la señal de STOP.",
            "No, ya que no viene ningún vehículo."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T511315.jpg"
    },
    {
        "text": "La distribución de la carga, ¿afecta significativamente al consumo de combustible?",
        "options": [
            "Sí, por lo que hay que utilizar la baca como última opción.",
            "No afecta al consumo.",
            "Sí, por lo que hay que utilizar la baca como primera opción."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T511316.jpg"
    },
    {
        "text": "Cuando las luces de su vehículo apuntan demasiado bajo...",
        "options": [
            "se acorta la iluminación a larga distancia.",
            "se mejora la iluminación de la vía a larga distancia.",
            "se puede deslumbrar a los conductores de otros vehículos."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T510102_150723.jpg"
    },
    {
        "text": "Entre las causas principales de accidentes por utilizar el teléfono móvil están...",
        "options": [
            "la mejora de orientación del conductor.",
            "la mejora de maniobrabilidad del vehículo.",
            "las desviaciones de trayectoria del vehículo."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T511318.jpg"
    },
    {
        "text": "Un autobús y un camión llegan a la vez a un tramo muy estrecho de la vía sin señalizar, ¿qué vehículo debe retroceder?",
        "options": [
            "El autobús.",
            "El camión.",
            "El vehículo que tenga mayor masa máxima autorizada."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T511319.jpg"
    },
    {
        "text": "En una motocicleta con mandos independientes para cada uno de los frenos, ¿dónde se acciona generalmente el freno delantero?",
        "options": [
            "En el manillar, con la mano derecha.",
            "En un pedal, con el pie izquierdo.",
            "En el manillar, con la mano izquierda."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T511320.jpg"
    },
    {
        "text": "En un cambio de carril, ¿qué vehículo tiene preferencia de paso?",
        "options": [
            "El vehículo que cambia de carril, en cualquier caso.",
            "El vehículo que ya circulaba por el carril.",
            "El vehículo que cambia de carril, si circula a gran velocidad."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T511321.jpg"
    },
    {
        "text": "Los sistemas de seguridad activa en un vehículo...",
        "options": [
            "ayudan al conductor a reducir la posibilidad de que un accidente llegue a producirse.",
            "reducen al mínimo las lesiones en caso de accidente.",
            "eliminan la posibilidad de que un accidente llegue a producirse."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T511322.jpg"
    },
    {
        "text": "Dentro de poblado, en vías de un único carril por sentido de circulación, como norma general, ¿cuál es la velocidad máxima genérica?",
        "options": [
            "50 km/h.",
            "80 km/h.",
            "30 km/h."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T510106_050216.jpg"
    },
    {
        "text": "El uso de los intermitentes, ¿contribuye a reducir los accidentes?",
        "options": [
            "No, al no formar parte de los sistemas de seguridad activa.",
            "No, porque no es obligatorio su uso.",
            "Sí, porque avisa a los demás de la maniobra."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T511326.jpg"
    },
    {
        "text": "El tractor agrícola de la fotografía, de MMA inferior a 3500 kg., ¿circula correctamente?",
        "options": [
            "No, pues debe utilizar el carril derecho.",
            "Sí.",
            "No, pues puede utilizar cualquier parte de la vía."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T511325.jpg"
    },
    {
        "text": "¿Está permitido conducir bajo los efectos de un medicamento?",
        "options": [
            "Sólo si no altera el estado físico o mental.",
            "Sí, siempre que no se mezcle con alcohol.",
            "No, en ningún caso."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T511324.jpg"
    },
    {
        "text": "Circulas por...",
        "options": [
            "una carretera convencional y la salida es hacia una vía para automóviles.",
            "una autopista y la salida es hacia carretera convencional.",
            "una autopista y la salida es hacia autovía."
        ],
        "correct": "B",
        "image": "../../../Assets/img/I4830.jpg"
    },
    {
        "text": "La fatiga, ¿provoca lentitud y falta de precisión en los movimientos?",
        "options": [
            "No, la fatiga sólo produce calambres.",
            "No.",
            "Sí, por lo cual la conducción se hace más peligrosa."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T510106_150616.jpg"
    },
    {
        "text": "Un vehículo prioritario circula haciendo uso únicamente de las señales luminosas especiales, ¿es obligatorio facilitarle el paso?",
        "options": [
            "No, en ningún caso.",
            "Sí, porque circula en servicio urgente.",
            "No, si no usa también las señales acústicas especiales."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T511329.jpg"
    },
    {
        "text": "En algunos casos hay que poner a los heridos en posición de defensa, ¿para qué?",
        "options": [
            "Para que circule mejor la sangre.",
            "Para que estén conscientes.",
            "Para que no se asfixien."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T511330.jpg"
    }
]
            
            ;

            const container = document.getElementById('test-container');
            const paginationRow1 = document.getElementById('pagination-row-1');
            const paginationRow2 = document.getElementById('pagination-row-2');

            // Generar preguntas
            questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.setAttribute('data-correct', question.correct);
                questionDiv.innerHTML = `
                    <div class="question-image">
                        <img src="${question.image}" alt="Imagen de la pregunta">
                    </div>
                    <div class="question-content">
                        <h3>${index + 1}. ${question.text}</h3>
                        <div class="options">
                            ${question.options.map((option, idx) => `
                                <div class="option" data-answer="${String.fromCharCode(65 + idx)}">
                                    <span class="option-circle">${String.fromCharCode(65 + idx)}</span>
                                    ${option}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                container.appendChild(questionDiv);
            });

            // Generar paginación
            for (let i = 0; i < questions.length; i++) {
                const button = document.createElement('button');
                button.textContent = `${i + 1}`;
                button.addEventListener('click', () => showQuestion(i));
                if (i < 15) {
                    paginationRow1.appendChild(button);
                } else {
                    paginationRow2.appendChild(button);
                }
            }

            // Mostrar la primera pregunta
            showQuestion(0);

            // Función para mostrar una pregunta específica
            function showQuestion(index) {
                document.querySelectorAll('.question').forEach((q, i) => {
                    q.style.display = i === index ? 'flex' : 'none';
                });
                document.querySelectorAll('.pagination button').forEach((btn, i) => {
                    btn.style.backgroundColor = i === index ? '#ff7aa2' : '#ffa5c3';
                });
            }

            // Evento para las opciones de respuesta
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const question = this.closest('.question');
                    const questionIndex = Array.from(container.children).indexOf(question);
                    const isCorrect = this.getAttribute('data-answer') === question.getAttribute('data-correct');
                    
                    if (question.dataset.answered) return;

                    question.dataset.answered = true;

                    question.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                        opt.style.pointerEvents = 'none';
                    });
                    
                    this.classList.add('selected', isCorrect ? 'correct' : 'incorrect');

                    if (!isCorrect) {
                        question.querySelector(`.option[data-answer="${question.getAttribute('data-correct')}"]`).classList.add('correct');
                    }

                    // Actualizar el botón de paginación
                    const paginationButton = questionIndex < 15 ? paginationRow1.children[questionIndex] : paginationRow2.children[questionIndex - 15];
                    paginationButton.classList.add(isCorrect ? 'correct' : 'incorrect');
                });
            });

            // Evento para corregir el test
            document.getElementById('correct-test').addEventListener('click', () => {
                let wrongAnswers = 0;
                document.querySelectorAll('.question').forEach((question, index) => {
                    const selected = question.querySelector('.option.selected');
                    const isCorrect = selected && selected.getAttribute('data-answer') === question.getAttribute('data-correct');
                    if (!isCorrect) {
                        wrongAnswers++;
                    }
                    // Actualizar el botón de paginación si no se ha respondido
                    if (!selected) {
                        const paginationButton = index < 15 ? paginationRow1.children[index] : paginationRow2.children[index - 15];
                        paginationButton.classList.add('incorrect');
                    }
                });
                const resultMessage = `Has fallado ${wrongAnswers} respuestas.`;

                const alert = document.getElementById('custom-alert');
                document.getElementById('alert-message').textContent = resultMessage;
                alert.style.display = 'block';
            });
        });

        function closeAlert() {
            document.getElementById('custom-alert').style.display = 'none';
        }
    </script>

    
</body>
</html>