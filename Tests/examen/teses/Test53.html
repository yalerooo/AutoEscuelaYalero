<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Autoescuela</title>
    <link rel="stylesheet" href="../../../Assets/style.css">
</head>
<body>

    
    <div class="container">
        <h1 style="text-align: center; color: #ffa5c3;">Test de Autoescuela</h1>
        <div id="test-container">
            <!-- Aquí se generarán dinámicamente las preguntas -->
        </div>
        <div class="pagination">
            <div class="pagination-row" id="pagination-row-1"></div>
            <div class="pagination-row" id="pagination-row-2"></div>
        </div>
        <button id="correct-test">Corregir Test</button>
    </div>

    <!-- Custom Alert HTML -->
    <div class="custom-alert" id="custom-alert">
        <h2>Resultado del Test</h2>
        <p id="alert-message">Aquí irá el mensaje del resultado.</p>
        <button onclick="closeAlert()">Cerrar</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const questions = [
    {
        "text": "¿Cómo se debe agarrar el volante?",
        "options": [
            "Con los brazos muy estirados.",
            "Con los brazos un poco doblados.",
            "Con los brazos muy doblados."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T500301.jpg"
    },
    {
        "text": "Los conos en la calzada, le indican...",
        "options": [
            "la prohibición de rebasar la línea imaginaria que los une.",
            "reforzamiento de las líneas discontinuas del carril.",
            "nada, porque no son señales de circulación."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P1307.jpg"
    },
    {
        "text": "Circulando a 100 km/h se rompe el freno de pie. ¿Cómo se puede detener el vehículo?",
        "options": [
            "Poniendo velocidades más cortas y al final con el freno de mano.",
            "Con el freno de mano solamente",
            "Pisando varias veces el pedal del embrague y el pedal del freno."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T500303.jpg"
    },
    {
        "text": "¿Qué indica esta señal?",
        "options": [
            "Entrada prohibida a vehículos que transporten mercancías explosivas o inflamables.",
            "Entrada prohibida a vehículos que transporten mercancías peligrosas.",
            "Calzada obligatoria para vehículos que transporten mercancías explosivas."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T500304.jpg"
    },
    {
        "text": "El consumo de alcohol, ¿qué produce en el conductor?",
        "options": [
            "Aumento del tiempo de reacción (= actúa más lento).",
            "Disminución del tiempo de reacción (=actúa más rápido).",
            "Aumento del campo visual (=ve mejor)."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T500305.jpg"
    },
    {
        "text": "Al salir de un garaje, ¿qué debe hacer?",
        "options": [
            "Moderar la velocidad por si hay peatones cruzando porque tienen prioridad.",
            "Aumentar la velocidad para salir lo antes posible.",
            "Detenerse siempre a la salida."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T500306.jpg"
    },
    {
        "text": "Una embarazada, ¿debe llevar puesto el cinturón de seguridad?",
        "options": [
            "Sí, es obligatorio.",
            "No, no es obligatorio.",
            "Sí, pero sólo en vías interurbanas."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T500307.jpg"
    },
    {
        "text": "El turismo blanco circula por autopista, después de adelantar al turismo y al camión, desea seguir adelantando a otros vehículos. ¿Debe regresar antes al carril derecho?",
        "options": [
            "No, porque en autopistas no es obligatorio.",
            "Sí, cuando circulen vehículos detrás a más velocidad.",
            "Sí, siempre."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T510123_150217.jpg"
    },
    {
        "text": "Conduciendo una motocicleta, ¿cuándo es especialmente peligroso el viento?",
        "options": [
            "Cuando sopla de frente, porque puede frenar la marcha.",
            "Cuando sopla de costado.",
            "Cuando sopla desde atrás, porque aumenta la velocidad."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T500309.jpg"
    },
    {
        "text": "El conductor de una motocicleta que va a girar a la izquierda, ¿cómo debe señalizar la maniobra?",
        "options": [
            "Con el brazo izquierdo hacia abajo y la palma de la mano hacia atrás.",
            "Con el brazo izquierdo doblado hacia arriba.",
            "Con el brazo izquierdo extendido horizontalmente y la palma de la mano hacia abajo."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T500310_nueva.jpg"
    },
    {
        "text": "Se estima que de cada 100 siniestros, los debidos al factor humano son...",
        "options": [
            "entre 4 y 13.",
            "entre 10 y 35.",
            "entre 70 y 90."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P2113.jpg"
    },
    {
        "text": "¿Qué le indica la señal en esta vía de sentido único?",
        "options": [
            "Que está prohibida la parada y el estacionamiento en el lado derecho.",
            "Que está prohibida la parada y el estacionamiento en ambos lados de la calzada.",
            "Que está prohibida la parada en el lado derecho de la calzada."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T500312.jpg"
    },
    {
        "text": "La presión de los neumáticos deberá comprobarse con los neumáticos:",
        "options": [
            "Fríos.",
            "Calientes.",
            "Fríos o calientes, es indiferente."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T500313.jpg"
    },
    {
        "text": "El intermitente derecho se utilizará para indicar...",
        "options": [
            "cambio del sentido de la marcha.",
            "cambio de dirección a la izquierda.",
            "el desplazamiento lateral a la derecha."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T500314.jpg"
    },
    {
        "text": "Cuando llueve, las ruedas del vehículo, ¿cómo se agarran a la calzada?",
        "options": [
            "Se agarran más a la calzada.",
            "Se agarran menos a la calzada.",
            "Se agarran igual que cuando no llueve."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T500315.jpg"
    },
    {
        "text": "Los ciclomotores, ¿pueden circular por el arcén en columna de a dos?",
        "options": [
            "Sí, de forma excepcional cuando el arcén sea transitable y suficiente.",
            "No, nunca.",
            "Sí, siempre."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T500316.jpg"
    },
    {
        "text": "¿Cómo debe colocar su vehículo al parar o estacionar?",
        "options": [
            "Es indiferente, siempre que pare el motor y accione el freno de estacionamiento.",
            "Colocando el vehículo en paralelo a la vía, siempre.",
            "De manera que permita la mejor utilización del espacio disponible."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T500317.jpg"
    },
    {
        "text": "En una intersección señalizada en la que se encuentra un agente regulando el tráfico, ¿qué debe hacer?",
        "options": [
            "Aplicar las normas generales de prioridad de paso de los vehículos que se acerquen por la derecha.",
            "Obedecer las señales del agente.",
            "Obedecer las señales de tráfico que regulan la prioridad."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T500318.jpg"
    },
    {
        "text": "A la hora de determinar la distancia de seguridad con el vehículo que circula delante...",
        "options": [
            "debe tener en cuenta la velocidad, la visibilidad y el estado de la calzada.",
            "debe tener en cuenta la velocidad, exclusivamente.",
            "debe tener en cuenta las características del vehículo que circula delante."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T500319.jpg"
    },
    {
        "text": "Las gripes, resfriados y alergias, ¿afectan a la conducción?",
        "options": [
            "No, apenas tienen efectos negativos.",
            "Sí, pero resultan tan familiares que no es necesario tomar precauciones especiales.",
            "Sí, y resultan tan familiares que a veces se olvidan sus síntomas."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T500320.jpg"
    },
    {
        "text": "En los vehículos no destinados al transporte de mercancías, ¿podrá sobresalir la carga por la parte delantera?",
        "options": [
            "Sí, hasta un 10 por ciento si la carga es divisible.",
            "No.",
            "Sí, hasta un 15 por ciento si la carga es indivisible."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T500321.jpg"
    },
    {
        "text": "Circular con niebla, ¿influye en la pérdida de adherencia?",
        "options": [
            "Sí, puesto que la niebla humedece el asfalto.",
            "No, nunca.",
            "No, la niebla afecta solo a la falta de visibilidad."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T500322.jpg"
    },
    {
        "text": "En este puesto de peaje, ¿qué se debe hacer?",
        "options": [
            "Pasar sin detenerse porque la flecha está verde.",
            "Pasar sin detenerse porque no hay barrera.",
            "Detenerse en el puesto de control porque lo indica la señal."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T500323.jpg"
    },
    {
        "text": "La línea ancha discontinua, ¿qué indica?",
        "options": [
            "Que hay un carril reversible.",
            "Que hay una zona de estacionamiento.",
            "Que hay un carril especial."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T500324.jpg"
    },
    {
        "text": "Todos los turismos están obligados a llevar dos espejos como mínimo. ¿Qué espejo es siempre obligatorio?",
        "options": [
            "El derecho.",
            "El izquierdo.",
            "El central."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T500325.jpg"
    },
    {
        "text": "A partir de esta señal, circular como mínimo a 30 kilómetros por hora...",
        "options": [
            "es obligatorio.",
            "es recomendable.",
            "está prohibido."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T500326.jpg"
    },
    {
        "text": "En los ciclistas, el uso del casco...",
        "options": [
            "no tiene influencia en las lesiones que puedan sufrir.",
            "reduce totalmente la probabilidad de sufrir lesiones en la cabeza.",
            "reduce considerablemente la probabilidad de sufrir lesiones en la cabeza."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P2929.jpg"
    },
    {
        "text": "Cuando se acerque un vehículo prioritario en servicio urgente, los demás conductores deben...",
        "options": [
            "facilitarle el paso llegando a detenerse si es preciso.",
            "detener su vehículo.",
            "apartarse siempre a su derecha."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T500328.jpg"
    },
    {
        "text": "En los pasos para peatones no regulados por semáforo o agente, ¿tienen preferencia los peatones?",
        "options": [
            "No, aunque por cortesía se les puede ceder el paso.",
            "Sí, en cualquier caso.",
            "Sí, solamente en vías urbanas."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T500329.jpg"
    },
    {
        "text": "Cuando el titular de un permiso de conducir pierda parte de su asignación total de puntos, ¿puede recuperarlos?",
        "options": [
            "No, una vez perdidos no es posible recuperarlos.",
            "Sí, obteniendo de nuevo el permiso de conducción.",
            "Sí, realizando un curso de sensibilización y reeducación vial."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T500330.jpg"
    }
]
            
            ;

            const container = document.getElementById('test-container');
            const paginationRow1 = document.getElementById('pagination-row-1');
            const paginationRow2 = document.getElementById('pagination-row-2');

            // Generar preguntas
            questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.setAttribute('data-correct', question.correct);
                questionDiv.innerHTML = `
                    <div class="question-image">
                        <img src="${question.image}" alt="Imagen de la pregunta">
                    </div>
                    <div class="question-content">
                        <h3>${index + 1}. ${question.text}</h3>
                        <div class="options">
                            ${question.options.map((option, idx) => `
                                <div class="option" data-answer="${String.fromCharCode(65 + idx)}">
                                    <span class="option-circle">${String.fromCharCode(65 + idx)}</span>
                                    ${option}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                container.appendChild(questionDiv);
            });

            // Generar paginación
            for (let i = 0; i < questions.length; i++) {
                const button = document.createElement('button');
                button.textContent = `${i + 1}`;
                button.addEventListener('click', () => showQuestion(i));
                if (i < 15) {
                    paginationRow1.appendChild(button);
                } else {
                    paginationRow2.appendChild(button);
                }
            }

            // Mostrar la primera pregunta
            showQuestion(0);

            // Función para mostrar una pregunta específica
            function showQuestion(index) {
                document.querySelectorAll('.question').forEach((q, i) => {
                    q.style.display = i === index ? 'flex' : 'none';
                });
                document.querySelectorAll('.pagination button').forEach((btn, i) => {
                    btn.style.backgroundColor = i === index ? '#ff7aa2' : '#ffa5c3';
                });
            }

            // Evento para las opciones de respuesta
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const question = this.closest('.question');
                    const questionIndex = Array.from(container.children).indexOf(question);
                    const isCorrect = this.getAttribute('data-answer') === question.getAttribute('data-correct');
                    
                    if (question.dataset.answered) return;

                    question.dataset.answered = true;

                    question.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                        opt.style.pointerEvents = 'none';
                    });
                    
                    this.classList.add('selected', isCorrect ? 'correct' : 'incorrect');

                    if (!isCorrect) {
                        question.querySelector(`.option[data-answer="${question.getAttribute('data-correct')}"]`).classList.add('correct');
                    }

                    // Actualizar el botón de paginación
                    const paginationButton = questionIndex < 15 ? paginationRow1.children[questionIndex] : paginationRow2.children[questionIndex - 15];
                    paginationButton.classList.add(isCorrect ? 'correct' : 'incorrect');
                });
            });

            // Evento para corregir el test
            document.getElementById('correct-test').addEventListener('click', () => {
                let wrongAnswers = 0;
                document.querySelectorAll('.question').forEach((question, index) => {
                    const selected = question.querySelector('.option.selected');
                    const isCorrect = selected && selected.getAttribute('data-answer') === question.getAttribute('data-correct');
                    if (!isCorrect) {
                        wrongAnswers++;
                    }
                    // Actualizar el botón de paginación si no se ha respondido
                    if (!selected) {
                        const paginationButton = index < 15 ? paginationRow1.children[index] : paginationRow2.children[index - 15];
                        paginationButton.classList.add('incorrect');
                    }
                });
                const resultMessage = `Has fallado ${wrongAnswers} respuestas.`;

                const alert = document.getElementById('custom-alert');
                document.getElementById('alert-message').textContent = resultMessage;
                alert.style.display = 'block';
            });
        });

        function closeAlert() {
            document.getElementById('custom-alert').style.display = 'none';
        }
    </script>

    
</body>
</html>