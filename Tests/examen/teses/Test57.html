<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Autoescuela</title>
    <link rel="stylesheet" href="../../../Assets/style.css">
</head>
<body>

    
    <div class="container">
        <h1 style="text-align: center; color: #ffa5c3;">Test de Autoescuela</h1>
        <div id="test-container">
            <!-- Aquí se generarán dinámicamente las preguntas -->
        </div>
        <div class="pagination">
            <div class="pagination-row" id="pagination-row-1"></div>
            <div class="pagination-row" id="pagination-row-2"></div>
        </div>
        <button id="correct-test">Corregir Test</button>
    </div>

    <!-- Custom Alert HTML -->
    <div class="custom-alert" id="custom-alert">
        <h2>Resultado del Test</h2>
        <p id="alert-message">Aquí irá el mensaje del resultado.</p>
        <button onclick="closeAlert()">Cerrar</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const questions = [
    {
        "text": "Hablar por el teléfono móvil cuando se conduce, ¿impide manejar el volante de forma adecuada?",
        "options": [
            "Sí, pero sólo al circular a alta velocidad.",
            "No, cuando se sujeta con el hombro.",
            "Sí, tanto si se sujeta con la mano como si se hace con el hombro."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T500701.jpg"
    },
    {
        "text": "En autopista, ¿cómo debe circular un turismo?",
        "options": [
            "A velocidad adaptada a la circulación y al estado de la calzada sin rebasar los 120 km/h.",
            "Siempre a la velocidad máxima permitida.",
            "A velocidad adaptada a la circulación y al estado de la calzada, pudiendo rebasar los 120 km/h para realizar adelantamientos."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T500702.jpg"
    },
    {
        "text": "La señal de la derecha indica...",
        "options": [
            "peligro por la proximidad de una vía en obras.",
            "la proximidad de un peligro distinto de los advertidos por otras señales.",
            "peligro por la proximidad de un estrechamiento de la calzada."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T500703.jpg"
    },
    {
        "text": "Si lleva a un pasajero en la motocicleta, al frenar...",
        "options": [
            "aumenta el desequilibrio.",
            "es más difícil que se bloquee la rueda trasera.",
            "el peso se desplaza hacia la parte trasera."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T500704.jpg"
    },
    {
        "text": "Un peatón pretende cruzar por un paso de peatones debidamente señalizado, ¿cuándo debe penetrar en la calzada?",
        "options": [
            "Cuando el peatón lo decida, puesto que dispone de la preferencia de paso.",
            "Cuando la distancia y velocidad de los vehículos permitan hacerlo con seguridad.",
            "Solamente cuando no haya vehículos cerca."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T500705.jpg"
    },
    {
        "text": "Hay hielo en la calzada. ¿Qué debe hacer?",
        "options": [
            "Circular con la primera marcha, que es la más corta.",
            "Acelerar para salir rápidamente.",
            "Conducir con cuidado, frenar y acelerar con cuidado sólo cuando sea necesario."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T500706.jpg"
    },
    {
        "text": "¿Cuál es la función de la carrocería?",
        "options": [
            "Su función es básicamente estética.",
            "Proteger a los ocupantes.",
            "Dotar al vehículo de un aspecto aerodinámico."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T500707.jpg"
    },
    {
        "text": "Un conductor, ¿está obligado a someterse a las pruebas de detección de drogas?",
        "options": [
            "Sí.",
            "No, si no está implicado en un accidente.",
            "No, sólo está obligado a las pruebas de detección de alcohol."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T500708.jpg"
    },
    {
        "text": "¿Tiene que ceder el paso a este autobús que quiere incorporarse a la circulación?",
        "options": [
            "Sí, en la medida de lo posible, llegando incluso a detener el vehículo.",
            "No, porque se trata de una vía urbana.",
            "No, porque los turismos tienen preferencia."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T500709.jpg"
    },
    {
        "text": "Mirar un cartel publicitario en el entorno de la vía, ¿puede distraer al conductor de un vehículo?",
        "options": [
            "No.",
            "Sí.",
            "No, en vías bien iluminadas."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T500710.jpg"
    },
    {
        "text": "¿Está permitido cambiar el sentido de la marcha utilizando la marcha atrás?",
        "options": [
            "No, si se puede marchar hacia adelante o cambiar de dirección.",
            "Sí, siempre que no obstaculice a otros usuarios de la vía.",
            "Sí."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T500711.jpg"
    },
    {
        "text": "¿Cómo debe advertir su presencia en la vía este conjunto de vehículos?",
        "options": [
            "Utilizando la señalización de emergencia.",
            "Empleando tanto de día como de noche una luz rotativa de color amarillo.",
            "Con una luz intermitente amarilla."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T500712.jpg"
    },
    {
        "text": "En una autopista, ¿se puede circular por el carril de aceleración a mayor \nvelocidad que los vehículos que circulan por el carril normal?",
        "options": [
            "No, se estaría realizando un adelantamiento por la derecha.",
            "No, salvo las motocicletas.",
            "Sí."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T500713.jpg"
    },
    {
        "text": "Cuando ha habido heridos en un accidente de circulación es fundamental...",
        "options": [
            "darles algo de beber para reanimarlos.",
            "moverlos lo menos posible y llamar al 112.",
            "sacarlos del vehículo para intentar reanimarlos."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T500714.jpg"
    },
    {
        "text": "La línea de borde de la calzada, ¿se puede atravesar?",
        "options": [
            "Sí, cuando la línea es discontinua; no, cuando es continua.",
            "Sí, cuando sea necesario y las circunstancias lo permitan.",
            "No, está prohibido."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T500715.jpg"
    },
    {
        "text": "Si ha instalado en su vehículo neumáticos de invierno, ¿es conveniente sustituirlos cuando las temperaturas comiencen a ser más cálidas?",
        "options": [
            "Sí, porque en tiempo cálido disminuye considerablemente la distancia de frenado.",
            "Sí, porque cuando la temperatura es más cálida se desgastan con más rapidez.",
            "No, porque se adaptan progresivamente a los cambios de temperatura."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T501322.jpg"
    },
    {
        "text": "Normalmente, ¿a qué velocidad debe circular?",
        "options": [
            "A la velocidad mínima permitida en la vía.",
            "A la velocidad máxima permitida en la vía.",
            "A la velocidad adecuada para poder detenerme con seguridad en caso necesario."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T500717.jpg"
    },
    {
        "text": "Cuando un vehículo está inmovilizado en el lado derecho de la calzada...",
        "options": [
            "el conductor podrá entrar o salir por el lado izquierdo, pero con rapidez y precaución.",
            "el conductor no podrá salir o entrar nunca por el lado derecho.",
            "el conductor debe entrar o salir siempre por el lado derecho."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T500718.jpg"
    },
    {
        "text": "Tras tomar un medicamento, ¿qué debe tenerse en cuenta antes de conducir?",
        "options": [
            "Que puede alterar el estado físico o mental, y conviene consultar sus efectos con el médico.",
            "Que no esté caducado en más de 6 meses, principalmente.",
            "Nada, si ha sido recetado por un médico."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T500719.jpg"
    },
    {
        "text": "¿Qué debe hacer si sufre una avería en un túnel?",
        "options": [
            "Encender las luces de largo alcance para que se vea mejor y que todos los ocupantes desciendan del vehículo.",
            "Si la avería permite la marcha del vehículo, debe continuar hasta salir del túnel o hasta una zona reservada para emergencias.",
            "Detener el vehículo en cualquier lugar del túnel para evitar el peligro, aunque la avería permita la marcha del vehículo."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T500720.jpg"
    },
    {
        "text": "Los ocupantes de un ciclomotor que dispone de cinturones de seguridad están obligados a usarlos...",
        "options": [
            "sólo cuando circulan por vías interurbanas.",
            "únicamente cuando circulan por vías que no dispongan de arcén.",
            "siempre."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T500721.jpg"
    },
    {
        "text": "Para girar a la izquierda, es obligatorio aproximarse al borde izquierdo de la calzada en las vías...",
        "options": [
            "de un solo sentido de circulación.",
            "con más de un carril para uno de los sentidos de circulación.",
            "de doble sentido de circulación."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T500722.jpg"
    },
    {
        "text": "Esta señal, ¿qué indica?",
        "options": [
            "Prohibido girar a la izquierda, solamente.",
            "Prohibido girar a la izquierda y a la derecha.",
            "Prohibido girar a la izquierda y cambiar de sentido."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T500723.jpg"
    },
    {
        "text": "Cuando se circula con niebla, el conductor debe...",
        "options": [
            "parar en la calzada, hasta que desaparezca la niebla.",
            "acercarse todo lo posible al vehículo que circula delante para poder verlo mejor.",
            "adaptar la velocidad a las condiciones atmosféricas de visibilidad."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T500724.jpg"
    },
    {
        "text": "Una motocicleta, ¿puede llevar instaladas luces antiniebla?",
        "options": [
            "Sí, de forma opcional, tanto en la parte delantera como trasera.",
            "Sí, pero únicamente en la parte trasera.",
            "No, las motocicletas no pueden llevar luces antiniebla."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T500725.jpg"
    },
    {
        "text": "Los límites de velocidad establecidos en las vías tienen como objetivo...",
        "options": [
            "garantizar la seguridad únicamente.",
            "garantizar la seguridad y la fluidez.",
            "adaptar la conducción a las nuevas tecnologías de los vehículos y el medio ambiente."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T500726.jpg"
    },
    {
        "text": "En esta autopista dentro de poblado, ¿a qué velocidad puede circular como máximo si no existe señalización?",
        "options": [
            "A 70 km/h.",
            "A 120 km/h.",
            "A 80 km/h."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T500727.jpg"
    },
    {
        "text": "Un conductor que revisa periódicamente los neumáticos puede...",
        "options": [
            "pasar la ITV con total seguridad.",
            "detectar a tiempo un deterioro y prevenir un reventón.",
            "evitar los fallos mecánicos del vehículo."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T500728.jpg"
    },
    {
        "text": "Un conjunto de vehículos, cuya longitud es de 7,30 metros, circula por una vía con tres carriles por sentido de la circulación, ¿qué carriles puede utilizar?",
        "options": [
            "Cualquiera de ellos indistintamente.",
            "El de la derecha y el inmediato únicamente cuando las circunstancias del tráfico o de la vía lo aconsejen.",
            "Solamente el de la derecha."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T500729.jpg"
    },
    {
        "text": "Una motocicleta con un solo espejo retrovisor, ¿en qué lado debe llevarlo?",
        "options": [
            "En el lado derecho o en el izquierdo, es indiferente.",
            "En el lado izquierdo.",
            "En el lado derecho."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T500730.jpg"
    }
]
            
            ;

            const container = document.getElementById('test-container');
            const paginationRow1 = document.getElementById('pagination-row-1');
            const paginationRow2 = document.getElementById('pagination-row-2');

            // Generar preguntas
            questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.setAttribute('data-correct', question.correct);
                questionDiv.innerHTML = `
                    <div class="question-image">
                        <img src="${question.image}" alt="Imagen de la pregunta">
                    </div>
                    <div class="question-content">
                        <h3>${index + 1}. ${question.text}</h3>
                        <div class="options">
                            ${question.options.map((option, idx) => `
                                <div class="option" data-answer="${String.fromCharCode(65 + idx)}">
                                    <span class="option-circle">${String.fromCharCode(65 + idx)}</span>
                                    ${option}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                container.appendChild(questionDiv);
            });

            // Generar paginación
            for (let i = 0; i < questions.length; i++) {
                const button = document.createElement('button');
                button.textContent = `${i + 1}`;
                button.addEventListener('click', () => showQuestion(i));
                if (i < 15) {
                    paginationRow1.appendChild(button);
                } else {
                    paginationRow2.appendChild(button);
                }
            }

            // Mostrar la primera pregunta
            showQuestion(0);

            // Función para mostrar una pregunta específica
            function showQuestion(index) {
                document.querySelectorAll('.question').forEach((q, i) => {
                    q.style.display = i === index ? 'flex' : 'none';
                });
                document.querySelectorAll('.pagination button').forEach((btn, i) => {
                    btn.style.backgroundColor = i === index ? '#ff7aa2' : '#ffa5c3';
                });
            }

            // Evento para las opciones de respuesta
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const question = this.closest('.question');
                    const questionIndex = Array.from(container.children).indexOf(question);
                    const isCorrect = this.getAttribute('data-answer') === question.getAttribute('data-correct');
                    
                    if (question.dataset.answered) return;

                    question.dataset.answered = true;

                    question.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                        opt.style.pointerEvents = 'none';
                    });
                    
                    this.classList.add('selected', isCorrect ? 'correct' : 'incorrect');

                    if (!isCorrect) {
                        question.querySelector(`.option[data-answer="${question.getAttribute('data-correct')}"]`).classList.add('correct');
                    }

                    // Actualizar el botón de paginación
                    const paginationButton = questionIndex < 15 ? paginationRow1.children[questionIndex] : paginationRow2.children[questionIndex - 15];
                    paginationButton.classList.add(isCorrect ? 'correct' : 'incorrect');
                });
            });

            // Evento para corregir el test
            document.getElementById('correct-test').addEventListener('click', () => {
                let wrongAnswers = 0;
                document.querySelectorAll('.question').forEach((question, index) => {
                    const selected = question.querySelector('.option.selected');
                    const isCorrect = selected && selected.getAttribute('data-answer') === question.getAttribute('data-correct');
                    if (!isCorrect) {
                        wrongAnswers++;
                    }
                    // Actualizar el botón de paginación si no se ha respondido
                    if (!selected) {
                        const paginationButton = index < 15 ? paginationRow1.children[index] : paginationRow2.children[index - 15];
                        paginationButton.classList.add('incorrect');
                    }
                });
                const resultMessage = `Has fallado ${wrongAnswers} respuestas.`;

                const alert = document.getElementById('custom-alert');
                document.getElementById('alert-message').textContent = resultMessage;
                alert.style.display = 'block';
            });
        });

        function closeAlert() {
            document.getElementById('custom-alert').style.display = 'none';
        }
    </script>

    
</body>
</html>