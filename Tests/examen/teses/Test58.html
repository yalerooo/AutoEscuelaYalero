<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Autoescuela</title>
    <link rel="stylesheet" href="../../../Assets/style.css">
</head>
<body>

    
    <div class="container">
        <h1 style="text-align: center; color: #ffa5c3;">Test de Autoescuela</h1>
        <div id="test-container">
            <!-- Aquí se generarán dinámicamente las preguntas -->
        </div>
        <div class="pagination">
            <div class="pagination-row" id="pagination-row-1"></div>
            <div class="pagination-row" id="pagination-row-2"></div>
        </div>
        <button id="correct-test">Corregir Test</button>
    </div>

    <!-- Custom Alert HTML -->
    <div class="custom-alert" id="custom-alert">
        <h2>Resultado del Test</h2>
        <p id="alert-message">Aquí irá el mensaje del resultado.</p>
        <button onclick="closeAlert()">Cerrar</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const questions = [
    {
        "text": "Si va a adelantar y el vehículo que circula delante ha encendido el intermitente izquierdo, manifestando su intención de adelantar, ¿quién tiene preferencia en el adelantamiento?",
        "options": [
            "El que inicie antes el desplazamiento lateral.",
            "El que circule a mayor velocidad.",
            "El conductor del vehículo que ya ha encendido el intermitente."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T500801.jpg"
    },
    {
        "text": "Los agentes de la Autoridad de Tráfico, ¿cuándo podrán proceder a la inmovilización de una motocicleta?",
        "options": [
            "Cuando su conductor no lleve puesto el casco.",
            "Cuando el pasajero de la misma circule sin el casco",
            "En ningún caso."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T500802.jpg"
    },
    {
        "text": "El permiso de conducir se puede renovar con una antelación máxima de...",
        "options": [
            "15 días.",
            "30 días.",
            "3 meses."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T510124_250317.jpg"
    },
    {
        "text": "La señal indica...",
        "options": [
            "camino obligatorio para peatones y prohibido a los vehículos.",
            "entrada prohibida a peatones.",
            "situación de un paso para peatones."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T500804.jpg"
    },
    {
        "text": "El semáforo está al otro lado del cruce. ¿Dónde deben detenerse los vehículos?",
        "options": [
            "Dentro del cruce, antes del semáforo.",
            "Al lado del semáforo.",
            "Antes de las líneas blancas del paso para peatones."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T500805.jpg"
    },
    {
        "text": "El estado de los neumáticos, ¿influye en el frenado?",
        "options": [
            "Sí influye, porque los neumáticos en buen estado se agarran mejor al suelo y frena mejor.",
            "No, solamente depende del estado de la calzada.",
            "No influye, solamente depende del estado de los frenos."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T500806.jpg"
    },
    {
        "text": "Según la Organización Mundial de la Salud, la depresión afecta a más de 300 millones de personas. Si sufrimos un trastorno depresivo debemos saber que...",
        "options": [
            "esta enfermedad no altera las capacidades para conducir con seguridad.",
            "los medicamentos para su tratamiento pueden producir alteraciones que afectan a la conducción.",
            "esta enfermedad no permite obtener en ningún caso el permiso de conducción de la clase B."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T510104_250117.jpg"
    },
    {
        "text": "En curvas y cambios de rasante de visibilidad reducida está prohibido...",
        "options": [
            "adelantar, únicamente.",
            "cambiar de sentido, solamente.",
            "adelantar y cambiar de sentido."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T500808.jpg"
    },
    {
        "text": "Retrovisor es el dispositivo que tiene por finalidad...",
        "options": [
            "permitir una visibilidad clara hacia atrás y hacia los lados del vehículo.",
            "permitir una visibilidad clara solo hacia atrás del vehículo.",
            "dotar al vehículo de menor resistencia al viento."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T513324.jpg"
    },
    {
        "text": "Ante un paso para peatones señalizado con marca vial solamente, ¿cuándo hay que detenerse?",
        "options": [
            "Cuando el peatón ya está atravesándolo, pero no cuando sólo demuestra su intención de hacerlo.",
            "Sólo cuando lo indique un agente.",
            "Siempre que un peatón esté atravesándolo o demuestre su intención de hacerlo."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T500810.jpg"
    },
    {
        "text": "Los sistemas de seguridad pasiva incluyen...",
        "options": [
            "cinturones de seguridad, airbags, apoyacabezas y casco.",
            "alumbrado, neumáticos, frenos y suspensión.",
            "frenos, neumáticos, airbags y cinturones de seguridad."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P2801.jpg"
    },
    {
        "text": "¿Qué debe hacer un peatón si, cuando va a cruzar una vía, se encuentra de frente a un agente con el brazo levantado verticalmente?",
        "options": [
            "Detenerse, excepto si un semáforo le da preferencia de paso, en cuyo caso debe cruzar.",
            "Detenerse.",
            "Cruzar. Las señales de los agentes sólo obligan a los conductores de vehículos."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T509313.jpg"
    },
    {
        "text": "Un vehículo destinado al alquiler sin conductor que se dedica a un uso concatenado e intensivo por un número indeterminado de usuarios dentro de una zona de servicios delimitada. ¿Debe estar disponible, en cualquier momento, para ser utilizado?",
        "options": [
            "Sí, dentro de un horario.",
            "Sí, los fines de semana con conductor y entre semana sin conductor.",
            "Sí, y solicitar su servicio mediante el empleo de aplicaciones móviles."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T510121_150623.jpg"
    },
    {
        "text": "Si circula de noche por una vía urbana, y no puede ver un vehículo pintado de oscuro a 50 metros, ¿qué alumbrado debe utilizar, además del de posición?",
        "options": [
            "El alumbrado de corto o el de largo alcance, indistintamente.",
            "El alumbrado de largo alcance.",
            "El alumbrado de corto alcance."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T505629.jpg"
    },
    {
        "text": "Cambiar de dirección hacia la izquierda, no estará permitido cuando no haya...",
        "options": [
            "ninguna señal que autorice expresamente la maniobra.",
            "visibilidad suficiente.",
            "un carril especialmente acondicionado para hacerlo."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T500815.jpg"
    },
    {
        "text": "Los conductores afectados por insomnio o somnolencia...",
        "options": [
            "conducen durante más tiempo.",
            "reaccionan más rápido ante un imprevisto.",
            "ejecutan los movimientos de forma automática y son más peligrosos."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P2217.jpg"
    },
    {
        "text": "¿Está permitida la circulación de animales por una carretera convencional?",
        "options": [
            "Sí, únicamente cuando no exista vía pecuaria.",
            "No.",
            "Sí, excepto cuando circulen en rebaño."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T500817.jpg"
    },
    {
        "text": "Para conducir con hielo en la calzada de una forma preventiva debe...",
        "options": [
            "tener especial cuidado durante el día.",
            "disminuir la velocidad y utilizar marchas cortas.",
            "disminuir la velocidad y utilizar marchas largas."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P3311.jpg"
    },
    {
        "text": "Cuando se aproxime a niños o ancianos...",
        "options": [
            "debe adoptar las precauciones necesarias para no ponerles en peligro.",
            "les avisará con señales acústicas.",
            "se detendrá para cederles el paso."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T500819.jpg"
    },
    {
        "text": "Si ha cambiado de domicilio, ¿tiene obligación de comunicarlo a la Jefatura de Tráfico?",
        "options": [
            "Sí, pero esperaré a comunicarlo cuando me caduque la validez del permiso de conducción.",
            "No.",
            "Sí, debo comunicar mi nuevo domicilio en el plazo de 15 días."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T500820.jpg"
    },
    {
        "text": "¿Es eficaz el airbag en el caso de que los ocupantes del vehículo no utilicen el cinturón de seguridad?",
        "options": [
            "No, y puede provocar graves lesiones.",
            "Sí, pero sólo para el conductor.",
            "Sí."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T500821.jpg"
    },
    {
        "text": "¿Cuándo debe aumentarse la distancia de seguridad?",
        "options": [
            "Cuando aumenta la velocidad de los vehículos.",
            "Cuando quiero adelantar.",
            "Cuando disminuye la velocidad de los vehículos."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T500822.jpg"
    },
    {
        "text": "Conduciendo un ciclomotor, ¿puede llevar desabrochado el casco?",
        "options": [
            "No.",
            "Sí.",
            "Sí, pero sólo en vías urbanas."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T500823.jpg"
    },
    {
        "text": "Esta señal indica...",
        "options": [
            "proximidad de salida de la autovía.",
            "bifurcación hacia la derecha en calzada de tres carriles.",
            "bifurcación hacia la izquierda en calzada de tres carriles."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T500824.jpg"
    },
    {
        "text": "El vehículo rojo, ¿está correctamente estacionado?",
        "options": [
            "Sí, si la duración del estacionamiento es inferior a dos minutos.",
            "No, porque está en doble fila.",
            "Sí, si no hay espacio próximo para estacionar de otra manera."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T500825.jpg"
    },
    {
        "text": "Una carrocería de gran resistencia, ¿puede sustituir a otros sistemas de seguridad pasiva?",
        "options": [
            "No.",
            "Sí, por ejemplo al airbag.",
            "Sí, en los vehículos todo-terreno."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T510113_050117.jpg"
    },
    {
        "text": "En vías con tráfico denso, ¿se puede hacer uso del claxon?",
        "options": [
            "Sí, pero sólo fuera de poblado.",
            "Sí, pero sólo dentro de poblado.",
            "No, salvo que sea estrictamente necesario."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T500827.jpg"
    },
    {
        "text": "Si en una primera prueba de alcoholemia no supera los límites máximos permitidos, los agentes...",
        "options": [
            "le pueden imponer una sanción, si presenta síntomas de haber consumido alcohol.",
            "no le pueden impedir continuar su marcha, en ningún caso.",
            "realizarán una segunda prueba, si presenta síntomas de estar bajo la influencia de bebidas alcohólicas."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T500828.jpg"
    },
    {
        "text": "Circular por una autopista a 120 km/h con lluvia intensa, es circular a una velocidad...",
        "options": [
            "inadecuada.",
            "adecuada.",
            "prohibida."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T500829.jpg"
    },
    {
        "text": "Beber mucha agua o fumar, ¿reduce la tasa de alcoholemia?",
        "options": [
            "No.",
            "Sólo beber mucha agua.",
            "Sí."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T500830.jpg"
    }
]
            
            ;

            const container = document.getElementById('test-container');
            const paginationRow1 = document.getElementById('pagination-row-1');
            const paginationRow2 = document.getElementById('pagination-row-2');

            // Generar preguntas
            questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.setAttribute('data-correct', question.correct);
                questionDiv.innerHTML = `
                    <div class="question-image">
                        <img src="${question.image}" alt="Imagen de la pregunta">
                    </div>
                    <div class="question-content">
                        <h3>${index + 1}. ${question.text}</h3>
                        <div class="options">
                            ${question.options.map((option, idx) => `
                                <div class="option" data-answer="${String.fromCharCode(65 + idx)}">
                                    <span class="option-circle">${String.fromCharCode(65 + idx)}</span>
                                    ${option}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                container.appendChild(questionDiv);
            });

            // Generar paginación
            for (let i = 0; i < questions.length; i++) {
                const button = document.createElement('button');
                button.textContent = `${i + 1}`;
                button.addEventListener('click', () => showQuestion(i));
                if (i < 15) {
                    paginationRow1.appendChild(button);
                } else {
                    paginationRow2.appendChild(button);
                }
            }

            // Mostrar la primera pregunta
            showQuestion(0);

            // Función para mostrar una pregunta específica
            function showQuestion(index) {
                document.querySelectorAll('.question').forEach((q, i) => {
                    q.style.display = i === index ? 'flex' : 'none';
                });
                document.querySelectorAll('.pagination button').forEach((btn, i) => {
                    btn.style.backgroundColor = i === index ? '#ff7aa2' : '#ffa5c3';
                });
            }

            // Evento para las opciones de respuesta
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const question = this.closest('.question');
                    const questionIndex = Array.from(container.children).indexOf(question);
                    const isCorrect = this.getAttribute('data-answer') === question.getAttribute('data-correct');
                    
                    if (question.dataset.answered) return;

                    question.dataset.answered = true;

                    question.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                        opt.style.pointerEvents = 'none';
                    });
                    
                    this.classList.add('selected', isCorrect ? 'correct' : 'incorrect');

                    if (!isCorrect) {
                        question.querySelector(`.option[data-answer="${question.getAttribute('data-correct')}"]`).classList.add('correct');
                    }

                    // Actualizar el botón de paginación
                    const paginationButton = questionIndex < 15 ? paginationRow1.children[questionIndex] : paginationRow2.children[questionIndex - 15];
                    paginationButton.classList.add(isCorrect ? 'correct' : 'incorrect');
                });
            });

            // Evento para corregir el test
            document.getElementById('correct-test').addEventListener('click', () => {
                let wrongAnswers = 0;
                document.querySelectorAll('.question').forEach((question, index) => {
                    const selected = question.querySelector('.option.selected');
                    const isCorrect = selected && selected.getAttribute('data-answer') === question.getAttribute('data-correct');
                    if (!isCorrect) {
                        wrongAnswers++;
                    }
                    // Actualizar el botón de paginación si no se ha respondido
                    if (!selected) {
                        const paginationButton = index < 15 ? paginationRow1.children[index] : paginationRow2.children[index - 15];
                        paginationButton.classList.add('incorrect');
                    }
                });
                const resultMessage = `Has fallado ${wrongAnswers} respuestas.`;

                const alert = document.getElementById('custom-alert');
                document.getElementById('alert-message').textContent = resultMessage;
                alert.style.display = 'block';
            });
        });

        function closeAlert() {
            document.getElementById('custom-alert').style.display = 'none';
        }
    </script>

    
</body>
</html>