<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Autoescuela</title>
    <link rel="stylesheet" href="../../../Assets/style.css">
</head>
<body>

    
    <div class="container">
        <h1 style="text-align: center; color: #ffa5c3;">Test de Autoescuela</h1>
        <div id="test-container">
            <!-- Aquí se generarán dinámicamente las preguntas -->
        </div>
        <div class="pagination">
            <div class="pagination-row" id="pagination-row-1"></div>
            <div class="pagination-row" id="pagination-row-2"></div>
        </div>
        <button id="correct-test">Corregir Test</button>
    </div>

    <!-- Custom Alert HTML -->
    <div class="custom-alert" id="custom-alert">
        <h2>Resultado del Test</h2>
        <p id="alert-message">Aquí irá el mensaje del resultado.</p>
        <button onclick="closeAlert()">Cerrar</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const questions = [
    {
        "text": "¿Cómo se debe regular adecuadamente la altura del apoyacabezas?",
        "options": [
            "En función de la comodidad del conductor.",
            "El borde debe quedar situado entre el límite inferior de la cabeza y la altura de los ojos.",
            "El borde debe quedar situado entre el límite superior de la cabeza y la altura de los ojos."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T501701.jpg"
    },
    {
        "text": "En esta situación, ¿puede adelantar al vehículo inmovilizado?",
        "options": [
            "Sí, después de asegurarme de que puede realizarse sin peligro.",
            "Sí, siempre.",
            "No, porque la marca longitudinal lo prohíbe."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T501702.jpg"
    },
    {
        "text": "Hace 6 meses que tiene el permiso de conducción. ¿A qué velocidad máxima puede conducir por una autovía?",
        "options": [
            "A 120 Km/h.",
            "A 100 km/h.",
            "A 80 km/h."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T501703.jpg"
    },
    {
        "text": "¿Qué tasa de alcoholemia es la más segura para conducir?",
        "options": [
            "0,15 miligramos por litro en aire espirado.",
            "0,0 miligramos por litro de alcohol en aire espirado.",
            "Inferior a 0,5 gramos por litro en sangre."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T501704.jpg"
    },
    {
        "text": "Para los conductores y pasajeros de motocicletas, ¿tiene importancia el vestuario a utilizar?",
        "options": [
            "Sí, es fundamental porque el cuerpo está directamente expuesto a las inclemencias del tiempo.",
            "No, es indiferente siempre que lleven el casco.",
            "No, porque no aporta nada a la seguridad."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T501705.jpg"
    },
    {
        "text": "En una autopista, a partir de esta señal...",
        "options": [
            "finalizan todas las prohibiciones anteriores, incluida la prohibición de superar la velocidad de 80 kilómetros por hora.",
            "la velocidad máxima recomendada es de 80 kilómetros por hora.",
            "finaliza la prohibición de superar la velocidad de 80 kilómetros por hora."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T501706.jpg"
    },
    {
        "text": "Cuando la presión de inflado de los neumáticos es inferior a la recomendada...",
        "options": [
            "el vehículo consume menos combustible.",
            "el vehículo consume más combustible.",
            "la presión de inflado no afecta al consumo de combustible."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T501707.jpg"
    },
    {
        "text": "Los ciclistas tienen prioridad de paso respecto a los vehículos de motor...",
        "options": [
            "cuando circulen por un carril bici debidamente señalizado.",
            "únicamente en los pasos para ciclistas.",
            "siempre que circulen en grupo."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T501708.jpg"
    },
    {
        "text": "En caso de siniestro, el seguro obligatorio del vehículo responsable del accidente cubrirá los daños producidos a la parte contraria...",
        "options": [
            "en todo caso, excepto si el vehículo causante hubiera sido robado.",
            "en todo caso, hasta los límites máximos establecidos en la póliza.",
            "sólo cuando el conductor del vehículo causante sea el tomador del seguro."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T510102_150317.jpg"
    },
    {
        "text": "La policía y el personal de obras ¿están obligados a llevar una prenda o chaleco reflectante?",
        "options": [
            "Sí, tanto de día como de noche.",
            "Sólo en vías interurbanas.",
            "Sólo de día."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T501710.jpg"
    },
    {
        "text": "Las flechas pintadas en la calzada...",
        "options": [
            "indican la dirección del ramal de la próxima salida.",
            "señalizan que el carril en el que están situadas termina próximamente."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T501711.jpg"
    },
    {
        "text": "¿Está permitido circular con un vehículo que supera los límites permitidos de emisión de humo?",
        "options": [
            "Sí, mientras que no se trate de una avería.",
            "Sí, en todo caso.",
            "No, está prohibido."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T501712.jpg"
    },
    {
        "text": "Hablar por teléfono mientras se conduce...",
        "options": [
            "disminuye la atención del conductor.",
            "aumenta la atención del conductor.",
            "no afecta a la atención del conductor."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T501713.jpg"
    },
    {
        "text": "En una autovía, hay un carril abierto para circular en sentido contrario al normal, para mejorar la fluidez. ¿A qué velocidad máxima se puede circular en ese carril?",
        "options": [
            "A 100 kilómetros por hora.",
            "A 90 kilómetros por hora.",
            "A 80 kilómetros por hora."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T501714.jpg"
    },
    {
        "text": "A la vista de la señal,¿se permite cambiar de dirección a la izquierda?",
        "options": [
            "No.",
            "Sí."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T501715.jpg"
    },
    {
        "text": "Es importante evitar las comidas copiosas durante los viajes porque pueden producir...",
        "options": [
            "somnolencia.",
            "un efecto rebote.",
            "nerviosismo."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T501716.jpg"
    },
    {
        "text": "¿Cuál de los siguientes accesorios está obligado a llevar el conductor de un turismo?",
        "options": [
            "Dispositivo de preseñalización de peligro.",
            "Un extintor.",
            "Una lata de aceite."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T501717.jpg"
    },
    {
        "text": "Circula por un carril y sobre él encuentra un semáforo con una luz roja en forma de aspa, ¿qué significa?",
        "options": [
            "Que debe abandonarlo lo antes posible porque está prohibido ocupar ese carril.",
            "Que tiene que frenar a su altura como si fuera un semáforo con una luz roja circular.",
            "Que debe moderar la velocidad por circunstancias especiales de la circulación."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T501718.jpg"
    },
    {
        "text": "El automóvil es un vehículo de motor que sirve normalmente...",
        "options": [
            "para la realización de trabajos agrícolas.",
            "para transportar personas o cosas o ambas a la vez, o para la tracción de otros vehículos con ese fin.",
            "para realizar obras o determinados servicios."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T501719.jpg"
    },
    {
        "text": "Un automóvil ya matriculado que no dispone de sistemas avanzados de ayuda a la conducción, ¿puede instalar uno a través de un fabricante de sistemas ADAS Aftermarket?",
        "options": [
            "Sí, cualquiera de ellos con el fin de mejorar la seguridad activa del vehículo y evitar accidentes.",
            "No, en ningún caso.",
            "Sí, siempre que sea un sistema de aviso al conductor que no actúe sobre los sistemas de conducción del vehículo."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T500123_ADAS.jpg"
    },
    {
        "text": "Los cinturones de seguridad y los airbags son sistemas de...",
        "options": [
            "conducción eficiente.",
            "seguridad activa.",
            "seguridad pasiva."
        ],
        "correct": "C",
        "image": "../../../Assets/img/I4821.jpg"
    },
    {
        "text": "En las intersecciones señalizadas, ¿cuál es la norma general que prevalece?",
        "options": [
            "Abstenerse del cumplimiento de la señalización.",
            "Cumplir lo que la señal indica.",
            "Ceder el paso siempre a la derecha."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T501722.jpg"
    },
    {
        "text": "Entre los gastos sanitarios derivados de los accidentes de tráfico con víctimas se encuentran...",
        "options": [
            "los daños causados al medio ambiente.",
            "los de rehabilitación en centros de salud.",
            "los derivados por la pérdida de producción de personas empleadas."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T502306.jpg"
    },
    {
        "text": "El consumo de LSD produce en el conductor...",
        "options": [
            "estabilidad emocional.",
            "alucinaciones y distorsiones en la percepción.",
            "fatiga."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P2528.jpg"
    },
    {
        "text": "Circulando con lluvia intensa, ¿es obligatorio utilizar la luz antiniebla trasera?",
        "options": [
            "Sí, el trasero y el delantero.",
            "Sí.",
            "No."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T501725.jpg"
    },
    {
        "text": "La fatiga en el conductor...",
        "options": [
            "provoca reacciones más rápidas.",
            "produce dolores en la nuca y en la espalda.",
            "hace que tome decisiones más acertadas"
        ],
        "correct": "B",
        "image": "../../../Assets/img/T510120_150517.jpg"
    },
    {
        "text": "Acompañar a las víctimas de un accidente, ¿es importante?",
        "options": [
            "No, si su estado no reviste gravedad.",
            "No, es preferible dejarlas solas.",
            "Sí, para transmitirles tranquilidad."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T501727.jpg"
    },
    {
        "text": "¿De qué factores depende la distancia de detención?",
        "options": [
            "Del estado del vehículo, principalmente.",
            "Sólo del estado de la vía.",
            "Del estado del conductor, de la vía y del vehículo."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T501728.jpg"
    },
    {
        "text": "Esta señal...",
        "options": [
            "indica que no se puede estacionar ni parar en el lado de la calzada donde se encuentra la señal.",
            "indica que no se puede estacionar en el lado de la calzada donde se encuentra la señal.",
            "indica que el estacionamiento tiene duración limitada, y se debe indicar la hora de inicio del estacionamiento."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T501729.jpg"
    },
    {
        "text": "Si los ocupantes de los asientos traseros de un vehículo son menores de edad y de estatura igual o inferior a 135 cm de altura, ¿qué dispositivos de seguridad deben utilizar?",
        "options": [
            "El cinturón de seguridad que viene instalado en el vehículo.",
            "Obligatoriamente un sistema de retención infantil soldado a la carrocería del vehículo.",
            "Un dispositivo de retención infantil adaptado a su talla y peso."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T510127_050723.jpg"
    }
]
            
            ;

            const container = document.getElementById('test-container');
            const paginationRow1 = document.getElementById('pagination-row-1');
            const paginationRow2 = document.getElementById('pagination-row-2');

            // Generar preguntas
            questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.setAttribute('data-correct', question.correct);
                questionDiv.innerHTML = `
                    <div class="question-image">
                        <img src="${question.image}" alt="Imagen de la pregunta">
                    </div>
                    <div class="question-content">
                        <h3>${index + 1}. ${question.text}</h3>
                        <div class="options">
                            ${question.options.map((option, idx) => `
                                <div class="option" data-answer="${String.fromCharCode(65 + idx)}">
                                    <span class="option-circle">${String.fromCharCode(65 + idx)}</span>
                                    ${option}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                container.appendChild(questionDiv);
            });

            // Generar paginación
            for (let i = 0; i < questions.length; i++) {
                const button = document.createElement('button');
                button.textContent = `${i + 1}`;
                button.addEventListener('click', () => showQuestion(i));
                if (i < 15) {
                    paginationRow1.appendChild(button);
                } else {
                    paginationRow2.appendChild(button);
                }
            }

            // Mostrar la primera pregunta
            showQuestion(0);

            // Función para mostrar una pregunta específica
            function showQuestion(index) {
                document.querySelectorAll('.question').forEach((q, i) => {
                    q.style.display = i === index ? 'flex' : 'none';
                });
                document.querySelectorAll('.pagination button').forEach((btn, i) => {
                    btn.style.backgroundColor = i === index ? '#ff7aa2' : '#ffa5c3';
                });
            }

            // Evento para las opciones de respuesta
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const question = this.closest('.question');
                    const questionIndex = Array.from(container.children).indexOf(question);
                    const isCorrect = this.getAttribute('data-answer') === question.getAttribute('data-correct');
                    
                    if (question.dataset.answered) return;

                    question.dataset.answered = true;

                    question.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                        opt.style.pointerEvents = 'none';
                    });
                    
                    this.classList.add('selected', isCorrect ? 'correct' : 'incorrect');

                    if (!isCorrect) {
                        question.querySelector(`.option[data-answer="${question.getAttribute('data-correct')}"]`).classList.add('correct');
                    }

                    // Actualizar el botón de paginación
                    const paginationButton = questionIndex < 15 ? paginationRow1.children[questionIndex] : paginationRow2.children[questionIndex - 15];
                    paginationButton.classList.add(isCorrect ? 'correct' : 'incorrect');
                });
            });

            // Evento para corregir el test
            document.getElementById('correct-test').addEventListener('click', () => {
                let wrongAnswers = 0;
                document.querySelectorAll('.question').forEach((question, index) => {
                    const selected = question.querySelector('.option.selected');
                    const isCorrect = selected && selected.getAttribute('data-answer') === question.getAttribute('data-correct');
                    if (!isCorrect) {
                        wrongAnswers++;
                    }
                    // Actualizar el botón de paginación si no se ha respondido
                    if (!selected) {
                        const paginationButton = index < 15 ? paginationRow1.children[index] : paginationRow2.children[index - 15];
                        paginationButton.classList.add('incorrect');
                    }
                });
                const resultMessage = `Has fallado ${wrongAnswers} respuestas.`;

                const alert = document.getElementById('custom-alert');
                document.getElementById('alert-message').textContent = resultMessage;
                alert.style.display = 'block';
            });
        });

        function closeAlert() {
            document.getElementById('custom-alert').style.display = 'none';
        }
    </script>

    
</body>
</html>