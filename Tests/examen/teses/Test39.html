<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Autoescuela</title>
    <link rel="stylesheet" href="../../../Assets/style.css">
</head>
<body>

    
    <div class="container">
        <h1 style="text-align: center; color: #ffa5c3;">Test de Autoescuela</h1>
        <div id="test-container">
            <!-- Aquí se generarán dinámicamente las preguntas -->
        </div>
        <div class="pagination">
            <div class="pagination-row" id="pagination-row-1"></div>
            <div class="pagination-row" id="pagination-row-2"></div>
        </div>
        <button id="correct-test">Corregir Test</button>
    </div>

    <!-- Custom Alert HTML -->
    <div class="custom-alert" id="custom-alert">
        <h2>Resultado del Test</h2>
        <p id="alert-message">Aquí irá el mensaje del resultado.</p>
        <button onclick="closeAlert()">Cerrar</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const questions = [
    {
        "text": "En condiciones de niebla, ¿se puede circular utilizando exclusivamente la luz de posición y el alumbrado antiniebla delantero?",
        "options": [
            "No, es necesario utilizar el alumbrado de corto alcance.",
            "Sí, durante el día.",
            "Sí, tanto de día como de noche."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T513901.jpg"
    },
    {
        "text": "Conducir cansado, ¿por qué es peligroso?",
        "options": [
            "Porque disminuye la capacidad de reacción.",
            "Porque aumenta la capacidad de reacción.",
            "Porque se reacciona más rápido ante un imprevisto."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T513902.jpg"
    },
    {
        "text": "¿A qué vehículos prohíbe la entrada esta señal?",
        "options": [
            "A camiones y autobuses de menos de 3.500 kilogramos de M.M.A.",
            "A camiones y furgones dedicados al transporte de mercancías.",
            "A todos los vehículos de más de 3.500 kilogramos de M.M.A."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T513903.jpg"
    },
    {
        "text": "Entre los costes humanos derivados de los accidentes de tráfico se encuentran...",
        "options": [
            "el aumento de la capacidad productiva.",
            "la alta capacidad de rehabilitaciones.",
            "la pérdida de capacidad productiva."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T513904.jpg"
    },
    {
        "text": "Estaciona su vehículo en pendiente descendente (en bajada). ¿Qué velocidad debe dejar puesta?",
        "options": [
            "Ninguna, el freno de mano solamente.",
            "La marcha atrás.",
            "La primera velocidad."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T513905.jpg"
    },
    {
        "text": "¿Todos los remolques deben disponer de seguro de responsabilidad civil?",
        "options": [
            "Sí, todos los remolques deben disponer de seguro obligatorio.",
            "No, sólo aquéllos cuya MMA supere 750 kg.",
            "Los remolque no precisan seguro obligatorio."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T513906.jpg"
    },
    {
        "text": "Como norma general, la velocidad máxima genérica para un turismo en una carretera convencional es de...",
        "options": [
            "80 kilómetros por hora.",
            "90 kilómetros por hora.",
            "100 kilómetros por hora."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T513907.jpg"
    },
    {
        "text": "¿Es necesario revisar con frecuencia el sistema de alumbrado?",
        "options": [
            "No.",
            "Sí, revisando todos los cables y conexiones.",
            "Sí, revisando la regulación, su funcionamiento y su estado."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T513908.jpg"
    },
    {
        "text": "La línea de borde de la calzada es discontinua; ¿está permitido estacionar en la parte transitable del arcén?",
        "options": [
            "No, está prohibido.",
            "Solo para cargar o descargar mercancías.",
            "Sí, porque la línea es discontinua."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T512313.jpg"
    },
    {
        "text": "Cuando un conductor da positivo en las pruebas de alcoholemia, ¿los agentes pueden inmovilizar su vehículo?",
        "options": [
            "Sí.",
            "No, sólo pueden sancionar al conductor.",
            "No, aunque sobrepase la tasa máxima permitida."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T513910.jpg"
    },
    {
        "text": "En esta curva, ¿qué nos indica la línea formada por conos?",
        "options": [
            "Que no podemos circular por el carril izquierdo.",
            "Que se trata de una curva peligrosa.",
            "Que hay obras en la calzada."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T513911.jpg"
    },
    {
        "text": "Para realizar una conducción segura, el conductor debe...",
        "options": [
            "distraerse con frecuencia.",
            "prestar muy poca atención a la conducción.",
            "centrar toda su atención en la tarea de la conducción."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T513912.jpg"
    },
    {
        "text": "En un carril reservado para uso exclusivo del transporte público urbano fuera del horario de servicio, ¿se puede parar?",
        "options": [
            "Sí, parar y estacionar.",
            "No.",
            "Sí, si conocemos perfectamente el horario de la línea de autobuses."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T513913.jpg"
    },
    {
        "text": "Los neumáticos se desgastan más por los bordes que por el centro. ¿Cómo estará la presión de inflado de los mismos?",
        "options": [
            "Superior a la indicada por el fabricante.",
            "Inferior a la indicada por el fabricante.",
            "Bien."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T513914.jpg"
    },
    {
        "text": "¿Qué indica esta señal?",
        "options": [
            "Estacionamiento prohibido en vado.",
            "Zona de estacionamiento limitado.",
            "Estacionamiento prohibido."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T513915.jpg"
    },
    {
        "text": "¿Cuándo se producen más atropellos a peatones?",
        "options": [
            "Durante la noche.",
            "En autopista.",
            "Cuando los vehículos circulan marcha atrás."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T510128_250717.jpg"
    },
    {
        "text": "En defecto de señalización, ¿cuál es la velocidad máxima que no deberán rebasar los vehículos en una autopista dentro de poblado?",
        "options": [
            "50 km/h.",
            "120 km/h.",
            "80 km/h."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T500727.jpg"
    },
    {
        "text": "La depresión es una enfermedad...",
        "options": [
            "que provoca una alteración del estado de ánimo que no es peligrosa para conducir.",
            "que puede ser peligrosa para conducir con seguridad.",
            "que siempre es leve."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T513918.jpg"
    },
    {
        "text": "¿Cuándo debe apagar el indicador de dirección un vehículo que se desplaza para adelantar?",
        "options": [
            "Cuando haya rebasado al vehículo y antes de volver a la derecha.",
            "Cuando vuelva al carril derecho.",
            "Cuando haya terminado el desplazamiento."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T513919.jpg"
    },
    {
        "text": "El consumo de medicamentos, ¿deteriora las capacidades necesarias para conducir con seguridad?",
        "options": [
            "Sí, todos los medicamentos.",
            "Sí, algunos medicamentos, por eso es importante informarse sobre sus efectos secundarios.",
            "Sí, aunque sólo afectan los medicamentos contra la depresión."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T513920.jpg"
    },
    {
        "text": "¿Está permitido realizar un cambio de sentido en esta intersección?",
        "options": [
            "Sí, si no recorre más de 15 metros.",
            "No.",
            "Sí, con las debidas precauciones."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T513921.jpg"
    },
    {
        "text": "¿Cuál de estas acciones puede distraer al conductor?",
        "options": [
            "Mirar por el espejo retrovisor.",
            "Consultar el GPS.",
            "Cambiar de marcha."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T513924.jpg"
    },
    {
        "text": "¿Están exentas las embarazadas de llevar el cinturón de seguridad?",
        "options": [
            "No, salvo que estén en posesión de un certificado de exención por razones médicas graves.",
            "Sí, y además no requieren de certificado médico.",
            "Sí, ya que puede dañar al feto."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T513922.jpg"
    },
    {
        "text": "En la vía de la fotografía, ¿qué carril debe utilizar para circular, como norma general?",
        "options": [
            "El carril situado más a la derecha.",
            "Cualquiera de los carriles de mi sentido de la marcha.",
            "El carril central, siempre que mi velocidad sea igual o superior a la indicada en la señal."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T513923.jpg"
    },
    {
        "text": "Este semáforo afecta a...",
        "options": [
            "los tranvías y a los autobuses de líneas regulares.",
            "los autobuses de líneas regulares, exclusivamente.",
            "camiones."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T513925.jpg"
    },
    {
        "text": "¿Qué factor se relaciona con los accidentes juveniles?",
        "options": [
            "La falta de reflejos.",
            "La menor percepción del riesgo.",
            "La falta de mantenimiento del vehículo."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T513926.jpg"
    },
    {
        "text": "Un conductor detenido dentro de un paso inferior por necesidades de la circulación está obligado a...",
        "options": [
            "abandonar el vehículo, al igual que los pasajeros.",
            "conectar la señal de emergencia, mantener encendidas las luces de posición y apagar el motor.",
            "apagar todos los sistemas eléctricos."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T513927.jpg"
    },
    {
        "text": "Un automóvil destinado al transporte de personas, con cuatro ruedas como mínimo y un máximo de 9 plazas, incluyendo la del conductor es...",
        "options": [
            "un turismo.",
            "un autobús.",
            "un derivado de turismo."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T513928.jpg"
    },
    {
        "text": "Esta señal indica...",
        "options": [
            "peligro por la proximidad de un semáforo averiado.",
            "peligro por la proximidad de un tramo de la vía con la circulación regulada por semáforos.",
            "peligro por la proximidad de una salida de vehículos de extinción de incendios."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T513929.jpg"
    },
    {
        "text": "¿Cuándo puede el conductor de una motocicleta circular sin casco?",
        "options": [
            "Cuando la motocicleta tenga estructura de autoprotección, cinturón de seguridad y así conste en su tarjeta ITV.",
            "En ningún caso ya que el casco siempre es obligatorio.",
            "Cuando circule en vías urbanas a velocidad reducida."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T513930.jpg"
    }
]
            
            ;

            const container = document.getElementById('test-container');
            const paginationRow1 = document.getElementById('pagination-row-1');
            const paginationRow2 = document.getElementById('pagination-row-2');

            // Generar preguntas
            questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.setAttribute('data-correct', question.correct);
                questionDiv.innerHTML = `
                    <div class="question-image">
                        <img src="${question.image}" alt="Imagen de la pregunta">
                    </div>
                    <div class="question-content">
                        <h3>${index + 1}. ${question.text}</h3>
                        <div class="options">
                            ${question.options.map((option, idx) => `
                                <div class="option" data-answer="${String.fromCharCode(65 + idx)}">
                                    <span class="option-circle">${String.fromCharCode(65 + idx)}</span>
                                    ${option}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                container.appendChild(questionDiv);
            });

            // Generar paginación
            for (let i = 0; i < questions.length; i++) {
                const button = document.createElement('button');
                button.textContent = `${i + 1}`;
                button.addEventListener('click', () => showQuestion(i));
                if (i < 15) {
                    paginationRow1.appendChild(button);
                } else {
                    paginationRow2.appendChild(button);
                }
            }

            // Mostrar la primera pregunta
            showQuestion(0);

            // Función para mostrar una pregunta específica
            function showQuestion(index) {
                document.querySelectorAll('.question').forEach((q, i) => {
                    q.style.display = i === index ? 'flex' : 'none';
                });
                document.querySelectorAll('.pagination button').forEach((btn, i) => {
                    btn.style.backgroundColor = i === index ? '#ff7aa2' : '#ffa5c3';
                });
            }

            // Evento para las opciones de respuesta
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const question = this.closest('.question');
                    const questionIndex = Array.from(container.children).indexOf(question);
                    const isCorrect = this.getAttribute('data-answer') === question.getAttribute('data-correct');
                    
                    if (question.dataset.answered) return;

                    question.dataset.answered = true;

                    question.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                        opt.style.pointerEvents = 'none';
                    });
                    
                    this.classList.add('selected', isCorrect ? 'correct' : 'incorrect');

                    if (!isCorrect) {
                        question.querySelector(`.option[data-answer="${question.getAttribute('data-correct')}"]`).classList.add('correct');
                    }

                    // Actualizar el botón de paginación
                    const paginationButton = questionIndex < 15 ? paginationRow1.children[questionIndex] : paginationRow2.children[questionIndex - 15];
                    paginationButton.classList.add(isCorrect ? 'correct' : 'incorrect');
                });
            });

            // Evento para corregir el test
            document.getElementById('correct-test').addEventListener('click', () => {
                let wrongAnswers = 0;
                document.querySelectorAll('.question').forEach((question, index) => {
                    const selected = question.querySelector('.option.selected');
                    const isCorrect = selected && selected.getAttribute('data-answer') === question.getAttribute('data-correct');
                    if (!isCorrect) {
                        wrongAnswers++;
                    }
                    // Actualizar el botón de paginación si no se ha respondido
                    if (!selected) {
                        const paginationButton = index < 15 ? paginationRow1.children[index] : paginationRow2.children[index - 15];
                        paginationButton.classList.add('incorrect');
                    }
                });
                const resultMessage = `Has fallado ${wrongAnswers} respuestas.`;

                const alert = document.getElementById('custom-alert');
                document.getElementById('alert-message').textContent = resultMessage;
                alert.style.display = 'block';
            });
        });

        function closeAlert() {
            document.getElementById('custom-alert').style.display = 'none';
        }
    </script>

    
</body>
</html>