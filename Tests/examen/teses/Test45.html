<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Autoescuela</title>
    <link rel="stylesheet" href="../../../Assets/style.css">
</head>
<body>

    
    <div class="container">
        <h1 style="text-align: center; color: #ffa5c3;">Test de Autoescuela</h1>
        <div id="test-container">
            <!-- Aquí se generarán dinámicamente las preguntas -->
        </div>
        <div class="pagination">
            <div class="pagination-row" id="pagination-row-1"></div>
            <div class="pagination-row" id="pagination-row-2"></div>
        </div>
        <button id="correct-test">Corregir Test</button>
    </div>

    <!-- Custom Alert HTML -->
    <div class="custom-alert" id="custom-alert">
        <h2>Resultado del Test</h2>
        <p id="alert-message">Aquí irá el mensaje del resultado.</p>
        <button onclick="closeAlert()">Cerrar</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const questions = [
    {
        "text": "¿Qué indica esta señal?",
        "options": [
            "El final de un túnel o paso inferior.",
            "El final de un túnel o un paso superior.",
            "El principio de un túnel."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T514501.jpg"
    },
    {
        "text": "¿Qué puede causar que el conductor se distraiga?",
        "options": [
            "Conducir sin utilizar el teléfono móvil.",
            "Conducir descansado.",
            "Manipular un aparato de música."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T514502.jpg"
    },
    {
        "text": "Si visualiza esta señal en el sistema de a bordo de su vehículo conectado con la plataforma de vehículo conectado con el Punto de Acceso Nacional de Información de Tráfico y Movilidad de la DGT , ¿qué significa?",
        "options": [
            "Avería en el vehículo.",
            "Llamada de emergencia al 112.",
            "La presencia de un peligro próximo comunicado por otro usuario."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T510107_250623.jpg"
    },
    {
        "text": "¿Puede conducir si ha tomado algún medicamento?",
        "options": [
            "No, no puede conducir por los efectos secundarios que pueda generar.",
            "Sí, siempre que no altere el estado físico o mental y por tanto la capacidad para conducir.",
            "Sí, en cualquier caso."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T514504.jpg"
    },
    {
        "text": "Una fila de escolares está cruzando la calzada. ¿Debe cederles el paso?",
        "options": [
            "No, cuando no llevan paleta de STOP.",
            "Solamente en los pasos para peatones.",
            "Si."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T514505.jpg"
    },
    {
        "text": "La tasa máxima de alcohol permitida en aire espirado a un conductor novel es...",
        "options": [
            "0,30 miligramos por litro durante los dos primeros años.",
            "0,15 miligramos por litro durante los dos primeros años.",
            "0,25 miligramos por litro durante el primer año."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T514506.jpg"
    },
    {
        "text": "En una travesía, ¿cuál es la velocidad máxima permitida para una motocicleta?",
        "options": [
            "45 kilómetros por hora.",
            "80 kilómetros por hora.",
            "50 kilómetros por hora."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T514507.jpg"
    },
    {
        "text": "Los conos de la fotografía...",
        "options": [
            "sirven sólo para señalizar un nuevo carril.",
            "tienen prioridad sobre el resto de señales.",
            "tienen prioridad sobre el resto de señales, salvo las de los agentes de la autoridad."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T514509.jpg"
    },
    {
        "text": "Una persona que obtiene el permiso de la clase B a los 18 años, ¿debe renovarlo posteriormente?",
        "options": [
            "No, porque este permiso no pierde nunca su validez.",
            "Sí, a los diez años de su expedición, como norma general.",
            "No, salvo que obtenga cualquier otro permiso o licencia de conducción."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T514508.jpg"
    },
    {
        "text": "¿Es obligatorio llevar un juego de cadenas para la nieve en el vehículo?",
        "options": [
            "No.",
            "Sí.",
            "Sólo en invierno."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T514510.jpg"
    },
    {
        "text": "Cuando la separación entre los trazos de una línea discontinua es sensiblemente más corta que en el caso general, ¿qué puede anunciar?",
        "options": [
            "La proximidad de un carril especial.",
            "La proximidad de un tramo de vía que presenta un riesgo especial.",
            "La proximidad de una travesía."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T514511.jpg"
    },
    {
        "text": "¿Es recomendable abrocharse el cinturón de seguridad mientras conduce?",
        "options": [
            "Sí, pero sólo cuando se conduce a poca velocidad.",
            "Sí, pero sólo cuando se conduce a poca velocidad y en vías urbanas.",
            "No, se debe de abrochar antes de iniciar la conducción."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T514512.jpg"
    },
    {
        "text": "La señal...",
        "options": [
            "indica desnivel a lo largo de la vía en el lado izquierdo.",
            "indica que la vía desemboca en un muelle o en una corriente de agua.",
            "indica una zona con baches y en obras."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T514513.jpg"
    },
    {
        "text": "Las circunstancias que aumentan la probabilidad de que ocurra un accidente se denominan...",
        "options": [
            "marcadores de riesgo.",
            "factores de accidentalidad directa.",
            "factores de riesgo."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T500714.jpg"
    },
    {
        "text": "Se recomienda mantener con el vehículo que circula delante, como norma general, ...",
        "options": [
            "un intervalo mínimo de 4 segundos.",
            "un intervalo mínimo de 2 segundos, aunque se recomienda ampliarlo a 3 segundos cuando circulamos fuera de poblado.",
            "un intervalo mínimo de 1 segundo, debiendo ampliarse a 2 segundos cuando se circula fuera de poblado."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T514515.jpg"
    },
    {
        "text": "En el conductor, el sueño provoca que...",
        "options": [
            "se comporte de una forma más peligrosa.",
            "perciba mejor el entorno del tráfico.",
            "disminuya el tiempo de reacción."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T514516.jpg"
    },
    {
        "text": "En una carretera convencional, ¿está permitido cambiar el sentido de la marcha?",
        "options": [
            "No.",
            "No, siempre está prohibido.",
            "Sí, en los lugares adecuados."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T514517.jpg"
    },
    {
        "text": "La prueba para detectar el consumo de alcohol, normalmente consistirá en...",
        "options": [
            "realizar un análisis de sangre.",
            "realizar una demostración de equilibrio delante del agente.",
            "la comprobación del aire espirado mediante un etilómetro."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T514518.jpg"
    },
    {
        "text": "En las autovías, ¿qué vehículos de los que se relacionan pueden circular por el arcén?",
        "options": [
            "Vehículos prioritarios cuando proceda.",
            "Los de masa máxima que excedan de 3.500 Kg.",
            "Ninguno."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T514519.jpg"
    },
    {
        "text": "¿Es recomendable el uso frecuente del freno de mano cuando se circula?",
        "options": [
            "Sí, se debe utilizar en las curvas cerradas.",
            "No, sólo se debe utilizar en los casos de inmovilización del vehículo.",
            "Sí, siempre que el vehículo disponga de ABS."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T514520.jpg"
    },
    {
        "text": "Se entiende por vía insuficientemente iluminada aquella en la que...",
        "options": [
            "no puede leerse la matrícula a 50 metros o no se distingue un vehículo oscuro a 10 metros de distancia.",
            "no puede distinguirse un vehículo a 20 metros de distancia.",
            "no puede leerse la matrícula a 10 metros o no se distingue un vehículo oscuro a 50 metros de distancia."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T514521.jpg"
    },
    {
        "text": "Cuando se incorpore a la circulación, debe...",
        "options": [
            "ceder el paso a otros vehículos.",
            "hacerlo lo más rápido posible.",
            "evitar hacerlo sin el alumbrado de posición encendido."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T514523.jpg"
    },
    {
        "text": "Los navegadores GPS pueden ser de gran ayuda al conductor...",
        "options": [
            "porque disminuyen las causas de distracción al proporcionarle información importante.",
            "sólo si se presta atención a las instrucciones de voz y se mira al mapa de la pantalla del GPS.",
            "pero también pueden suponer una importante causa de distracción."
        ],
        "correct": "C",
        "image": "../../../Assets/img/I4916.jpg"
    },
    {
        "text": "Para reducir las emisiones contaminantes en los coches con motor de gasolina es recomendable iniciar la marcha...",
        "options": [
            "inmediatamente después de arrancar el motor.",
            "esperando unos segundos una vez arrancado el motor.",
            "tras arrancar el motor acelerando a fondo."
        ],
        "correct": "A",
        "image": "../../../Assets/img/I4319.jpg"
    },
    {
        "text": "Fuera de las poblaciones, ¿está permitido advertir el adelantamiento mediante ráfagas?",
        "options": [
            "No, en ningún caso.",
            "Sí, excepcionalmente, al igual que las señales acústicas.",
            "No, sólo se puede señalizar si el adelantamiento es en poblado."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T514525.jpg"
    },
    {
        "text": "Los accidentes de motocicletas...",
        "options": [
            "producen lesiones de menor gravedad para sus ocupantes que los de otros vehículos.",
            "resultan fácilmente mortales para sus ocupantes.",
            "son siempre de menor importancia que los de otros vehículos."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T514526.jpg"
    },
    {
        "text": "Si en un estrechamiento sin señalizar han entrado a la vez un turismo y un vehículo de tracción animal, ¿cuál de los dos vehículos tendrá preferencia de paso?",
        "options": [
            "El vehículo de tracción animal.",
            "El que tenga que dar marcha atrás una mayor distancia.",
            "El turismo."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T514527.jpg"
    },
    {
        "text": "Algunos síntomas que pueden anunciarle la fatiga son...",
        "options": [
            "ansiedad y depresión.",
            "fuertes picores.",
            "bostezos, acomodos en el asiento y molestias en la nuca."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T514528.jpg"
    },
    {
        "text": "Esta señal prohíbe...",
        "options": [
            "el estacionamiento desde donde está colocada la señal en el lado de la calzada en que está situada.",
            "la parada en el lado de la calzada en que está situada.",
            "el estacionamiento en el lado de la calzada en que está situada y a ambos lados de la señal."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T514529.jpg"
    },
    {
        "text": "El tiempo de absorción del alcohol, ¿depende de la bebida ingerida?",
        "options": [
            "No, la absorción se realiza por el organismo a un ritmo constante, independientemente de la bebida.",
            "Sí, se absorbe más rápidamente el alcohol de las bebidas fermentadas.",
            "Sí, se absorbe más rápidamente el alcohol de las bebidas destiladas."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T514530.jpg"
    }
]
            
            ;

            const container = document.getElementById('test-container');
            const paginationRow1 = document.getElementById('pagination-row-1');
            const paginationRow2 = document.getElementById('pagination-row-2');

            // Generar preguntas
            questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.setAttribute('data-correct', question.correct);
                questionDiv.innerHTML = `
                    <div class="question-image">
                        <img src="${question.image}" alt="Imagen de la pregunta">
                    </div>
                    <div class="question-content">
                        <h3>${index + 1}. ${question.text}</h3>
                        <div class="options">
                            ${question.options.map((option, idx) => `
                                <div class="option" data-answer="${String.fromCharCode(65 + idx)}">
                                    <span class="option-circle">${String.fromCharCode(65 + idx)}</span>
                                    ${option}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                container.appendChild(questionDiv);
            });

            // Generar paginación
            for (let i = 0; i < questions.length; i++) {
                const button = document.createElement('button');
                button.textContent = `${i + 1}`;
                button.addEventListener('click', () => showQuestion(i));
                if (i < 15) {
                    paginationRow1.appendChild(button);
                } else {
                    paginationRow2.appendChild(button);
                }
            }

            // Mostrar la primera pregunta
            showQuestion(0);

            // Función para mostrar una pregunta específica
            function showQuestion(index) {
                document.querySelectorAll('.question').forEach((q, i) => {
                    q.style.display = i === index ? 'flex' : 'none';
                });
                document.querySelectorAll('.pagination button').forEach((btn, i) => {
                    btn.style.backgroundColor = i === index ? '#ff7aa2' : '#ffa5c3';
                });
            }

            // Evento para las opciones de respuesta
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const question = this.closest('.question');
                    const questionIndex = Array.from(container.children).indexOf(question);
                    const isCorrect = this.getAttribute('data-answer') === question.getAttribute('data-correct');
                    
                    if (question.dataset.answered) return;

                    question.dataset.answered = true;

                    question.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                        opt.style.pointerEvents = 'none';
                    });
                    
                    this.classList.add('selected', isCorrect ? 'correct' : 'incorrect');

                    if (!isCorrect) {
                        question.querySelector(`.option[data-answer="${question.getAttribute('data-correct')}"]`).classList.add('correct');
                    }

                    // Actualizar el botón de paginación
                    const paginationButton = questionIndex < 15 ? paginationRow1.children[questionIndex] : paginationRow2.children[questionIndex - 15];
                    paginationButton.classList.add(isCorrect ? 'correct' : 'incorrect');
                });
            });

            // Evento para corregir el test
            document.getElementById('correct-test').addEventListener('click', () => {
                let wrongAnswers = 0;
                document.querySelectorAll('.question').forEach((question, index) => {
                    const selected = question.querySelector('.option.selected');
                    const isCorrect = selected && selected.getAttribute('data-answer') === question.getAttribute('data-correct');
                    if (!isCorrect) {
                        wrongAnswers++;
                    }
                    // Actualizar el botón de paginación si no se ha respondido
                    if (!selected) {
                        const paginationButton = index < 15 ? paginationRow1.children[index] : paginationRow2.children[index - 15];
                        paginationButton.classList.add('incorrect');
                    }
                });
                const resultMessage = `Has fallado ${wrongAnswers} respuestas.`;

                const alert = document.getElementById('custom-alert');
                document.getElementById('alert-message').textContent = resultMessage;
                alert.style.display = 'block';
            });
        });

        function closeAlert() {
            document.getElementById('custom-alert').style.display = 'none';
        }
    </script>

    
</body>
</html>