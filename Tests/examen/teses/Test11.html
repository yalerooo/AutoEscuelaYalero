<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Autoescuela</title>
    <link rel="stylesheet" href="../../../Assets/style.css">
</head>
<body>

    
    <div class="container">
        <h1 style="text-align: center; color: #ffa5c3;">Test de Autoescuela</h1>
        <div id="test-container">
            <!-- Aquí se generarán dinámicamente las preguntas -->
        </div>
        <div class="pagination">
            <div class="pagination-row" id="pagination-row-1"></div>
            <div class="pagination-row" id="pagination-row-2"></div>
        </div>
        <button id="correct-test">Corregir Test</button>
    </div>

    <!-- Custom Alert HTML -->
    <div class="custom-alert" id="custom-alert">
        <h2>Resultado del Test</h2>
        <p id="alert-message">Aquí irá el mensaje del resultado.</p>
        <button onclick="closeAlert()">Cerrar</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const questions = [
    {
        "text": "En caso de niebla espesa, ¿qué alumbrado es obligatorio para circular con su turismo?",
        "options": [
            "Las luces antiniebla traseras, junto a las de posición y las de corto alcance.",
            "Las luces antiniebla delanteras.",
            "Las luces antiniebla delanteras, junto a las de posición y las de corto alcance."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T511101.jpg"
    },
    {
        "text": "Esta señal...",
        "options": [
            "obliga a los conductores de vehículos que transporten mercancías peligrosas, a circular por la calzada a cuya entrada esté situada.",
            "obliga a los conductores de vehículos que transporten mercancías explosivas o fácilmente inflamables, a circular por la calzada a cuya entrada esté situada.",
            "obliga a los conductores de vehículos que transporten más de mil litros de productos capaces de contaminar el agua, a circular por la calzada a cuya entrada esté situada."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T511102.jpg"
    },
    {
        "text": "En relación al uso del cinturón de seguridad, una embarazada...",
        "options": [
            "debe utilizarlo, salvo exención médica expresa.",
            "puede no utilizarlo si le dificulta los movimientos para conducir.",
            "siempre está exenta de utilizarlo porque es peligroso para el feto."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T511103.jpg"
    },
    {
        "text": "En los pasos para peatones sin semáforo, ¿cuándo tienen preferencia los peatones?",
        "options": [
            "En los pasos para peatones con señal vertical solamente.",
            "Siempre.",
            "En las travesías solamente."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T511104.jpg"
    },
    {
        "text": "Descansar durante un viaje...",
        "options": [
            "es una forma de evitar la aparición de fatiga.",
            "únicamente es necesario para conductores profesionales.",
            "sólo es aconsejable para conductores noveles."
        ],
        "correct": "A",
        "image": "../../../Assets/img/I4324.jpg"
    },
    {
        "text": "En una carretera convencional con varios carriles para el mismo sentido de circulación y separación física de los mismos, ¿cuándo podrá circular con su turismo a una velocidad máxima de 100 km/h?",
        "options": [
            "A partir de la señal de velocidad máxima de 100 km/h.",
            "Nunca.",
            "Siempre que las circunstancias de la vía lo aconsejen."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T510110_0512.jpg"
    },
    {
        "text": "Se define como motocicleta al automóvil...",
        "options": [
            "de dos ruedas con un motor de cilindrada superior a 50 centímetros cúbicos, y/o con una velocidad máxima superior a 45 km/h.",
            "de dos o tres ruedas con una cilindrada inferior a 50 centímetros cúbicos.",
            "con una cilindrada superior a 125 centímetros cúbicos."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T511107.jpg"
    },
    {
        "text": "El vehículo lleva dos rectángulos amarillos con borde rojo. ¿Qué indican?",
        "options": [
            "Que el vehículo transporta mercancías peligrosas.",
            "Que es un vehículo largo y mide más de 12 metros.",
            "Que es un vehículo ancho y mide más de 2 metros."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T511108.jpg"
    },
    {
        "text": "Los medicamentos naturales, ¿pueden tener efectos negativos para la conducción?",
        "options": [
            "Sí, todos.",
            "Sí, en algunos casos.",
            "No, son siempre inofensivos."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T511109.jpg"
    },
    {
        "text": "Un vehículo le quiere adelantar. ¿Debe hacer algo para impedirlo?",
        "options": [
            "Sí.",
            "No."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T511110.jpg"
    },
    {
        "text": "Los accidentes de tráfico con personas mayores al volante son más frecuentes en...",
        "options": [
            "las incorporaciones a la carretera.",
            "al estacionar.",
            "al cambiar de dirección a la izquierda."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T510130_250216.jpg"
    },
    {
        "text": "Como norma general, ¿está permitido que los conductores de bicicletas mayores de 18 años, circulen con sus vehículos por las aceras?",
        "options": [
            "Solo si circulan a una velocidad igual o inferior a 15 km/h.",
            "No.",
            "Sí."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T510101_050723.jpg"
    },
    {
        "text": "Si en el asiento de un vehículo se pone una toalla; en caso de accidente...",
        "options": [
            "reduce la posibilidad de sufrir un latigazo cervical.",
            "aumenta la probabilidad de que se produzca el efecto submarino.",
            "elimina la posibilidad de que se produzca el efecto submarino."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T510132_150723.jpg"
    },
    {
        "text": "Estas señales que hacen referencia a un paso a nivel indican:",
        "options": [
            "Proximidad.",
            "Aproximación.",
            "Cercanía."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T511114.jpg"
    },
    {
        "text": "Con nieve en la calzada...",
        "options": [
            "se circulará lo más cerca posible del vehículo que va delante para aprovechar sus rodadas.",
            "se deben utilizar cadenas, que se colocarán siempre en las ruedas delanteras.",
            "la conducción debe ser suave, sin movimientos bruscos de la dirección ni cambios repentinos."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T511115.jpg"
    },
    {
        "text": "Los ciclistas, ¿están obligados a encender el alumbrado cuando circulan de noche?",
        "options": [
            "Sí.",
            "Solo cuando circulan por vías interurbanas.",
            "No, si llevan puestas prendas reflectantes."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T511116.jpg"
    },
    {
        "text": "Los dos primeros años con permiso, ¿cuál es la tasa máxima de alcohol?",
        "options": [
            "0,10 mg/l en aire espirado = 0,2 g/l en sangre.",
            "0,15 mg/l en aire espirado = 0,3 g/l en sangre.",
            "0,25 mg/l en aire espirado = 0,5 g/l en sangre."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T511117.jpg"
    },
    {
        "text": "En esta intersección con señal de STOP y buena visibilidad, ¿qué debe hacer?",
        "options": [
            "Seguir circulando sin detenerse, porque no viene ningún vehículo de frente.",
            "Detenerse siempre ante la línea transversal.",
            "Detenerse siempre una vez superada la línea transversal."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T510119_151215.jpg"
    },
    {
        "text": "Una vez iniciado el adelantamiento, se producen circunstancias que hacen difícil su finalización sin provocar riesgos; ¿qué está obligado a hacer el conductor?",
        "options": [
            "Advertir del riesgo al vehículo al que pretende adelantar para que detenga su marcha.",
            "Reducir la velocidad y regresar a su carril sin obstaculizar.",
            "Aumentar la velocidad para finalizar el adelantamiento."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T503502.jpg"
    },
    {
        "text": "Como norma general, en una vía interurbana la parada y el estacionamiento se realizarán...",
        "options": [
            "siempre fuera de la calzada, en el lado derecho de la misma y dejando libre la parte transitable del arcén.",
            "en el arcén, cuando sea transitable y suficiente.",
            "siempre en el arcén."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T511120.jpg"
    },
    {
        "text": "¿Cuándo es recomendable cambiar los neumáticos?",
        "options": [
            "Cuando el desgaste sea mayor por los lados.",
            "5 años después de la fecha de fabricación.",
            "Cada 5.000 kilómetros."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T511121.jpg"
    },
    {
        "text": "En una carretera convencional, ¿qué distancia se debe dejar con el vehículo que circula delante, al que no se pretende adelantar?",
        "options": [
            "La que permita detenerse en caso de frenado brusco del vehículo que va delante sin colisionar con él y permita a los demás adelantar con seguridad.",
            "50 metros.",
            "La que permita detenerse en caso de frenado brusco del vehículo que va delante sin colisionar con él."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T511122.jpg"
    },
    {
        "text": "¿Qué debe hacer en esta situación?",
        "options": [
            "No entrar en el túnel.",
            "Circular con precaución.",
            "Utilizar el carril que está libre."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T511124.jpg"
    },
    {
        "text": "En bajada, ¿cuándo frena mejor el vehículo?",
        "options": [
            "Cuando no lleva carga frena mejor.",
            "Frena igual con carga que sin carga.",
            "Cuando lleva carga frena mejor."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T503121.jpg"
    },
    {
        "text": "¿Se puede conducir un ciclomotor con el permiso de la clase B?",
        "options": [
            "Sí.",
            "No, salvo que el permiso tenga una antigüedad superior a tres años.",
            "Sí, si no supera los 250 centímetros cúbicos."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T511125.jpg"
    },
    {
        "text": "Si no dispone del ticket que permite estacionar en una zona limitada en tiempo, ¿puede un agente inmovilizar el vehículo?",
        "options": [
            "Sí.",
            "No, porque no es una causa de peligro.",
            "No, sólo podrá imponer una sanción económica."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T511126.jpg"
    },
    {
        "text": "Los retrovisores deben observarse...",
        "options": [
            "únicamente al realizar maniobras.",
            "sólo cuando sea necesario.",
            "con regularidad durante la marcha."
        ],
        "correct": "C",
        "image": "../../../Assets/img/I3713.jpg"
    },
    {
        "text": "La depresión es una grave enfermedad que se sufre cada vez con más frecuencia. Si se padece debemos saber que...",
        "options": [
            "se pierde información del entorno y el conductor puede tardar en detectar sucesos importantes.",
            "si no nos medicamos no tiene efectos sobre la conducción.",
            "no debemos conducir hasta pasada al menos una hora de habernos medicado."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T513414.jpg"
    },
    {
        "text": "Tratar de expulsar a un insecto del vehículo, ¿es una de las causas más frecuentes de distracciones?",
        "options": [
            "Sí.",
            "No.",
            "Sólo en algunas carreteras."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T511129.jpg"
    },
    {
        "text": "¿Qué indica esta señal?",
        "options": [
            "Albergue de juventud.",
            "Merendero.",
            "Campamento."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T511130.jpg"
    }
]
            
            ;

            const container = document.getElementById('test-container');
            const paginationRow1 = document.getElementById('pagination-row-1');
            const paginationRow2 = document.getElementById('pagination-row-2');

            // Generar preguntas
            questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.setAttribute('data-correct', question.correct);
                questionDiv.innerHTML = `
                    <div class="question-image">
                        <img src="${question.image}" alt="Imagen de la pregunta">
                    </div>
                    <div class="question-content">
                        <h3>${index + 1}. ${question.text}</h3>
                        <div class="options">
                            ${question.options.map((option, idx) => `
                                <div class="option" data-answer="${String.fromCharCode(65 + idx)}">
                                    <span class="option-circle">${String.fromCharCode(65 + idx)}</span>
                                    ${option}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                container.appendChild(questionDiv);
            });

            // Generar paginación
            for (let i = 0; i < questions.length; i++) {
                const button = document.createElement('button');
                button.textContent = `${i + 1}`;
                button.addEventListener('click', () => showQuestion(i));
                if (i < 15) {
                    paginationRow1.appendChild(button);
                } else {
                    paginationRow2.appendChild(button);
                }
            }

            // Mostrar la primera pregunta
            showQuestion(0);

            // Función para mostrar una pregunta específica
            function showQuestion(index) {
                document.querySelectorAll('.question').forEach((q, i) => {
                    q.style.display = i === index ? 'flex' : 'none';
                });
                document.querySelectorAll('.pagination button').forEach((btn, i) => {
                    btn.style.backgroundColor = i === index ? '#ff7aa2' : '#ffa5c3';
                });
            }

            // Evento para las opciones de respuesta
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const question = this.closest('.question');
                    const questionIndex = Array.from(container.children).indexOf(question);
                    const isCorrect = this.getAttribute('data-answer') === question.getAttribute('data-correct');
                    
                    if (question.dataset.answered) return;

                    question.dataset.answered = true;

                    question.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                        opt.style.pointerEvents = 'none';
                    });
                    
                    this.classList.add('selected', isCorrect ? 'correct' : 'incorrect');

                    if (!isCorrect) {
                        question.querySelector(`.option[data-answer="${question.getAttribute('data-correct')}"]`).classList.add('correct');
                    }

                    // Actualizar el botón de paginación
                    const paginationButton = questionIndex < 15 ? paginationRow1.children[questionIndex] : paginationRow2.children[questionIndex - 15];
                    paginationButton.classList.add(isCorrect ? 'correct' : 'incorrect');
                });
            });

            // Evento para corregir el test
            document.getElementById('correct-test').addEventListener('click', () => {
                let wrongAnswers = 0;
                document.querySelectorAll('.question').forEach((question, index) => {
                    const selected = question.querySelector('.option.selected');
                    const isCorrect = selected && selected.getAttribute('data-answer') === question.getAttribute('data-correct');
                    if (!isCorrect) {
                        wrongAnswers++;
                    }
                    // Actualizar el botón de paginación si no se ha respondido
                    if (!selected) {
                        const paginationButton = index < 15 ? paginationRow1.children[index] : paginationRow2.children[index - 15];
                        paginationButton.classList.add('incorrect');
                    }
                });
                const resultMessage = `Has fallado ${wrongAnswers} respuestas.`;

                const alert = document.getElementById('custom-alert');
                document.getElementById('alert-message').textContent = resultMessage;
                alert.style.display = 'block';
            });
        });

        function closeAlert() {
            document.getElementById('custom-alert').style.display = 'none';
        }
    </script>

    
</body>
</html>