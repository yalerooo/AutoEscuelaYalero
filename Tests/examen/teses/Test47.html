<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Autoescuela</title>
    <link rel="stylesheet" href="../../../Assets/style.css">
</head>
<body>

    
    <div class="container">
        <h1 style="text-align: center; color: #ffa5c3;">Test de Autoescuela</h1>
        <div id="test-container">
            <!-- Aquí se generarán dinámicamente las preguntas -->
        </div>
        <div class="pagination">
            <div class="pagination-row" id="pagination-row-1"></div>
            <div class="pagination-row" id="pagination-row-2"></div>
        </div>
        <button id="correct-test">Corregir Test</button>
    </div>

    <!-- Custom Alert HTML -->
    <div class="custom-alert" id="custom-alert">
        <h2>Resultado del Test</h2>
        <p id="alert-message">Aquí irá el mensaje del resultado.</p>
        <button onclick="closeAlert()">Cerrar</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const questions = [
    {
        "text": "En esta vía urbana con dos carriles para cada sentido que no tiene líneas de separación de carriles, ¿por qué carril se debe circular?",
        "options": [
            "Por el carril de la derecha y no puedo cambiar al segundo.",
            "Por el de la derecha, y puedo circular por el segundo carril para adelantar.",
            "Por el carril que más convenga para mi destino."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T514701.jpg"
    },
    {
        "text": "¿Puede ser condenado a penas de prisión por conducir bajo los efectos del alcohol?",
        "options": [
            "Sí, cuando haya cometido un delito contra la seguridad en el tráfico.",
            "No, porque no está regulado en el Código Penal.",
            "No, pero sí a trabajos en beneficio de la comunidad."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T514702.jpg"
    },
    {
        "text": "Esta señal permite...",
        "options": [
            "realizar un cambio de sentido, únicamente.",
            "realizar un cambio de dirección, únicamente.",
            "realizar tanto un cambio de dirección como de sentido."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T514703.jpg"
    },
    {
        "text": "Los accidentes por distracción son más frecuentes...",
        "options": [
            "en los jóvenes entre 18 y 25 años y en los mayores de 70.",
            "en los mayores de 50 años.",
            "en los conductores entre 30 y 45 años."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T514704.jpg"
    },
    {
        "text": "¿Dónde está permitido que viaje un niño que no alcance los 135 centímetros de estatura?",
        "options": [
            "En cualquiera de los asientos traseros utilizando el cinturón para adultos.",
            "En un asiento delantero o trasero, utilizando un dispositivo de retención homologado en función de su talla y peso.",
            "En un asiento trasero utilizando siempre un dispositivo de retención homologado en función de su talla y peso."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T514705.jpg"
    },
    {
        "text": "Las alteraciones del sueño, ¿pueden afectar al estado del conductor?",
        "options": [
            "Sí, pueden provocar estados de nerviosismo y agresividad.",
            "No.",
            "Sí, incrementan los niveles de atención."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T514706.jpg"
    },
    {
        "text": "En una carretera convencional, el conductor de una motocicleta, ¿puede rebasar la velocidad máxima genérica en alguna circunstancia?",
        "options": [
            "Sí, para adelantar.",
            "No, en ningún caso.",
            "Sí, siempre que sea necesario."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T514707.jpg"
    },
    {
        "text": "En caso de accidente, el seguro obligatorio de nuestro vehículo, ¿cubre los daños producidos a la parte contraria?",
        "options": [
            "Sí, siempre, pues así se contempla en la póliza del seguro obligatorio.",
            "Sí, cuando nosotros resultamos civilmente responsable del accidente.",
            "Sí, en todo caso, si los gastos no superan los límites establecidos en la póliza."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T514708.jpg"
    },
    {
        "text": "Circulando fuera de poblado, ¿qué señalización podrá utilizar para advertir su propósito de adelantar?",
        "options": [
            "Tanto la señalización óptica como la acústica.",
            "La acústica de sonido no estridente.",
            "La óptica, utilizando de forma intermitente, el alumbrado de corto o de largo alcance."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T514709.jpg"
    },
    {
        "text": "La señalización tiene por misión...",
        "options": [
            "complementar a las normas.",
            "confirmar las excepciones de las normas.",
            "advertir, informar, ordenar o reglamentar el comportamiento de los usuarios."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T514710.jpg"
    },
    {
        "text": "Circulando por un paso inferior suficientemente iluminado ¿es necesario encender algún alumbrado?",
        "options": [
            "Sí, el alumbrado de posición, para advertir mi presencia a los demás usuarios.",
            "No, porque con la iluminación de la vía es suficiente.",
            "Sí, el alumbrado de posición y el de corto alcance."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T514711.jpg"
    },
    {
        "text": "Circular con escape libre está prohibido...",
        "options": [
            "sólo a los vehículos automóviles.",
            "a los vehículos de motor, excepto ciclomotores, en vías urbanas.",
            "a todos los vehículos de motor y a los ciclomotores."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T514712.jpg"
    },
    {
        "text": "¿Podrá utilizar un carril VAO un turismo que transporta a cuatro personas con remolque?",
        "options": [
            "No.",
            "Sí.",
            "Sólo si el carril no está ocupado."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T514713.jpg"
    },
    {
        "text": "Los cinturones de seguridad en los asientos traseros no son útiles. ¿Es cierto?",
        "options": [
            "Sí, pero sólo cuando se produzca a poca velocidad.",
            "Sí, pero sólo cuando se circula por vía urbana.",
            "No, esta afirmación es falsa."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T514714.jpg"
    },
    {
        "text": "¿Qué indica esta señal?",
        "options": [
            "Peligro por viento transversal ocasionado por la proximidad del vuelo de aeronaves.",
            "Peligro por ruidos imprevistos originados por aeronaves que vuelan a baja altura.",
            "Advierte de la situación cercana del parking del aeropuerto."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T514715.jpg"
    },
    {
        "text": "¿Es obligatorio que este conductor se ponga un chaleco reflectante?",
        "options": [
            "Es obligatorio ponerse una prenda reflectante, pero no tiene por qué ser un chaleco.",
            "No, no es obligatorio por ser de día.",
            "Sí, y debe ser de alta visibilidad y estar certificado."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T514716.jpg"
    },
    {
        "text": "En esta autopista, ¿está permitido realizar un cambio de sentido?",
        "options": [
            "No, excepto en los lugares autorizados y señalizados.",
            "Sí, utilizando los pasos abiertos de la mediana.",
            "Sí, cuando haya visibilidad suficiente."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T514717.jpg"
    },
    {
        "text": "Los medicamentos que no necesitan receta médica, ¿afectan a la conducción?",
        "options": [
            "No.",
            "Sí, todos los medicamentos afectan a la conducción.",
            "Sí, algunos pueden tener efectos negativos."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T514718.jpg"
    },
    {
        "text": "La carga de su turismo sobresale por detrás. ¿Qué debe hacer?",
        "options": [
            "No es obligatorio señalizarla.",
            "Señalizarla con paneles de franjas rojas y blancas.",
            "Señalizarla con tela de color."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T514719.jpg"
    },
    {
        "text": "La tasa de alcoholemia realmente segura para conducir es...",
        "options": [
            "0,0 gramos de alcohol por litro de sangre.",
            "0,10 gramos de alcohol por litro de sangre.",
            "0,15 gramos de alcohol por litro de sangre."
        ],
        "correct": "A",
        "image": "../../../Assets/img/I4516.jpg"
    },
    {
        "text": "En esta intersección, los conductores están obligados a detenerse...",
        "options": [
            "ante la línea transversal, sin rebasarla.",
            "junto a la señal de STOP.",
            "inmediatamente después de la línea transversal."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T514721.jpg"
    },
    {
        "text": "Por una autovía...",
        "options": [
            "no se puede circular con un ciclomotor.",
            "no se puede circular con los vehículos especiales.",
            "no se puede circular con un vehículo con remolque."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T514722.jpg"
    },
    {
        "text": "Entre otros lugares, ¿dónde está prohibido estacionar en zona urbana?",
        "options": [
            "en vías calificadas de atención preferente.",
            "en curvas y cambios de rasante.",
            "sobre las aceras y paseos."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T514723.jpg"
    },
    {
        "text": "¿Es conveniente circular en paralelo junto a un vehículo de dos ruedas?",
        "options": [
            "Sí.",
            "No, salvo en vías urbanas o con mucho tráfico.",
            "No."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T514724.jpg"
    },
    {
        "text": "Los peatones, cuando circulen de noche en grupo, deben señalizar su posición...",
        "options": [
            "con una señal manual de STOP.",
            "con unos triángulos de preseñalización de peligro.",
            "con una luz blanca o amarilla que ilumine hacia adelante y otra roja hacia atrás."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T514725.jpg"
    },
    {
        "text": "Conducir por una vía en mal estado, ¿puede favorecer la fatiga?",
        "options": [
            "Sólo si conduce de noche.",
            "No.",
            "Sí."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T514726.jpg"
    },
    {
        "text": "Los conductores de los vehículos prioritarios que circulen en servicio urgente...",
        "options": [
            "obedecerán los semáforos.",
            "procurarán no vulnerar la prioridad de paso en las intersecciones.",
            "están exentos de cumplir cualquier norma de circulación."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T514727.jpg"
    },
    {
        "text": "Al final de su vida útil, se da de baja definitiva un vehículo, ¿quién está obligado a acreditar que éste ha sido entregado a un centro de tratamiento para su descontaminación?",
        "options": [
            "El titular del vehículo.",
            "El Ayuntamiento donde estuviese dado de alta el vehículo.",
            "El conductor habitual del vehículo."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T502815.jpg"
    },
    {
        "text": "Esta señal...",
        "options": [
            "indica tramo de calzada de sentido único.",
            "indica la dirección obligatoria a seguir por todos los vehículos.",
            "prohíbe girar a la derecha."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T514729.jpg"
    },
    {
        "text": "El exceso de velocidad en la conducción hace que la capacidad de anticipación ante una situación del tráfico sea...",
        "options": [
            "menor.",
            "mayor.",
            "la misma que a poca velocidad."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T514730.jpg"
    }
]
            
            ;

            const container = document.getElementById('test-container');
            const paginationRow1 = document.getElementById('pagination-row-1');
            const paginationRow2 = document.getElementById('pagination-row-2');

            // Generar preguntas
            questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.setAttribute('data-correct', question.correct);
                questionDiv.innerHTML = `
                    <div class="question-image">
                        <img src="${question.image}" alt="Imagen de la pregunta">
                    </div>
                    <div class="question-content">
                        <h3>${index + 1}. ${question.text}</h3>
                        <div class="options">
                            ${question.options.map((option, idx) => `
                                <div class="option" data-answer="${String.fromCharCode(65 + idx)}">
                                    <span class="option-circle">${String.fromCharCode(65 + idx)}</span>
                                    ${option}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                container.appendChild(questionDiv);
            });

            // Generar paginación
            for (let i = 0; i < questions.length; i++) {
                const button = document.createElement('button');
                button.textContent = `${i + 1}`;
                button.addEventListener('click', () => showQuestion(i));
                if (i < 15) {
                    paginationRow1.appendChild(button);
                } else {
                    paginationRow2.appendChild(button);
                }
            }

            // Mostrar la primera pregunta
            showQuestion(0);

            // Función para mostrar una pregunta específica
            function showQuestion(index) {
                document.querySelectorAll('.question').forEach((q, i) => {
                    q.style.display = i === index ? 'flex' : 'none';
                });
                document.querySelectorAll('.pagination button').forEach((btn, i) => {
                    btn.style.backgroundColor = i === index ? '#ff7aa2' : '#ffa5c3';
                });
            }

            // Evento para las opciones de respuesta
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const question = this.closest('.question');
                    const questionIndex = Array.from(container.children).indexOf(question);
                    const isCorrect = this.getAttribute('data-answer') === question.getAttribute('data-correct');
                    
                    if (question.dataset.answered) return;

                    question.dataset.answered = true;

                    question.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                        opt.style.pointerEvents = 'none';
                    });
                    
                    this.classList.add('selected', isCorrect ? 'correct' : 'incorrect');

                    if (!isCorrect) {
                        question.querySelector(`.option[data-answer="${question.getAttribute('data-correct')}"]`).classList.add('correct');
                    }

                    // Actualizar el botón de paginación
                    const paginationButton = questionIndex < 15 ? paginationRow1.children[questionIndex] : paginationRow2.children[questionIndex - 15];
                    paginationButton.classList.add(isCorrect ? 'correct' : 'incorrect');
                });
            });

            // Evento para corregir el test
            document.getElementById('correct-test').addEventListener('click', () => {
                let wrongAnswers = 0;
                document.querySelectorAll('.question').forEach((question, index) => {
                    const selected = question.querySelector('.option.selected');
                    const isCorrect = selected && selected.getAttribute('data-answer') === question.getAttribute('data-correct');
                    if (!isCorrect) {
                        wrongAnswers++;
                    }
                    // Actualizar el botón de paginación si no se ha respondido
                    if (!selected) {
                        const paginationButton = index < 15 ? paginationRow1.children[index] : paginationRow2.children[index - 15];
                        paginationButton.classList.add('incorrect');
                    }
                });
                const resultMessage = `Has fallado ${wrongAnswers} respuestas.`;

                const alert = document.getElementById('custom-alert');
                document.getElementById('alert-message').textContent = resultMessage;
                alert.style.display = 'block';
            });
        });

        function closeAlert() {
            document.getElementById('custom-alert').style.display = 'none';
        }
    </script>

    
</body>
</html>