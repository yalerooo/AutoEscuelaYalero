<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Autoescuela</title>
    <link rel="stylesheet" href="../../../Assets/style.css">
</head>
<body>

    
    <div class="container">
        <h1 style="text-align: center; color: #ffa5c3;">Test de Autoescuela</h1>
        <div id="test-container">
            <!-- Aquí se generarán dinámicamente las preguntas -->
        </div>
        <div class="pagination">
            <div class="pagination-row" id="pagination-row-1"></div>
            <div class="pagination-row" id="pagination-row-2"></div>
        </div>
        <button id="correct-test">Corregir Test</button>
    </div>

    <!-- Custom Alert HTML -->
    <div class="custom-alert" id="custom-alert">
        <h2>Resultado del Test</h2>
        <p id="alert-message">Aquí irá el mensaje del resultado.</p>
        <button onclick="closeAlert()">Cerrar</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const questions = [
    {
        "text": "La señal indica la situación de...",
        "options": [
            "un paso a nivel sin barreras de una vía férrea.",
            "un paso a nivel, con o sin barreras.",
            "un paso a nivel sin barreras de más de una vía férrea."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T513301.jpg"
    },
    {
        "text": "¿Dónde se producen más accidentes?",
        "options": [
            "Curva con radio grande.",
            "Curva radio pequeño.",
            "Recta monótona."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T513302.jpg"
    },
    {
        "text": "Si en poblado no hay zonas peatonales, ¿por dónde deben circular los peatones?",
        "options": [
            "Siempre por su izquierda.",
            "Por la derecha o por la izquierda, dependiendo de las circunstancias.",
            "Siempre por su derecha."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T513303.jpg"
    },
    {
        "text": "El mal uso de los medicamentos puede ser causa de...",
        "options": [
            "mayor riesgo de accidente.",
            "estados de fuerte somnolencia, únicamente.",
            "un incremento de las alergias."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T513304.jpg"
    },
    {
        "text": "Como norma general, la velocidad máxima de un turismo en una vía para automóviles...",
        "options": [
            "es de 90 kilómetros por hora.",
            "es de 100 kilómetros por hora.",
            "es de 120 kilómetros por hora."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T513305.jpg"
    },
    {
        "text": "Con el permiso de conducción \"B\", ¿puede conducir este tractor agrícola?",
        "options": [
            "Sí, siempre que no lleve remolque.",
            "Sí.",
            "No, porque es un vehículo pesado."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T513306.jpg"
    },
    {
        "text": "¿Es obligatorio llevar iluminada la placa posterior de la matrícula durante la noche?",
        "options": [
            "Sí, pero solamente en vías interurbanas.",
            "No.",
            "Sí."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T513307.jpg"
    },
    {
        "text": "La población más sensible a los efectos del alcohol, son las personas...",
        "options": [
            "menores de 18 años y los mayores de 45 años.",
            "menores de 18 años y los mayores de 65 años.",
            "entre 18 y 30 años."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T513308.jpg"
    },
    {
        "text": "En esta vía de doble sentido, ¿dónde se colocará con su turismo para cambiar de dirección a la izquierda?",
        "options": [
            "Cerca del borde derecho de la calzada.",
            "Junto al borde izquierdo de la calzada.",
            "Junto a la marca longitudinal que separa los sentidos."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T513309.jpg"
    },
    {
        "text": "Con nieve en la calzada, ¿cómo debemos conducir?",
        "options": [
            "Con las luces de emergencia encendidas.",
            "Frenando y acelerando con suavidad.",
            "Por el arcén."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T513310.jpg"
    },
    {
        "text": "Si un vehículo estacionado se incorpora a la circulación, ¿tiene preferencia para realizar la maniobra?",
        "options": [
            "Sí, si se ha señalizado previamente.",
            "No.",
            "Sí, en cualquier caso."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T513311.jpg"
    },
    {
        "text": "El conductor de un turismo que necesite utilizar una rueda de repuesto de uso temporal, circulará...",
        "options": [
            "hasta llegar a su taller habitual donde se reparará o cambiará la rueda.",
            "como si de una rueda de repuesto normal se tratara.",
            "respetando sus limitaciones y por el tiempo indispensable para llevar el vehículo a reparar al centro más cercano."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T513312.jpg"
    },
    {
        "text": "Un agente con el brazo levantado verticalmente obliga a los vehículos que se aproximan a...",
        "options": [
            "reducir la velocidad.",
            "continuar la marcha.",
            "detenerse."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T513313.jpg"
    },
    {
        "text": "El cinturón de seguridad, ¿cómo debe colocarlo?",
        "options": [
            "Apretado.",
            "Ajustado, pero sin apretar.",
            "Flojo para que no moleste."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T513314.jpg"
    },
    {
        "text": "¿Qué indica esta señal?",
        "options": [
            "Una salida en autopista o autovía.",
            "Una zona de frenado de emergencia.",
            "Una zona para realizar acampadas."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T513315.jpg"
    },
    {
        "text": "Para evitar los accidentes, es importante...",
        "options": [
            "llevar incorporado al vehículo un GPS.",
            "reducir la velocidad en las zonas con radares.",
            "conducir con la máxima seguridad en todo momento."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T513316.jpg"
    },
    {
        "text": "Un menor de doce años, ¿puede viajar de pasajero en una motocicleta?",
        "options": [
            "No, tiene que tener más de doce años.",
            "No, salvo que mida más de 150 cm.",
            "Sí, si tiene más de siete años y la conduce su padre, madre o tutor."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T513317.jpg"
    },
    {
        "text": "Un conductor menor de edad, ¿qué tasa máxima de alcoholemia tiene permitida en aire espirado para circular?",
        "options": [
            "0,25 miligramos por litro.",
            "0,15 miligramos por litro.",
            "0,0 miligramos por litro."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T500116.jpg"
    },
    {
        "text": "En las intersecciones y sus proximidades, si se dificulta el giro a otros vehículos, está prohibido...",
        "options": [
            "parar, únicamente.",
            "estacionar, solamente.",
            "parar y estacionar."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T513319.jpg"
    },
    {
        "text": "Para ahorrar carburante, debe ventilar el vehículo...",
        "options": [
            "abriendo todas las ventanillas.",
            "con las entradas de aire que hay en el salpicadero.",
            "abriendo solamente las ventanillas traseras."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T513320.jpg"
    },
    {
        "text": "De día, ¿en qué circunstancia debe llevar encendida la luz de corto alcance?",
        "options": [
            "Al circular por un carril VAO.",
            "La luz de corto alcance sólo puede encenderse de noche.",
            "Al circular por un carril reversible."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T513321.jpg"
    },
    {
        "text": "¿Qué debemos tener en cuenta a la hora de comprar un casco?",
        "options": [
            "Que esté homologado, además de su talla y el material con que esté fabricado.",
            "Únicamente que esté homologado.",
            "La marca."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T513322.jpg"
    },
    {
        "text": "La flecha blanca, ¿a qué obliga?",
        "options": [
            "A circular por el carril izquierdo.",
            "A cambiar de sentido (180º).",
            "A girar a la izquierda."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T513323.jpg"
    },
    {
        "text": "En esta intersección, ¿cuándo está permitido adelantar por la derecha?",
        "options": [
            "Cuando el vehículo que va delante va a girar a la izquierda.",
            "Cuando no hay señales de detención obligatoria o ceda el paso.",
            "Cuando no hay señales de vía preferente."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T510101_250216.jpg"
    },
    {
        "text": "De noche, la carga que sobresale por detrás debe señalizarse con un panel reflectante y...",
        "options": [
            "una luz roja.",
            "dos luces amarillo-auto.",
            "una luz amarilla o blanca."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T513325.jpg"
    },
    {
        "text": "Al conducir mucho tiempo sin descansar...",
        "options": [
            "aumenta la seguridad.",
            "aumenta el rendimiento del conductor.",
            "la conducción se vuelve más peligrosa."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T513326.jpg"
    },
    {
        "text": "En una calzada se produce un estrechamiento sin señalizar. En él, coinciden un autobús y un turismo que arrastra un remolque de 750 kg que circula en sentido contrario. ¿Quién retrocederá?",
        "options": [
            "El autobús.",
            "El turismo con remolque."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T513327.jpg"
    },
    {
        "text": "Durante la conducción está prohibida la utilización de aparatos de telefonía móvil, salvo...",
        "options": [
            "cuando se utilicen cascos o auriculares conectados al teléfono.",
            "cuando el aparato no emita tonos agudos.",
            "cuando se utilice un dispositivo de manos libres."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T513328.jpg"
    },
    {
        "text": "¿A qué obliga esta señal?",
        "options": [
            "A detenerse.",
            "A ceder el paso a todos los vehículos que circulen por la vía preferente.",
            "A ceder el paso a los vehículos que se acerquen por la derecha."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T513329.jpg"
    },
    {
        "text": "El ABS es...",
        "options": [
            "Sistema de cierre centralizado.",
            "Sistema de control de seguridad.",
            "Sistema de frenado antibloqueo."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T513330.jpg"
    }
]
            
            ;

            const container = document.getElementById('test-container');
            const paginationRow1 = document.getElementById('pagination-row-1');
            const paginationRow2 = document.getElementById('pagination-row-2');

            // Generar preguntas
            questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.setAttribute('data-correct', question.correct);
                questionDiv.innerHTML = `
                    <div class="question-image">
                        <img src="${question.image}" alt="Imagen de la pregunta">
                    </div>
                    <div class="question-content">
                        <h3>${index + 1}. ${question.text}</h3>
                        <div class="options">
                            ${question.options.map((option, idx) => `
                                <div class="option" data-answer="${String.fromCharCode(65 + idx)}">
                                    <span class="option-circle">${String.fromCharCode(65 + idx)}</span>
                                    ${option}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                container.appendChild(questionDiv);
            });

            // Generar paginación
            for (let i = 0; i < questions.length; i++) {
                const button = document.createElement('button');
                button.textContent = `${i + 1}`;
                button.addEventListener('click', () => showQuestion(i));
                if (i < 15) {
                    paginationRow1.appendChild(button);
                } else {
                    paginationRow2.appendChild(button);
                }
            }

            // Mostrar la primera pregunta
            showQuestion(0);

            // Función para mostrar una pregunta específica
            function showQuestion(index) {
                document.querySelectorAll('.question').forEach((q, i) => {
                    q.style.display = i === index ? 'flex' : 'none';
                });
                document.querySelectorAll('.pagination button').forEach((btn, i) => {
                    btn.style.backgroundColor = i === index ? '#ff7aa2' : '#ffa5c3';
                });
            }

            // Evento para las opciones de respuesta
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const question = this.closest('.question');
                    const questionIndex = Array.from(container.children).indexOf(question);
                    const isCorrect = this.getAttribute('data-answer') === question.getAttribute('data-correct');
                    
                    if (question.dataset.answered) return;

                    question.dataset.answered = true;

                    question.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                        opt.style.pointerEvents = 'none';
                    });
                    
                    this.classList.add('selected', isCorrect ? 'correct' : 'incorrect');

                    if (!isCorrect) {
                        question.querySelector(`.option[data-answer="${question.getAttribute('data-correct')}"]`).classList.add('correct');
                    }

                    // Actualizar el botón de paginación
                    const paginationButton = questionIndex < 15 ? paginationRow1.children[questionIndex] : paginationRow2.children[questionIndex - 15];
                    paginationButton.classList.add(isCorrect ? 'correct' : 'incorrect');
                });
            });

            // Evento para corregir el test
            document.getElementById('correct-test').addEventListener('click', () => {
                let wrongAnswers = 0;
                document.querySelectorAll('.question').forEach((question, index) => {
                    const selected = question.querySelector('.option.selected');
                    const isCorrect = selected && selected.getAttribute('data-answer') === question.getAttribute('data-correct');
                    if (!isCorrect) {
                        wrongAnswers++;
                    }
                    // Actualizar el botón de paginación si no se ha respondido
                    if (!selected) {
                        const paginationButton = index < 15 ? paginationRow1.children[index] : paginationRow2.children[index - 15];
                        paginationButton.classList.add('incorrect');
                    }
                });
                const resultMessage = `Has fallado ${wrongAnswers} respuestas.`;

                const alert = document.getElementById('custom-alert');
                document.getElementById('alert-message').textContent = resultMessage;
                alert.style.display = 'block';
            });
        });

        function closeAlert() {
            document.getElementById('custom-alert').style.display = 'none';
        }
    </script>

    
</body>
</html>