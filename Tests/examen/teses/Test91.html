<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Autoescuela</title>
    <link rel="stylesheet" href="../../../Assets/style.css">
</head>
<body>

    
    <div class="container">
        <h1 style="text-align: center; color: #ffa5c3;">Test de Autoescuela</h1>
        <div id="test-container">
            <!-- Aquí se generarán dinámicamente las preguntas -->
        </div>
        <div class="pagination">
            <div class="pagination-row" id="pagination-row-1"></div>
            <div class="pagination-row" id="pagination-row-2"></div>
        </div>
        <button id="correct-test">Corregir Test</button>
    </div>

    <!-- Custom Alert HTML -->
    <div class="custom-alert" id="custom-alert">
        <h2>Resultado del Test</h2>
        <p id="alert-message">Aquí irá el mensaje del resultado.</p>
        <button onclick="closeAlert()">Cerrar</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const questions = [
    {
        "text": "El sistema ADAS conocido con el nombre de “Información de ángulo muerto”, ¿puede intervenir en la conducción del vehículo?",
        "options": [
            "No, este sistema únicamente emite avisos al conductor.",
            "Sí en algunos casos, para evitar una posible colisión o roce.",
            "En ningún caso, ya que el conductor tiene el control absoluto del vehículo en todo momento."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T500111_ADAS.jpg"
    },
    {
        "text": "¿Cual es la prueba más frecuente en los controles de alcoholemia?",
        "options": [
            "Caminar sobre una línea recta.",
            "Prueba del aire espirado mediante etilómetro.",
            "Análisis de sangre."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T504102.jpg"
    },
    {
        "text": "Si conduce una motocicleta, ¿puede circular por la calzada a cuya entrada está situada esta señal?",
        "options": [
            "Sí, pues es una calzada obligatoria para motocicletas y ciclomotores.",
            "Sí, pero sólo si la motocicleta tiene una cilindrada no superior a 125 centímetros cúbicos.",
            "No."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T510103_150117.jpg"
    },
    {
        "text": "Una motocicleta, ¿puede circular sin tubo de escape?",
        "options": [
            "Sí, cuando la motocicleta es deportiva.",
            "No, porque está prohibido, excepto si es eléctrica.",
            "No, porque se rompe el motor."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T510116_250117.jpg"
    },
    {
        "text": "Es obligatorio utilizar las luces de carretera al circular a más de 40 kilómetros por hora por una vía...",
        "options": [
            "interurbana suficientemente iluminada.",
            "interurbana insuficientemente iluminada.",
            "insuficientemente iluminada, dentro o fuera de poblado."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T504105.jpg"
    },
    {
        "text": "¿Son evitables los accidentes de circulación?",
        "options": [
            "Sí, en general, son sucesos predecibles.",
            "No, se dan al azar.",
            "Sólo mejorando el estado de las vías."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T504106.jpg"
    },
    {
        "text": "En una vía de doble sentido un vehículo va a girar a la izquierda, ¿debe facilitar el adelantamiento por la derecha a los demás vehículos?",
        "options": [
            "Sí, arrimándose todo lo posible al lado izquierdo de la calzada.",
            "No, ya que deben adelantar por la izquierda.",
            "Sí, arrimándose a la izquierda de su carril todo lo posible, pero sin obstaculizar a los vehículos que circulen en sentido contrario."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T504107.jpg"
    },
    {
        "text": "Una adecuada posición al volante permite al conductor...",
        "options": [
            "aumentar su tiempo de reacción.",
            "relajar su atención.",
            "actuar mejor y más rápido, ante un imprevisto."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T504108.jpg"
    },
    {
        "text": "El conductor de una motocicleta, ¿tiene permitido realizar una parada en un carril reservado para autobuses?",
        "options": [
            "No, está prohibido.",
            "Sí, si no obstaculiza la circulación de autobuses y taxis.",
            "Parar sí, estacionar no."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T504109.jpg"
    },
    {
        "text": "Si observa que en el momento de pisar el pedal del freno, éste no actúa con eficacia, puede ser debido a...",
        "options": [
            "que los manguitos de freno estén agotados.",
            "que el servofreno haya cristalizado.",
            "falta de líquido en los frenos."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T504110.jpg"
    },
    {
        "text": "Antes de un paso a nivel, dos luces rojas intermitentes de forma alternativa indican...",
        "options": [
            "que el paso se cerrará y los vehículos tienen que cruzar rápidamente.",
            "que está prohibido el paso temporalmente.",
            "que los conductores pueden pasar extremando la precaución."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P1316.jpg"
    },
    {
        "text": "Si se produce un derrape en las ruedas traseras, se debe...",
        "options": [
            "frenar inmediatamente.",
            "dejar de acelerar, no frenar y girar el volante hacia el lado al que derrapan las ruedas traseras.",
            "pisar a fondo el pedal del embrague y girar el volante a derecha e izquierda."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P3004.jpg"
    },
    {
        "text": "La línea de borde de la calzada, ¿se puede atravesar?",
        "options": [
            "No, está prohibido.",
            "Sí, cuando la línea es discontinua; no, cuando es continua.",
            "Sí, cuando sea necesario y las circunstancias lo permitan."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T512313.jpg"
    },
    {
        "text": "Si va a realizar un viaje, ¿es importante elegir la hora de salida?",
        "options": [
            "No, no es necesario.",
            "Sí, entre otras razones para evitar que el sol deslumbre.",
            "Sí, con el fin de realizar el viaje sin tener que hacer descansos."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T504114.jpg"
    },
    {
        "text": "En una intersección sin señalizar, tienen prioridad de paso los vehículos que circulen por...",
        "options": [
            "un carril de uso exclusivo para determinados vehículos.",
            "la vía sin pavimentar.",
            "una glorieta sobre los que pretenden entrar en ella."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T504115.jpg"
    },
    {
        "text": "El conductor de un cuadriciclo ligero que dispone de cinturón de seguridad está obligado a utilizarlo...",
        "options": [
            "sólo en vías interurbanas.",
            "sólo en vías urbanas.",
            "tanto en vías urbanas e interurbanas."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T504116.jpg"
    },
    {
        "text": "En una carretera convencional, ¿a qué velocidad máxima puede adelantar un camión?",
        "options": [
            "A 80 km/h.",
            "A 100 km/h.",
            "A 90 km/h."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T504117.jpg"
    },
    {
        "text": "Un turismo, ¿puede circular sin uno de los espejos retrovisores exteriores si coloca uno interior panorámico?",
        "options": [
            "Únicamente sin el espejo derecho y sólo cuando su uso no sea obligatorio por las condiciones del vehículo o del conductor.",
            "Sí, cuando el que falta es el izquierdo.",
            "No, siempre deberá circular con los dos espejos retrovisores exteriores."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T504118.jpg"
    },
    {
        "text": "¿Está permitido hacer cambios de sentido de la marcha en las glorietas?",
        "options": [
            "No, salvo que una señal lo autorice expresamente.",
            "No, porque en una intersección está prohibido.",
            "Sí, dejando siempre a la izquierda el macizo o isleta central."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T504119.jpg"
    },
    {
        "text": "¿Quién es responsable de las infracciones relativas a la documentación y el estado del vehículo?",
        "options": [
            "El tomador del seguro.",
            "El titular del vehículo.",
            "El conductor en el momento en el que se detecta la infracción."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T502907.jpg"
    },
    {
        "text": "Cuando prevea que va a quedar detenido dentro del túnel más de dos minutos, ¿qué debe hacer?",
        "options": [
            "Dar media vuelta con cuidado.",
            "Apagar el motor.",
            "Apagar las luces."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T504121.jpg"
    },
    {
        "text": "¿Conducir automedicado supone un riesgo para la conducción?",
        "options": [
            "Solamente si la conducción se realiza durante la noche.",
            "Sí, porque algunos medicamentos pueden tener efectos secundarios.",
            "No, solamente si los medicamentos se mezclan con alcohol."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T510102_050217.jpg"
    },
    {
        "text": "En un turismo, ¿pueden viajar más ocupantes que los correspondientes a las plazas autorizadas?",
        "options": [
            "No.",
            "Sí, siempre que no supere la masa máxima autorizada del vehículo.",
            "Sí, siempre que no moleste la posición del conductor y no quite visibilidad por la ventanilla superior."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T504123.jpg"
    },
    {
        "text": "La conducción con lluvia o nieve, ¿en qué momento es más peligroso?",
        "options": [
            "Cuando la carretera está ya completamente mojada.",
            "Cuando llueve después de haber nevado.",
            "Cuando caen los primeros copos o las primeras gotas de lluvia."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T504124.jpg"
    },
    {
        "text": "Cuando se incorporen a la circulación, es obligatorio facilitar la maniobra a...",
        "options": [
            "los taxis, pero únicamente en poblado.",
            "todos los vehículos.",
            "los vehículos de transporte público de viajeros, únicamente."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T504125.jpg"
    },
    {
        "text": "Para detener el vehículo ante un obstáculo en la calzada, es preciso llevar una velocidad tal que la distancia de detención sea...",
        "options": [
            "mayor que la distancia al obstáculo.",
            "más pequeña que la distancia al obstáculo.",
            "igual que la distancia al obstáculo."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T504126.jpg"
    },
    {
        "text": "En caso de avería en esta autopista, ¿cómo debe colocar los triángulos de preseñalización de peligro?",
        "options": [
            "Dos triángulos, uno por delante y otro por detrás del vehículo, a 50 metros.",
            "Dos triángulos, a 100 metros de distancia.",
            "No estoy obligado a colocarlos."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T513917.jpg"
    },
    {
        "text": "Si los amortiguadores están defectuosos...",
        "options": [
            "para frenar no es necesario ejercer presión en el pedal de freno.",
            "se reduce la distancia de frenado en más del 50 por ciento.",
            "aumenta la distancia de frenado peligrosamente."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T504128.jpg"
    },
    {
        "text": "Los ocupantes de un cuadriciclo que no cuenta con estructura de autoprotección, ¿deben llevar casco?",
        "options": [
            "El conductor siempre, para el pasajero su uso no es obligatorio.",
            "Sí, tanto el conductor como el pasajero deben llevar casco.",
            "No, no es obligatorio ni para el conductor ni para el pasajero."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T510119_150723.jpg"
    },
    {
        "text": "¿Hasta cuándo debemos realizar la respiración artificial a un herido que no respira por sí solo?",
        "options": [
            "Hasta un máximo de 2 minutos.",
            "Hasta un máximo de 5 minutos.",
            "Hasta que llegue la ayuda sanitaria."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T504130.jpg"
    }
]
            
            ;

            const container = document.getElementById('test-container');
            const paginationRow1 = document.getElementById('pagination-row-1');
            const paginationRow2 = document.getElementById('pagination-row-2');

            // Generar preguntas
            questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.setAttribute('data-correct', question.correct);
                questionDiv.innerHTML = `
                    <div class="question-image">
                        <img src="${question.image}" alt="Imagen de la pregunta">
                    </div>
                    <div class="question-content">
                        <h3>${index + 1}. ${question.text}</h3>
                        <div class="options">
                            ${question.options.map((option, idx) => `
                                <div class="option" data-answer="${String.fromCharCode(65 + idx)}">
                                    <span class="option-circle">${String.fromCharCode(65 + idx)}</span>
                                    ${option}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                container.appendChild(questionDiv);
            });

            // Generar paginación
            for (let i = 0; i < questions.length; i++) {
                const button = document.createElement('button');
                button.textContent = `${i + 1}`;
                button.addEventListener('click', () => showQuestion(i));
                if (i < 15) {
                    paginationRow1.appendChild(button);
                } else {
                    paginationRow2.appendChild(button);
                }
            }

            // Mostrar la primera pregunta
            showQuestion(0);

            // Función para mostrar una pregunta específica
            function showQuestion(index) {
                document.querySelectorAll('.question').forEach((q, i) => {
                    q.style.display = i === index ? 'flex' : 'none';
                });
                document.querySelectorAll('.pagination button').forEach((btn, i) => {
                    btn.style.backgroundColor = i === index ? '#ff7aa2' : '#ffa5c3';
                });
            }

            // Evento para las opciones de respuesta
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const question = this.closest('.question');
                    const questionIndex = Array.from(container.children).indexOf(question);
                    const isCorrect = this.getAttribute('data-answer') === question.getAttribute('data-correct');
                    
                    if (question.dataset.answered) return;

                    question.dataset.answered = true;

                    question.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                        opt.style.pointerEvents = 'none';
                    });
                    
                    this.classList.add('selected', isCorrect ? 'correct' : 'incorrect');

                    if (!isCorrect) {
                        question.querySelector(`.option[data-answer="${question.getAttribute('data-correct')}"]`).classList.add('correct');
                    }

                    // Actualizar el botón de paginación
                    const paginationButton = questionIndex < 15 ? paginationRow1.children[questionIndex] : paginationRow2.children[questionIndex - 15];
                    paginationButton.classList.add(isCorrect ? 'correct' : 'incorrect');
                });
            });

            // Evento para corregir el test
            document.getElementById('correct-test').addEventListener('click', () => {
                let wrongAnswers = 0;
                document.querySelectorAll('.question').forEach((question, index) => {
                    const selected = question.querySelector('.option.selected');
                    const isCorrect = selected && selected.getAttribute('data-answer') === question.getAttribute('data-correct');
                    if (!isCorrect) {
                        wrongAnswers++;
                    }
                    // Actualizar el botón de paginación si no se ha respondido
                    if (!selected) {
                        const paginationButton = index < 15 ? paginationRow1.children[index] : paginationRow2.children[index - 15];
                        paginationButton.classList.add('incorrect');
                    }
                });
                const resultMessage = `Has fallado ${wrongAnswers} respuestas.`;

                const alert = document.getElementById('custom-alert');
                document.getElementById('alert-message').textContent = resultMessage;
                alert.style.display = 'block';
            });
        });

        function closeAlert() {
            document.getElementById('custom-alert').style.display = 'none';
        }
    </script>

    
</body>
</html>