<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Autoescuela</title>
    <link rel="stylesheet" href="../../../Assets/style.css">
</head>
<body>

    
    <div class="container">
        <h1 style="text-align: center; color: #ffa5c3;">Test de Autoescuela</h1>
        <div id="test-container">
            <!-- Aquí se generarán dinámicamente las preguntas -->
        </div>
        <div class="pagination">
            <div class="pagination-row" id="pagination-row-1"></div>
            <div class="pagination-row" id="pagination-row-2"></div>
        </div>
        <button id="correct-test">Corregir Test</button>
    </div>

    <!-- Custom Alert HTML -->
    <div class="custom-alert" id="custom-alert">
        <h2>Resultado del Test</h2>
        <p id="alert-message">Aquí irá el mensaje del resultado.</p>
        <button onclick="closeAlert()">Cerrar</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const questions = [
    {
        "text": "La probabilidad de sufrir un accidente de tráfico...",
        "options": [
            "sólo depende de la capacidad del conductor.",
            "puede reducirse evitando los factores de riesgo.",
            "depende siempre de factores ajenos al conductor, como el vehículo o la vía."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T502101.jpg"
    },
    {
        "text": "Esta señal indica la situación de...",
        "options": [
            "un extintor de incendios y un teléfono de emergencia en un apartadero.",
            "una salida de emergencia.",
            "un puesto de socorro."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T502102.jpg"
    },
    {
        "text": "La distancia de frenado de un vehículo cargado es...",
        "options": [
            "igual que cuando circula sin carga.",
            "mayor que cuando circula sin carga.",
            "menor que cuando circula sin carga."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T502103.jpg"
    },
    {
        "text": "En una motocicleta de anchura inferior a 1 metro, la carga no debe sobresalir...",
        "options": [
            "más de 0,50 metros por cada lado del eje longitudinal.",
            "más de 0,50 metros por la parte trasera.",
            "más de 0,25 metros por cada lado del eje longitudinal."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T502104.jpg"
    },
    {
        "text": "Tiene el permiso A desde hace dos años y acaba de obtener el B, ¿cual será la tasa máxima de alcohol permitida cuando conduzca un turismo?",
        "options": [
            "0,25 miligramos de alcohol por litro de aire espirado.",
            "0,30 miligramos de alcohol por litro de aire espirado.",
            "0,15 miligramos de alcohol por litro de aire espirado."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T502105.jpg"
    },
    {
        "text": "Si circula de noche por una vía urbana, ¿qué alumbrado debe utilizar?",
        "options": [
            "El de largo alcance.",
            "Sólo el de posición.",
            "El de corto alcance."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T502106.jpg"
    },
    {
        "text": "El agente ordena la detención con...",
        "options": [
            "sonidos de silbato largos y espaciados.",
            "un fuerte sonido de silbato.",
            "sonidos de silbato cortos y frecuentes."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T502107.jpg"
    },
    {
        "text": "¿Es recomendable hacer un mantenimiento especial del vehículo si se vive en zona de playa?",
        "options": [
            "Sí, porque la arena y la sal aceleran la aparición de puntos de corrosión en la carrocería.",
            "Sí, pero basta con revisar la presión de los neumáticos y el nivel de aceite.",
            "No; solo es necesario realizar el mantenimiento recomendado por el fabricante."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T510115_150723.jpg"
    },
    {
        "text": "Un turismo, ¿puede llevar sólo el espejo exterior izquierdo y el interior?",
        "options": [
            "Sí.",
            "No, también debe llevar el espejo exterior derecho.",
            "No, sólo son obligatorios el espejo interior y el exterior derecho."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T502109.jpg"
    },
    {
        "text": "Si no lleva colocado correctamente el cinturón de seguridad, ¿puede influir en las consecuencias de un accidente?",
        "options": [
            "No, el cinturón es efectivo siempre.",
            "No, cuando el vehículo tenga además instalado airbag.",
            "Sí, ya que puede sufrir lesiones graves."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T502110.jpg"
    },
    {
        "text": "En un tramo de vía con un carril de aceleración, ¿se considera adelantamiento que un vehículo avance más rápidamente que otro que lo hace por el carril normal?",
        "options": [
            "No.",
            "Sí, como otro adelantamiento cualquiera.",
            "Sí, porque se trata de una vía interurbana."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T502111.jpg"
    },
    {
        "text": "Una correcta suspensión del vehículo sirve para:",
        "options": [
            "Mantener el vehículo siempre en contacto con el suelo.",
            "Mantener inmovilizado el vehículo.",
            "Transmitir el giro del motor a las ruedas."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T502112.jpg"
    },
    {
        "text": "Circular en motocicleta con el llamado \"escape libre\", ¿está permitido?",
        "options": [
            "No.",
            "Sí, pero sólo en vías interurbanas.",
            "Sí, tanto en vías urbanas como interurbanas."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T502113.jpg"
    },
    {
        "text": "Circular con cortinillas en la ventanilla trasera de un turismo, ¿está permitido?",
        "options": [
            "No, está prohibido.",
            "Sí, cuando el vehículo lleva dos espejos retrovisores exteriores.",
            "Sí, en cualquier caso."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T502114.jpg"
    },
    {
        "text": "La lluvia...",
        "options": [
            "exige al conductor tomar más precauciones por la falta de adherencia de los neumáticos.",
            "es un fenómeno atmosférico que no influye en la conducción.",
            "mejora la visibilidad porque limpia el parabrisas."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T502115.jpg"
    },
    {
        "text": "A la vista de la señalización, ¿quién tiene preferencia de paso?",
        "options": [
            "Los automóviles.",
            "Los vehículos de dos ruedas.",
            "Los peatones."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T502116.jpg"
    },
    {
        "text": "En esta situación, ¿debe ceder el paso a los ciclistas?",
        "options": [
            "No, los vehículos de motor tienen prioridad sobre las bicicletas.",
            "Sí, pero sólo a los dos primeros ciclistas que están dentro de la intersección.",
            "Sí."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T502117.jpg"
    },
    {
        "text": "Si padece una alergia respiratoria, ¿qué debe tener en cuenta a la hora de conducir?",
        "options": [
            "Apagar el aire acondicionado y abrir las ventanillas.",
            "Poner muy fuerte el aire acondicionado.",
            "No poner muy fuerte el aire acondicionado y cerrar las ventanillas."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T502118.jpg"
    },
    {
        "text": "Cuando no exista vía pecuaria, ¿en qué vías está permitida la circulación de los rebaños de animales?",
        "options": [
            "En todas las vías, excepto en las autopistas y autovías.",
            "En todo tipo de vías, tanto urbanas como interurbanas.",
            "En todas las vías interurbanas."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T502119.jpg"
    },
    {
        "text": "Estas marcas viales, ¿qué indican?",
        "options": [
            "Un paso para ciclistas.",
            "Un paso para peatones y ciclistas.",
            "Un paso obligatorio para vehículos de dos ruedas."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T502120.jpg"
    },
    {
        "text": "En la conducción, el uso del teléfono móvil manos libres...",
        "options": [
            "está prohibido.",
            "se permite, porque no produce distracciones.",
            "se permite, pero debe saberse que también puede producir distracciones."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T502121.jpg"
    },
    {
        "text": "Si en vía interurbana un ciclomotor de dos ruedas quiere girar a la izquierda y no hay carril acondicionado para ello:",
        "options": [
            "No puede realizar el giro.",
            "Debe situarse a la derecha, e iniciarlo siempre desde dentro de la calzada.",
            "Debe situarse a la derecha, e iniciarlo fuera de la calzada siempre que sea posible."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T502122.jpg"
    },
    {
        "text": "Si queda detenido en el interior de un túnel y se produce un incendio, ¿qué debe hacer?",
        "options": [
            "Apartar el vehículo a la derecha, apagar el motor y dirigirse a la salida más próxima.",
            "Circular marcha atrás hasta el inicio del túnel.",
            "Esperar en el interior del vehículo a los servicios de emergencia."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T502123.jpg"
    },
    {
        "text": "¿Puede la postura del asiento influir en la eficacia del cinturón de seguridad?",
        "options": [
            "Sí, no es recomendable inclinar el asiento demasiado hacia atrás.",
            "No, mientras que el cinturón esté totalmente ceñido.",
            "No."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T502124.jpg"
    },
    {
        "text": "Esta señal indica...",
        "options": [
            "una prohibición.",
            "un peligro.",
            "una obligación."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T502125.jpg"
    },
    {
        "text": "¿Cuántas señales de advertencia de peligro de ángulos muertos de carácter voluntario se colocarán en una furgoneta?",
        "options": [
            "Tres; una en cada lateral y una en la parte trasera.",
            "Dos; una en cada lateral.",
            "Una en la parte delantera."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T510115_050224.jpg"
    },
    {
        "text": "Algunas drogas pueden causar...",
        "options": [
            "aumento del campo visual.",
            "un nivel de alerta mayor.",
            "ilusiones ópticas."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P2523.jpg"
    },
    {
        "text": "Durante el día, un conductor que ocupe la calzada, ¿está obligado a ponerse el chaleco reflectante?",
        "options": [
            "Sí, en vías interurbanas.",
            "No, cuando la visibilidad es buena.",
            "Sí, en toda clase de vías."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T502128.jpg"
    },
    {
        "text": "¿Hay que prestar una atención especial a los peatones?",
        "options": [
            "No, porque no representan ningún peligro.",
            "Sí, porque son especialmente vulnerables a los peligros del tráfico.",
            "Sólo en vías urbanas."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T502129.jpg"
    },
    {
        "text": "Un conductor que se incorpora a una vía utilizando un carril de aceleración, ¿debe cerciorarse previamente de que puede hacerlo sin peligro?",
        "options": [
            "No, porque tiene prioridad de paso.",
            "Sí, y no iniciar la maniobra hasta estar seguro.",
            "No, porque los demás conductores deben facilitarle la incorporación."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T502130.jpg"
    }
]
            
            ;

            const container = document.getElementById('test-container');
            const paginationRow1 = document.getElementById('pagination-row-1');
            const paginationRow2 = document.getElementById('pagination-row-2');

            // Generar preguntas
            questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.setAttribute('data-correct', question.correct);
                questionDiv.innerHTML = `
                    <div class="question-image">
                        <img src="${question.image}" alt="Imagen de la pregunta">
                    </div>
                    <div class="question-content">
                        <h3>${index + 1}. ${question.text}</h3>
                        <div class="options">
                            ${question.options.map((option, idx) => `
                                <div class="option" data-answer="${String.fromCharCode(65 + idx)}">
                                    <span class="option-circle">${String.fromCharCode(65 + idx)}</span>
                                    ${option}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                container.appendChild(questionDiv);
            });

            // Generar paginación
            for (let i = 0; i < questions.length; i++) {
                const button = document.createElement('button');
                button.textContent = `${i + 1}`;
                button.addEventListener('click', () => showQuestion(i));
                if (i < 15) {
                    paginationRow1.appendChild(button);
                } else {
                    paginationRow2.appendChild(button);
                }
            }

            // Mostrar la primera pregunta
            showQuestion(0);

            // Función para mostrar una pregunta específica
            function showQuestion(index) {
                document.querySelectorAll('.question').forEach((q, i) => {
                    q.style.display = i === index ? 'flex' : 'none';
                });
                document.querySelectorAll('.pagination button').forEach((btn, i) => {
                    btn.style.backgroundColor = i === index ? '#ff7aa2' : '#ffa5c3';
                });
            }

            // Evento para las opciones de respuesta
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const question = this.closest('.question');
                    const questionIndex = Array.from(container.children).indexOf(question);
                    const isCorrect = this.getAttribute('data-answer') === question.getAttribute('data-correct');
                    
                    if (question.dataset.answered) return;

                    question.dataset.answered = true;

                    question.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                        opt.style.pointerEvents = 'none';
                    });
                    
                    this.classList.add('selected', isCorrect ? 'correct' : 'incorrect');

                    if (!isCorrect) {
                        question.querySelector(`.option[data-answer="${question.getAttribute('data-correct')}"]`).classList.add('correct');
                    }

                    // Actualizar el botón de paginación
                    const paginationButton = questionIndex < 15 ? paginationRow1.children[questionIndex] : paginationRow2.children[questionIndex - 15];
                    paginationButton.classList.add(isCorrect ? 'correct' : 'incorrect');
                });
            });

            // Evento para corregir el test
            document.getElementById('correct-test').addEventListener('click', () => {
                let wrongAnswers = 0;
                document.querySelectorAll('.question').forEach((question, index) => {
                    const selected = question.querySelector('.option.selected');
                    const isCorrect = selected && selected.getAttribute('data-answer') === question.getAttribute('data-correct');
                    if (!isCorrect) {
                        wrongAnswers++;
                    }
                    // Actualizar el botón de paginación si no se ha respondido
                    if (!selected) {
                        const paginationButton = index < 15 ? paginationRow1.children[index] : paginationRow2.children[index - 15];
                        paginationButton.classList.add('incorrect');
                    }
                });
                const resultMessage = `Has fallado ${wrongAnswers} respuestas.`;

                const alert = document.getElementById('custom-alert');
                document.getElementById('alert-message').textContent = resultMessage;
                alert.style.display = 'block';
            });
        });

        function closeAlert() {
            document.getElementById('custom-alert').style.display = 'none';
        }
    </script>

    
</body>
</html>