<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Autoescuela</title>
    <link rel="stylesheet" href="../../../Assets/style.css">
</head>
<body>

    
    <div class="container">
        <h1 style="text-align: center; color: #ffa5c3;">Test de Autoescuela</h1>
        <div id="test-container">
            <!-- Aquí se generarán dinámicamente las preguntas -->
        </div>
        <div class="pagination">
            <div class="pagination-row" id="pagination-row-1"></div>
            <div class="pagination-row" id="pagination-row-2"></div>
        </div>
        <button id="correct-test">Corregir Test</button>
    </div>

    <!-- Custom Alert HTML -->
    <div class="custom-alert" id="custom-alert">
        <h2>Resultado del Test</h2>
        <p id="alert-message">Aquí irá el mensaje del resultado.</p>
        <button onclick="closeAlert()">Cerrar</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const questions = [
    {
        "text": "En una situación incierta, podrá ganar unos metros vitales para evitar un accidente si coloca el pie...",
        "options": [
            "encima del pedal del freno, presionándolo levemente.",
            "frente al pedal del freno sin llegar a presionar.",
            "frente al pedal del embrague."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T503101.jpg"
    },
    {
        "text": "La señal...",
        "options": [
            "reitera la información dada por otra señal de peligro anterior.",
            "indica la proximidad de un peligro distinto de los advertidos por otras señales.",
            "indica la proximidad de un tramo con tráfico denso."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T503102.jpg"
    },
    {
        "text": "Si existe gravilla en la calzada, ¿qué se debe hacer para evitar la rotura del parabrisas?",
        "options": [
            "Nada, porque si el parabrisas está limpio se reduce el riesgo de rotura por gravilla.",
            "Aumentar la separación con los vehículos que nos preceden.",
            "Aumentar la velocidad para disminuir los efectos del impacto."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T503103.jpg"
    },
    {
        "text": "Los peatones, ¿tienen los mismos derechos que los conductores para utilizar las vías públicas?",
        "options": [
            "No.",
            "Sí.",
            "Sólo en las calles residenciales."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T503104.jpg"
    },
    {
        "text": "Cuando el casco no tiene visera, ¿es conveniente ponerse unas gafas de seguridad?",
        "options": [
            "No.",
            "Sí, porque es obligatorio.",
            "Sí, para proteger los ojos."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T503105.jpg"
    },
    {
        "text": "Un vehículo tiene una anchura superior a 2,10 metros. ¿Cuándo es obligatorio encender la luz de gálibo?",
        "options": [
            "Sólo cuando circule por un tunel insuficientemente iluminado.",
            "Sólo cuando circule por un túnel entre la puesta y la salida del sol.",
            "Cuando circule por un túnel a cualquier hora del día."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T503106.jpg"
    },
    {
        "text": "La presión de inflado del neumático...",
        "options": [
            "debe comprobarse, como mínimo, dos veces al año.",
            "debe comprobarse cada tres meses.",
            "debe comprobarse con frecuencia, y siempre antes de iniciar un viaje largo."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T503107.jpg"
    },
    {
        "text": "Un agente le indica, desde su vehículo, que debe detenerse en el lado derecho, ¿cómo lo señaliza?",
        "options": [
            "Con una bandera roja.",
            "Con el brazo extendido hacia abajo inclinado y fijo.",
            "Con una bandera amarilla."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T503108.jpg"
    },
    {
        "text": "El viento por la derecha en los adelantamientos a vehículos grandes, ¿por qué es peligroso?",
        "options": [
            "Porque puedo perder el control del vehículo y salirme de la calzada.",
            "Porque no me deja ver la calzada.",
            "Porque frena mi vehículo y no me deja adelantar."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T503109.jpg"
    },
    {
        "text": "Esta marca transversal discontinua, ¿obliga a detenerse antes de franquearla?",
        "options": [
            "Sólo si hay visibilidad reducida.",
            "No, porque no parar no implica ningún peligro a la circulación.",
            "Sólo si hay que ceder el paso."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T503110.jpg"
    },
    {
        "text": "Los accidentes a causa de las distracciones son...",
        "options": [
            "inevitables.",
            "esporádicos.",
            "cada vez más frecuentes."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P2315.jpg"
    },
    {
        "text": "¿Cuándo se circula a velocidad anormalmente reducida?",
        "options": [
            "Cuando se circula a velocidad inferior a la mínima permitida.",
            "Cuando se circula a velocidad inferior a la máxima permitida.",
            "Cuando se circula a velocidad superior a la mínima permitida."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T503112.jpg"
    },
    {
        "text": "Cuando nieva, ¿es recomendable circular sobre las marcas de otros vehículos?",
        "options": [
            "Sí, puesto que facilitará la adherencia.",
            "No, porque perjudicará la adherencia.",
            "Es indiferente, puesto que no influye en la adherencia."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T503113.jpg"
    },
    {
        "text": "¿Qué indica esta señal?",
        "options": [
            "Que un carril se desvía hacia la calzada contraria por obras.",
            "Que la vía pasa de uno a dos carriles de circulación por obras.",
            "Que dos carriles se desvían hacia la calzada contraria por obras."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T503114.jpg"
    },
    {
        "text": "Si mientras conducimos tenemos una fuerte discusión y nos alteramos, es recomendable...",
        "options": [
            "parar en lugar permitido y no continuar la marcha hasta sentirnos más tranquilos.",
            "acelerar y procurar llegar lo antes posible a nuestro destino.",
            "tomar un medicamento relajante."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T503115.jpg"
    },
    {
        "text": "Si circula con el aire acondicionado encendido y hace demasiado frío, el tiempo de reacción...",
        "options": [
            "disminuye.",
            "no se ve afectado.",
            "aumenta."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T500609.jpg"
    },
    {
        "text": "Si lleva instalado un navegador GPS debe tener en cuenta que...",
        "options": [
            "el criterio del conductor debe prevalecer en todo momento.",
            "las instrucciones del navegador deben prevalecer en todo momento.",
            "debe mirar siempre al mapa de la pantalla."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P2330.jpg"
    },
    {
        "text": "Cuando se circula marcha atrás para estacionar...",
        "options": [
            "no está permitido recorrer más de 15 metros ni invadir un cruce de vías.",
            "debe conectar la señal de emergencia.",
            "la maniobra no puede durar más de 15 segundos."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T503118.jpg"
    },
    {
        "text": "¿Cuántos puntos se pueden perder en un día?",
        "options": [
            "Un máximo de 8 puntos, salvo que las infracciones cometidas sean muy graves.",
            "Un máximo de 10 puntos.",
            "No existe límite."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T503119.jpg"
    },
    {
        "text": "En un cambio de rasante sin visibilidad, ¿se permite realizar un cambio de sentido de la marcha?",
        "options": [
            "No.",
            "Sí, sólo se prohíbe adelantar.",
            "Sí, siempre que no vengan vehículos en sentido contrario."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T503120.jpg"
    },
    {
        "text": "La densidad del trafico en zona urbana produce frecuentes zonas de incertidumbre, por lo que el conductor de una motocicleta deberá:",
        "options": [
            "Prever y anticiparse a los posibles comportamientos de los demás usuarios.",
            "Aumentar la velocidad para salir cuanto antes de esta situación.",
            "Advertir su presencia a los demás usuarios accionando la luz de carretera."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T510116_150116.jpg"
    },
    {
        "text": "Un rebaño, en una carretera convencional en la que no existe vía pecuaria, ¿por dónde debe circular?",
        "options": [
            "Por el arcén derecho.",
            "Por el arcén derecho o izquierdo, indistintamente.",
            "Por la parte transitable del arcén izquierdo."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T503122.jpg"
    },
    {
        "text": "¿Qué debe tener en cuenta si conduce una motocicleta llevando a un pasajero?",
        "options": [
            "Que la distancia de detención será menor porque la motocicleta pesa más.",
            "Que debido al aumento de peso la distancia de frenado será mayor.",
            "Que es más fácil que se bloqueen las ruedas al frenar."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T503123.jpg"
    },
    {
        "text": "El conductor del vehículo que circula delante ha extendido el brazo y ha comenzado a moverlo alternativamente de arriba abajo con movimientos cortos y rápidos, ¿qué está indicando?",
        "options": [
            "Que va a girar a la izquierda.",
            "Que va a girar a la derecha.",
            "Que va a disminuir la velocidad."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T510129_050216.jpg"
    },
    {
        "text": "Si conduce con lluvia...",
        "options": [
            "debe aumentar la distancia de seguridad con el vehículo que circula delante.",
            "la distancia de frenado disminuye.",
            "la distancia de reacción aumenta."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P3008.jpg"
    },
    {
        "text": "Como norma general, ¿dónde está prohibido adelantar?",
        "options": [
            "En todas las curvas y cambios de rasante.",
            "En las intersecciones y en sus proximidades.",
            "En las calzadas de menos de 8 m de anchura."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T510103_150517.jpg"
    },
    {
        "text": "El alcohol se elimina...",
        "options": [
            "más deprisa mientras se duerme.",
            "más despacio mientras se duerme.",
            "a la misma velocidad dormido o despierto."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P2424.jpg"
    },
    {
        "text": "Conduce un turismo con un remolque de un solo eje, ¿le afecta esta señal vertical?",
        "options": [
            "No.",
            "Sí, porque lleva un remolque de un eje.",
            "No, salvo que la M.M.A. del remolque supere la cifra indicada en la señal."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T503128.jpg"
    },
    {
        "text": "La función de los sistemas de seguridad pasiva de un vehículo consiste en...",
        "options": [
            "evitar o disminuir los daños que se produzcan en caso de accidente.",
            "la misma que la de los elementos de seguridad activa.",
            "evitar que se produzca un accidente."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T503129.jpg"
    },
    {
        "text": "Los conductores de turismos deben utilizar el chaleco reflectante de alta visibilidad...",
        "options": [
            "siempre que salgan del vehículo.",
            "cuando salgan del vehículo y ocupen la calzada o el arcén de una vía interurbana.",
            "cuando salgan del vehículo y ocupen la calzada o el arcén en cualquier vía."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P3222.jpg"
    }
]
            
            ;

            const container = document.getElementById('test-container');
            const paginationRow1 = document.getElementById('pagination-row-1');
            const paginationRow2 = document.getElementById('pagination-row-2');

            // Generar preguntas
            questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.setAttribute('data-correct', question.correct);
                questionDiv.innerHTML = `
                    <div class="question-image">
                        <img src="${question.image}" alt="Imagen de la pregunta">
                    </div>
                    <div class="question-content">
                        <h3>${index + 1}. ${question.text}</h3>
                        <div class="options">
                            ${question.options.map((option, idx) => `
                                <div class="option" data-answer="${String.fromCharCode(65 + idx)}">
                                    <span class="option-circle">${String.fromCharCode(65 + idx)}</span>
                                    ${option}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                container.appendChild(questionDiv);
            });

            // Generar paginación
            for (let i = 0; i < questions.length; i++) {
                const button = document.createElement('button');
                button.textContent = `${i + 1}`;
                button.addEventListener('click', () => showQuestion(i));
                if (i < 15) {
                    paginationRow1.appendChild(button);
                } else {
                    paginationRow2.appendChild(button);
                }
            }

            // Mostrar la primera pregunta
            showQuestion(0);

            // Función para mostrar una pregunta específica
            function showQuestion(index) {
                document.querySelectorAll('.question').forEach((q, i) => {
                    q.style.display = i === index ? 'flex' : 'none';
                });
                document.querySelectorAll('.pagination button').forEach((btn, i) => {
                    btn.style.backgroundColor = i === index ? '#ff7aa2' : '#ffa5c3';
                });
            }

            // Evento para las opciones de respuesta
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const question = this.closest('.question');
                    const questionIndex = Array.from(container.children).indexOf(question);
                    const isCorrect = this.getAttribute('data-answer') === question.getAttribute('data-correct');
                    
                    if (question.dataset.answered) return;

                    question.dataset.answered = true;

                    question.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                        opt.style.pointerEvents = 'none';
                    });
                    
                    this.classList.add('selected', isCorrect ? 'correct' : 'incorrect');

                    if (!isCorrect) {
                        question.querySelector(`.option[data-answer="${question.getAttribute('data-correct')}"]`).classList.add('correct');
                    }

                    // Actualizar el botón de paginación
                    const paginationButton = questionIndex < 15 ? paginationRow1.children[questionIndex] : paginationRow2.children[questionIndex - 15];
                    paginationButton.classList.add(isCorrect ? 'correct' : 'incorrect');
                });
            });

            // Evento para corregir el test
            document.getElementById('correct-test').addEventListener('click', () => {
                let wrongAnswers = 0;
                document.querySelectorAll('.question').forEach((question, index) => {
                    const selected = question.querySelector('.option.selected');
                    const isCorrect = selected && selected.getAttribute('data-answer') === question.getAttribute('data-correct');
                    if (!isCorrect) {
                        wrongAnswers++;
                    }
                    // Actualizar el botón de paginación si no se ha respondido
                    if (!selected) {
                        const paginationButton = index < 15 ? paginationRow1.children[index] : paginationRow2.children[index - 15];
                        paginationButton.classList.add('incorrect');
                    }
                });
                const resultMessage = `Has fallado ${wrongAnswers} respuestas.`;

                const alert = document.getElementById('custom-alert');
                document.getElementById('alert-message').textContent = resultMessage;
                alert.style.display = 'block';
            });
        });

        function closeAlert() {
            document.getElementById('custom-alert').style.display = 'none';
        }
    </script>

    
</body>
</html>