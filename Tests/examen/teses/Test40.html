<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Autoescuela</title>
    <link rel="stylesheet" href="../../../Assets/style.css">
</head>
<body>

    
    <div class="container">
        <h1 style="text-align: center; color: #ffa5c3;">Test de Autoescuela</h1>
        <div id="test-container">
            <!-- Aquí se generarán dinámicamente las preguntas -->
        </div>
        <div class="pagination">
            <div class="pagination-row" id="pagination-row-1"></div>
            <div class="pagination-row" id="pagination-row-2"></div>
        </div>
        <button id="correct-test">Corregir Test</button>
    </div>

    <!-- Custom Alert HTML -->
    <div class="custom-alert" id="custom-alert">
        <h2>Resultado del Test</h2>
        <p id="alert-message">Aquí irá el mensaje del resultado.</p>
        <button onclick="closeAlert()">Cerrar</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const questions = [
    {
        "text": "Esta señal indica...",
        "options": [
            "peligro por la existencia de un tramo de vía con fuerte pendiente ascendente.",
            "peligro por posible proyección de gravilla al paso de los vehículos.",
            "peligro por la proximidad a una zona con desprendimientos frecuentes."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T507001.jpg"
    },
    {
        "text": "¿Cuál es el crédito inicial de puntos asignados a un conductor que obtiene su primer permiso de conducción?",
        "options": [
            "12 puntos.",
            "15 puntos.",
            "8 puntos."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T507002.jpg"
    },
    {
        "text": "En vías interurbanas con tres carriles para el mismo sentido, ¿le está permitido circular por el carril izquierdo a un turismo con remolque?",
        "options": [
            "Sí, pero sólo para adelantar a otros vehículos.",
            "No, en ningún caso",
            "Sí, cuando la longitud del conjunto no supere los 7 metros."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T507003.jpg"
    },
    {
        "text": "Tener el estómago lleno, ¿influye en la tasa de alcoholemia?",
        "options": [
            "No, no influye.",
            "Sí, porque el alcohol se absorbe más lentamente, por lo que se disminuye.",
            "Sí, ya que el alcohol se absorbe más lentamente, pero no evita el riesgo de accidente."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T507004.jpg"
    },
    {
        "text": "En las glorietas se circulará...",
        "options": [
            "dejando a la izquierda el centro.",
            "dejando a la derecha el centro.",
            "indistintamente, tanto por la derecha como por la izquierda."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T507005.jpg"
    },
    {
        "text": "Si se observa un incremento en el consumo de carburante de un vehículo, ¿qué se debe revisar?",
        "options": [
            "El circuito de escape.",
            "El circuito de encendido y el de alimentación.",
            "El circuito de refrigeración y el de lubricación."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T507006.jpg"
    },
    {
        "text": "Un vehículo estacionado, ¿cuándo obstruye gravemente la circulación?",
        "options": [
            "Cuando está en las proximidades de un paso para peatones.",
            "Cuando está en doble fila sin conductor.",
            "Cuando está en zona reservada a carga y descarga, fuera de las horas de utilización."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T507007.jpg"
    },
    {
        "text": "En este ciclomotor, ¿es obligatorio utilizar casco?",
        "options": [
            "Solamente en vías interurbanas.",
            "Sí, siempre.",
            "No, sólo cuando el conductor lo considere necesario."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T507008.jpg"
    },
    {
        "text": "Un semáforo cuadrado o de carril afecta...",
        "options": [
            "a los vehículos que circulan por el carril sobre el que está situado.",
            "sólo a los turismos que circulan por el carril sobre el que está situado.",
            "a los vehículos que circulan por la calzada sobre la que está situado."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T507009.jpg"
    },
    {
        "text": "En un accidente de tráfico, ¿qué debe hacerse?",
        "options": [
            "Autoprotegerse, proteger el lugar del accidente y socorrer a los heridos.",
            "Únicamente auxiliar a los heridos y proteger el lugar del accidente.",
            "Únicamente auxiliar a los heridos y autoprotegerse."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T507010.jpg"
    },
    {
        "text": "Los conductores que sufren un trastorno depresivo, ¿son más propensos, en general, a sufrir trastornos de sueño y a fatigarse con rapidez?",
        "options": [
            "Sí, sufren trastornos de sueño, pero la depresión hace que tarde más en aparecer la fatiga.",
            "No, la depresión no produce somnolencia ni fatiga.",
            "Sí, por lo que se debe evitar conducir de noche."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T510124_050616.jpg"
    },
    {
        "text": "Las hojas caídas en la calzada, ¿pueden influir en la conducción?",
        "options": [
            "Sí, porque disminuye la adherencia al pavimento y las marcas viales pueden quedar ocultas.",
            "No; esta circunstancia no influye en la conducción.",
            "Sí, porque el neumático se agarra mejor al pavimento."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T507012.jpg"
    },
    {
        "text": "¿Qué indica esta señal?",
        "options": [
            "Entrada prohibida a animales de montura.",
            "Entrada prohibida a vehículos de tracción animal.",
            "Obliga a los vehículos de tracción animal a circular por la vía a cuya entrada esté situada."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T507013.jpg"
    },
    {
        "text": "La distancia de detención depende...",
        "options": [
            "del estado de la calzada, entre otros factores.",
            "únicamente del estado del conductor.",
            "sólo del estado del vehículo."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T507014.jpg"
    },
    {
        "text": "¿Está permitido adelantar en una glorieta?",
        "options": [
            "Sí, por la derecha.",
            "Sí.",
            "No."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T510103_050116.jpg"
    },
    {
        "text": "El alumbrado, ¿es un sistema de seguridad activa?",
        "options": [
            "Sólo las luces de emergencia.",
            "No.",
            "Sí."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T507016.jpg"
    },
    {
        "text": "¿Cuándo debe dejar 1,5 metros o más en un adelantamiento?",
        "options": [
            "Cuando adelanto a cualquier vehículo.",
            "Cuando adelanto a vehículos especiales.",
            "Cuando adelanto a vehículos de dos ruedas o de tracción animal."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T507017.jpg"
    },
    {
        "text": "¿Cuándo puede utilizar el teléfono móvil?",
        "options": [
            "Cuando esté parado en un semáforo en rojo.",
            "Utilizando el dispositivo manos libres, durante periodos cortos de tiempo.",
            "Para leer o enviar mensajes."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T507018.jpg"
    },
    {
        "text": "¿Quién tiene preferencia en este cruce?",
        "options": [
            "El rojo.",
            "La motocicleta.",
            "El verde."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T507019.jpg"
    },
    {
        "text": "¿Qué factores favorecen las distracciones en la conducción?",
        "options": [
            "La falta de experiencia al volante.",
            "El estrés, el consumo de alcohol y la fatiga.",
            "Las enfermedades respiratorias."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T507020.jpg"
    },
    {
        "text": "El sistema “RCTA o Alerta de tráfico cruzado”...",
        "options": [
            "ayuda a los conductores a detectar cuándo el vehículo que circula por delante está realizando una frenada de emergencia.",
            "supervisa el tráfico trasero en sentido transversal al salir marcha atrás de un hueco de aparcamiento en batería.",
            "en caso de despiste del conductor y riesgo de colisión por alcance, el sistema es capaz de detectar un peligro inminente y actuar."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T500101_ADAS.jpg"
    },
    {
        "text": "Un turismo nuevo, ¿cuándo debe pasar la primera ITV?",
        "options": [
            "A los tres años de haber sido matriculado.",
            "A los cuatro años de haber sido matriculado.",
            "A los dos años de haber sido matriculado."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T507022.jpg"
    },
    {
        "text": "¿Cuándo termina la limitación de velocidad que indica esta marca vial?",
        "options": [
            "Cuando circule por encima de ella.",
            "Cuando encuentre otra señal de velocidad máxima distinta, una señal de fin de limitación de velocidad o una señal de fin de prohibiciones.",
            "Sólo cuando encuentre otra señal de velocidad máxima distinta."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T507023.jpg"
    },
    {
        "text": "¿A qué velocidad máxima tiene permitido circular un ciclomotor en esta vía?",
        "options": [
            "Un ciclomotor no puede circular por esta vía.",
            "A 45 km/h.",
            "A 60 km/h."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T507024.jpg"
    },
    {
        "text": "¿Cuándo se considera que una vía está insuficientemente iluminada?",
        "options": [
            "Cuando no puedo leer una placa de matrícula a 10 metros.",
            "Cuando no se distinga un vehículo oscuro a 100 metros.",
            "Cuando no puede leer una placa de matrícula a 50 metros."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T507025.jpg"
    },
    {
        "text": "El chaleco reflectante. ¿Cuándo es obligatorio ponérselo?",
        "options": [
            "Cuando salgo del vehículo en vías urbanas.",
            "Cuando salgo del vehículo en autopistas y autovías solamente.",
            "Cuando salgo del vehículo en vías interurbanas."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T507026.jpg"
    },
    {
        "text": "Por la calzada a cuya entrada está situada esta señal, ¿qué vehículos están obligados a circular?",
        "options": [
            "Los camiones y furgones con una MMA igual o superior a 5,5 toneladas.",
            "Los camiones y furgones con una MMA superior a 5,5 toneladas.",
            "Solamente los camiones con una MMA superior a 5,5 toneladas."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T507027.jpg"
    },
    {
        "text": "El consumo de anfetaminas en la conducción, ¿está prohibido?",
        "options": [
            "No, si forma parte de un tratamiento médico.",
            "Sí.",
            "No, porque no afecta a la conducción."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T507028.jpg"
    },
    {
        "text": "Los transportes especiales o en régimen de transporte especial, en caso de avería de la señal luminosa V-2...",
        "options": [
            "deben encender la luz de cruce junto con la señal de emergencia.",
            "pueden circular únicamente con la luz de cruce encendida.",
            "tienen prohibida la circulación."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T507029.jpg"
    },
    {
        "text": "El cinturón de seguridad deber ir...",
        "options": [
            "holgado para que la conducción sea cómoda y no aparezca la fatiga.",
            "bien ceñido para evitar el efecto submarino.",
            "sobre el abdomen para que sea realmente eficaz."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T507030.jpg"
    }
]
            
            ;

            const container = document.getElementById('test-container');
            const paginationRow1 = document.getElementById('pagination-row-1');
            const paginationRow2 = document.getElementById('pagination-row-2');

            // Generar preguntas
            questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.setAttribute('data-correct', question.correct);
                questionDiv.innerHTML = `
                    <div class="question-image">
                        <img src="${question.image}" alt="Imagen de la pregunta">
                    </div>
                    <div class="question-content">
                        <h3>${index + 1}. ${question.text}</h3>
                        <div class="options">
                            ${question.options.map((option, idx) => `
                                <div class="option" data-answer="${String.fromCharCode(65 + idx)}">
                                    <span class="option-circle">${String.fromCharCode(65 + idx)}</span>
                                    ${option}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                container.appendChild(questionDiv);
            });

            // Generar paginación
            for (let i = 0; i < questions.length; i++) {
                const button = document.createElement('button');
                button.textContent = `${i + 1}`;
                button.addEventListener('click', () => showQuestion(i));
                if (i < 15) {
                    paginationRow1.appendChild(button);
                } else {
                    paginationRow2.appendChild(button);
                }
            }

            // Mostrar la primera pregunta
            showQuestion(0);

            // Función para mostrar una pregunta específica
            function showQuestion(index) {
                document.querySelectorAll('.question').forEach((q, i) => {
                    q.style.display = i === index ? 'flex' : 'none';
                });
                document.querySelectorAll('.pagination button').forEach((btn, i) => {
                    btn.style.backgroundColor = i === index ? '#ff7aa2' : '#ffa5c3';
                });
            }

            // Evento para las opciones de respuesta
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const question = this.closest('.question');
                    const questionIndex = Array.from(container.children).indexOf(question);
                    const isCorrect = this.getAttribute('data-answer') === question.getAttribute('data-correct');
                    
                    if (question.dataset.answered) return;

                    question.dataset.answered = true;

                    question.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                        opt.style.pointerEvents = 'none';
                    });
                    
                    this.classList.add('selected', isCorrect ? 'correct' : 'incorrect');

                    if (!isCorrect) {
                        question.querySelector(`.option[data-answer="${question.getAttribute('data-correct')}"]`).classList.add('correct');
                    }

                    // Actualizar el botón de paginación
                    const paginationButton = questionIndex < 15 ? paginationRow1.children[questionIndex] : paginationRow2.children[questionIndex - 15];
                    paginationButton.classList.add(isCorrect ? 'correct' : 'incorrect');
                });
            });

            // Evento para corregir el test
            document.getElementById('correct-test').addEventListener('click', () => {
                let wrongAnswers = 0;
                document.querySelectorAll('.question').forEach((question, index) => {
                    const selected = question.querySelector('.option.selected');
                    const isCorrect = selected && selected.getAttribute('data-answer') === question.getAttribute('data-correct');
                    if (!isCorrect) {
                        wrongAnswers++;
                    }
                    // Actualizar el botón de paginación si no se ha respondido
                    if (!selected) {
                        const paginationButton = index < 15 ? paginationRow1.children[index] : paginationRow2.children[index - 15];
                        paginationButton.classList.add('incorrect');
                    }
                });
                const resultMessage = `Has fallado ${wrongAnswers} respuestas.`;

                const alert = document.getElementById('custom-alert');
                document.getElementById('alert-message').textContent = resultMessage;
                alert.style.display = 'block';
            });
        });

        function closeAlert() {
            document.getElementById('custom-alert').style.display = 'none';
        }
    </script>

    
</body>
</html>