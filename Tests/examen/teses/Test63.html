<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Autoescuela</title>
    <link rel="stylesheet" href="../../../Assets/style.css">
</head>
<body>

    
    <div class="container">
        <h1 style="text-align: center; color: #ffa5c3;">Test de Autoescuela</h1>
        <div id="test-container">
            <!-- Aquí se generarán dinámicamente las preguntas -->
        </div>
        <div class="pagination">
            <div class="pagination-row" id="pagination-row-1"></div>
            <div class="pagination-row" id="pagination-row-2"></div>
        </div>
        <button id="correct-test">Corregir Test</button>
    </div>

    <!-- Custom Alert HTML -->
    <div class="custom-alert" id="custom-alert">
        <h2>Resultado del Test</h2>
        <p id="alert-message">Aquí irá el mensaje del resultado.</p>
        <button onclick="closeAlert()">Cerrar</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const questions = [
    {
        "text": "¿En qué situación se puede encender solamente la luz de posición entre la puesta y la salida del sol?",
        "options": [
            "Cuando circule por una carretera suficientemente iluminada.",
            "Cuando circule por una calle suficientemente iluminada.",
            "Para inmovilizar el vehículo en un arcén fuera de poblado."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T501301.jpg"
    },
    {
        "text": "¿Se pueden sufrir más distracciones por los efectos del alcohol?",
        "options": [
            "No.",
            "Sí, especialmente en situaciones complejas.",
            "No, si la tasa de alcoholemia es inferior a la máxima permitida."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T501302.jpg"
    },
    {
        "text": "Este conjunto de vehículos, ¿a qué velocidad puede circular como máximo en una autovía?",
        "options": [
            "A 100 km/h.",
            "A 90 km/h.",
            "A 120 km/h."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T501303.jpg"
    },
    {
        "text": "El conductor de una motocicleta, que lleva una persona en el asiento trasero...",
        "options": [
            "debe utilizar el casco protector y será responsable de que lo utilice el acompañante.",
            "debe utilizar el casco protector y será responsable de que lo utilice el acompañante, pero sólo en vías interurbanas.",
            "debe utilizar el casco protector y aconsejar al acompañante que lo utilice."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T510118_150723.jpg"
    },
    {
        "text": "Delante de un vado, esta señal prohíbe...",
        "options": [
            "solamente el estacionamiento.",
            "únicamente la parada.",
            "la parada y el estacionamiento."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T501305.jpg"
    },
    {
        "text": "¿Cuándo está prohibido adelantar en los túneles?",
        "options": [
            "Cuando el túnel no está iluminado.",
            "Cuando sólo existe un carril para cada sentido.",
            "Cuando existe más de un carril para cada sentido."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T501306.jpg"
    },
    {
        "text": "Este turismo, ¿qué espejos retrovisores debe llevar obligatoriamente?",
        "options": [
            "El espejo interior y el exterior derecho.",
            "Los exteriores izquierdo y derecho, porque por el espejo interior no tiene suficiente visibilidad.",
            "Sólo el espejo interior y el exterior izquierdo."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T501307.jpg"
    },
    {
        "text": "La varilla del aceite del motor, ¿para qué sirve?",
        "options": [
            "Para comprobar la presión del aceite.",
            "Para comprobar el nivel del aceite.",
            "Para comprobar la temperatura del aceite."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T501308.jpg"
    },
    {
        "text": "Como norma general las señales se aplican...",
        "options": [
            "a toda la vía.",
            "sólo al carril derecho.",
            "a toda la anchura de la calzada."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T501309.jpg"
    },
    {
        "text": "¿Quién debe realizar las actuaciones de soporte vital básico a las víctimas de un accidente?",
        "options": [
            "El personal especializado, siempre.",
            "Estas actuaciones siempre deben realizarse en un hospital.",
            "El personal especializado, salvo que la persona que le auxilie esté totalmente seguro de conocerlas y poder realizarlas."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T501310.jpg"
    },
    {
        "text": "Programar un navegador GPS mientras se conduce, ¿provoca distracciones que afectan a la conducción?",
        "options": [
            "No, siempre y cuando circule a una velocidad moderada.",
            "Sí.",
            "No, porque el GPS es una ayuda y nunca distrae al conductor."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T501311.jpg"
    },
    {
        "text": "¿Puede sobrepasar la marca longitudinal continua central?",
        "options": [
            "Sí, para realizar un cambio de dirección.",
            "No.",
            "Sí, si se trata de una calzada de un solo sentido."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T501312.jpg"
    },
    {
        "text": "El reposacabezas, ¿cómo debe colocarse?",
        "options": [
            "A la altura de la cabeza.",
            "A la altura de cuello.",
            "Lo más alto posible para que no moleste."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T501313.jpg"
    },
    {
        "text": "En una autopista conduciendo un camión de 3.000 Kg. de M.M.A., ¿qué distancia es obligatorio dejar con el vehículo que va delante?",
        "options": [
            "50 metros.",
            "La distancia de seguridad.",
            "100 metros."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T501314.jpg"
    },
    {
        "text": "Si se ve obligado a circular con una rueda de repuesto de uso temporal o de emergencia, debe tener en cuenta...",
        "options": [
            "que la presión debe ser más alta que las que lleva normalmente el vehículo.",
            "las indicaciones de los fabricantes de este tipo de repuestos.",
            "que si está homologada no es necesario sustituirla por una rueda normal."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T501315.jpg"
    },
    {
        "text": "¿Qué indica esta señal?",
        "options": [
            "Vía reservada para ciclos.",
            "Vía reservada a ciclomotores.",
            "Prohibición de entrada a ciclomotores."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T501316.jpg"
    },
    {
        "text": "¿Está permitido adelantar en una curva o cambio de rasante de visibilidad reducida en una vía con dos carriles para cada sentido?",
        "options": [
            "Sí, moderando la velocidad.",
            "Sí, si no hay señal que lo prohíba.",
            "No, salvo si los dos sentidos están claramente delimitados y la maniobra puede efectuarse sin invadir el sentido contrario."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T501317.jpg"
    },
    {
        "text": "Un neumático con una presión de inflado incorrecta...",
        "options": [
            "se desgasta menos y tiene menor riesgo de reventón.",
            "normalmente consume menos carburante.",
            "se desgasta de forma irregular y tiene mayor riesgo de reventón."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T501318.jpg"
    },
    {
        "text": "Un vehículo tiene el silenciador del escape estropeado. ¿Está permitido circular así?",
        "options": [
            "No, por la contaminación acústica que produce.",
            "Sí, solamente en carretera.",
            "No, pero las motos y ciclomotores pueden circular sin él."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T501319.jpg"
    },
    {
        "text": "Ante un paso a nivel está obligado a...",
        "options": [
            "pasar aunque las barreras estén en movimiento.",
            "asegurarse antes de atravesarlo de que no existe ningún peligro.",
            "atravesarlo rápidamente."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T501320.jpg"
    },
    {
        "text": "¿Influye la velocidad en la capacidad de reacción del conductor?",
        "options": [
            "Sí.",
            "No, sólo afecta al tiempo de reacción.",
            "No, sólo es cuestión de experiencia."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T501321.jpg"
    },
    {
        "text": "Con hielo en la calzada, si su vehículo no tiene ABS, es preferible...",
        "options": [
            "usar el freno de mano.",
            "evitar pisar el freno.",
            "pisar el freno a fondo, junto con el embrague."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T501322.jpg"
    },
    {
        "text": "Conducir cansado, ¿es peligroso?",
        "options": [
            "Sí, porque se tarda más en reaccionar.",
            "No hay peligro, porque cansado se circula más despacio.",
            "No hay peligro, porque el cansancio relaja."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T501323.jpg"
    },
    {
        "text": "Los conductores de bicicletas tienen prioridad de paso respecto a los vehículos de motor:",
        "options": [
            "Siempre.",
            "Nunca.",
            "Cuando, circulando en grupo, el primer ciclista haya iniciado ya el cruce o haya entrado en una glorieta."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T501324.jpg"
    },
    {
        "text": "¿Pueden realizarle una prueba para detectar el consumo de drogas en un control de tráfico?",
        "options": [
            "No, si no muestra signos de haber consumido drogas.",
            "No, porque no existen pruebas para detectar el consumo de drogas.",
            "Sí, en las mismas condiciones que en las pruebas de detección de la alcoholemia."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T501325.jpg"
    },
    {
        "text": "El vehículo que sale de una vía no pavimentada, ¿a qué vehículos debe ceder el paso?",
        "options": [
            "Únicamente a los que se aproximen por la izquierda.",
            "A todos los que circulen por la vía pavimentada.",
            "Únicamente a los vehículos de motor que se aproximen por la derecha."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T501326.jpg"
    },
    {
        "text": "¿Qué indica esta señal?",
        "options": [
            "Cambio de sentido obligatorio hacia la izquierda.",
            "Bifurcación con desvío del carril izquierdo.",
            "Bifurcación hacia la izquierda sólo para los vehículos que circulan a mayor velocidad."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T501327.jpg"
    },
    {
        "text": "El estado psicofísico, tanto de conductores como de peatones, ¿puede ser causa de accidentes?",
        "options": [
            "No.",
            "Sí."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T510102_151116.jpg"
    },
    {
        "text": "Un vehículo de dos ruedas provisto de un motor de combustión interna podrá ser catalogado como motocicleta siempre que...",
        "options": [
            "pueda alcanzar una velocidad máxima superior a 40 km/h.",
            "disponga de al menos dos plazas, incluida la del conductor.",
            "su cilindrada sea superior a 50 centímetros cúbicos."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T507107.jpg"
    },
    {
        "text": "Una persona en silla de ruedas, ¿puede circular por una carretera?",
        "options": [
            "No, no puede circular.",
            "Sí, por el arcén derecho si es transitable y, si no lo es, por la calzada, arrimado a su derecha.",
            "Sí, por el arcén izquierdo si es transitable y, si no lo es, por la calzada, arrimado a su izquierda."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T501330.jpg"
    }
]
            
            ;

            const container = document.getElementById('test-container');
            const paginationRow1 = document.getElementById('pagination-row-1');
            const paginationRow2 = document.getElementById('pagination-row-2');

            // Generar preguntas
            questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.setAttribute('data-correct', question.correct);
                questionDiv.innerHTML = `
                    <div class="question-image">
                        <img src="${question.image}" alt="Imagen de la pregunta">
                    </div>
                    <div class="question-content">
                        <h3>${index + 1}. ${question.text}</h3>
                        <div class="options">
                            ${question.options.map((option, idx) => `
                                <div class="option" data-answer="${String.fromCharCode(65 + idx)}">
                                    <span class="option-circle">${String.fromCharCode(65 + idx)}</span>
                                    ${option}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                container.appendChild(questionDiv);
            });

            // Generar paginación
            for (let i = 0; i < questions.length; i++) {
                const button = document.createElement('button');
                button.textContent = `${i + 1}`;
                button.addEventListener('click', () => showQuestion(i));
                if (i < 15) {
                    paginationRow1.appendChild(button);
                } else {
                    paginationRow2.appendChild(button);
                }
            }

            // Mostrar la primera pregunta
            showQuestion(0);

            // Función para mostrar una pregunta específica
            function showQuestion(index) {
                document.querySelectorAll('.question').forEach((q, i) => {
                    q.style.display = i === index ? 'flex' : 'none';
                });
                document.querySelectorAll('.pagination button').forEach((btn, i) => {
                    btn.style.backgroundColor = i === index ? '#ff7aa2' : '#ffa5c3';
                });
            }

            // Evento para las opciones de respuesta
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const question = this.closest('.question');
                    const questionIndex = Array.from(container.children).indexOf(question);
                    const isCorrect = this.getAttribute('data-answer') === question.getAttribute('data-correct');
                    
                    if (question.dataset.answered) return;

                    question.dataset.answered = true;

                    question.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                        opt.style.pointerEvents = 'none';
                    });
                    
                    this.classList.add('selected', isCorrect ? 'correct' : 'incorrect');

                    if (!isCorrect) {
                        question.querySelector(`.option[data-answer="${question.getAttribute('data-correct')}"]`).classList.add('correct');
                    }

                    // Actualizar el botón de paginación
                    const paginationButton = questionIndex < 15 ? paginationRow1.children[questionIndex] : paginationRow2.children[questionIndex - 15];
                    paginationButton.classList.add(isCorrect ? 'correct' : 'incorrect');
                });
            });

            // Evento para corregir el test
            document.getElementById('correct-test').addEventListener('click', () => {
                let wrongAnswers = 0;
                document.querySelectorAll('.question').forEach((question, index) => {
                    const selected = question.querySelector('.option.selected');
                    const isCorrect = selected && selected.getAttribute('data-answer') === question.getAttribute('data-correct');
                    if (!isCorrect) {
                        wrongAnswers++;
                    }
                    // Actualizar el botón de paginación si no se ha respondido
                    if (!selected) {
                        const paginationButton = index < 15 ? paginationRow1.children[index] : paginationRow2.children[index - 15];
                        paginationButton.classList.add('incorrect');
                    }
                });
                const resultMessage = `Has fallado ${wrongAnswers} respuestas.`;

                const alert = document.getElementById('custom-alert');
                document.getElementById('alert-message').textContent = resultMessage;
                alert.style.display = 'block';
            });
        });

        function closeAlert() {
            document.getElementById('custom-alert').style.display = 'none';
        }
    </script>

    
</body>
</html>