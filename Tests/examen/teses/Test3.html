<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Autoescuela</title>
    <link rel="stylesheet" href="../../../Assets/style.css">
</head>
<body>

    
    <div class="container">
        <h1 style="text-align: center; color: #ffa5c3;">Test de Autoescuela</h1>
        <div id="test-container">
            <!-- Aquí se generarán dinámicamente las preguntas -->
        </div>
        <div class="pagination">
            <div class="pagination-row" id="pagination-row-1"></div>
            <div class="pagination-row" id="pagination-row-2"></div>
        </div>
        <button id="correct-test">Corregir Test</button>
    </div>

    <!-- Custom Alert HTML -->
    <div class="custom-alert" id="custom-alert">
        <h2>Resultado del Test</h2>
        <p id="alert-message">Aquí irá el mensaje del resultado.</p>
        <button onclick="closeAlert()">Cerrar</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const questions = [
    {
        "text": "Esta señal obliga a circular por la vía...",
        "options": [
            "a todos los automóviles, excepto a los ciclomotores y bicicletas.",
            "a todos los automóviles, excepto a los camiones y furgones.",
            "a todos los automóviles, excepto a las motocicletas sin sidecar."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T505301.jpg"
    },
    {
        "text": "La influencia del factor de riesgo vía, ¿cómo se puede disminuir?",
        "options": [
            "Circulando de noche porque hay menos tráfico.",
            "Adecuando la velocidad y aumentando la distancia de seguridad.",
            "Circulando a 50 km/h en todas las vías."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T505302.jpg"
    },
    {
        "text": "En una calzada con los dos sentidos separados por una línea continua, ¿está permitido girar a la izquierda?",
        "options": [
            "Sí, cuando no se comprometa la seguridad de ningún usuario de la vía.",
            "No.",
            "Solo dentro de poblado."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T505303.jpg"
    },
    {
        "text": "¿Quién tiene la responsabilidad por las infracciones cometidas sobre las normas de circulación?",
        "options": [
            "El conductor y, si es menor de edad, sus padres o tutores legales.",
            "Siempre el conductor causante de la infracción cometida.",
            "El titular del vehículo."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T505304.jpg"
    },
    {
        "text": "De día es obligatorio encender el alumbrado que corresponda...",
        "options": [
            "sólo cuando existan condiciones que disminuyan la visibilidad.",
            "cuando se circule por carriles para VAO.",
            "cuando se circule por pasos inferiores o tramos de vía afectados por la señal túnel."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T505305.jpg"
    },
    {
        "text": "Si su motocicleta lleva instalado cinturón de seguridad, ¿cuándo debe utilizarlo?",
        "options": [
            "Sólo cuando circule por vías interurbanas y travesías.",
            "En todo tipo de vías.",
            "Únicamente cuando circule por vías interurbanas."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T505306.jpg"
    },
    {
        "text": "Un tractor que arrastra un remolque, ¿qué velocidad máxima no debe rebasar fuera de poblado?",
        "options": [
            "70 kilómetros por hora.",
            "25 kilómetros por hora.",
            "40 kilómetros por hora."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T505307.jpg"
    },
    {
        "text": "Cuando un peatón deba llevar elementos luminosos o reflectantes, ¿a qué distancia mínima debe ser visto por un conductor?",
        "options": [
            "A 50 metros.",
            "A 150 metros.",
            "A 100 metros."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T505308.jpg"
    },
    {
        "text": "¿Qué sistema proyecta información, como la velocidad o las instrucciones del navegador, sobre el parabrisas o una pequeña pantalla situada sobre el salpicadero?",
        "options": [
            "El \"Head Up Display\".",
            "El \"Hill Holder\".",
            "El \"ISA\"."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T500135_ADAS.jpg"
    },
    {
        "text": "A un herido en accidente, ¿debe darle algún tranquilizante?",
        "options": [
            "Cuando el herido me lo pide yo se lo daré.",
            "No.",
            "Sí, porque así sufre menos y se tranquiliza."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T505310.jpg"
    },
    {
        "text": "¿Qué está obligado a utilizar un peatón que circule de noche por una vía interurbana?",
        "options": [
            "Ropa de tonos claros que sea visible desde una distancia de 150 metros.",
            "Una linterna con luz blanca hacia delante y roja hacia atrás.",
            "Un elemento luminoso o reflectante visible a una distancia mínima de 150 metros."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T505629.jpg"
    },
    {
        "text": "¿Afecta el alcohol al tiempo de reacción?",
        "options": [
            "Sí, lo disminuye.",
            "No.",
            "Sí, lo aumenta."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T505312.jpg"
    },
    {
        "text": "Las marcas viales que señalizan un tramo de obras...",
        "options": [
            "significan lo mismo que las que se utilizan cuando no hay obras.",
            "solamente alertan sobre la necesidad de extremar la precaución.",
            "solamente hay que respetarlas cuando hay personas trabajando."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T505313.jpg"
    },
    {
        "text": "Una enfermedad respiratoria sin el debido tratamiento, ¿qué puede causar en el conductor?",
        "options": [
            "Pérdida de atención y de concentración.",
            "Aumento de la concentración.",
            "Aumento de la atención."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T505314.jpg"
    },
    {
        "text": "Esta señal prohíbe el paso a...",
        "options": [
            "camiones y furgones, solamente.",
            "cualquier vehículo cuya masa máxima autorizada sea superior a la indicada.",
            "los vehículos cuya masa en carga sea superior a la indicada."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T505315.jpg"
    },
    {
        "text": "¿Puede llevar a un niño en su vehículo sin un dispositivo de retención adecuado, como norma general?",
        "options": [
            "Sí, en trayectos cortos en vías urbanas.",
            "Sí, si lo lleva una persona adulta en brazos firmemente agarrado.",
            "No."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T505316.jpg"
    },
    {
        "text": "El vehículo de la fotografía, ¿puede continuar la marcha?",
        "options": [
            "No, porque debe ceder el paso.",
            "Sí.",
            "Sí, pero sólo cuando no hay vehículos cerca."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T505317.jpg"
    },
    {
        "text": "El alcohol desaparece de la sangre...",
        "options": [
            "pocos minutos después de haberlo ingerido.",
            "rápidamente, hasta completar su eliminación en pocas horas.",
            "muy lentamente, hasta su completa eliminación pasadas varias horas."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T505318.jpg"
    },
    {
        "text": "La incorporación desde un inmueble a la vía pública, debe realizarse...",
        "options": [
            "a una velocidad que permita la detención en el acto, y cediendo el paso a peatones y vehículos.",
            "advirtiendo con la señal acústica y la señal de emergencia.",
            "rápidamente para no entorpecer a peatones y vehículos."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T505319.jpg"
    },
    {
        "text": "Como norma general, el titular de un permiso de la clase B, ¿puede conducir motocicletas con sidecar?",
        "options": [
            "No.",
            "Sí, pero sólo en territorio nacional.",
            "Sí, siempre que el permiso de la clase B tenga una antigüedad superior a 3 años."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T505320.jpg"
    },
    {
        "text": "El adelantamiento se efectuará por la derecha y adoptando las máximas precauciones...",
        "options": [
            "en vías con más de un carril en el mismo sentido.",
            "cuando el conductor del vehículo al que se pretende adelantar está indicando claramente su propósito de girar a la izquierda.",
            "siempre que se adelante a un vehículo articulado."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T505321.jpg"
    },
    {
        "text": "La percepción del riesgo, ¿resulta afectada por las drogas?",
        "options": [
            "No.",
            "Sí, la percepción del riesgo aumenta.",
            "Sí, la percepción del riesgo disminuye."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T505322.jpg"
    },
    {
        "text": "¿Qué le indica el panel?",
        "options": [
            "Impone una obligación a ciertos usuarios a partir de ese punto.",
            "Advierte de ciertos peligros a determinados usuarios.",
            "Establece unas prohibiciones a determinados usuarios prevaleciendo sobre las demás señales fijas de la vía."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T505323.jpg"
    },
    {
        "text": "El vehiculo que se observa en la fotografía, ¿puede llevar cortinillas para protegerse del sol en la parte trasera?",
        "options": [
            "Sí, si los dos espejos retrovisores exteriores cumplen los requisitos técnicos.",
            "No, por tratarse de un conductor novel.",
            "No, están prohibidas porque dificultan la visibilidad."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T505324.jpg"
    },
    {
        "text": "Al abandonar una autovía deberá...",
        "options": [
            "reducir la velocidad a 60 km/h.",
            "cambiar al carril más próximo a la salida y entrar en el carril de deceleración lo antes posible.",
            "continuar por su carril hasta la salida."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T505325.jpg"
    },
    {
        "text": "Llamamos grupos vulnerables a...",
        "options": [
            "determinados grupos de personas que sufren con mayor frecuencia los efectos negativos del tráfico.",
            "los pasajeros que resultan heridos en un accidente de tráfico.",
            "los niños y las personas mayores, exclusivamente."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T505326.jpg"
    },
    {
        "text": "La señal indica que...",
        "options": [
            "no puede desplazarse lateralmente ni a la derecha ni a la izquierda.",
            "debe circular en el sentido indicado por la flecha, ya que es una calzada de sentido único.",
            "está prohibido el cambio de dirección."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T505327.jpg"
    },
    {
        "text": "¿Qué circunstancias favorecen la aparición de la fatiga?",
        "options": [
            "Conducir con poco tráfico, porque exige mayor concentración.",
            "Mantener en el interior del vehículo una temperatura elevada, porque puede afectar al estado psicofísico.",
            "Que el recorrido sea por una vía muy conocida."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T505328.jpg"
    },
    {
        "text": "Circula con un turismo por una autovía con tráfico muy denso, ¿está permitido circular por el arcén para tomar la siguiente salida?",
        "options": [
            "Sí, con las luces de emergencia.",
            "Sí, para facilitar la fluidez.",
            "No."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T505329.jpg"
    },
    {
        "text": "Los remolques y semirremolques, ¿deben tener tarjeta de inspección técnica?",
        "options": [
            "No, es suficiente con la del vehículo que los arrastra.",
            "Sí, todos.",
            "Sí, pero únicamente los no ligeros."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T505330.jpg"
    }

            
            ];

            const container = document.getElementById('test-container');
            const paginationRow1 = document.getElementById('pagination-row-1');
            const paginationRow2 = document.getElementById('pagination-row-2');

            // Generar preguntas
            questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.setAttribute('data-correct', question.correct);
                questionDiv.innerHTML = `
                    <div class="question-image">
                        <img src="${question.image}" alt="Imagen de la pregunta">
                    </div>
                    <div class="question-content">
                        <h3>${index + 1}. ${question.text}</h3>
                        <div class="options">
                            ${question.options.map((option, idx) => `
                                <div class="option" data-answer="${String.fromCharCode(65 + idx)}">
                                    <span class="option-circle">${String.fromCharCode(65 + idx)}</span>
                                    ${option}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                container.appendChild(questionDiv);
            });

            // Generar paginación
            for (let i = 0; i < questions.length; i++) {
                const button = document.createElement('button');
                button.textContent = `${i + 1}`;
                button.addEventListener('click', () => showQuestion(i));
                if (i < 15) {
                    paginationRow1.appendChild(button);
                } else {
                    paginationRow2.appendChild(button);
                }
            }

            // Mostrar la primera pregunta
            showQuestion(0);

            // Función para mostrar una pregunta específica
            function showQuestion(index) {
                document.querySelectorAll('.question').forEach((q, i) => {
                    q.style.display = i === index ? 'flex' : 'none';
                });
                document.querySelectorAll('.pagination button').forEach((btn, i) => {
                    btn.style.backgroundColor = i === index ? '#ff7aa2' : '#ffa5c3';
                });
            }

            // Evento para las opciones de respuesta
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const question = this.closest('.question');
                    const questionIndex = Array.from(container.children).indexOf(question);
                    const isCorrect = this.getAttribute('data-answer') === question.getAttribute('data-correct');
                    
                    if (question.dataset.answered) return;

                    question.dataset.answered = true;

                    question.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                        opt.style.pointerEvents = 'none';
                    });
                    
                    this.classList.add('selected', isCorrect ? 'correct' : 'incorrect');

                    if (!isCorrect) {
                        question.querySelector(`.option[data-answer="${question.getAttribute('data-correct')}"]`).classList.add('correct');
                    }

                    // Actualizar el botón de paginación
                    const paginationButton = questionIndex < 15 ? paginationRow1.children[questionIndex] : paginationRow2.children[questionIndex - 15];
                    paginationButton.classList.add(isCorrect ? 'correct' : 'incorrect');
                });
            });

            // Evento para corregir el test
            document.getElementById('correct-test').addEventListener('click', () => {
                let wrongAnswers = 0;
                document.querySelectorAll('.question').forEach((question, index) => {
                    const selected = question.querySelector('.option.selected');
                    const isCorrect = selected && selected.getAttribute('data-answer') === question.getAttribute('data-correct');
                    if (!isCorrect) {
                        wrongAnswers++;
                    }
                    // Actualizar el botón de paginación si no se ha respondido
                    if (!selected) {
                        const paginationButton = index < 15 ? paginationRow1.children[index] : paginationRow2.children[index - 15];
                        paginationButton.classList.add('incorrect');
                    }
                });
                const resultMessage = `Has fallado ${wrongAnswers} respuestas.`;

                const alert = document.getElementById('custom-alert');
                document.getElementById('alert-message').textContent = resultMessage;
                alert.style.display = 'block';
            });
        });

        function closeAlert() {
            document.getElementById('custom-alert').style.display = 'none';
        }
    </script>

    
</body>
</html>