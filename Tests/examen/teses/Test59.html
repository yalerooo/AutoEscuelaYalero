<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Autoescuela</title>
    <link rel="stylesheet" href="../../../Assets/style.css">
</head>
<body>

    
    <div class="container">
        <h1 style="text-align: center; color: #ffa5c3;">Test de Autoescuela</h1>
        <div id="test-container">
            <!-- Aquí se generarán dinámicamente las preguntas -->
        </div>
        <div class="pagination">
            <div class="pagination-row" id="pagination-row-1"></div>
            <div class="pagination-row" id="pagination-row-2"></div>
        </div>
        <button id="correct-test">Corregir Test</button>
    </div>

    <!-- Custom Alert HTML -->
    <div class="custom-alert" id="custom-alert">
        <h2>Resultado del Test</h2>
        <p id="alert-message">Aquí irá el mensaje del resultado.</p>
        <button onclick="closeAlert()">Cerrar</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const questions = [
    {
        "text": "¿Cómo debe colocar el navegador GPS portátil en el vehículo?",
        "options": [
            "Justo detrás del volante, a la altura de los ojos del conductor.",
            "Donde no entorpezca ni la visión ni el despliegue del airbag.",
            "Debajo del volante, tan cerca del suelo como sea posible."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T500901.jpg"
    },
    {
        "text": "Tomando las debidas precauciones, ¿por dónde podrá circular una persona que empuje con las manos una bicicleta cuando su tránsito por la acera sea un estorbo para los demás peatones?",
        "options": [
            "Por la calzada, pero en ningún caso por el arcén.",
            "Por el arcén, pero en ningún caso por la calzada.",
            "Por el arcén o por la calzada."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T510111_150623.jpg"
    },
    {
        "text": "Los conductores deben ceder el paso a los animales...",
        "options": [
            "siempre que se crucen sus trayectorias.",
            "cuando vayan a girar con su vehículo para entrar en otra vía y haya animales cruzándola, aunque no exista paso para éstos.",
            "únicamente en las cañadas debidamente señalizadas."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T500903.jpg"
    },
    {
        "text": "Las condiciones meteorológicas, ¿influyen en la distancia de frenado?",
        "options": [
            "No.",
            "No, sólo depende de la velocidad.",
            "Sí."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T500904.jpg"
    },
    {
        "text": "Si la parte rígida de la carrocería es de gran resistencia, ¿es aconsejable no usar el cinturón de seguridad?",
        "options": [
            "Sólo en los vehículos todo terreno o en los de más de 3.500 kg de MMA.",
            "No.",
            "Sí, porque los ocupantes del vehículo están bien protegidos."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T507030.jpg"
    },
    {
        "text": "Se debe circular a velocidad moderada y, si fuera preciso, detener el vehículo, al aproximarse a un...",
        "options": [
            "paso a nivel.",
            "vehículo inmovilizado en la calzada, fuera o dentro de poblado.",
            "semáforo."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T500906.jpg"
    },
    {
        "text": "Un vehículo expulsa más humo del permitido, ¿puede seguir circulando?",
        "options": [
            "Sí, porque el humo no es nocivo ni contamina.",
            "No.",
            "Sí, siempre que circule fuera de poblado."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T500907.jpg"
    },
    {
        "text": "En esta intersección con un semáforo en amarillo intermitente, ¿qué debe hacer?",
        "options": [
            "Extremar la precaución y, en su caso, ceder el paso a ambos lados.",
            "Continuar con precaución, el semáforo en amarillo intermitente exime de cumplir la señal vertical.",
            "Detener el vehículo."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T510118_050723.jpg"
    },
    {
        "text": "El seguro de suscripción obligatoria, ¿cubre los daños causados al conductor no culpable de un accidente?",
        "options": [
            "Sí, los personales pero no los materiales.",
            "No, ni los personales ni los materiales.",
            "Sí, los personales y materiales."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T500909.jpg"
    },
    {
        "text": "En un turismo, ¿es obligatorio utilizar los cinturones de seguridad?",
        "options": [
            "Sí, excepto para el conductor cuando efectúe una maniobra de marcha atrás o de estacionamiento.",
            "No, cuando el uso del cinturón moleste o reste libertad de movimientos.",
            "Sí, excepto en los taxis."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T500910.jpg"
    },
    {
        "text": "Circula por el carril derecho y el semáforo está verde. ¿Qué debe hacer?",
        "options": [
            "Girar a la derecha o girar a la izquierda.",
            "Girar a la izquierda o continuar de frente.",
            "Girar a la derecha o continuar de frente."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T500911.jpg"
    },
    {
        "text": "Al averiarse el vehículo que conduce dentro de un túnel debe...",
        "options": [
            "esperar dentro del túnel y no abandonar el vehículo en ningún caso.",
            "solicitar el auxilio de otros conductores llegando a ordenar su detención si es preciso.",
            "abandonar el vehículo dentro del túnel y dirigirse al refugio o salida más próximos."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T500912.jpg"
    },
    {
        "text": "Fumar durante la conducción...",
        "options": [
            "proporciona tranquilidad.",
            "está prohibido.",
            "puede disminuir el nivel de atención."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T500913.jpg"
    },
    {
        "text": "El aquaplaning produce...",
        "options": [
            "una pérdida de visibilidad en caso de lluvia.",
            "un aumento de adherencia en caso de lluvia.",
            "una pérdida de adherencia en caso de lluvia."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T500916.jpg"
    },
    {
        "text": "Encender el intermitente, ¿da preferencia siempre para hacer maniobras?",
        "options": [
            "Sí, pero debo hacer la maniobra rápidamente.",
            "No.",
            "Sí, porque he avisado."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T500914.jpg"
    },
    {
        "text": "¿Qué indica esta señal?",
        "options": [
            "Entrada prohibida a motocicletas.",
            "Entrada prohibida a ciclomotores.",
            "Entrada prohibida a vehículos de dos ruedas."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T500915.jpg"
    },
    {
        "text": "¿Cómo se podrían haber evitado algunos esguinces cervicales severos provocados por los accidentes de tráfico?",
        "options": [
            "Evitando el efecto submarino.",
            "Regulando, adecuadamente el reposacabezas.",
            "Mediante la colocación de airbags de cortina."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T507726.jpg"
    },
    {
        "text": "Si circula en esta vía con tráfico denso, no puede cambiar de carril para...",
        "options": [
            "salir de la calzada.",
            "adelantar.",
            "girar a la derecha."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T500918.jpg"
    },
    {
        "text": "¿Puede estacionar una motocicleta en la acera?",
        "options": [
            "No.",
            "Sí, si no estorba a la circulación de peatones.",
            "Sí, si se deja convenientemente atada a elementos de mobiliario urbano."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T10103_050716.jpg"
    },
    {
        "text": "Para pagar en un puesto de peaje, debe pasar...",
        "options": [
            "por el carril que indica la flecha verde.",
            "por cualquier carril, indistintamente.",
            "por el carril que indica el aspa roja."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P0220.jpg"
    },
    {
        "text": "Las enfermedades y los medicamentos, ¿pueden ser causa de un accidente?",
        "options": [
            "No, porque depende de otros factores.",
            "Sí, porque pueden afectar a las capacidades básicas para conducir.",
            "No, en ningún caso."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T500920.jpg"
    },
    {
        "text": "En condiciones de niebla espesa, deberá...",
        "options": [
            "reducir la velocidad.",
            "circular sólo con la luz antiniebla delantera encendida.",
            "circular por el arcén."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T500922.jpg"
    },
    {
        "text": "El estilo de conducción de una motocicleta, ¿puede influir en el consumo de combustible?",
        "options": [
            "No, si se adopta una postura aerodinámica.",
            "No, sólo depende de la cilindrada de la motocicleta.",
            "Sí."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T500924.jpg"
    },
    {
        "text": "Esta señal indica la situación de un...",
        "options": [
            "albergue de juventud.",
            "merendero fuera de la vía de servicio.",
            "área de descanso."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T500923.jpg"
    },
    {
        "text": "La tasa de alcohol máxima para un conductor de autobús es de...",
        "options": [
            "0,15 miligramos por litro de aire espirado.",
            "0,25 miligramos por litro de aire espirado.",
            "0,40 miligramos por litro de aire espirado."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T510109_050417.jpg"
    },
    {
        "text": "En el caso de que el camión no pueda ceñirse al borde derecho de la calzada, ¿cómo indicará su conductor que puede ser adelantado con seguridad?",
        "options": [
            "Moviendo el brazo extendido de atrás hacia adelante.",
            "Con el intermitente izquierdo.",
            "Reduciendo bruscamente la marcha."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T500926.jpg"
    },
    {
        "text": "Entre los momentos de peligro en el uso del teléfono móvil se encuentran...",
        "options": [
            "recibir una llamada y detenerse en un lugar seguro para hablar.",
            "colgar y guardar el móvil.",
            "no utilizar el teléfono móvil."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T500927.jpg"
    },
    {
        "text": "Las materias que produzcan polvo o puedan caer, es obligatorio transportarlas...",
        "options": [
            "cubriéndolas total y eficazmente.",
            "en vehículos totalmente cerrados.",
            "en contenedores de pequeño tamaño."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T500929.jpg"
    },
    {
        "text": "El consumo de combustible puede incrementarse cuando...",
        "options": [
            "los neumáticos carecen de dibujo.",
            "el vehículo va muy cargado.",
            "las ventanillas del vehículo están subidas."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T510122_050217.jpg"
    },
    {
        "text": "En un paso a nivel, ¿está permitido realizar un cambio de sentido?",
        "options": [
            "No.",
            "Sí, cuando las barreras no estén en movimiento.",
            "Sí, en los pasos a nivel sin barrera."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T500928.jpg"
    }
]
            
            ;

            const container = document.getElementById('test-container');
            const paginationRow1 = document.getElementById('pagination-row-1');
            const paginationRow2 = document.getElementById('pagination-row-2');

            // Generar preguntas
            questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.setAttribute('data-correct', question.correct);
                questionDiv.innerHTML = `
                    <div class="question-image">
                        <img src="${question.image}" alt="Imagen de la pregunta">
                    </div>
                    <div class="question-content">
                        <h3>${index + 1}. ${question.text}</h3>
                        <div class="options">
                            ${question.options.map((option, idx) => `
                                <div class="option" data-answer="${String.fromCharCode(65 + idx)}">
                                    <span class="option-circle">${String.fromCharCode(65 + idx)}</span>
                                    ${option}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                container.appendChild(questionDiv);
            });

            // Generar paginación
            for (let i = 0; i < questions.length; i++) {
                const button = document.createElement('button');
                button.textContent = `${i + 1}`;
                button.addEventListener('click', () => showQuestion(i));
                if (i < 15) {
                    paginationRow1.appendChild(button);
                } else {
                    paginationRow2.appendChild(button);
                }
            }

            // Mostrar la primera pregunta
            showQuestion(0);

            // Función para mostrar una pregunta específica
            function showQuestion(index) {
                document.querySelectorAll('.question').forEach((q, i) => {
                    q.style.display = i === index ? 'flex' : 'none';
                });
                document.querySelectorAll('.pagination button').forEach((btn, i) => {
                    btn.style.backgroundColor = i === index ? '#ff7aa2' : '#ffa5c3';
                });
            }

            // Evento para las opciones de respuesta
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const question = this.closest('.question');
                    const questionIndex = Array.from(container.children).indexOf(question);
                    const isCorrect = this.getAttribute('data-answer') === question.getAttribute('data-correct');
                    
                    if (question.dataset.answered) return;

                    question.dataset.answered = true;

                    question.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                        opt.style.pointerEvents = 'none';
                    });
                    
                    this.classList.add('selected', isCorrect ? 'correct' : 'incorrect');

                    if (!isCorrect) {
                        question.querySelector(`.option[data-answer="${question.getAttribute('data-correct')}"]`).classList.add('correct');
                    }

                    // Actualizar el botón de paginación
                    const paginationButton = questionIndex < 15 ? paginationRow1.children[questionIndex] : paginationRow2.children[questionIndex - 15];
                    paginationButton.classList.add(isCorrect ? 'correct' : 'incorrect');
                });
            });

            // Evento para corregir el test
            document.getElementById('correct-test').addEventListener('click', () => {
                let wrongAnswers = 0;
                document.querySelectorAll('.question').forEach((question, index) => {
                    const selected = question.querySelector('.option.selected');
                    const isCorrect = selected && selected.getAttribute('data-answer') === question.getAttribute('data-correct');
                    if (!isCorrect) {
                        wrongAnswers++;
                    }
                    // Actualizar el botón de paginación si no se ha respondido
                    if (!selected) {
                        const paginationButton = index < 15 ? paginationRow1.children[index] : paginationRow2.children[index - 15];
                        paginationButton.classList.add('incorrect');
                    }
                });
                const resultMessage = `Has fallado ${wrongAnswers} respuestas.`;

                const alert = document.getElementById('custom-alert');
                document.getElementById('alert-message').textContent = resultMessage;
                alert.style.display = 'block';
            });
        });

        function closeAlert() {
            document.getElementById('custom-alert').style.display = 'none';
        }
    </script>

    
</body>
</html>