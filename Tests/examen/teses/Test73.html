<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Autoescuela</title>
    <link rel="stylesheet" href="../../../Assets/style.css">
</head>
<body>

    
    <div class="container">
        <h1 style="text-align: center; color: #ffa5c3;">Test de Autoescuela</h1>
        <div id="test-container">
            <!-- Aquí se generarán dinámicamente las preguntas -->
        </div>
        <div class="pagination">
            <div class="pagination-row" id="pagination-row-1"></div>
            <div class="pagination-row" id="pagination-row-2"></div>
        </div>
        <button id="correct-test">Corregir Test</button>
    </div>

    <!-- Custom Alert HTML -->
    <div class="custom-alert" id="custom-alert">
        <h2>Resultado del Test</h2>
        <p id="alert-message">Aquí irá el mensaje del resultado.</p>
        <button onclick="closeAlert()">Cerrar</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const questions = [
    {
        "text": "Un conductor que acaba de obtener su primer permiso de conducción no podrá superar la tasa de alcohol de…...",
        "options": [
            "0,30 miligramos de alcohol por litro de aire espirado.",
            "0,25 miligramos de alcohol por litro de aire espirado.",
            "0,15 miligramos de alcohol por litro de aire espirado."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T502301.jpg"
    },
    {
        "text": "Esta señal indica dirección y sentido...",
        "options": [
            "obligatorios.",
            "aconsejados.",
            "prohibidos."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T502302.jpg"
    },
    {
        "text": "Si tiene que circular con su motocicleta por una zona especialmente deslizante, ¿qué precauciones debe tomar?",
        "options": [
            "Frenar en la zona para controlar la trayectoria.",
            "Disminuir la velocidad antes de llegar y mantener la motocicleta vertical al pasar sobre ella.",
            "Acelerar para pasar por la zona en el menor tiempo posible."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T502303.jpg"
    },
    {
        "text": "En la conducción, los espejos retrovisores permiten observar...",
        "options": [
            "únicamente lo que se aproxima al vehículo por los laterales.",
            "en todo momento lo que está alrededor del vehículo.",
            "únicamente lo que está detrás del vehículo."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T502304.jpg"
    },
    {
        "text": "Se debe dejar una separación lateral mínima de 1,50 metros cuando se adelante fuera de poblado...",
        "options": [
            "a peatones, animales o a vehículos de dos ruedas o de tracción animal.",
            "a cualquier tipo de vehículo.",
            "a vehículos de dos ruedas o a vehículos pesados."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T510101_150217.jpg"
    },
    {
        "text": "¿Dónde sufren los peatones más accidentes?",
        "options": [
            "En las ciudades.",
            "En las vías interurbanas.",
            "Tanto en poblado como fuera de poblado la cantidad de accidentes es igual."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T502306.jpg"
    },
    {
        "text": "¿Para qué sirve el sistema de suspensión?",
        "options": [
            "Para amortiguar las vibraciones y mantener la estabilidad del vehículo.",
            "Para no patinar.",
            "Para mover las ruedas."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T502307.jpg"
    },
    {
        "text": "Si la caída de la carga supone un obstáculo para la circulación, debe...",
        "options": [
            "avisar en primer lugar a las autoridades para que ordenen retirarla.",
            "señalizarla, como única medida.",
            "señalizarla e intentar retirarla lo antes posible."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T502308.jpg"
    },
    {
        "text": "¿Qué debe hacer si durante la marcha su vehículo no puede alcanzar la velocidad mínima exigida y existe peligro de alcance?",
        "options": [
            "Utilizar la señal de emergencia.",
            "Realizar destellos con las luces de largo alcance.",
            "Pisar de forma intermitente el freno para advertir con las luces de frenado que va a reducir la marcha."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T502309.jpg"
    },
    {
        "text": "En esta vía urbana, ¿está permitido adelantar por la derecha?",
        "options": [
            "No, se debe adelantar por la izquierda.",
            "Sí, porque la vía cuenta con dos carriles delimitados en el mismo sentido de la marcha.",
            "No, porque se puede entorpecer la marcha de otros vehículos."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T502310.jpg"
    },
    {
        "text": "Una vez abrochado el cinturón de seguridad, debe...",
        "options": [
            "colocar una pinza para ajustarlo.",
            "comprobar que está bien colocado y ajustado al cuerpo.",
            "aflojar la zona abdominal para mayor comodidad."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T502311.jpg"
    },
    {
        "text": "En un túnel con más de un carril en el sentido de la marcha, ¿está permitido adelantar?",
        "options": [
            "No, en los túneles no está permitido adelantar.",
            "Sí.",
            "Sí, pero sólo a camiones y autobuses."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T502312.jpg"
    },
    {
        "text": "Un camión que tiene una MMA de 2.500 kg y una antigüedad de 7 años tendrá que pasar la ITV...",
        "options": [
            "cada 6 meses.",
            "cada año.",
            "cada dos años."
        ],
        "correct": "B",
        "image": "../../../Assets/img/C701904.jpg"
    },
    {
        "text": "Una parada obstaculiza gravemente la circulación cuando...",
        "options": [
            "se efectúa en una parada de transporte público señalizada y delimitada.",
            "se efectúa en doble fila.",
            "obstaculiza el acceso normal a un inmueble de personas o animales."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T504513.jpg"
    },
    {
        "text": "Bajo los efectos del alcohol, la distancia de detención...",
        "options": [
            "no se ve afectada.",
            "disminuye.",
            "aumenta."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T502315.jpg"
    },
    {
        "text": "El panel colocado debajo de la señal vertical...",
        "options": [
            "es complementario de la señal vertical, e indica niebla.",
            "advierte de la presencia de una señalización.",
            "advierte al conductor de condiciones adversas como nieve, niebla o lluvia."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T502316.jpg"
    },
    {
        "text": "En esta vía urbana, para advertir al conductor del vehículo rojo su intención de adelantarle, ¿puede usar las señales acústicas?",
        "options": [
            "Sí, excepto cuando hay una señal que lo prohíbe.",
            "Sí, pero solamente en caso de avería de las luces de mi vehículo.",
            "No, porque está prohibido."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T505018.jpg"
    },
    {
        "text": "Sobre los railes de tranvía, ¿qué está prohibido?",
        "options": [
            "Parar y estacionar.",
            "Estacionar, solamente.",
            "Circular."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T502318.jpg"
    },
    {
        "text": "En una caída conduciendo un vehículo de dos ruedas, el casco...",
        "options": [
            "evita la abrasión de la cara y la cabeza al arrastrar por el pavimento.",
            "reduce las lesiones lumbares.",
            "protege de golpes articulares."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T502319.jpg"
    },
    {
        "text": "Este conjunto de marcas blancas pintadas en la calzada...",
        "options": [
            "indica un paso para peatones.",
            "obliga al vehículo a detenerse siempre.",
            "indica que ningún conductor puede entrar con su vehículo o animal en esta zona."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T510119_150216.jpg"
    },
    {
        "text": "Un vehículo tiene airbag. ¿Es obligatorio ponerse el cinturón de seguridad?",
        "options": [
            "No, porque el airbag sustituye al cinturón.",
            "Es aconsejable, pero no es obligatorio.",
            "Sí, porque mejora la eficacia del airbag."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T502321.jpg"
    },
    {
        "text": "En un turismo, ¿qué marchas alcanzan mayor velocidad?",
        "options": [
            "La 1ª y la 2ª.",
            "La 3º y la 4ª.",
            "La 4ª y la 5ª."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T502322.jpg"
    },
    {
        "text": "¿Le está permitido el acceso a un vehículo de motor que disponga del distintivo ambiental C a una zona de bajas emisiones delimitada por estas señales?",
        "options": [
            "No, como norma general.",
            "Solo si el vehículo de motor es una motocicleta.",
            "Sí."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T510117_150623.jpg"
    },
    {
        "text": "Un herido tiene quemaduras. ¿Qué debe hacer?",
        "options": [
            "Limpiar la herida.",
            "Tapar la quemadura con gasas húmedas.",
            "Quitarle la ropa pegada a la quemadura."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T502324.jpg"
    },
    {
        "text": "Un vehículo de una o más ruedas dotado de una única plaza y propulsado exclusivamente por motores eléctricos que pueden proporcionar al vehículo una velocidad máxima por diseño comprendida entre los 6 y los 25 km/h es:",
        "options": [
            "un cuadriciclo ligero.",
            "un vehículo de movilidad personal.",
            "un vehículo de tres ruedas."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T514926.jpg"
    },
    {
        "text": "¿Qué efectos tiene en la conducción una conversación por el móvil que supera el minuto y medio?",
        "options": [
            "El conductor no deja de percibir las señales si usa el dispositivo de manos libres.",
            "El conductor deja de percibir una parte importante de las señales, incluso con el dispositivo de manos libres.",
            "La velocidad media aumenta, incluso con el dispositivo de manos libres."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T502326.jpg"
    },
    {
        "text": "Al adelantar al ciclista que aparece en la fotografía, ¿es obligatorio invadir el carril de sentido contrario de la calzada?",
        "options": [
            "No.",
            "No, porque está prohibido adelantar a los ciclistas.",
            "Sí."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T502327.jpg"
    },
    {
        "text": "El apoyacabezas, ¿es necesario regularlo?",
        "options": [
            "No, ya viene regulado de fábrica.",
            "Sí, tanto en los asientos delanteros como en los traseros.",
            "No, porque es un elemento fijo."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T502328.jpg"
    },
    {
        "text": "Fumar mientras se conduce...",
        "options": [
            "no es recomendable, porque puede afectar a la atención en la conducción.",
            "es recomendable, porque ayuda a mantener la atención.",
            "está prohibido."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P2323.jpg"
    },
    {
        "text": "Esta señal...",
        "options": [
            "prohíbe el estacionamiento en el lado de la calzada en que esté situada la señal.",
            "prohíbe el estacionamiento los días pares.",
            "prohíbe la parada y el estacionamiento."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T502330.jpg"
    }
]
            
            ;

            const container = document.getElementById('test-container');
            const paginationRow1 = document.getElementById('pagination-row-1');
            const paginationRow2 = document.getElementById('pagination-row-2');

            // Generar preguntas
            questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.setAttribute('data-correct', question.correct);
                questionDiv.innerHTML = `
                    <div class="question-image">
                        <img src="${question.image}" alt="Imagen de la pregunta">
                    </div>
                    <div class="question-content">
                        <h3>${index + 1}. ${question.text}</h3>
                        <div class="options">
                            ${question.options.map((option, idx) => `
                                <div class="option" data-answer="${String.fromCharCode(65 + idx)}">
                                    <span class="option-circle">${String.fromCharCode(65 + idx)}</span>
                                    ${option}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                container.appendChild(questionDiv);
            });

            // Generar paginación
            for (let i = 0; i < questions.length; i++) {
                const button = document.createElement('button');
                button.textContent = `${i + 1}`;
                button.addEventListener('click', () => showQuestion(i));
                if (i < 15) {
                    paginationRow1.appendChild(button);
                } else {
                    paginationRow2.appendChild(button);
                }
            }

            // Mostrar la primera pregunta
            showQuestion(0);

            // Función para mostrar una pregunta específica
            function showQuestion(index) {
                document.querySelectorAll('.question').forEach((q, i) => {
                    q.style.display = i === index ? 'flex' : 'none';
                });
                document.querySelectorAll('.pagination button').forEach((btn, i) => {
                    btn.style.backgroundColor = i === index ? '#ff7aa2' : '#ffa5c3';
                });
            }

            // Evento para las opciones de respuesta
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const question = this.closest('.question');
                    const questionIndex = Array.from(container.children).indexOf(question);
                    const isCorrect = this.getAttribute('data-answer') === question.getAttribute('data-correct');
                    
                    if (question.dataset.answered) return;

                    question.dataset.answered = true;

                    question.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                        opt.style.pointerEvents = 'none';
                    });
                    
                    this.classList.add('selected', isCorrect ? 'correct' : 'incorrect');

                    if (!isCorrect) {
                        question.querySelector(`.option[data-answer="${question.getAttribute('data-correct')}"]`).classList.add('correct');
                    }

                    // Actualizar el botón de paginación
                    const paginationButton = questionIndex < 15 ? paginationRow1.children[questionIndex] : paginationRow2.children[questionIndex - 15];
                    paginationButton.classList.add(isCorrect ? 'correct' : 'incorrect');
                });
            });

            // Evento para corregir el test
            document.getElementById('correct-test').addEventListener('click', () => {
                let wrongAnswers = 0;
                document.querySelectorAll('.question').forEach((question, index) => {
                    const selected = question.querySelector('.option.selected');
                    const isCorrect = selected && selected.getAttribute('data-answer') === question.getAttribute('data-correct');
                    if (!isCorrect) {
                        wrongAnswers++;
                    }
                    // Actualizar el botón de paginación si no se ha respondido
                    if (!selected) {
                        const paginationButton = index < 15 ? paginationRow1.children[index] : paginationRow2.children[index - 15];
                        paginationButton.classList.add('incorrect');
                    }
                });
                const resultMessage = `Has fallado ${wrongAnswers} respuestas.`;

                const alert = document.getElementById('custom-alert');
                document.getElementById('alert-message').textContent = resultMessage;
                alert.style.display = 'block';
            });
        });

        function closeAlert() {
            document.getElementById('custom-alert').style.display = 'none';
        }
    </script>

    
</body>
</html>