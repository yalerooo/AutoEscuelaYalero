<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Autoescuela</title>
    <link rel="stylesheet" href="../../../Assets/style.css">
</head>
<body>

    
    <div class="container">
        <h1 style="text-align: center; color: #ffa5c3;">Test de Autoescuela</h1>
        <div id="test-container">
            <!-- Aquí se generarán dinámicamente las preguntas -->
        </div>
        <div class="pagination">
            <div class="pagination-row" id="pagination-row-1"></div>
            <div class="pagination-row" id="pagination-row-2"></div>
        </div>
        <button id="correct-test">Corregir Test</button>
    </div>

    <!-- Custom Alert HTML -->
    <div class="custom-alert" id="custom-alert">
        <h2>Resultado del Test</h2>
        <p id="alert-message">Aquí irá el mensaje del resultado.</p>
        <button onclick="closeAlert()">Cerrar</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const questions = [
    {
        "text": "El efecto submarino se produce especialmente por...",
        "options": [
            "una incorrecta presión de los neumáticos.",
            "un mal uso del cinturón o del asiento del vehículo.",
            "el consumo de alcohol y drogas."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T502001.jpg"
    },
    {
        "text": "En la próxima intersección, ¿qué dirección hay que seguir?",
        "options": [
            "Girar a la derecha.",
            "Continuar de frente.",
            "Girar a la izquierda."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T502002.jpg"
    },
    {
        "text": "Se prohíbe circular por autopistas a los...",
        "options": [
            "vehículos que transporten mercancías peligrosas.",
            "vehículos con remolque.",
            "vehículos que no sean capaces de alcanzar en llano 60 km/h."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T502003.jpg"
    },
    {
        "text": "Un turismo con remolque, ¿es obligatorio que lleve una rueda de repuesto del remolque?",
        "options": [
            "No.",
            "Sí, cuando el remolque no es ligero.",
            "Sí."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T502004.jpg"
    },
    {
        "text": "Durante el día, ¿cuándo debe llevar las luces de cruce encendidas una motocicleta?",
        "options": [
            "Sólo cuando circule de noche o en condiciones meteorológicas adversas.",
            "Cuando circule por cualquier vía pública.",
            "Cuando circule por túneles y tramos de vía afectados por la señal de túnel, únicamente."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T502005.jpg"
    },
    {
        "text": "En un tramo de la vía muy estrecho sin señalizar en el que sea imposible el paso simultáneo de dos vehículos, tendrá preferencia...",
        "options": [
            "el que tenga más dificultades de maniobra.",
            "el que tenga que retroceder mayor distancia.",
            "el que haya entrado primero en el estrechamiento."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T502006.jpg"
    },
    {
        "text": "Si se consume alcohol, ¿cuándo aumenta el riesgo de accidente?",
        "options": [
            "Cuando se ha superado el límite legal de alcoholemia.",
            "Antes de superar el límite legal.",
            "El riesgo no depende de la cantidad consumida."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T502007.jpg"
    },
    {
        "text": "Todo conductor de un vehículo que circule detrás de otro está obligado a dejar entre ambos, como mínimo...",
        "options": [
            "un espacio libre que le permita detenerse, en caso de frenado brusco, sin colisionar con él.",
            "una distancia de 50 metros.",
            "una distancia que permita a los vehículos que le sigan adelantarlo con seguridad."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T502008.jpg"
    },
    {
        "text": "Usar el teléfono móvil mientras se conduce, ¿puede ser peligroso?",
        "options": [
            "No, cuando la conversación dura poco tiempo.",
            "No, cuando se utiliza un dispositivo de manos libres.",
            "Sí, porque disminuye la atención necesaria para conducir."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T502009.jpg"
    },
    {
        "text": "Si un conductor novel presenta una tasa del alcohol en aire espirado de 0,20 miligramos por litro, el agente de tráfico, ¿le realizará una segunda prueba de alcoholemia?",
        "options": [
            "No; para ello debe tener una tasa superior a 0,25 miligramos por litro.",
            "Solo si está implicado directamente en un accidente de circulación.",
            "Sí, para una mayor garantía y a efectos de contraste."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T505618.jpg"
    },
    {
        "text": "Fumar al volante, ¿cómo afecta a la conducción?",
        "options": [
            "Provoca somnolencia.",
            "Inutiliza una de las manos y genera problemas de visión a causa del humo.",
            "Aumenta la capacidad de atención."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T510118_150216.jpg"
    },
    {
        "text": "Si no existe espacio reservado para peatones, las personas que van en silla de ruedas, ¿podrán desplazarse por el arcén?",
        "options": [
            "No.",
            "Sí.",
            "Solo en vías urbanas."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T501330.jpg"
    },
    {
        "text": "En un tramo de vía con la señal \"túnel\", ¿está permitido hacer un cambio de sentido?",
        "options": [
            "No.",
            "Sí."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T502013.jpg"
    },
    {
        "text": "Para incorporarse a la circulación, ¿está permitido circular marcha atrás más de quince metros?",
        "options": [
            "Sí, en cualquier caso.",
            "No.",
            "Sí, siempre que no se invada un cruce de vías."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T502014.jpg"
    },
    {
        "text": "Colocar una sillita para niños en un asiento con airbag frontal, ¿es correcto?",
        "options": [
            "Sólo cuando el airbag se ha desconectado previamente.",
            "No, es algo que nunca debe hacerse.",
            "Sí, para proteger al niño en caso de impacto frontal."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T502015.jpg"
    },
    {
        "text": "Si la velocidad máxima que alcanza una motocicleta es inferior a 100 kilómetros por hora, ¿cuántos retrovisores debe llevar?",
        "options": [
            "Uno obligatorio en el lado derecho y opcionalmente otro en el lado izquierdo.",
            "Dos, uno a cada lado de la motocicleta.",
            "Uno obligatorio en el lado izquierdo, y opcionalmente otro en el lado derecho."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T502016.jpg"
    },
    {
        "text": "¿Puede el conductor de una bicicleta transportar un pasajero?",
        "options": [
            "No, está prohibido.",
            "Sí, sentado entre el conductor y el manillar.",
            "Sí, a un menor de hasta siete años siempre que lo haga en un asiento adicional homologado."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T502017.jpg"
    },
    {
        "text": "Al circular por una carretera con pavimento deslizante por lluvia, ¿debe moderarse la velocidad?",
        "options": [
            "Sí, siempre.",
            "No, cuando haya poco tráfico.",
            "Solamente al cruzarse con otro vehículo que circula de frente."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T502018.jpg"
    },
    {
        "text": "Bajo los efectos del sueño...",
        "options": [
            "puede aparecer la fatiga ocular.",
            "es más difícil sufrir un deslumbramiento.",
            "es más fácil reaccionar ante una situación de peligro."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T502019.jpg"
    },
    {
        "text": "Si el conductor de un vehículo va a desplazarse lateralmente invadiendo otro carril...",
        "options": [
            "debe respetar la prioridad de los vehículos que circulan por el carril y no cortarles el paso.",
            "dispone de la prioridad sobre los vehículos que circulan por el otro carril.",
            "tendrá prioridad sobre otros vehículos si existe carril de aceleración."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T502020.jpg"
    },
    {
        "text": "Conduciendo una motocicleta, ¿está permitido llevar el casco desabrochado?",
        "options": [
            "No, en ningún caso.",
            "Únicamente en vías urbanas, si la velocidad es inferior a 40 km/h.",
            "Sí, cuando sea un casco integral."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T502021.jpg"
    },
    {
        "text": "Para ahorrar carburante, ¿qué debe hacer?",
        "options": [
            "Circular a 90 kilómetros por hora, siempre.",
            "Adaptar las marchas a las necesidades del vehículo.",
            "Circular con marchas cortas."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T502022.jpg"
    },
    {
        "text": "En un carril reservado para uso exclusivo del transporte público urbano fuera del horario de servicio, ¿se puede estacionar?",
        "options": [
            "Sí, parar y estacionar.",
            "No.",
            "Sí, si conocemos perfectamente el horario de la línea de autobuses."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T502023.jpg"
    },
    {
        "text": "¿Está permitido adelantar en el interior de un túnel?",
        "options": [
            "No.",
            "Sí, si hay más de un carril en el mismo sentido de la marcha.",
            "Sí, cuando los sentidos están separados."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T502024.jpg"
    },
    {
        "text": "¿Debe un vehículo de movilidad personal llevar catadióptricos?",
        "options": [
            "No.",
            "Sí, un catadióptrico frontal blanco, en ambos laterales de color blanco o amarillo auto y uno trasero de color rojo.",
            "Sí, uno trasero de color blanco."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T510101_050124.jpg"
    },
    {
        "text": "Los vehículos prioritarios, ¿tienen prioridad de paso sobre el resto de los usuarios de la vía?",
        "options": [
            "Sí.",
            "No.",
            "Sólo cuando circulen en servicio de urgencia."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T514727.jpg"
    },
    {
        "text": "Uno de los efectos que algunas drogas pueden producir en el conductor es...",
        "options": [
            "la ampliación del campo visual.",
            "la disminución de la distancia de detención.",
            "la incorrecta percepción del tiempo y del espacio."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P2522.jpg"
    },
    {
        "text": "Hay mucha niebla. ¿Qué luces deben llevar encendidas los vehículos?",
        "options": [
            "Las luces antiniebla junto con las luces cortas.",
            "Las luces antiniebla junto con las luces de emergencia.",
            "Las luces de posición solamente"
        ],
        "correct": "A",
        "image": "../../../Assets/img/T502028.jpg"
    },
    {
        "text": "Para conducir con más seguridad, es necesario...",
        "options": [
            "circular a una velocidad adecuada que se adapte a las circunstancias.",
            "instalar más dispositivos de seguridad, como los airbags.",
            "reducir la velocidad por debajo de la mínima genérica."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T502029.jpg"
    },
    {
        "text": "¿Está permitido arrojar objetos peligrosos a la vía?",
        "options": [
            "Sí, salvo que puedan provocar daños materiales a otros usuarios.",
            "Sí, excepto que puedan dañar el entorno.",
            "No, los que puedan producir incendios o poner en peligro la seguridad vial."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T502030.jpg"
    }
]
            
            ;

            const container = document.getElementById('test-container');
            const paginationRow1 = document.getElementById('pagination-row-1');
            const paginationRow2 = document.getElementById('pagination-row-2');

            // Generar preguntas
            questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.setAttribute('data-correct', question.correct);
                questionDiv.innerHTML = `
                    <div class="question-image">
                        <img src="${question.image}" alt="Imagen de la pregunta">
                    </div>
                    <div class="question-content">
                        <h3>${index + 1}. ${question.text}</h3>
                        <div class="options">
                            ${question.options.map((option, idx) => `
                                <div class="option" data-answer="${String.fromCharCode(65 + idx)}">
                                    <span class="option-circle">${String.fromCharCode(65 + idx)}</span>
                                    ${option}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                container.appendChild(questionDiv);
            });

            // Generar paginación
            for (let i = 0; i < questions.length; i++) {
                const button = document.createElement('button');
                button.textContent = `${i + 1}`;
                button.addEventListener('click', () => showQuestion(i));
                if (i < 15) {
                    paginationRow1.appendChild(button);
                } else {
                    paginationRow2.appendChild(button);
                }
            }

            // Mostrar la primera pregunta
            showQuestion(0);

            // Función para mostrar una pregunta específica
            function showQuestion(index) {
                document.querySelectorAll('.question').forEach((q, i) => {
                    q.style.display = i === index ? 'flex' : 'none';
                });
                document.querySelectorAll('.pagination button').forEach((btn, i) => {
                    btn.style.backgroundColor = i === index ? '#ff7aa2' : '#ffa5c3';
                });
            }

            // Evento para las opciones de respuesta
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const question = this.closest('.question');
                    const questionIndex = Array.from(container.children).indexOf(question);
                    const isCorrect = this.getAttribute('data-answer') === question.getAttribute('data-correct');
                    
                    if (question.dataset.answered) return;

                    question.dataset.answered = true;

                    question.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                        opt.style.pointerEvents = 'none';
                    });
                    
                    this.classList.add('selected', isCorrect ? 'correct' : 'incorrect');

                    if (!isCorrect) {
                        question.querySelector(`.option[data-answer="${question.getAttribute('data-correct')}"]`).classList.add('correct');
                    }

                    // Actualizar el botón de paginación
                    const paginationButton = questionIndex < 15 ? paginationRow1.children[questionIndex] : paginationRow2.children[questionIndex - 15];
                    paginationButton.classList.add(isCorrect ? 'correct' : 'incorrect');
                });
            });

            // Evento para corregir el test
            document.getElementById('correct-test').addEventListener('click', () => {
                let wrongAnswers = 0;
                document.querySelectorAll('.question').forEach((question, index) => {
                    const selected = question.querySelector('.option.selected');
                    const isCorrect = selected && selected.getAttribute('data-answer') === question.getAttribute('data-correct');
                    if (!isCorrect) {
                        wrongAnswers++;
                    }
                    // Actualizar el botón de paginación si no se ha respondido
                    if (!selected) {
                        const paginationButton = index < 15 ? paginationRow1.children[index] : paginationRow2.children[index - 15];
                        paginationButton.classList.add('incorrect');
                    }
                });
                const resultMessage = `Has fallado ${wrongAnswers} respuestas.`;

                const alert = document.getElementById('custom-alert');
                document.getElementById('alert-message').textContent = resultMessage;
                alert.style.display = 'block';
            });
        });

        function closeAlert() {
            document.getElementById('custom-alert').style.display = 'none';
        }
    </script>

    
</body>
</html>