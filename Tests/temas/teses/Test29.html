<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Autoescuela</title>
    <link rel="stylesheet" href="../../../Assets/style.css">
</head>
<body>

    
    <div class="container">
        <h1 style="text-align: center; color: #ffa5c3;">Test de Autoescuela</h1>
        <div id="test-container">
            <!-- Aquí se generarán dinámicamente las preguntas -->
        </div>
        <div class="pagination">
            <div class="pagination-row" id="pagination-row-1"></div>
            <div class="pagination-row" id="pagination-row-2"></div>
        </div>
        <button id="correct-test">Corregir Test</button>
    </div>

    <!-- Custom Alert HTML -->
    <div class="custom-alert" id="custom-alert">
        <h2>Resultado del Test</h2>
        <p id="alert-message">Aquí irá el mensaje del resultado.</p>
        <button onclick="closeAlert()">Cerrar</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const questions = [
    {
        "text": "¿Cuál de las siguientes señales indica peligro?",
        "options": [
            "A.",
            "B.",
            "C."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T511201.jpg"
    },
    {
        "text": "Esta señal indica que se acerca a un cruce...",
        "options": [
            "con preferencia de paso.",
            "con un vía estrecha.",
            "sin preferencia de paso."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T511415.jpg"
    },
    {
        "text": "Esta señal indica...",
        "options": [
            "peligro por la proximidad de una intersección con prioridad sobre la vía a la izquierda.",
            "prohibido girar a la izquierda, debiendo continuar de frente.",
            "la existencia a la izquierda de una vía sin salida."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P1402.jpg"
    },
    {
        "text": "A la vista de esta señal, ¿debe facilitar la incorporación de los vehículos que se incorporen por la derecha?",
        "options": [
            "No, nunca, ya que le otorga la prioridad.",
            "Sí, en la medida de lo posible.",
            "Sólo si se trata de vehículos de transporte colectivo de viajeros."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P1404.jpg"
    },
    {
        "text": "¿Qué indica la señal?",
        "options": [
            "Un paso a nivel con barreras.",
            "Un cruce donde tienen preferencia los que entran por la derecha.",
            "Una intersección con cuatro o más vías."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P1405.jpg"
    },
    {
        "text": "Esta señal indica...",
        "options": [
            "peligro por la proximidad de un semáforo averiado.",
            "peligro por la proximidad de un tramo de la vía con la circulación regulada por semáforos.",
            "peligro por la proximidad de una salida de vehículos de extinción de incendios."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T513929.jpg"
    },
    {
        "text": "La señal indica peligro por...",
        "options": [
            "una intersección con cambio obligatorio del sentido de la marcha.",
            "una intersección con prioridad.",
            "la proximidad de una intersección donde la circulación es giratoria."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P1407.jpg"
    },
    {
        "text": "Esta señal...",
        "options": [
            "indica peligro por la proximidad de un paso a nivel sin barreras.",
            "indica peligro por la proximidad de un cruce con una línea de tranvía, que tiene prioridad de paso.",
            "indica peligro por la proximidad de un cruce con una línea de tranvía, teniendo preferencia el vehículo que se acerque por el lado derecho."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T514601.jpg"
    },
    {
        "text": "¿Qué significado tiene esta señal?",
        "options": [
            "Peligro por la proximidad de un cruce con una línea de tranvía.",
            "Peligro por la proximidad de un paso a nivel sin barreras de más de una vía férrea.",
            "Peligro por la proximidad de un paso a nivel provisto de barreras o semibarreras."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T510101_150116.jpg"
    },
    {
        "text": "Esta señal advierte del peligro por...",
        "options": [
            "cruce de tranvía.",
            "parada de vehículos que circulan sin raíles.",
            "situación de un paso a nivel sin barreras."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T504915.jpg"
    },
    {
        "text": "Esta señal indica peligro ante la proximidad...",
        "options": [
            "de un puente móvil.",
            "de un resalto o badén en el pavimento.",
            "de un muelle."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P1410.jpg"
    },
    {
        "text": "¿Qué significa la señal que se observa en la fotografía?",
        "options": [
            "Muelle.",
            "Puente móvil.",
            "Escalón lateral."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P1411.jpg"
    },
    {
        "text": "Estas señales que hacen referencia a un paso a nivel indican:",
        "options": [
            "Proximidad.",
            "Aproximación.",
            "Cercanía."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T511114.jpg"
    },
    {
        "text": "¿Qué indica esta señal?",
        "options": [
            "Una vía cortada al tráfico.",
            "Paso a nivel sin barreras.",
            "Paso a nivel con barreras."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P1412.jpg"
    },
    {
        "text": "Esta señal de peligro, ¿qué indica?",
        "options": [
            "Paso a nivel con barreras con más de una vía férrea.",
            "Paso a nivel sin barreras con más de una vía férrea.",
            "Paso a nivel con barreras de una vía férrea."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P1413.jpg"
    },
    {
        "text": "Esta señal indica peligro por la proximidad de...",
        "options": [
            "un tramo de vía con fuerte pendiente descendente.",
            "una curva peligrosa hacia la derecha.",
            "una zona de estrechamiento de calzada."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T510127_151215.jpg"
    },
    {
        "text": "La señal advierte del peligro por...",
        "options": [
            "curvas peligrosas próximas entre sí, la primera hacia la izquierda.",
            "pendientes, la primera ascendente.",
            "curvas peligrosas hacia la derecha."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P1414.jpg"
    },
    {
        "text": "Esta señal indica peligro por la proximidad de...",
        "options": [
            "un resalto.",
            "un badén.",
            "un tramo de vía con pavimiento deslizante."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T505103.jpg"
    },
    {
        "text": "Esta señal advierte de la proximidad de...",
        "options": [
            "una calzada con pavimento en mal estado.",
            "un cambio de rasante.",
            "un paso para peatones elevado."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P1415.jpg"
    },
    {
        "text": "Esta señal indica...",
        "options": [
            "peligro por bajada con fuerte pendiente.",
            "zona de frenado de emergencia.",
            "peligro por subida con fuerte pendiente."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T512129.jpg"
    },
    {
        "text": "Esta señal de advertencia de peligro indica la proximidad de...",
        "options": [
            "un resalto o badén en la vía.",
            "una zona de la vía en la que se estrecha la calzada.",
            "una obstrucción en la calzada."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T505228.jpg"
    },
    {
        "text": "La señal, ¿qué indica?",
        "options": [
            "Que a partir de la señal la circulación es de dos sentidos.",
            "Que la calzada va a quedar reducida a un solo carril.",
            "Que la calzada se estrecha por el lado de la derecha."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P1417.jpg"
    },
    {
        "text": "¿Qué indica esta señal?",
        "options": [
            "Prohibición de circular por obras en la calzada.",
            "Peligro por la proximidad de un tramo de vía en obras.",
            "Peligro por la proximidad de un tramo de la vía donde existe el riesgo de que se proyecte gravilla al pasar los vehículos."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T514427.jpg"
    },
    {
        "text": "Debe saber que a partir de la señal hay peligro por la proximidad de...",
        "options": [
            "grandes charcos de agua que obligan a reducir la velocidad.",
            "una zona con desprendimientos frecuentes.",
            "un tramo de vía donde existe el riesgo de que se proyecte la gravilla al pasar los vehículos."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P1418.jpg"
    },
    {
        "text": "Esta señal indica...",
        "options": [
            "la proximidad de un lugar frecuentado por niños, como escuelas o zonas de juegos.",
            "la proximidad de un lugar frecuentado por peatones.",
            "la prohibición de utilizar la calzada para los peatones."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T510129_250716.jpg"
    },
    {
        "text": "¿De qué peligro advierte la señal?",
        "options": [
            "De la proximidad de un lugar frecuentado por peatones.",
            "De la proximidad de un lugar frecuentado por niños, como escuelas, zonas de juego, etc.",
            "De la proximidad de una zona reservada para los peatones."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P1419.jpg"
    },
    {
        "text": "¿Qué indica la señal?",
        "options": [
            "Carril obligatorio para ciclistas.",
            "Peligro por la proximidad de un paso para ciclistas.",
            "Prohíbe el paso a los ciclistas."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P1420.jpg"
    },
    {
        "text": "Esta señal indica...",
        "options": [
            "zona prohibida para animales domésticos.",
            "peligro, paso de animales domésticos.",
            "aproximación a granja de animales."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T512029.jpg"
    },
    {
        "text": "La señal de cañada, ¿qué indica?",
        "options": [
            "Que puedo encontrar animales en libertad.",
            "Que puedo encontrar animales, pero no tienen preferencia.",
            "Que puedo encontrar animales domésticos y que tienen preferencia."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T511725.jpg"
    },
    {
        "text": "¿Qué indica la señal?",
        "options": [
            "Peligro, paso frecuentado por animales en libertad.",
            "Peligro, coto de caza.",
            "Parque nacional."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P1422.jpg"
    }
]
            
            ;

            const container = document.getElementById('test-container');
            const paginationRow1 = document.getElementById('pagination-row-1');
            const paginationRow2 = document.getElementById('pagination-row-2');

            // Generar preguntas
            questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.setAttribute('data-correct', question.correct);
                questionDiv.innerHTML = `
                    <div class="question-image">
                        <img src="${question.image}" alt="Imagen de la pregunta">
                    </div>
                    <div class="question-content">
                        <h3>${index + 1}. ${question.text}</h3>
                        <div class="options">
                            ${question.options.map((option, idx) => `
                                <div class="option" data-answer="${String.fromCharCode(65 + idx)}">
                                    <span class="option-circle">${String.fromCharCode(65 + idx)}</span>
                                    ${option}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                container.appendChild(questionDiv);
            });

            // Generar paginación
            for (let i = 0; i < questions.length; i++) {
                const button = document.createElement('button');
                button.textContent = `${i + 1}`;
                button.addEventListener('click', () => showQuestion(i));
                if (i < 15) {
                    paginationRow1.appendChild(button);
                } else {
                    paginationRow2.appendChild(button);
                }
            }

            // Mostrar la primera pregunta
            showQuestion(0);

            // Función para mostrar una pregunta específica
            function showQuestion(index) {
                document.querySelectorAll('.question').forEach((q, i) => {
                    q.style.display = i === index ? 'flex' : 'none';
                });
                document.querySelectorAll('.pagination button').forEach((btn, i) => {
                    btn.style.backgroundColor = i === index ? '#ff7aa2' : '#ffa5c3';
                });
            }

            // Evento para las opciones de respuesta
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const question = this.closest('.question');
                    const questionIndex = Array.from(container.children).indexOf(question);
                    const isCorrect = this.getAttribute('data-answer') === question.getAttribute('data-correct');
                    
                    if (question.dataset.answered) return;

                    question.dataset.answered = true;

                    question.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                        opt.style.pointerEvents = 'none';
                    });
                    
                    this.classList.add('selected', isCorrect ? 'correct' : 'incorrect');

                    if (!isCorrect) {
                        question.querySelector(`.option[data-answer="${question.getAttribute('data-correct')}"]`).classList.add('correct');
                    }

                    // Actualizar el botón de paginación
                    const paginationButton = questionIndex < 15 ? paginationRow1.children[questionIndex] : paginationRow2.children[questionIndex - 15];
                    paginationButton.classList.add(isCorrect ? 'correct' : 'incorrect');
                });
            });

            // Evento para corregir el test
            document.getElementById('correct-test').addEventListener('click', () => {
                let wrongAnswers = 0;
                document.querySelectorAll('.question').forEach((question, index) => {
                    const selected = question.querySelector('.option.selected');
                    const isCorrect = selected && selected.getAttribute('data-answer') === question.getAttribute('data-correct');
                    if (!isCorrect) {
                        wrongAnswers++;
                    }
                    // Actualizar el botón de paginación si no se ha respondido
                    if (!selected) {
                        const paginationButton = index < 15 ? paginationRow1.children[index] : paginationRow2.children[index - 15];
                        paginationButton.classList.add('incorrect');
                    }
                });
                const resultMessage = `Has fallado ${wrongAnswers} respuestas.`;

                const alert = document.getElementById('custom-alert');
                document.getElementById('alert-message').textContent = resultMessage;
                alert.style.display = 'block';
            });
        });

        function closeAlert() {
            document.getElementById('custom-alert').style.display = 'none';
        }
    </script>

    
</body>
</html>