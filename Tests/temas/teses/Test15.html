<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Autoescuela</title>
    <link rel="stylesheet" href="../../../Assets/style.css">
</head>
<body>

    
    <div class="container">
        <h1 style="text-align: center; color: #ffa5c3;">Test de Autoescuela</h1>
        <div id="test-container">
            <!-- Aquí se generarán dinámicamente las preguntas -->
        </div>
        <div class="pagination">
            <div class="pagination-row" id="pagination-row-1"></div>
            <div class="pagination-row" id="pagination-row-2"></div>
        </div>
        <button id="correct-test">Corregir Test</button>
    </div>

    <!-- Custom Alert HTML -->
    <div class="custom-alert" id="custom-alert">
        <h2>Resultado del Test</h2>
        <p id="alert-message">Aquí irá el mensaje del resultado.</p>
        <button onclick="closeAlert()">Cerrar</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const questions = [
    {
        "text": "A la vista de la fotografía, ¿se considera adelantamiento el hecho de que los vehículos de un carril circulen más rápidamente que los de otro?",
        "options": [
            "No.",
            "Sólo si los que circulan más rápido son los del carril izquierdo.",
            "Sí, salvo que los que circulen más rápido sean los del carril derecho."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T510105_150916.jpg"
    },
    {
        "text": "En un tramo de vía con un carril de aceleración, ¿se considera adelantamiento que un vehículo avance más rápidamente que otro que lo hace por el carril normal?",
        "options": [
            "No.",
            "Sí, como otro adelantamiento cualquiera.",
            "Sí, porque se trata de una vía interurbana."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T502111.jpg"
    },
    {
        "text": "Cuando el autobús circula más rápido que el resto de los vehículos, ¿se considera adelantamiento?",
        "options": [
            "No.",
            "Sí.",
            "Sí, porque en vía urbana está permitido adelantar por la derecha."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P0802.jpg"
    },
    {
        "text": "¿La señal permite realizar la maniobra de adelantamiento?",
        "options": [
            "No, salvo que se adelante a motocicletas de dos ruedas y no se invada el sentido contrario.",
            "No, en ningún caso.",
            "No, salvo que se adelante a un turismo."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T503304.jpg"
    },
    {
        "text": "A la vista de la señalización, ¿cuándo puede volver a adelantar?",
        "options": [
            "Cuando encuentre la señal de 'Fin de prohibición de adelantamiento' o 'Fin de prohibiciones'.",
            "Cuando encuentre la señal de 'Fin de prohibición de adelantamiento', únicamente",
            "Cuando finalice el peligro indicado."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T510101_250716.jpg"
    },
    {
        "text": "Como norma general, ¿dónde está prohibido adelantar?",
        "options": [
            "En las vías de un carril para cada sentido.",
            "En los pasos para peatones y cerca de ellos.",
            "En las vías de menos de 6 metros de anchura."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T510127_050416.jpg"
    },
    {
        "text": "Está prohibido adelantar en...",
        "options": [
            "las intersecciones con vías para ciclistas.",
            "las glorietas.",
            "todas las intersecciones aunque la señalización lo permita."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T511313.jpg"
    },
    {
        "text": "¿Está permitido adelantar en este cambio de rasante?",
        "options": [
            "No, porque es un cambio de rasante de visibilidad reducida.",
            "Sí, en el tiempo más breve posible.",
            "Sí, porque la línea longitudinal discontinua lo permite."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T510121_151216.jpg"
    },
    {
        "text": "En una curva sin visibilidad como la que se muestra en la fotografía, ¿está permitido adelantar?",
        "options": [
            "Sí, sin invadir el sentido contrario.",
            "No, en ningún caso.",
            "Sí, siempre que la maniobra pueda efectuarse con seguridad."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P0818.jpg"
    },
    {
        "text": "¿Está permitido adelantar en una curva o cambio de rasante de visibilidad reducida en una vía con dos carriles para cada sentido?",
        "options": [
            "Sí, moderando la velocidad.",
            "Sí, si no hay señal que lo prohíba.",
            "No, salvo si los dos sentidos están claramente delimitados y la maniobra puede efectuarse sin invadir el sentido contrario."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P0819.jpg"
    },
    {
        "text": "¿Puede adelantar una motocicleta a otra en esta curva de visibilidad reducida?",
        "options": [
            "Sí, cuando mantiene la separación lateral reglamentaria y no ocupa el sentido contrario.",
            "No, en curvas de visibilidad reducida está prohibido adelantar siempre.",
            "No, porque para adelantar siempre debe invadir el sentido contrario."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P0820.jpg"
    },
    {
        "text": "En los pasos para peatones y en sus proximidades, ¿está permitido adelantar?",
        "options": [
            "No, en ningún caso.",
            "Sí, cuando se realice a una velocidad tan reducida que permita detenerse a tiempo si surgiera peligro de atropello.",
            "Sí, cuando se haga a vehículos de dos ruedas que no impidan la visibilidad"
        ],
        "correct": "B",
        "image": "../../../Assets/img/P0822.jpg"
    },
    {
        "text": "Como norma general, ¿está prohibido adelantar en los pasos a nivel o en sus proximidades?",
        "options": [
            "No.",
            "En los pasos a nivel sí, pero no en sus proximidades.",
            "Sí."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P0823.jpg"
    },
    {
        "text": "En esta intersección, ¿se puede adelantar?",
        "options": [
            "No, está prohibido.",
            "Sí, si las circunstancias del tráfico lo permiten.",
            "Sí, pero sólo a un vehículo de dos ruedas."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P0824.jpg"
    },
    {
        "text": "Está prohibido el adelantamiento en las intersecciones y sus proximidades, salvo...",
        "options": [
            "que la intersección no esté señalizada.",
            "cuando la calzada goce de prioridad y esté señalizada.",
            "que la calzada goce de prioridad aunque no esté señalizada."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T511519.jpg"
    },
    {
        "text": "En esta intersección, ¿se puede adelantar?",
        "options": [
            "No, está prohibido.",
            "Sí, si las circunstancias del tráfico lo permiten.",
            "Sí, pero sólo a un vehículo de dos ruedas."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T505501.jpg"
    },
    {
        "text": "En los túneles con un solo carril para cada sentido, ¿está prohibido adelantar?",
        "options": [
            "Sí.",
            "No.",
            "No, salvo que carezca de arcenes."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P0826.jpg"
    },
    {
        "text": "Como norma general, ¿está prohibido adelantar en las intersecciones con vías para ciclistas o en sus proximidades?",
        "options": [
            "Sí.",
            "En las intersecciones con vías para ciclistas sí, pero en sus proximidades no.",
            "No."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T510129_250617.jpg"
    },
    {
        "text": "En una carretera con un carril para cada sentido, un camión está adelantando y no le deja ver. ¿Puede adelantar detrás del camión?",
        "options": [
            "No, porque no hay visibilidad.",
            "Sí, cuando no hay señal de prohibición de adelantar.",
            "Sí, porque el camión me protege."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P0821.jpg"
    },
    {
        "text": "En las glorietas, ¿está prohibido adelantar?",
        "options": [
            "Sí, porque son intersecciones.",
            "Sí, en vías interurbanas solamente.",
            "No."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P0825.jpg"
    },
    {
        "text": "En un túnel con más de un carril en el sentido de la marcha, ¿está permitido adelantar?",
        "options": [
            "No, en los túneles no está permitido adelantar.",
            "Sí.",
            "Sí, pero sólo a camiones y autobuses."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P0827.jpg"
    },
    {
        "text": "A la vista del gráfico, ¿es obligatorio adelantar al tranvía por la derecha?",
        "options": [
            "Sí, en todo caso.",
            "No, se le puede adelantar por la derecha o por la izquierda.",
            "No, se le debe adelantar por la izquierda."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T511717.jpg"
    },
    {
        "text": "El adelantamiento se efectuará por la derecha y adoptando las máximas precauciones...",
        "options": [
            "en vías con más de un carril en el mismo sentido.",
            "cuando el conductor del vehículo al que se pretende adelantar está indicando claramente su propósito de girar a la izquierda.",
            "siempre que se adelante a un vehículo articulado."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T505321.jpg"
    },
    {
        "text": "En una vía urbana con dos carriles de circulación para el mismo sentido de la marcha, ¿le está permitido a un ciclista adelantar por la derecha a un turismo?",
        "options": [
            "No, deberá adelantarle por la izquierda.",
            "Solo si el turismo se encuentra detenido o en caso de retención.",
            "Sí, siempre que no exista peligro para los demás usuarios."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T512616.jpg"
    },
    {
        "text": "El vehículo rojo va a girar a la izquierda. ¿Puede circular por el arcén para adelantarlo por la derecha?",
        "options": [
            "No, porque está prohibido circular por el arcén.",
            "No, porque el camión no me deja ver.",
            "Sí, porque es una intersección con prioridad."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T505617.jpg"
    },
    {
        "text": "En una vía de doble sentido un vehículo va a girar a la izquierda, ¿debe facilitar el adelantamiento por la derecha a los demás vehículos?",
        "options": [
            "Sí, arrimándose todo lo posible al lado izquierdo de la calzada.",
            "No, ya que deben adelantar por la izquierda.",
            "Sí, arrimándose a la izquierda de su carril todo lo posible, pero sin obstaculizar a los vehículos que circulen en sentido contrario."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T504107.jpg"
    },
    {
        "text": "A la vista de la señal, ¿en qué situaciones podemos adelantar por la derecha?",
        "options": [
            "Nunca.",
            "Cuando no exista marca vial que lo prohíba.",
            "Cuando el vehículo que le precede cambie de dirección a la izquierda."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T510129_150616.jpg"
    },
    {
        "text": "En esta situación, ¿puede adelantar al vehículo inmovilizado?",
        "options": [
            "Sí, después de asegurarme de que puede realizarse sin peligro.",
            "Sí, siempre.",
            "No, porque la marca longitudinal lo prohíbe."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T501702.jpg"
    },
    {
        "text": "Si el camión está estacionado, ¿puede rebasarle?",
        "options": [
            "Sí, cuando se le puede rebasar sin peligro.",
            "No, porque tiene que invadir el sentido contrario.",
            "No, porque la marca vial lo prohíbe."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T504426.jpg"
    },
    {
        "text": "El camión de la fotografía circula muy lentamente y obstaculizando la circulación. En esta circunstancia, ¿se le puede adelantar?",
        "options": [
            "No, porque se trata de un tramo donde existe una prohibición de adelantamiento.",
            "Sí, porque es un obstáculo para los demás vehículos.",
            "Sí, si tengo suficiente visibilidad y no se aproxima ningún vehículo en sentido contrario."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P0829.jpg"
    }
]
            
            ;

            const container = document.getElementById('test-container');
            const paginationRow1 = document.getElementById('pagination-row-1');
            const paginationRow2 = document.getElementById('pagination-row-2');

            // Generar preguntas
            questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.setAttribute('data-correct', question.correct);
                questionDiv.innerHTML = `
                    <div class="question-image">
                        <img src="${question.image}" alt="Imagen de la pregunta">
                    </div>
                    <div class="question-content">
                        <h3>${index + 1}. ${question.text}</h3>
                        <div class="options">
                            ${question.options.map((option, idx) => `
                                <div class="option" data-answer="${String.fromCharCode(65 + idx)}">
                                    <span class="option-circle">${String.fromCharCode(65 + idx)}</span>
                                    ${option}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                container.appendChild(questionDiv);
            });

            // Generar paginación
            for (let i = 0; i < questions.length; i++) {
                const button = document.createElement('button');
                button.textContent = `${i + 1}`;
                button.addEventListener('click', () => showQuestion(i));
                if (i < 15) {
                    paginationRow1.appendChild(button);
                } else {
                    paginationRow2.appendChild(button);
                }
            }

            // Mostrar la primera pregunta
            showQuestion(0);

            // Función para mostrar una pregunta específica
            function showQuestion(index) {
                document.querySelectorAll('.question').forEach((q, i) => {
                    q.style.display = i === index ? 'flex' : 'none';
                });
                document.querySelectorAll('.pagination button').forEach((btn, i) => {
                    btn.style.backgroundColor = i === index ? '#ff7aa2' : '#ffa5c3';
                });
            }

            // Evento para las opciones de respuesta
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const question = this.closest('.question');
                    const questionIndex = Array.from(container.children).indexOf(question);
                    const isCorrect = this.getAttribute('data-answer') === question.getAttribute('data-correct');
                    
                    if (question.dataset.answered) return;

                    question.dataset.answered = true;

                    question.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                        opt.style.pointerEvents = 'none';
                    });
                    
                    this.classList.add('selected', isCorrect ? 'correct' : 'incorrect');

                    if (!isCorrect) {
                        question.querySelector(`.option[data-answer="${question.getAttribute('data-correct')}"]`).classList.add('correct');
                    }

                    // Actualizar el botón de paginación
                    const paginationButton = questionIndex < 15 ? paginationRow1.children[questionIndex] : paginationRow2.children[questionIndex - 15];
                    paginationButton.classList.add(isCorrect ? 'correct' : 'incorrect');
                });
            });

            // Evento para corregir el test
            document.getElementById('correct-test').addEventListener('click', () => {
                let wrongAnswers = 0;
                document.querySelectorAll('.question').forEach((question, index) => {
                    const selected = question.querySelector('.option.selected');
                    const isCorrect = selected && selected.getAttribute('data-answer') === question.getAttribute('data-correct');
                    if (!isCorrect) {
                        wrongAnswers++;
                    }
                    // Actualizar el botón de paginación si no se ha respondido
                    if (!selected) {
                        const paginationButton = index < 15 ? paginationRow1.children[index] : paginationRow2.children[index - 15];
                        paginationButton.classList.add('incorrect');
                    }
                });
                const resultMessage = `Has fallado ${wrongAnswers} respuestas.`;

                const alert = document.getElementById('custom-alert');
                document.getElementById('alert-message').textContent = resultMessage;
                alert.style.display = 'block';
            });
        });

        function closeAlert() {
            document.getElementById('custom-alert').style.display = 'none';
        }
    </script>

    
</body>
</html>