<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Autoescuela</title>
    <link rel="stylesheet" href="../../../Assets/style.css">
</head>
<body>

    
    <div class="container">
        <h1 style="text-align: center; color: #ffa5c3;">Test de Autoescuela</h1>
        <div id="test-container">
            <!-- Aquí se generarán dinámicamente las preguntas -->
        </div>
        <div class="pagination">
            <div class="pagination-row" id="pagination-row-1"></div>
            <div class="pagination-row" id="pagination-row-2"></div>
        </div>
        <button id="correct-test">Corregir Test</button>
    </div>

    <!-- Custom Alert HTML -->
    <div class="custom-alert" id="custom-alert">
        <h2>Resultado del Test</h2>
        <p id="alert-message">Aquí irá el mensaje del resultado.</p>
        <button onclick="closeAlert()">Cerrar</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const questions = [
    {
        "text": "Un conductor que circula con su vehículo bajo los efectos de las drogas...",
        "options": [
            "pone en riesgo a los usuarios de la vía que le rodean.",
            "asume menos riesgos que un conductor que no consume drogas.",
            "pone en riesgo solamente su propia vida."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T514328.jpg"
    },
    {
        "text": "En las personas que toman drogas de abuso y conducen, la probabilidad de sufrir un accidente es...",
        "options": [
            "mayor.",
            "menor.",
            "la misma."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P2516.jpg"
    },
    {
        "text": "El consumo de drogas de abuso, ¿tiene relación con los accidentes más graves?",
        "options": [
            "Sí, gran parte está causado por este consumo.",
            "Sólo cuando se mezclan con alcohol.",
            "No, se relaciona generalmente con los accidentes de menor gravedad."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P2515.jpg"
    },
    {
        "text": "Circular bajo los efectos de las drogas está prohibido para...",
        "options": [
            "los conductores de vehículos de motor, únicamente.",
            "los conductores de automóviles, únicamente.",
            "todos los conductores."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T509420.jpg"
    },
    {
        "text": "Algunas drogas pueden causar...",
        "options": [
            "aumento del campo visual.",
            "un nivel de alerta mayor.",
            "ilusiones ópticas."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P2523.jpg"
    },
    {
        "text": "Uno de los efectos que algunas drogas pueden producir en el conductor es...",
        "options": [
            "la ampliación del campo visual.",
            "la disminución de la distancia de detención.",
            "la incorrecta percepción del tiempo y del espacio."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P2522.jpg"
    },
    {
        "text": "La capacidad de reacción, ¿se ve afectada por el consumo de drogas?",
        "options": [
            "Sí, aumenta.",
            "No.",
            "Sí, disminuye."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T513318.jpg"
    },
    {
        "text": "El consumo de drogas,  ¿mejora en algún caso el tiempo de reacción?",
        "options": [
            "Sí, en algunos casos disminuyéndolo.",
            "Sí, con la cocaína.",
            "No, en ningún caso."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T514604.jpg"
    },
    {
        "text": "La percepción del riesgo, ¿resulta afectada por las drogas?",
        "options": [
            "No.",
            "Sí, la percepción del riesgo aumenta.",
            "Sí, la percepción del riesgo disminuye."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T505322.jpg"
    },
    {
        "text": "¿Son todas las drogas iguales?",
        "options": [
            "No, unas son peligrosas y otras no.",
            "Sí.",
            "No, aunque todas son peligrosas para la seguridad vial."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P2524.jpg"
    },
    {
        "text": "Al mezclar las drogas con alcohol...",
        "options": [
            "las reacciones pueden ser previsibles y, por tanto, controlables.",
            "las reacciones pueden ser imprevisibles y, por tanto, peligrosas.",
            "no se producen reacciones porque las drogas anulan la acción del alcohol."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T505822.jpg"
    },
    {
        "text": "El alcohol y las drogas, ¿son peligrosos para la conducción?",
        "options": [
            "Depende de la tolerancia de cada persona.",
            "Sólo si se supera la tasa máxima permitida.",
            "Sí, siempre."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T508520.jpg"
    },
    {
        "text": "¿Pueden realizarle una prueba para detectar el consumo de drogas en un control de tráfico?",
        "options": [
            "No, si no muestra signos de haber consumido drogas.",
            "No, porque no existen pruebas para detectar el consumo de drogas.",
            "Sí, en las mismas condiciones que en las pruebas de detección de la alcoholemia."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P2520.jpg"
    },
    {
        "text": "Un conductor, ¿está obligado a someterse a las pruebas de detección de drogas?",
        "options": [
            "Sí.",
            "No, si no está implicado en un accidente.",
            "No, sólo está obligado a las pruebas de detección de alcohol."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P2521.jpg"
    },
    {
        "text": "Conducir bajo los efectos de las drogas, ¿puede llevar aparejada la pérdida de puntos del permiso de conducir?",
        "options": [
            "Sí, en todo caso.",
            "Sólo cuando se circule en vías fuera de poblado.",
            "No, puesto que no es una infracción grave."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P2518.jpg"
    },
    {
        "text": "La conducción bajo los efectos del alcohol o de las drogas, ¿está considerada delito en el código penal?",
        "options": [
            "No, las sanciones son exclusivamente económicas.",
            "La conducción bajo los efectos del alcohol no, la conducción bajo los efectos de las drogas sí.",
            "Sí."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T514216.jpg"
    },
    {
        "text": "El consumo de drogas, ¿afecta a la seguridad vial?",
        "options": [
            "No, en absoluto.",
            "Sí, de manera importante.",
            "Sí, pero de manera poco importante."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T501225.jpg"
    },
    {
        "text": "¿Cómo afecta el cannabis a la conducción?",
        "options": [
            "Aumenta la somnolencia.",
            "Disminuye la somnolencia y la concentración.",
            "Disminuye el tiempo de reacción."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P2525.jpg"
    },
    {
        "text": "El consumo de cannabis afecta al comportamiento del conductor porque...",
        "options": [
            "aumenta su nivel de atención.",
            "disminuye la somnolencia.",
            "aumenta su tiempo de reacción."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T512316.jpg"
    },
    {
        "text": "Los efectos del cannabis afectan a la conducción por una...",
        "options": [
            "menor dificultad para calcular las distancias.",
            "alteración de la percepción del entorno.",
            "conducta más agresiva."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T511426.jpg"
    },
    {
        "text": "El consumo de cocaína hace que la conducción sea...",
        "options": [
            "más tranquila y menos competitiva.",
            "más competitiva y agresiva.",
            "más agresiva y menos competitiva."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T510106_151016.jpg"
    },
    {
        "text": "Un conductor que ha consumido cocaína será...",
        "options": [
            "inseguro, ya que el conductor minusvalora sus capacidades al volante.",
            "muy relajado, ya que baja su capacidad de concentración.",
            "competitivo e impulsivo."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T506416.jpg"
    },
    {
        "text": "¿Qué efectos puede producir en el conductor el consumo de éxtasis?",
        "options": [
            "Episodios de depresión o ansiedad.",
            "Disminución del tiempo de reacción.",
            "Aumento de la capacidad de concentración."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P2527.jpg"
    },
    {
        "text": "El consumo de éxtasis, ¿cómo afecta en el comportamiento del conductor?",
        "options": [
            "Provoca un agotamiento físico y mental mientras que están presentes los síntomas.",
            "Disminuye su capacidad de concentración.",
            "Reduce su sensibilidad al deslumbramiento."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T501822.jpg"
    },
    {
        "text": "¿Cómo afecta el éxtasis al conductor de un vehículo?",
        "options": [
            "Puede provocar ilusiones ópticas.",
            "Reduce la sensibilidad al deslumbramiento.",
            "Facilita la concentración del conductor."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T504801.jpg"
    },
    {
        "text": "¿Qué efectos tiene el LSD en la conducción?",
        "options": [
            "Se sobrevaloran las capacidades.",
            "Aumenta la sensación de fatiga y sueño.",
            "Se pueden sufrir alucinaciones y alteraciones emocionales."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T512416.jpg"
    },
    {
        "text": "Los efectos que provoca el LSD en el comportamiento del conductor...",
        "options": [
            "proporcionan un estado de relajación.",
            "pueden llegar a prolongarse de 10 a 12 horas desde su consumo.",
            "son muy breves, pero pueden reaparecer por sorpresa algún tiempo después."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P2529.jpg"
    },
    {
        "text": "El consumo de anfetaminas en la conducción, ¿está prohibido?",
        "options": [
            "No, si forma parte de un tratamiento médico.",
            "Sí.",
            "No, porque no afecta a la conducción."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T511028.jpg"
    },
    {
        "text": "En un conductor el consumo de anfetaminas...",
        "options": [
            "favorece la fatiga y el sueño.",
            "proporciona un estado de relajación.",
            "genera comportamientos impacientes o impulsivos."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P2530.jpg"
    },
    {
        "text": "¿Cómo afectan las anfetaminas a la conducción?",
        "options": [
            "Se produce una fuerte somnolencia.",
            "Disminuyen la sensación de fatiga y producen falsa seguridad.",
            "Aumentan la sensación de fatiga."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T512208.jpg"
    }
]
            
            ;

            const container = document.getElementById('test-container');
            const paginationRow1 = document.getElementById('pagination-row-1');
            const paginationRow2 = document.getElementById('pagination-row-2');

            // Generar preguntas
            questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.setAttribute('data-correct', question.correct);
                questionDiv.innerHTML = `
                    <div class="question-image">
                        <img src="${question.image}" alt="Imagen de la pregunta">
                    </div>
                    <div class="question-content">
                        <h3>${index + 1}. ${question.text}</h3>
                        <div class="options">
                            ${question.options.map((option, idx) => `
                                <div class="option" data-answer="${String.fromCharCode(65 + idx)}">
                                    <span class="option-circle">${String.fromCharCode(65 + idx)}</span>
                                    ${option}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                container.appendChild(questionDiv);
            });

            // Generar paginación
            for (let i = 0; i < questions.length; i++) {
                const button = document.createElement('button');
                button.textContent = `${i + 1}`;
                button.addEventListener('click', () => showQuestion(i));
                if (i < 15) {
                    paginationRow1.appendChild(button);
                } else {
                    paginationRow2.appendChild(button);
                }
            }

            // Mostrar la primera pregunta
            showQuestion(0);

            // Función para mostrar una pregunta específica
            function showQuestion(index) {
                document.querySelectorAll('.question').forEach((q, i) => {
                    q.style.display = i === index ? 'flex' : 'none';
                });
                document.querySelectorAll('.pagination button').forEach((btn, i) => {
                    btn.style.backgroundColor = i === index ? '#ff7aa2' : '#ffa5c3';
                });
            }

            // Evento para las opciones de respuesta
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const question = this.closest('.question');
                    const questionIndex = Array.from(container.children).indexOf(question);
                    const isCorrect = this.getAttribute('data-answer') === question.getAttribute('data-correct');
                    
                    if (question.dataset.answered) return;

                    question.dataset.answered = true;

                    question.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                        opt.style.pointerEvents = 'none';
                    });
                    
                    this.classList.add('selected', isCorrect ? 'correct' : 'incorrect');

                    if (!isCorrect) {
                        question.querySelector(`.option[data-answer="${question.getAttribute('data-correct')}"]`).classList.add('correct');
                    }

                    // Actualizar el botón de paginación
                    const paginationButton = questionIndex < 15 ? paginationRow1.children[questionIndex] : paginationRow2.children[questionIndex - 15];
                    paginationButton.classList.add(isCorrect ? 'correct' : 'incorrect');
                });
            });

            // Evento para corregir el test
            document.getElementById('correct-test').addEventListener('click', () => {
                let wrongAnswers = 0;
                document.querySelectorAll('.question').forEach((question, index) => {
                    const selected = question.querySelector('.option.selected');
                    const isCorrect = selected && selected.getAttribute('data-answer') === question.getAttribute('data-correct');
                    if (!isCorrect) {
                        wrongAnswers++;
                    }
                    // Actualizar el botón de paginación si no se ha respondido
                    if (!selected) {
                        const paginationButton = index < 15 ? paginationRow1.children[index] : paginationRow2.children[index - 15];
                        paginationButton.classList.add('incorrect');
                    }
                });
                const resultMessage = `Has fallado ${wrongAnswers} respuestas.`;

                const alert = document.getElementById('custom-alert');
                document.getElementById('alert-message').textContent = resultMessage;
                alert.style.display = 'block';
            });
        });

        function closeAlert() {
            document.getElementById('custom-alert').style.display = 'none';
        }
    </script>

    
</body>
</html>