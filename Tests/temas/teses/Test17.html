<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Autoescuela</title>
    <link rel="stylesheet" href="../../../Assets/style.css">
</head>
<body>

    
    <div class="container">
        <h1 style="text-align: center; color: #ffa5c3;">Test de Autoescuela</h1>
        <div id="test-container">
            <!-- Aquí se generarán dinámicamente las preguntas -->
        </div>
        <div class="pagination">
            <div class="pagination-row" id="pagination-row-1"></div>
            <div class="pagination-row" id="pagination-row-2"></div>
        </div>
        <button id="correct-test">Corregir Test</button>
    </div>

    <!-- Custom Alert HTML -->
    <div class="custom-alert" id="custom-alert">
        <h2>Resultado del Test</h2>
        <p id="alert-message">Aquí irá el mensaje del resultado.</p>
        <button onclick="closeAlert()">Cerrar</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const questions = [
    {
        "text": "La maniobra de marcha atrás deberá realizarse...",
        "options": [
            "rápidamente.",
            "lentamente y con precaución.",
            "con el cinturón de seguridad abrochado."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T514621.jpg"
    },
    {
        "text": "Debe comprobar antes de circular marcha atrás que...",
        "options": [
            "puede hacerlo sin ocasionar peligro a otros usuarios de la vía, ayudándose de las indicaciones de otra persona, si fuera necesario.",
            "no va a recorrer más de 50 metros.",
            "tiene visibilidad suficiente, únicamente."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P0921.jpg"
    },
    {
        "text": "¿Está prohibido circular marcha atrás?",
        "options": [
            "No, excepto en autopistas y autovías.",
            "Sí, si hay otros usuarios en las proximidades.",
            "Sí, salvo que no pueda marchar hacia delante o cambiar de dirección o sentido."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P0923.jpg"
    },
    {
        "text": "Para incorporarse a la circulación, ¿se puede dar marcha atrás?",
        "options": [
            "Sí, es una de las maniobras en las que está permitido.",
            "No, en ningún caso.",
            "Sí, pero sólo en vías urbanas."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P0925.jpg"
    },
    {
        "text": "Al circular marcha atrás debe tener en cuenta que...",
        "options": [
            "debe hacerlo con toda precaución, ya que pueden pasar personas por detrás del vehículo.",
            "tiene prioridad sobre los peatones.",
            "no debe recorrer más de 10 metros."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T503324.jpg"
    },
    {
        "text": "Al circular marcha atrás observa una señal de aviso de otro vehículo. ¿Qué debe hacer?",
        "options": [
            "Señalizar la maniobra con las luces de emergencia.",
            "Terminar la maniobra lo más rápido posible.",
            "Detener el vehículo, desistiendo de la maniobra si fuera preciso."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T504729.jpg"
    },
    {
        "text": "Como norma general, ¿en qué vías está prohibido circular marcha atrás?",
        "options": [
            "Sólo en las vías urbanas.",
            "Sólo en las autopistas y autovías.",
            "En todas las vías, salvo como complemento a determinadas maniobras."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P0922.jpg"
    },
    {
        "text": "¿Está permitido cambiar el sentido de la marcha utilizando la marcha atrás?",
        "options": [
            "No, si se puede marchar hacia adelante o cambiar de dirección.",
            "Sí, siempre que no obstaculice a otros usuarios de la vía.",
            "Sí."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P0910.jpg"
    },
    {
        "text": "Cuando no se puede circular hacia adelante ni cambiar de dirección o sentido de la marcha, ¿se permite circular marcha atrás?",
        "options": [
            "No.",
            "Sí, pero el recorrido hacia atrás no puede ser superior a 15 metros, ni se puede invadir un cruce de vías.",
            "Sí, pero sólo con el recorrido mínimo indispensable."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P0924.jpg"
    },
    {
        "text": "Para incorporarse a la circulación, ¿está permitido circular marcha atrás más de quince metros?",
        "options": [
            "Sí, en cualquier caso.",
            "No.",
            "Sí, siempre que no se invada un cruce de vías."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P0926.jpg"
    },
    {
        "text": "Invadir marcha atrás una intersección para incorporarse a la circulación, ¿está permitido?",
        "options": [
            "Sí, si no obstaculiza la circulación a otros vehículos.",
            "No, porque está prohibido invadir un cruce de vías.",
            "Sí, si no recorre marcha atrás más de 15 metros."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P0927.jpg"
    },
    {
        "text": "¿Está permitido circular marcha atrás para estacionar?",
        "options": [
            "Sí, la distancia indispensable, aunque sobrepase los 15 metros.",
            "Sí, 15 metros como máximo.",
            "No, está prohibido."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P0928.jpg"
    },
    {
        "text": "Al dar marcha atrás para estacionar, ¿se puede invadir un cruce de vías?",
        "options": [
            "Sí, siempre que no recorra más de 15 metros.",
            "Sí.",
            "No."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P0929.jpg"
    },
    {
        "text": "Circulando por una autopista observa que se ha pasado una salida, ¿puede volver a ella circulando marcha atrás?",
        "options": [
            "Sí, comprobando que no existe peligro para otros usuarios.",
            "Sí, cuando el recorrido no supere los 15 metros.",
            "No."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T508913.jpg"
    },
    {
        "text": "¿Se puede circular marcha atrás en una autopista?",
        "options": [
            "Sí, pero sin obstaculizar.",
            "No.",
            "Sí, porque está dentro de poblado."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P0930.jpg"
    },
    {
        "text": "Circular marcha atrás, ¿está prohibido?",
        "options": [
            "No, excepto en autopista y autovía.",
            "Sí, si hay otros usuarios en las proximidades.",
            "Sí, salvo que no pueda marchar hacia delante o cambiar de dirección o sentido."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T510101_150216.jpg"
    },
    {
        "text": "Cuando se circula marcha atrás para estacionar...",
        "options": [
            "no está permitido recorrer más de 15 metros ni invadir un cruce de vías.",
            "debe conectar la señal de emergencia.",
            "la maniobra no puede durar más de 15 segundos."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T503118.jpg"
    },
    {
        "text": "En una calzada cortada, no se puede cambiar de dirección ni de sentido, ¿cómo se debe salir marcha atrás?",
        "options": [
            "Recorriendo como máximo 15 metros.",
            "Recorriendo el espacio indispensable, aun teniendo que invadir un cruce.",
            "Recorriendo, como máximo, 15 metros y sin invadir ningún cruce."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T512221.jpg"
    },
    {
        "text": "La maniobra de marcha atrás está totalmente prohibida en...",
        "options": [
            "la calzada de cualquier vía.",
            "las vías reservadas para automóviles.",
            "autopistas y autovías."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T502507.jpg"
    },
    {
        "text": "Para estacionar, ¿cuántos metros puede recorrer marcha atrás?",
        "options": [
            "Los que sean necesarios, sin límite, en vía urbana.",
            "Los mínimos indispensables, y como máximo 15 metros.",
            "Siempre que no invada un cruce de vías, los que sean necesarios."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T505829.jpg"
    },
    {
        "text": "Para estacionar, ¿está permitido circular marcha atrás atravesando una intersección?",
        "options": [
            "Sí.",
            "No."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T504820.jpg"
    },
    {
        "text": "Para realizar una parada, ¿está permitido circular marcha atrás?",
        "options": [
            "Sí, con ciertas condiciones.",
            "No.",
            "Sí, siempre."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T505111.jpg"
    },
    {
        "text": "¿En qué maniobras está permitido dar marcha atrás?",
        "options": [
            "Para complementar el estacionamiento y el cambio de sentido.",
            "Sólo en el cambio de sentido.",
            "En la parada, el estacionamiento y la incorporación a la circulación."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T504921.jpg"
    },
    {
        "text": "¿Es correcto circular marcha atrás para cambiar el sentido de la marcha?",
        "options": [
            "Sí, si no se obstaculiza a otros conductores.",
            "No.",
            "Sí, si no se recorren marcha atrás más de 15 metros."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T514327.jpg"
    },
    {
        "text": "En una vía cortada no se puede cambiar de sentido. ¿Está permitido salir marcha atrás?",
        "options": [
            "Sí, pero el recorrido mínimo indispensable.",
            "No.",
            "Sí, pero sin recorrer más de 20 metros y efectuándola lo más rápido posible."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T509025.jpg"
    },
    {
        "text": "¿Qué es obligatorio cuando tenga que realizar la maniobra de marcha atrás?",
        "options": [
            "Hacerla lentamente, señalizar la maniobra y encender las luces de emergencia.",
            "Hacerlo lentamente, señalizar la maniobra y asegurarse, incluso llegando a bajar del vehículo, de que no supone peligro.",
            "Mirar hacia atrás girando el cuerpo y apoyando el antebrazo en el asiento del acompañante, y tocar el claxon."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T514129.jpg"
    },
    {
        "text": "Además de la señalización luminosa correspondiente, la marcha hacia atrás está permitido señalizarla con el brazo...",
        "options": [
            "moviéndolo de arriba abajo.",
            "extendido horizontalmente con la palma de la mano hacia atrás.",
            "doblado hacia arriba, con la mano extendida."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T505220.jpg"
    },
    {
        "text": "Cuando la luz de marcha atrás está averiada, debemos indicarlo...",
        "options": [
            "advirtiéndolo con el claxon.",
            "moviendo el brazo de arriba a abajo.",
            "con el brazo extendido y la palma de la mano hacia atrás."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T513707.jpg"
    },
    {
        "text": "¿Qué está indicando este conductor con el brazo?",
        "options": [
            "Que va a ir marcha atrás.",
            "Que va a empezar a circular.",
            "Que va a girar a la izquierda"
        ],
        "correct": "A",
        "image": "../../../Assets/img/T501817.jpg"
    },
    {
        "text": "El conductor, al circular marcha atrás para estacionar, ¿debe llevar puesto el cinturón de seguridad?",
        "options": [
            "No.",
            "Sí, cuando la velocidad sea superior a 20 km/h.",
            "Sí, sólo están exentos los taxistas en vía urbana."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T501121.jpg"
    }
]
            
            ;

            const container = document.getElementById('test-container');
            const paginationRow1 = document.getElementById('pagination-row-1');
            const paginationRow2 = document.getElementById('pagination-row-2');

            // Generar preguntas
            questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.setAttribute('data-correct', question.correct);
                questionDiv.innerHTML = `
                    <div class="question-image">
                        <img src="${question.image}" alt="Imagen de la pregunta">
                    </div>
                    <div class="question-content">
                        <h3>${index + 1}. ${question.text}</h3>
                        <div class="options">
                            ${question.options.map((option, idx) => `
                                <div class="option" data-answer="${String.fromCharCode(65 + idx)}">
                                    <span class="option-circle">${String.fromCharCode(65 + idx)}</span>
                                    ${option}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                container.appendChild(questionDiv);
            });

            // Generar paginación
            for (let i = 0; i < questions.length; i++) {
                const button = document.createElement('button');
                button.textContent = `${i + 1}`;
                button.addEventListener('click', () => showQuestion(i));
                if (i < 15) {
                    paginationRow1.appendChild(button);
                } else {
                    paginationRow2.appendChild(button);
                }
            }

            // Mostrar la primera pregunta
            showQuestion(0);

            // Función para mostrar una pregunta específica
            function showQuestion(index) {
                document.querySelectorAll('.question').forEach((q, i) => {
                    q.style.display = i === index ? 'flex' : 'none';
                });
                document.querySelectorAll('.pagination button').forEach((btn, i) => {
                    btn.style.backgroundColor = i === index ? '#ff7aa2' : '#ffa5c3';
                });
            }

            // Evento para las opciones de respuesta
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const question = this.closest('.question');
                    const questionIndex = Array.from(container.children).indexOf(question);
                    const isCorrect = this.getAttribute('data-answer') === question.getAttribute('data-correct');
                    
                    if (question.dataset.answered) return;

                    question.dataset.answered = true;

                    question.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                        opt.style.pointerEvents = 'none';
                    });
                    
                    this.classList.add('selected', isCorrect ? 'correct' : 'incorrect');

                    if (!isCorrect) {
                        question.querySelector(`.option[data-answer="${question.getAttribute('data-correct')}"]`).classList.add('correct');
                    }

                    // Actualizar el botón de paginación
                    const paginationButton = questionIndex < 15 ? paginationRow1.children[questionIndex] : paginationRow2.children[questionIndex - 15];
                    paginationButton.classList.add(isCorrect ? 'correct' : 'incorrect');
                });
            });

            // Evento para corregir el test
            document.getElementById('correct-test').addEventListener('click', () => {
                let wrongAnswers = 0;
                document.querySelectorAll('.question').forEach((question, index) => {
                    const selected = question.querySelector('.option.selected');
                    const isCorrect = selected && selected.getAttribute('data-answer') === question.getAttribute('data-correct');
                    if (!isCorrect) {
                        wrongAnswers++;
                    }
                    // Actualizar el botón de paginación si no se ha respondido
                    if (!selected) {
                        const paginationButton = index < 15 ? paginationRow1.children[index] : paginationRow2.children[index - 15];
                        paginationButton.classList.add('incorrect');
                    }
                });
                const resultMessage = `Has fallado ${wrongAnswers} respuestas.`;

                const alert = document.getElementById('custom-alert');
                document.getElementById('alert-message').textContent = resultMessage;
                alert.style.display = 'block';
            });
        });

        function closeAlert() {
            document.getElementById('custom-alert').style.display = 'none';
        }
    </script>

    
</body>
</html>