<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Autoescuela</title>
    <link rel="stylesheet" href="../../../Assets/style.css">
</head>
<body>

    
    <div class="container">
        <h1 style="text-align: center; color: #ffa5c3;">Test de Autoescuela</h1>
        <div id="test-container">
            <!-- Aquí se generarán dinámicamente las preguntas -->
        </div>
        <div class="pagination">
            <div class="pagination-row" id="pagination-row-1"></div>
            <div class="pagination-row" id="pagination-row-2"></div>
        </div>
        <button id="correct-test">Corregir Test</button>
    </div>

    <!-- Custom Alert HTML -->
    <div class="custom-alert" id="custom-alert">
        <h2>Resultado del Test</h2>
        <p id="alert-message">Aquí irá el mensaje del resultado.</p>
        <button onclick="closeAlert()">Cerrar</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const questions = [
    {
        "text": "El calor mientras conduce...",
        "options": [
            "no representa ningún riesgo para la seguridad vial.",
            "representa un claro riesgo para la seguridad vial.",
            "se puede combatir con las ventanillas bajadas, lo que además contribuye a ahorrar combustible."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T514820.jpg"
    },
    {
        "text": "El calor y la mala ventilación del habitáculo...",
        "options": [
            "disminuyen el riesgo de cansancio en el conductor.",
            "no influyen en las condiciones del conductor.",
            "favorecen la aparición de cansancio en el conductor."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T514118.jpg"
    },
    {
        "text": "Circulando en un día de calor...",
        "options": [
            "se deben hacer más descansos, ya que la fatiga aparece más fácilmente.",
            "hay que realizar los mismos descansos que si la temperatura es normal.",
            "se deben hacer menos descansos, para llegar al destino cuanto antes."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T501609.jpg"
    },
    {
        "text": "Si va a realizar un viaje, ¿es importante elegir la hora de salida?",
        "options": [
            "No, no es necesario.",
            "Sí, entre otras razones para evitar que el sol deslumbre.",
            "Sí, con el fin de realizar el viaje sin tener que hacer descansos."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T504114.jpg"
    },
    {
        "text": "Circular con niebla, ¿influye en la pérdida de adherencia?",
        "options": [
            "Sí, puesto que la niebla humedece el asfalto.",
            "No, nunca.",
            "No, la niebla afecta solo a la falta de visibilidad."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P3005.jpg"
    },
    {
        "text": "¿Se debe aumentar la distancia de seguridad cuando exista niebla?",
        "options": [
            "La distancia no influye en la detención cuando hay niebla.",
            "Sí, para tener más espacio para reaccionar ante cualquier frenada del vehículo que va delante.",
            "No, si se llevan las luces encendidas."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P3006.jpg"
    },
    {
        "text": "Las primeras lluvias hacen más resbaladizas las carreteras porque...",
        "options": [
            "el volumen de precipitación inicial se concentra en determinadas zonas formándose grandes charcos.",
            "el agua se mezcla con la suciedad, aceite y otras materias que hay en el asfalto, creando una capa resbaladiza en la superficie de la carretera.",
            "las primeras gotas son más densas y provocan peor drenaje."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T510108_150623.jpg"
    },
    {
        "text": "Si conduce con lluvia...",
        "options": [
            "debe aumentar la distancia de seguridad con el vehículo que circula delante.",
            "la distancia de frenado disminuye.",
            "la distancia de reacción aumenta."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P3008.jpg"
    },
    {
        "text": "De noche, si la calzada está mojada...",
        "options": [
            "La visibilidad es mejor.",
            "La visibilidad es peor."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P3009.jpg"
    },
    {
        "text": "El aquaplaning produce...",
        "options": [
            "una pérdida de visibilidad en caso de lluvia.",
            "un aumento de adherencia en caso de lluvia.",
            "una pérdida de adherencia en caso de lluvia."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T500916.jpg"
    },
    {
        "text": "Con lluvia intensa, ¿cuándo existe riesgo de aparición del aquaplaning?",
        "options": [
            "Sólo cuando circule con los neumáticos desgastados.",
            "Sobre todo si circulo a velocidad elevada, aunque lleve los neumáticos en buen estado.",
            "Sólo cuando el vehículo vaya muy cargado."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P3011.jpg"
    },
    {
        "text": "Cuando llueve, ¿hay que prestar especial atención a alguna zona de la vía en particular?",
        "options": [
            "No, puesto que circular con lluvia es muy peligroso en todas partes.",
            "Sí, a los badenes y a las zonas en las que se pueden producir charcos.",
            "No, únicamente hay que prestar atención cuando hay niños en las proximidades."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P3012.jpg"
    },
    {
        "text": "Para adelantar a este vehículo...",
        "options": [
            "debe tenerse especial cuidado, pues las salpicaduras pueden impedir la visibilidad.",
            "es obligatorio esperar a un tramo seco de calzada.",
            "no deben tomarse precauciones especiales."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P3013.jpg"
    },
    {
        "text": "Si usted atraviesa un tramo inundado de agua, ¿pueden perder eficacia los frenos?",
        "options": [
            "Sí, cuando se mojan, pueden perder eficacia.",
            "No, sólo pueden perder eficacia por un mal mantenimiento.",
            "No, sólo pueden perder eficacia cuando se calientan."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P3014.jpg"
    },
    {
        "text": "Si hay charcos de agua en la calzada...",
        "options": [
            "debe moderar la velocidad.",
            "debe acelerar para atravesarlos lo antes posible.",
            "no es aconsejable tomar ninguna precaución."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T503228.jpg"
    },
    {
        "text": "Hay nieve en la calzada. ¿Cómo debe circular?",
        "options": [
            "Lentamente, pero con la velocidad más larga posible.",
            "Rápidamente para que no patine el vehículo.",
            "En la primera relación de marchas y acelerando a fondo."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P3016.jpg"
    },
    {
        "text": "¿Cómo debe conducir con nieve?",
        "options": [
            "Con las luces de emergencia encendidas.",
            "Frenando y acelerando con suavidad.",
            "Por el arcén."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P3017.jpg"
    },
    {
        "text": "Cuando exista nieve en la calzada, ¿cómo se debe iniciar la marcha para evitar que las ruedas patinen y se hundan?",
        "options": [
            "Pisando a fondo el acelerador para aumentar la fuerza motriz de las ruedas.",
            "Con la primera marcha engranada y soltando rápidamente el pedal de embrague.",
            "Con la marcha más alta que sea posible, que normalmente será la segunda."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T504012.jpg"
    },
    {
        "text": "Cuando nieva, ¿es recomendable circular sobre las marcas de otros vehículos?",
        "options": [
            "Sí, puesto que facilitará la adherencia.",
            "No, porque perjudicará la adherencia.",
            "Es indiferente, puesto que no influye en la adherencia."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P3019.jpg"
    },
    {
        "text": "Cuando nieva, ¿es recomendable usar gafas de sol?",
        "options": [
            "Sí, si sale el sol y se refleja fuertemente en la nieve pueden ser muy útiles.",
            "No, puesto que perjudicaría a la visión.",
            "Sí, y además son obligatorias."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P3020.jpg"
    },
    {
        "text": "Circulando con la calzada nevada las pendientes se deben subir...",
        "options": [
            "con la relación de marchas más corta posible.",
            "rápidamente, porque si el vehículo se detiene será difícil reanudar la marcha.",
            "lentamente y a velocidad sostenida."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P3021.jpg"
    },
    {
        "text": "Cuando existan placas de hielo en la calzada, ¿cuál es la forma más aconsejable y segura de descender una pendiente prolongada?",
        "options": [
            "Con marchas largas para mejorar el agarre de las ruedas motrices.",
            "Reduciendo la velocidad con el freno de mano, especialmente al trazar las curvas.",
            "Con marchas cortas para frenar lo menos posible."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T505906.jpg"
    },
    {
        "text": "Hay hielo en la calzada. ¿Qué debe hacer?",
        "options": [
            "Circular con la primera marcha, que es la más corta.",
            "Acelerar para salir rápidamente.",
            "Conducir con cuidado, frenar y acelerar con cuidado sólo cuando sea necesario."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P3023.jpg"
    },
    {
        "text": "Cuando la calzada está helada, la distancia de frenado puede aumentar hasta...",
        "options": [
            "cinco veces.",
            "diez veces.",
            "el doble."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P3022.jpg"
    },
    {
        "text": "En una zona de calzada helada ...",
        "options": [
            "se puede mejorar la adherencia, con cadenas o neumáticos de clavos.",
            "no se pueden utilizar neumáticos de clavos.",
            "no se puede circular."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P3024.jpg"
    },
    {
        "text": "En una calzada cubierta de hielo, ¿cómo debe actuar para detener el vehículo?",
        "options": [
            "Dando un frenazo brusco para bloquear las ruedas.",
            "Reduciendo la velocidad suavemente y utilizando el freno de pie con mucha suavidad.",
            "Utilizando el freno de mano a la vez que el freno de pie."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P3026.jpg"
    },
    {
        "text": "Los cristales de su vehículo están cubiertos de hielo. Antes de ponerse en marcha, ¿qué debe hacer?",
        "options": [
            "Limpiar solamente el parabrisas.",
            "Limpiar solamente los cristales de la zona delantera.",
            "Limpiar todos los cristales."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P3027.jpg"
    },
    {
        "text": "Cuando se aprecia fuerte viento lateral...",
        "options": [
            "Se deberá aumentar la velocidad para compensar la fuerza del viento.",
            "Disminuye el riesgo de accidente, ya que el viento evita que el vehículo se desvíe de su trayectoria.",
            "Se deberá reducir la velocidad y corregir las ligeras desviaciones de la dirección."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T509207.jpg"
    },
    {
        "text": "Si sopla un fuerte viento lateral de la izquierda, los conductores de turismos deberán...",
        "options": [
            "sujetar el volante, con firmeza pero sin rigidez, hacia la izquierda.",
            "circular por el arcén lentamente.",
            "sujetar el volante, con firmeza pero sin rigidez, hacia la derecha."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P3029.jpg"
    },
    {
        "text": "El viento por la derecha en los adelantamientos a vehículos grandes, ¿por qué es peligroso?",
        "options": [
            "Porque puedo perder el control del vehículo y salirme de la calzada.",
            "Porque no me deja ver la calzada.",
            "Porque frena mi vehículo y no me deja adelantar."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P3030.jpg"
    }
]
            
            ;

            const container = document.getElementById('test-container');
            const paginationRow1 = document.getElementById('pagination-row-1');
            const paginationRow2 = document.getElementById('pagination-row-2');

            // Generar preguntas
            questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.setAttribute('data-correct', question.correct);
                questionDiv.innerHTML = `
                    <div class="question-image">
                        <img src="${question.image}" alt="Imagen de la pregunta">
                    </div>
                    <div class="question-content">
                        <h3>${index + 1}. ${question.text}</h3>
                        <div class="options">
                            ${question.options.map((option, idx) => `
                                <div class="option" data-answer="${String.fromCharCode(65 + idx)}">
                                    <span class="option-circle">${String.fromCharCode(65 + idx)}</span>
                                    ${option}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                container.appendChild(questionDiv);
            });

            // Generar paginación
            for (let i = 0; i < questions.length; i++) {
                const button = document.createElement('button');
                button.textContent = `${i + 1}`;
                button.addEventListener('click', () => showQuestion(i));
                if (i < 15) {
                    paginationRow1.appendChild(button);
                } else {
                    paginationRow2.appendChild(button);
                }
            }

            // Mostrar la primera pregunta
            showQuestion(0);

            // Función para mostrar una pregunta específica
            function showQuestion(index) {
                document.querySelectorAll('.question').forEach((q, i) => {
                    q.style.display = i === index ? 'flex' : 'none';
                });
                document.querySelectorAll('.pagination button').forEach((btn, i) => {
                    btn.style.backgroundColor = i === index ? '#ff7aa2' : '#ffa5c3';
                });
            }

            // Evento para las opciones de respuesta
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const question = this.closest('.question');
                    const questionIndex = Array.from(container.children).indexOf(question);
                    const isCorrect = this.getAttribute('data-answer') === question.getAttribute('data-correct');
                    
                    if (question.dataset.answered) return;

                    question.dataset.answered = true;

                    question.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                        opt.style.pointerEvents = 'none';
                    });
                    
                    this.classList.add('selected', isCorrect ? 'correct' : 'incorrect');

                    if (!isCorrect) {
                        question.querySelector(`.option[data-answer="${question.getAttribute('data-correct')}"]`).classList.add('correct');
                    }

                    // Actualizar el botón de paginación
                    const paginationButton = questionIndex < 15 ? paginationRow1.children[questionIndex] : paginationRow2.children[questionIndex - 15];
                    paginationButton.classList.add(isCorrect ? 'correct' : 'incorrect');
                });
            });

            // Evento para corregir el test
            document.getElementById('correct-test').addEventListener('click', () => {
                let wrongAnswers = 0;
                document.querySelectorAll('.question').forEach((question, index) => {
                    const selected = question.querySelector('.option.selected');
                    const isCorrect = selected && selected.getAttribute('data-answer') === question.getAttribute('data-correct');
                    if (!isCorrect) {
                        wrongAnswers++;
                    }
                    // Actualizar el botón de paginación si no se ha respondido
                    if (!selected) {
                        const paginationButton = index < 15 ? paginationRow1.children[index] : paginationRow2.children[index - 15];
                        paginationButton.classList.add('incorrect');
                    }
                });
                const resultMessage = `Has fallado ${wrongAnswers} respuestas.`;

                const alert = document.getElementById('custom-alert');
                document.getElementById('alert-message').textContent = resultMessage;
                alert.style.display = 'block';
            });
        });

        function closeAlert() {
            document.getElementById('custom-alert').style.display = 'none';
        }
    </script>

    
</body>
</html>