<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Autoescuela</title>
    <link rel="stylesheet" href="../../../Assets/style.css">
</head>
<body>

    
    <div class="container">
        <h1 style="text-align: center; color: #ffa5c3;">Test de Autoescuela</h1>
        <div id="test-container">
            <!-- Aquí se generarán dinámicamente las preguntas -->
        </div>
        <div class="pagination">
            <div class="pagination-row" id="pagination-row-1"></div>
            <div class="pagination-row" id="pagination-row-2"></div>
        </div>
        <button id="correct-test">Corregir Test</button>
    </div>

    <!-- Custom Alert HTML -->
    <div class="custom-alert" id="custom-alert">
        <h2>Resultado del Test</h2>
        <p id="alert-message">Aquí irá el mensaje del resultado.</p>
        <button onclick="closeAlert()">Cerrar</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const questions = [
    {
        "text": "Con esta señal, ¿tiene prioridad de paso en el estrechamiento?",
        "options": [
            "No, la prioridad la tiene el vehículo que circula en sentido contrario.",
            "Sí.",
            "No, la señal concede prioridad al sentido contrario."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P0607.jpg"
    },
    {
        "text": "¿Qué indica esta señal?",
        "options": [
            "Obliga a seguir circulando de frente.",
            "Obliga a ceder el paso a la circulación del sentido contrario.",
            "Calzada con doble sentido de circulación."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T512829.jpg"
    },
    {
        "text": "En un tramo de la vía muy estrecho sin señalizar en el que sea imposible el paso simultáneo de dos vehículos, tendrá preferencia...",
        "options": [
            "el que tenga más dificultades de maniobra.",
            "el que tenga que retroceder mayor distancia.",
            "el que haya entrado primero en el estrechamiento."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P0601.jpg"
    },
    {
        "text": "En los estrechamientos en tramos de gran pendiente, si no hay señalización expresa al efecto, tendrá la preferencia de paso el vehículo que circule en sentido...",
        "options": [
            "descendente, salvo si pudiera llegar antes a un apartadero.",
            "ascendente, salvo si pudiera llegar antes a un apartadero.",
            "ascendente, en todo caso."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P0604.jpg"
    },
    {
        "text": "¿Qué tramo de la vía son considerados como de gran pendiente?",
        "options": [
            "Todos los que tengan una inclinación mínima del 7%.",
            "Solamente los que estén señalizados con la correspondiente señal de peligro.",
            "Todos los que por su inclinación supongan una gran dificultad para reanudar la marcha en caso de detención."
        ],
        "correct": "A",
        "image": "../../../Assets/img/E1606.jpg"
    },
    {
        "text": "En un estrechamiento sin señales de prioridad se encuentran un turismo que arrastra un remolque y un autobús, sin que se sepa cual entró primero, ¿qué vehículo tiene preferencia?",
        "options": [
            "El que tenga que dar marcha atrás más distancia.",
            "El autobús.",
            "El turismo que arrastra el remolque."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P0606.jpg"
    },
    {
        "text": "En una calzada se produce un estrechamiento sin señalizar. En él, coinciden un turismo y un camión que circula en sentido contrario. ¿Quién retrocederá?",
        "options": [
            "El camión.",
            "El turismo."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P0605.jpg"
    },
    {
        "text": "Si en un estrechamiento sin señalizar han entrado a la vez un autobús y un vehículo de tracción animal, ¿cuál de los dos vehículos tendrá preferencia de paso?",
        "options": [
            "El vehículo de tracción animal.",
            "El que tenga que dar marcha atrás una mayor distancia.",
            "El autobús."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T510117_150116.jpg"
    },
    {
        "text": "Un autobús y un camión llegan a la vez a un tramo muy estrecho de la vía sin señalizar, ¿qué vehículo debe retroceder?",
        "options": [
            "El autobús.",
            "El camión.",
            "El vehículo que tenga mayor masa máxima autorizada."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T511319.jpg"
    },
    {
        "text": "Un vehículo derivado de turismo y un camión entran a la vez en un tramo muy estrecho de la calzada sin señalizar, ¿qué vehículo está obligado a retroceder?",
        "options": [
            "El vehículo que tenga mayor masa máxima autorizada.",
            "El vehículo derivado de turismo.",
            "El camión."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T510119_150316.jpg"
    },
    {
        "text": "Debido a un estrechamiento en la calzada no pueden cruzarse una motocicleta y un turismo. ¿Qué vehículo pasará en primer lugar si ambos han llegado al mismo tiempo y no hay señal que indique el orden de paso?",
        "options": [
            "La motocicleta.",
            "El turismo."
        ],
        "correct": "B",
        "image": "../../../Assets/img/A300310.jpg"
    },
    {
        "text": "Si en un estrechamiento sin señalizar han entrado a la vez un turismo y un vehículo de tracción animal, ¿cuál de los dos vehículos tendrá preferencia de paso?",
        "options": [
            "El vehículo de tracción animal.",
            "El que tenga que dar marcha atrás una mayor distancia.",
            "El turismo."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T514527.jpg"
    },
    {
        "text": "Un ciclomotor y un turismo llegan al mismo tiempo a un estrechamiento sin señalizar la prioridad, ¿quién tiene prioridad?",
        "options": [
            "El turismo.",
            "El ciclomotor.",
            "El que pueda circular con menos seguridad."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T511205.jpg"
    },
    {
        "text": "Dos vehículos del mismo tipo se encuentran en un estrechamiento y no se sabe cuál tiene preferencia, ¿cuál de ellos tiene prioridad?",
        "options": [
            "El vehículo que tenga que dar marcha atrás mayor distancia.",
            "El vehículo que tenga que dar marcha atrás una menor distancia.",
            "El vehículo que tenga mayor anchura o longitud."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T505721.jpg"
    },
    {
        "text": "¿Qué vehículos tienen prohibido cruzarse en un puente que dispone de un ancho de calzada inferior a 6 metros?",
        "options": [
            "Los vehículos prioritarios en servicio urgente.",
            "Los vehículos que necesitan una autorización especial para circular.",
            "Los vehículos articulados."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T514227.jpg"
    },
    {
        "text": "Al aproximarse a un paso a nivel o a un puente móvil debe...",
        "options": [
            "circular a la velocidad máxima para pasar lo antes posible.",
            "detenerse en todo caso.",
            "extremar la precaución y circular a una velocidad moderada."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T502708.jpg"
    },
    {
        "text": "Al aproximarse a un paso a nivel o a un puente móvil, ¿cuándo se debe extremar la prudencia y reducir la velocidad?",
        "options": [
            "Solo cuando se encuentran abiertos.",
            "Sólo cuando se encuentran cerrados.",
            "Siempre."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T503425.jpg"
    },
    {
        "text": "Ante un paso a nivel está obligado a...",
        "options": [
            "pasar aunque las barreras estén en movimiento.",
            "asegurarse antes de atravesarlo de que no existe ningún peligro.",
            "atravesarlo rápidamente."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T501320.jpg"
    },
    {
        "text": "El cruce de un paso a nivel debe realizarse...",
        "options": [
            "muy despacio y con la luz de cruce encendida para que nos vea el conductor del tren.",
            "sin demora y después de haber comprobado que no hay riesgo a quedarse detenido en la vía del tren.",
            "muy rápidamente para no coincidir con el tren."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T511603.jpg"
    },
    {
        "text": "En un paso a nivel, una semibarrera móvil en movimiento...",
        "options": [
            "obliga a detenerse.",
            "únicamente prohíbe el paso mientras se encuentra en posición transversal a la calzada, si está subiendo puede continuar.",
            "obliga a extremar la precaución, y sólo puede cruzarlo si no se aproxima ningún vehículo."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T503025.jpg"
    },
    {
        "text": "Las barreras del paso a nivel están bajando, ¿se puede cruzar?",
        "options": [
            "No, cuando las barreras están en movimiento está prohibido el paso.",
            "Sí, hasta que no están atravesadas se puede pasar.",
            "Sí, siempre que se está seguro que no se aproxima el tren."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T508505.jpg"
    },
    {
        "text": "En un paso a nivel, ¿qué debe hacer si la barrera está subiendo?",
        "options": [
            "Pasar cuando lo hagan el resto de vehículos, se mueva o no la barrera.",
            "Pasar cuando, por la altura, la barrera lo permita.",
            "Detenerse detrás de los demás vehículos, hasta que la barrera suba totalmente y permita el paso."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T502511.jpg"
    },
    {
        "text": "Al llegar a este paso a nivel se encuentra las barreras en movimiento, ¿qué debe hacer?",
        "options": [
            "Cruzar antes de que las barreras bajen.",
            "Si las barreras están subiendo, cruzar.",
            "Detener el vehículo."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T502215.jpg"
    },
    {
        "text": "En un paso a nivel, ¿cuándo está permitido pasar?",
        "options": [
            "Cuando haya espacio suficiente para pasar.",
            "Cuando la barrera vaya a finalizar su elevación.",
            "Cuando la barrera haya terminado de levantarse completamente."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T510611.jpg"
    },
    {
        "text": "Los conductores que llegan a un puente móvil cerrado con la barrera o semibarrera en movimiento, deben...",
        "options": [
            "acelerar y pasar cuanto antes.",
            "dar la vuelta y buscar otro itinerario.",
            "detenerse uno detrás de otro en el carril adecuado."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T503809.jpg"
    },
    {
        "text": "Al aproximarse a un puente móvil, ¿qué están obligados a hacer los conductores?",
        "options": [
            "Aumentar la velocidad para cruzar el paso lo antes posible.",
            "Extremar la prudencia y reducir la velocidad por debajo de la máxima permitida.",
            "Detenerse siempre antes de cruzarlo."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T504008.jpg"
    },
    {
        "text": "Como norma general, ¿está permitido adelantar en los pasos a nivel?",
        "options": [
            "No.",
            "Sí, cuando se haga a una velocidad que permita detener el vehículo a tiempo.",
            "Sí."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T512603.jpg"
    },
    {
        "text": "En un paso a nivel, ¿está permitido realizar un cambio de sentido?",
        "options": [
            "No.",
            "Sí, cuando las barreras no estén en movimiento.",
            "Sí, en los pasos a nivel sin barrera."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T500928.jpg"
    },
    {
        "text": "¿Qué debe hacer en este paso a nivel sin barreras?",
        "options": [
            "Detenerse siempre y, después de comprobar que no se aproxima ningún tren, pasar si lo permite el semáforo.",
            "Pasar a una velocidad moderada porque no pasa ningún tren.",
            "Pasar si el semáforo lo permite."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T505419.jpg"
    },
    {
        "text": "Si queda detenido en un paso a nivel por avería, deberá...",
        "options": [
            "poner punto muerto, desactivar el freno de mano y empujar el vehículo.",
            "desalojar a de los ocupantes, intentar retirar el vehículo y avisar al maquinista.",
            "tratar de arrancar el vehículo con la primera velocidad puesta y tranquilizar a sus ocupantes."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T512807.jpg"
    }
]
            
            ;

            const container = document.getElementById('test-container');
            const paginationRow1 = document.getElementById('pagination-row-1');
            const paginationRow2 = document.getElementById('pagination-row-2');

            // Generar preguntas
            questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.setAttribute('data-correct', question.correct);
                questionDiv.innerHTML = `
                    <div class="question-image">
                        <img src="${question.image}" alt="Imagen de la pregunta">
                    </div>
                    <div class="question-content">
                        <h3>${index + 1}. ${question.text}</h3>
                        <div class="options">
                            ${question.options.map((option, idx) => `
                                <div class="option" data-answer="${String.fromCharCode(65 + idx)}">
                                    <span class="option-circle">${String.fromCharCode(65 + idx)}</span>
                                    ${option}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                container.appendChild(questionDiv);
            });

            // Generar paginación
            for (let i = 0; i < questions.length; i++) {
                const button = document.createElement('button');
                button.textContent = `${i + 1}`;
                button.addEventListener('click', () => showQuestion(i));
                if (i < 15) {
                    paginationRow1.appendChild(button);
                } else {
                    paginationRow2.appendChild(button);
                }
            }

            // Mostrar la primera pregunta
            showQuestion(0);

            // Función para mostrar una pregunta específica
            function showQuestion(index) {
                document.querySelectorAll('.question').forEach((q, i) => {
                    q.style.display = i === index ? 'flex' : 'none';
                });
                document.querySelectorAll('.pagination button').forEach((btn, i) => {
                    btn.style.backgroundColor = i === index ? '#ff7aa2' : '#ffa5c3';
                });
            }

            // Evento para las opciones de respuesta
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const question = this.closest('.question');
                    const questionIndex = Array.from(container.children).indexOf(question);
                    const isCorrect = this.getAttribute('data-answer') === question.getAttribute('data-correct');
                    
                    if (question.dataset.answered) return;

                    question.dataset.answered = true;

                    question.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                        opt.style.pointerEvents = 'none';
                    });
                    
                    this.classList.add('selected', isCorrect ? 'correct' : 'incorrect');

                    if (!isCorrect) {
                        question.querySelector(`.option[data-answer="${question.getAttribute('data-correct')}"]`).classList.add('correct');
                    }

                    // Actualizar el botón de paginación
                    const paginationButton = questionIndex < 15 ? paginationRow1.children[questionIndex] : paginationRow2.children[questionIndex - 15];
                    paginationButton.classList.add(isCorrect ? 'correct' : 'incorrect');
                });
            });

            // Evento para corregir el test
            document.getElementById('correct-test').addEventListener('click', () => {
                let wrongAnswers = 0;
                document.querySelectorAll('.question').forEach((question, index) => {
                    const selected = question.querySelector('.option.selected');
                    const isCorrect = selected && selected.getAttribute('data-answer') === question.getAttribute('data-correct');
                    if (!isCorrect) {
                        wrongAnswers++;
                    }
                    // Actualizar el botón de paginación si no se ha respondido
                    if (!selected) {
                        const paginationButton = index < 15 ? paginationRow1.children[index] : paginationRow2.children[index - 15];
                        paginationButton.classList.add('incorrect');
                    }
                });
                const resultMessage = `Has fallado ${wrongAnswers} respuestas.`;

                const alert = document.getElementById('custom-alert');
                document.getElementById('alert-message').textContent = resultMessage;
                alert.style.display = 'block';
            });
        });

        function closeAlert() {
            document.getElementById('custom-alert').style.display = 'none';
        }
    </script>

    
</body>
</html>