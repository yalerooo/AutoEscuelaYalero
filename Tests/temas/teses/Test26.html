<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Autoescuela</title>
    <link rel="stylesheet" href="../../../Assets/style.css">
</head>
<body>

    
    <div class="container">
        <h1 style="text-align: center; color: #ffa5c3;">Test de Autoescuela</h1>
        <div id="test-container">
            <!-- Aquí se generarán dinámicamente las preguntas -->
        </div>
        <div class="pagination">
            <div class="pagination-row" id="pagination-row-1"></div>
            <div class="pagination-row" id="pagination-row-2"></div>
        </div>
        <button id="correct-test">Corregir Test</button>
    </div>

    <!-- Custom Alert HTML -->
    <div class="custom-alert" id="custom-alert">
        <h2>Resultado del Test</h2>
        <p id="alert-message">Aquí irá el mensaje del resultado.</p>
        <button onclick="closeAlert()">Cerrar</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const questions = [
    {
        "text": "Las órdenes de los agentes de tráfico...",
        "options": [
            "solamente hay que cumplirlas cuando exista una situación de peligro.",
            "hay que cumplirlas siempre.",
            "sólo deben cumplirse en las intersecciones."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P1212.jpg"
    },
    {
        "text": "En una intersección señalizada en la que se encuentra un agente regulando el tráfico, ¿qué debe hacer?",
        "options": [
            "Aplicar las normas generales de prioridad de paso de los vehículos que se acerquen por la derecha.",
            "Obedecer las señales del agente.",
            "Obedecer las señales de tráfico que regulan la prioridad."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P1213.jpg"
    },
    {
        "text": "¿Qué indica este agente?",
        "options": [
            "Detención para todos los usuarios que se acerquen de frente o por su espalda.",
            "Detención para los vehículos que se acerquen de frente al agente.",
            "Detención para todos los usuarios que se acerquen al agente."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P1214.jpg"
    },
    {
        "text": "El agente, ¿a quién ordena detenerse?",
        "options": [
            "A todos los usuarios de la vía.",
            "A los usuarios que se aproximen tanto por delante como por detrás.",
            "A los que se aproximen desde los lados."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P1215.jpg"
    },
    {
        "text": "El agente tenía los brazos en cruz y ha bajado los brazos. ¿Qué debe hacer?",
        "options": [
            "Continuar detenido hasta que realice otro tipo de señal.",
            "Obedecer las señales o semáforos.",
            "Continuar circulando."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P1216.jpg"
    },
    {
        "text": "Detiene su vehículo al ver a un agente que tiene el brazo extendido horizontalmente, puede reanudar la marcha cuando el agente...",
        "options": [
            "emita unos toques de silbato cortos y frecuentes.",
            "baje el brazo.",
            "lo indique con otra señal."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P1217.jpg"
    },
    {
        "text": "A la vista de la señal que realiza el agente, ¿cuándo podrá reanudar la marcha?",
        "options": [
            "Sólo cuando cambie de posición o efectúe otra señal.",
            "Cuando baje los brazos.",
            "Sólo cuando lo indique con otra señal."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T514319.jpg"
    },
    {
        "text": "Un agente mueve el brazo extendido de arriba abajo, ¿qué está indicando?",
        "options": [
            "Detener el vehículo, en condiciones de seguridad.",
            "Reducir la velocidad si circula por el lado del brazo que ejecuta la señal.",
            "Detener el vehículo si circula por el lado del brazo que ejecuta la señal."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P1218.jpg"
    },
    {
        "text": "Un agente se dirige hacia su vehículo balanceando una luz roja. ¿Qué debe hacer?",
        "options": [
            "Detener el vehículo.",
            "Circular con precaución porque hay peligro.",
            "Cambiar de dirección"
        ],
        "correct": "A",
        "image": "../../../Assets/img/T505222.jpg"
    },
    {
        "text": "Un agente de circulación ordena reanudar la marcha con ayuda de un silbato, ¿cómo serán los toques?",
        "options": [
            "Cortos y frecuentes.",
            "No se utiliza el silbato para este tipo de órdenes.",
            "Largos."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P1221.jpg"
    },
    {
        "text": "El agente ordena la detención con...",
        "options": [
            "sonidos de silbato largos y espaciados.",
            "un fuerte sonido de silbato.",
            "sonidos de silbato cortos y frecuentes."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P1222.jpg"
    },
    {
        "text": "Un agente circula en una moto portando una bandera verde, ¿qué indica?",
        "options": [
            "En la calzada se está desarrollando una actividad deportiva.",
            "La calzada está abierta pero hay que extremar la atención.",
            "La calzada queda de nuevo abierta al tráfico a partir de su paso."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P1224.jpg"
    },
    {
        "text": "En esta situación, ¿está permitido adelantar al vehículo policial?",
        "options": [
            "No, ya que por delante del agente la calzada está cerrada al tráfico.",
            "Sí, por el lado derecho, ya que el carril izquierdo va a quedar cerrado al tráfico.",
            "Sí, extremando la precaución."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T505525.jpg"
    },
    {
        "text": "Un agente de tráfico que circula delante muestra una bandera de color amarillo, ¿qué está indicando?",
        "options": [
            "Que la calzada queda temporalmente cerrada al tráfico.",
            "La necesidad de extremar la atención o la proximidad de un peligro.",
            "Que la calzada queda abierta al tráfico."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P1225.jpg"
    },
    {
        "text": "Circula por una vía y se encuentra a este agente, ¿qué indica con la bandera roja?",
        "options": [
            "Que debe detenerse en el lado derecho y reanudar la marcha cuando el agente se haya alejado.",
            "Que la vía queda temporalmente cerrada al tráfico a partir del paso de esa moto.",
            "Que debe extremar la atención por la proximidad de un peligro."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P1226.jpg"
    },
    {
        "text": "Un agente le indica, desde su vehículo, que debe detenerse en el lado derecho, ¿cómo lo señaliza?",
        "options": [
            "Con una bandera roja.",
            "Con el brazo extendido hacia abajo inclinado y fijo.",
            "Con una bandera amarilla."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P1223.jpg"
    },
    {
        "text": "¿Qué debe hacer ante las indicaciones de los agentes?",
        "options": [
            "Pasar por el lado izquierdo porque el agente va a parar a la derecha.",
            "Detenerse en el lado derecho.",
            "Reducir la marcha."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T500905.jpg"
    },
    {
        "text": "¿Qué indica un agente desde un vehículo si emite una luz amarilla intermitente o destellante hacia delante?",
        "options": [
            "Que debe extremar la atención porque se aproxima a un peligro.",
            "Que debe detenerse en el lado derecho detrás del vehículo policial.",
            "Que debe detenerse en el lado derecho delante del vehículo policial."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P1227.jpg"
    },
    {
        "text": "Desde un vehículo policial un agente hace señales al vehículo que circula delante para que se detenga, ¿qué debe hacer su conductor?",
        "options": [
            "Inmovilizar su vehículo inmediatamente.",
            "Señalizar la inmovilización con las luces de emergencia y detener el vehículo inmediatamente.",
            "Detenerse y permanecer en el interior del vehículo."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P1228.jpg"
    },
    {
        "text": "Los Agentes de la autoridad y el personal de obras, ¿están obligados a utilizar dispositivos retrorreflectantes que permitan distinguirlos a una distancia mínima de 150 metros?",
        "options": [
            "Sí, siempre.",
            "Sí, pero sólo de noche.",
            "No."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P1229.jpg"
    },
    {
        "text": "En una zona de obras un operario le indica que tiene que detener su vehículo, ¿está obligado a obedecerle?",
        "options": [
            "No, sólo los agentes de circulación están autorizados a regular la circulación.",
            "No, el personal de obras en la vía sólo puede advertir la necesidad de extremar la atención.",
            "Sí, en ausencia de agentes de circulación, el personal de obras en la vía está autorizado a regular la circulación."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P1230.jpg"
    },
    {
        "text": "El personal habilitado de la organización de una prueba deportiva prohíbe el acceso de su vehículo a la zona donde se está celebrando la misma; ¿está obligado a obedecerlo?",
        "options": [
            "No, al no tratarse de agente de Tráfico o de protección civil.",
            "Solo si se acerca algún participante de la prueba deportiva.",
            "Sí."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T510128_250623.jpg"
    },
    {
        "text": "Los agentes de la Autoridad de Tráfico, ¿cuándo podrán proceder a la inmovilización de una motocicleta?",
        "options": [
            "Cuando su conductor no lleve puesto el casco.",
            "Cuando el pasajero de la misma circule sin el casco",
            "En ningún caso."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T500802.jpg"
    },
    {
        "text": "Los agentes de la autoridad encargados de la vigilancia del tráfico podrán proceder a la inmovilización de un vehículo...",
        "options": [
            "si circula superando los niveles de gases, humos y ruidos reglamentariamente permitidos.",
            "si su conductor no dispone de los originales de la documentación del vehículo.",
            "siempre que sea sancionado."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T511605.jpg"
    },
    {
        "text": "En un control, los agentes le piden que haga la prueba de alcohol. ¿Es obligatorio hacer la prueba?",
        "options": [
            "Sí, pero cuando tengo un accidente.",
            "Sí, pero cuando he cometido una infracción.",
            "Sí, siempre."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T500403.jpg"
    },
    {
        "text": "En un control preventivo, ¿pueden los agentes someter a un conductor a una prueba de detección de estupefacientes?",
        "options": [
            "Sí.",
            "No, este tipo de pruebas sólo se pueden realizar en un centro médico.",
            "No, solamente si está implicado en un accidente."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T505514.jpg"
    },
    {
        "text": "Cuando un conductor da positivo en las pruebas de alcoholemia, ¿los agentes pueden inmovilizar su vehículo?",
        "options": [
            "Sí.",
            "No, sólo pueden sancionar al conductor.",
            "No, aunque sobrepase la tasa máxima permitida."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T513910.jpg"
    },
    {
        "text": "El conductor de un vehículo está obligado a mostrar a los agentes de la autoridad que se lo soliciten...",
        "options": [
            "únicamente el permiso de circulación.",
            "el permiso de circulación y la tarjeta de inspección técnica.",
            "solamente la tarjeta de inspección técnica."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T502211.jpg"
    },
    {
        "text": "Si los agentes detectan que su vehículo no tiene la ITV en regla, ¿de qué plazo dispondrá para pasarla?",
        "options": [
            "24 horas.",
            "10 días.",
            "30 días."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T510102_250317.jpg"
    },
    {
        "text": "Una persona en silla de ruedas, ¿debe obedecer las señales de los Agentes y semáforos cuando circula por el arcén de una vía fuera de poblado?",
        "options": [
            "Sí, siempre.",
            "Solo obedecerá las señales de los agentes, pero no las de los semáforos.",
            "No, no está obligado porque es un peatón."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T510117_050723.jpg"
    }
]
            
            ;

            const container = document.getElementById('test-container');
            const paginationRow1 = document.getElementById('pagination-row-1');
            const paginationRow2 = document.getElementById('pagination-row-2');

            // Generar preguntas
            questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.setAttribute('data-correct', question.correct);
                questionDiv.innerHTML = `
                    <div class="question-image">
                        <img src="${question.image}" alt="Imagen de la pregunta">
                    </div>
                    <div class="question-content">
                        <h3>${index + 1}. ${question.text}</h3>
                        <div class="options">
                            ${question.options.map((option, idx) => `
                                <div class="option" data-answer="${String.fromCharCode(65 + idx)}">
                                    <span class="option-circle">${String.fromCharCode(65 + idx)}</span>
                                    ${option}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                container.appendChild(questionDiv);
            });

            // Generar paginación
            for (let i = 0; i < questions.length; i++) {
                const button = document.createElement('button');
                button.textContent = `${i + 1}`;
                button.addEventListener('click', () => showQuestion(i));
                if (i < 15) {
                    paginationRow1.appendChild(button);
                } else {
                    paginationRow2.appendChild(button);
                }
            }

            // Mostrar la primera pregunta
            showQuestion(0);

            // Función para mostrar una pregunta específica
            function showQuestion(index) {
                document.querySelectorAll('.question').forEach((q, i) => {
                    q.style.display = i === index ? 'flex' : 'none';
                });
                document.querySelectorAll('.pagination button').forEach((btn, i) => {
                    btn.style.backgroundColor = i === index ? '#ff7aa2' : '#ffa5c3';
                });
            }

            // Evento para las opciones de respuesta
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const question = this.closest('.question');
                    const questionIndex = Array.from(container.children).indexOf(question);
                    const isCorrect = this.getAttribute('data-answer') === question.getAttribute('data-correct');
                    
                    if (question.dataset.answered) return;

                    question.dataset.answered = true;

                    question.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                        opt.style.pointerEvents = 'none';
                    });
                    
                    this.classList.add('selected', isCorrect ? 'correct' : 'incorrect');

                    if (!isCorrect) {
                        question.querySelector(`.option[data-answer="${question.getAttribute('data-correct')}"]`).classList.add('correct');
                    }

                    // Actualizar el botón de paginación
                    const paginationButton = questionIndex < 15 ? paginationRow1.children[questionIndex] : paginationRow2.children[questionIndex - 15];
                    paginationButton.classList.add(isCorrect ? 'correct' : 'incorrect');
                });
            });

            // Evento para corregir el test
            document.getElementById('correct-test').addEventListener('click', () => {
                let wrongAnswers = 0;
                document.querySelectorAll('.question').forEach((question, index) => {
                    const selected = question.querySelector('.option.selected');
                    const isCorrect = selected && selected.getAttribute('data-answer') === question.getAttribute('data-correct');
                    if (!isCorrect) {
                        wrongAnswers++;
                    }
                    // Actualizar el botón de paginación si no se ha respondido
                    if (!selected) {
                        const paginationButton = index < 15 ? paginationRow1.children[index] : paginationRow2.children[index - 15];
                        paginationButton.classList.add('incorrect');
                    }
                });
                const resultMessage = `Has fallado ${wrongAnswers} respuestas.`;

                const alert = document.getElementById('custom-alert');
                document.getElementById('alert-message').textContent = resultMessage;
                alert.style.display = 'block';
            });
        });

        function closeAlert() {
            document.getElementById('custom-alert').style.display = 'none';
        }
    </script>

    
</body>
</html>