<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Autoescuela</title>
    <link rel="stylesheet" href="../../../Assets/style.css">
</head>
<body>

    
    <div class="container">
        <h1 style="text-align: center; color: #ffa5c3;">Test de Autoescuela</h1>
        <div id="test-container">
            <!-- Aquí se generarán dinámicamente las preguntas -->
        </div>
        <div class="pagination">
            <div class="pagination-row" id="pagination-row-1"></div>
            <div class="pagination-row" id="pagination-row-2"></div>
        </div>
        <button id="correct-test">Corregir Test</button>
    </div>

    <!-- Custom Alert HTML -->
    <div class="custom-alert" id="custom-alert">
        <h2>Resultado del Test</h2>
        <p id="alert-message">Aquí irá el mensaje del resultado.</p>
        <button onclick="closeAlert()">Cerrar</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const questions = [
    {
        "text": "Un turismo, ¿qué debe hacer para incorporarse a la circulación?",
        "options": [
            "Seguir siempre las indicaciones de otra persona.",
            "Señalizar la maniobra porque los demás tienen que ceder el paso.",
            "Asegurarse de que puede hacerlo sin peligro para los demás usuarios."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T503920.jpg"
    },
    {
        "text": "El vehículo estacionado se quiere incorporar a la circulación. ¿Qué debe hacer?",
        "options": [
            "Debe advertirlo tocando el claxon.",
            "No tiene obligación de advertirlo.",
            "Debe advertirlo con los indicadores de dirección."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P0724.jpg"
    },
    {
        "text": "Al incorporarse a una vía debe tener en cuenta la posición, trayectoria y velocidad...",
        "options": [
            "sólo de los vehículos que circulan por la parte derecha de la vía.",
            "sólo de los vehículos que circulan por la parte izquierda de la vía.",
            "de otros vehículos y usuarios que circulan por la vía."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T509523.jpg"
    },
    {
        "text": "¿Debe facilitar la incorporación a la circulación a otros vehículos?",
        "options": [
            "Sí.",
            "Sí, sobre todo a los vehículos de transporte colectivo de viajeros cuando salga de una parada señalada.",
            "Sí, pero sólo dentro de poblado."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T513409.jpg"
    },
    {
        "text": "Cuando se incorpore a la circulación, debe...",
        "options": [
            "ceder el paso a otros vehículos.",
            "hacerlo lo más rápido posible.",
            "evitar hacerlo sin el alumbrado de posición encendido."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T514523.jpg"
    },
    {
        "text": "Un vehículo va a incorporarse a la circulación. ¿Cuándo debe ceder el paso?",
        "options": [
            "Cuando entra en el carril de circulación desde el lado izquierdo, solamente.",
            "Cuando entra en el carril de circulación desde el lado derecho, solamente.",
            "Siempre."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P0725.jpg"
    },
    {
        "text": "El vehículo amarillo de la fotografía se quiere incorporar y usted se aproxima con el vehículo rojo, ¿debe cederle el paso?",
        "options": [
            "No, pero debo facilitárselo en la medida de lo posible.",
            "Sí, porque se incorpora por la derecha.",
            "Sí, en una vía urbana."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T514825.jpg"
    },
    {
        "text": "Si un vehículo estacionado se incorpora a la circulación, ¿tiene preferencia para realizar la maniobra?",
        "options": [
            "Sí, si se ha señalizado previamente.",
            "No.",
            "Sí, en cualquier caso."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T513311.jpg"
    },
    {
        "text": "Para incorporarse a la circulación, ¿se puede dar marcha atrás?",
        "options": [
            "Sí, es una de las maniobras en las que está permitido.",
            "No, en ningún caso.",
            "Sí, pero sólo en vías urbanas."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T501828.jpg"
    },
    {
        "text": "¿Cómo se incorporará a la circulación desde este estacionamiento?",
        "options": [
            "Siguiendo las indicaciones de otra persona, si fuera necesario, para hacerlo sin peligro para los demás usuarios.",
            "Con la señal de emergencia encendida para que otros vehículos puedan ver la maniobra.",
            "Avisando con las señales acústicas, siempre."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T506023.jpg"
    },
    {
        "text": "¿Puede incorporarse a la circulación desde un estacionamiento circulando marcha atrás?",
        "options": [
            "Sí, mientras que el recorrido no sea superior a 20 metros.",
            "Sí, aunque el recorrido sea superior a 20 metros.",
            "Sí, pero sin invadir ningún cruce de vías."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T510121_050216.jpg"
    },
    {
        "text": "Para incorporarse a la circulación, ¿está permitido circular marcha atrás más de quince metros?",
        "options": [
            "Sí, en cualquier caso.",
            "No.",
            "Sí, siempre que no se invada un cruce de vías."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T502014.jpg"
    },
    {
        "text": "¿Puede incorporarse a la circulación dando marcha atrás invadiendo una intersección?",
        "options": [
            "Sí, cuando el recorrido no sea superior a 15 metros.",
            "Sí, pero a una velocidad reducida que permita detenerse si existe algún peligro.",
            "No, marcha atrás no puede invadir una intersección."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T511925.jpg"
    },
    {
        "text": "El conductor de un vehículo que pretende incorporarse a la circulación está obligado a...",
        "options": [
            "cerciorarse previamente de que pueda hacerlo sin peligro.",
            "poner el intermitente, únicamente.",
            "seguir siempre las indicaciones de otra persona."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T504705.jpg"
    },
    {
        "text": "Si se sale de un garaje para incorporarse a la circulación, se debe ceder el paso...",
        "options": [
            "exclusivamente a los vehículos que se aproximen por la izquierda.",
            "exclusivamente a los vehículos que se aproximen por la derecha.",
            "tanto a los vehículos que se aproximen por la derecha como por la izquierda."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P0726.jpg"
    },
    {
        "text": "La incorporación desde un inmueble a la vía pública, debe realizarse...",
        "options": [
            "a una velocidad que permita la detención en el acto, y cediendo el paso a peatones y vehículos.",
            "advirtiendo con la señal acústica y la señal de emergencia.",
            "rápidamente para no entorpecer a peatones y vehículos."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T505319.jpg"
    },
    {
        "text": "El vehículo azul sale marcha atrás de un garaje. ¿Quién tiene preferencia?",
        "options": [
            "El vehículo azul.",
            "La bicicleta.",
            "Ninguno de los dos."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T510109_050723.jpg"
    },
    {
        "text": "¿Cómo debe incorporarse a la vía el vehículo que sale del camino sin pavimentar?",
        "options": [
            "Cediendo el paso y a una velocidad que permita detenerse en el acto.",
            "Cediendo el paso a los vehículos de la derecha.",
            "Acelerando para alcanzar la velocidad máxima de la vía."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P0727.jpg"
    },
    {
        "text": "El turismo amarillo sale de una gasolinera para incorporarse a la circulación, en caso necesario, ¿cuándo tiene que ceder el paso?",
        "options": [
            "Cuando se incorpora por la derecha.",
            "Cuando se incorpora por la izquierda.",
            "Cuando se incorpore por la derecha o por la izquierda."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T512625.jpg"
    },
    {
        "text": "Cuando se incorporen a la circulación, es obligatorio facilitar la maniobra a...",
        "options": [
            "los taxis, pero únicamente en poblado.",
            "todos los vehículos.",
            "los vehículos de transporte público de viajeros, únicamente."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T504125.jpg"
    },
    {
        "text": "El autobús se incorpora desde la parada. ¿Es obligatorio facilitarle el paso?",
        "options": [
            "Sólo si se dedica al transporte escolar.",
            "No.",
            "Sí."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T503528.jpg"
    },
    {
        "text": "¿Tiene que ceder el paso a este autobús que quiere incorporarse a la circulación?",
        "options": [
            "Sí, en la medida de lo posible, llegando incluso a detener el vehículo.",
            "No, porque se trata de una vía urbana.",
            "No, porque los turismos tienen preferencia."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P0729.jpg"
    },
    {
        "text": "¿Qué debe hacer al ver que el autobús pretende incorporase a la circulación?",
        "options": [
            "Facilitar la maniobra del autobús, llegando a detenerse, si fuera preciso.",
            "Adoptar precauciones, porque tienen absoluta prioridad de paso.",
            "Continuar normalmente, porque no tiene prioridad."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T512111.jpg"
    },
    {
        "text": "Todo conductor está obligado a...",
        "options": [
            "cambiar de carril para permitir la incorporación de otros vehículos a la vía por la que circula.",
            "facilitar, en la medida de lo posible, la incorporación de otros vehículos a la vía por la que circula.",
            "ceder el paso a los vehículos que se incorporan a la vía por la que circula"
        ],
        "correct": "B",
        "image": "../../../Assets/img/T511529.jpg"
    },
    {
        "text": "Al incorporarse a una autopista, los conductores deberán...",
        "options": [
            "detenerse siempre al final del carril.",
            "aumentar la velocidad para incorporarse rápidamente, no siendo obligatorio ceder el paso a los vehículos que circulen por la autopista.",
            "tener en cuenta la posición, trayectoria y velocidad de los vehículos que puedan aproximarse."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T503729.jpg"
    },
    {
        "text": "Al incorporarse a la autopista por el carril de aceleración, debe...",
        "options": [
            "acelerar hasta alcanzar la velocidad adecuada al final del carril.",
            "disminuir la velocidad y detenerse al final del carril, obligatoriamente.",
            "acelerar hasta alcanzar obligatoriamente 120 km/h al final del carril."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T511921.jpg"
    },
    {
        "text": "Para incorporarse a una vía por un carril de aceleración, ¿dónde debe cerciorarse de que puede realizar la maniobra sin peligro?",
        "options": [
            "El lugar es indiferente.",
            "Al final del carril de aceleración.",
            "Al principio del carril de aceleración."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T510107_250116.jpg"
    },
    {
        "text": "Para incorporarse a la autopista, ¿puedes pisar la zona cebreada?",
        "options": [
            "Sí, con el fin de acortar la duración de la maniobra.",
            "Sí, si ya he alcanzado en ese momento la velocidad adecuada para incorporarme a la circulación.",
            "No, está prohibido."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T514613.jpg"
    },
    {
        "text": "Los vehículos que circulan por la autovía, ¿facilitarán el paso a los vehículos que se incorporan desde el carril de aceleración?",
        "options": [
            "No, salvo que se trate de vehículos de transporte colectivo.",
            "Sí, pero sólo a los vehículos que se incorporen por su lado derecho.",
            "Sí, a cualquier vehículo que se incorpore, en la medida de lo posible."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P0730.jpg"
    },
    {
        "text": "A la vista de esta señal, ¿debe facilitar la incorporación de los vehículos que se incorporen por la derecha?",
        "options": [
            "No, nunca, ya que le otorga la prioridad.",
            "Sí, en la medida de lo posible.",
            "Sólo si se trata de vehículos de transporte colectivo de viajeros."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T503413.jpg"
    }
]
            
            ;

            const container = document.getElementById('test-container');
            const paginationRow1 = document.getElementById('pagination-row-1');
            const paginationRow2 = document.getElementById('pagination-row-2');

            // Generar preguntas
            questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.setAttribute('data-correct', question.correct);
                questionDiv.innerHTML = `
                    <div class="question-image">
                        <img src="${question.image}" alt="Imagen de la pregunta">
                    </div>
                    <div class="question-content">
                        <h3>${index + 1}. ${question.text}</h3>
                        <div class="options">
                            ${question.options.map((option, idx) => `
                                <div class="option" data-answer="${String.fromCharCode(65 + idx)}">
                                    <span class="option-circle">${String.fromCharCode(65 + idx)}</span>
                                    ${option}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                container.appendChild(questionDiv);
            });

            // Generar paginación
            for (let i = 0; i < questions.length; i++) {
                const button = document.createElement('button');
                button.textContent = `${i + 1}`;
                button.addEventListener('click', () => showQuestion(i));
                if (i < 15) {
                    paginationRow1.appendChild(button);
                } else {
                    paginationRow2.appendChild(button);
                }
            }

            // Mostrar la primera pregunta
            showQuestion(0);

            // Función para mostrar una pregunta específica
            function showQuestion(index) {
                document.querySelectorAll('.question').forEach((q, i) => {
                    q.style.display = i === index ? 'flex' : 'none';
                });
                document.querySelectorAll('.pagination button').forEach((btn, i) => {
                    btn.style.backgroundColor = i === index ? '#ff7aa2' : '#ffa5c3';
                });
            }

            // Evento para las opciones de respuesta
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const question = this.closest('.question');
                    const questionIndex = Array.from(container.children).indexOf(question);
                    const isCorrect = this.getAttribute('data-answer') === question.getAttribute('data-correct');
                    
                    if (question.dataset.answered) return;

                    question.dataset.answered = true;

                    question.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                        opt.style.pointerEvents = 'none';
                    });
                    
                    this.classList.add('selected', isCorrect ? 'correct' : 'incorrect');

                    if (!isCorrect) {
                        question.querySelector(`.option[data-answer="${question.getAttribute('data-correct')}"]`).classList.add('correct');
                    }

                    // Actualizar el botón de paginación
                    const paginationButton = questionIndex < 15 ? paginationRow1.children[questionIndex] : paginationRow2.children[questionIndex - 15];
                    paginationButton.classList.add(isCorrect ? 'correct' : 'incorrect');
                });
            });

            // Evento para corregir el test
            document.getElementById('correct-test').addEventListener('click', () => {
                let wrongAnswers = 0;
                document.querySelectorAll('.question').forEach((question, index) => {
                    const selected = question.querySelector('.option.selected');
                    const isCorrect = selected && selected.getAttribute('data-answer') === question.getAttribute('data-correct');
                    if (!isCorrect) {
                        wrongAnswers++;
                    }
                    // Actualizar el botón de paginación si no se ha respondido
                    if (!selected) {
                        const paginationButton = index < 15 ? paginationRow1.children[index] : paginationRow2.children[index - 15];
                        paginationButton.classList.add('incorrect');
                    }
                });
                const resultMessage = `Has fallado ${wrongAnswers} respuestas.`;

                const alert = document.getElementById('custom-alert');
                document.getElementById('alert-message').textContent = resultMessage;
                alert.style.display = 'block';
            });
        });

        function closeAlert() {
            document.getElementById('custom-alert').style.display = 'none';
        }
    </script>

    
</body>
</html>