<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Autoescuela</title>
    <link rel="stylesheet" href="../../../Assets/style.css">
</head>
<body>

    
    <div class="container">
        <h1 style="text-align: center; color: #ffa5c3;">Test de Autoescuela</h1>
        <div id="test-container">
            <!-- Aquí se generarán dinámicamente las preguntas -->
        </div>
        <div class="pagination">
            <div class="pagination-row" id="pagination-row-1"></div>
            <div class="pagination-row" id="pagination-row-2"></div>
        </div>
        <button id="correct-test">Corregir Test</button>
    </div>

    <!-- Custom Alert HTML -->
    <div class="custom-alert" id="custom-alert">
        <h2>Resultado del Test</h2>
        <p id="alert-message">Aquí irá el mensaje del resultado.</p>
        <button onclick="closeAlert()">Cerrar</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const questions = [
    {
        "text": "En el ámbito del tráfico, ¿a qué se llama grupos vulnerables?",
        "options": [
            "A los pasajeros que resultan heridos en un accidente de automóvil.",
            "A los jóvenes menores de 30 años que resultan heridos en accidente.",
            "A los grupos de población más propensos a sufrir un accidente."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T513818.jpg"
    },
    {
        "text": "¿Cuáles son los principales grupos vulnerables en el tráfico?",
        "options": [
            "Sólo los ciclistas.",
            "Sólo los niños y las personas mayores.",
            "Los niños, los jóvenes y las personas mayores."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T512304.jpg"
    },
    {
        "text": "¿Dónde sufren los peatones más accidentes?",
        "options": [
            "En las ciudades.",
            "En las vías interurbanas.",
            "Tanto en poblado como fuera de poblado la cantidad de accidentes es igual."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P2119.jpg"
    },
    {
        "text": "Entre las conductas de riesgo más comunes que cometen los peatones está...",
        "options": [
            "respetar los semáforos pero no los pasos para peatones.",
            "no situarse en las calzadas o en los arcenes correctamente.",
            "cruzar la vía de manera reglamentaria."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P2120.jpg"
    },
    {
        "text": "Los peatones suelen cometer muchas infracciones, entre ellas...",
        "options": [
            "respetar los colores de los semáforos.",
            "evaluar bien los riesgos de la circulación.",
            "no utilizar los pasos para peatones."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T511528.jpg"
    },
    {
        "text": "Al acercarse a un peatón que quiere cruzar la calzada, ¿qué debe hacer?",
        "options": [
            "Moderar la velocidad y detenerse si es necesario.",
            "Continuar circulando, ya que el vehículo tiene prioridad.",
            "Tocar el claxon y seguir la marcha a la misma velocidad."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P2122.jpg"
    },
    {
        "text": "Los niños suelen tener problemas en el tráfico porque...",
        "options": [
            "su campo visual es mayor.",
            "su visión periférica es mayor.",
            "no conocen todos los comportamientos adecuados para circular."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P2123.jpg"
    },
    {
        "text": "El campo visual de los niños es...",
        "options": [
            "menor que el de los adultos.",
            "mayor que el de los adultos.",
            "igual que el de los adultos."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T510128_150316.jpg"
    },
    {
        "text": "Cuando se aproxime a niños o ancianos...",
        "options": [
            "debe adoptar las precauciones necesarias para no ponerles en peligro.",
            "les avisará con señales acústicas.",
            "se detendrá para cederles el paso."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T500819.jpg"
    },
    {
        "text": "Al acercarse a un lugar en el que se prevea la presencia de niños, ¿qué precauciones se deben tomar?",
        "options": [
            "Mantener la velocidad y estar atento al cumplimiento de la señalización vertical.",
            "Hacer señales acústicas para indicar nuestra presencia.",
            "Moderar la velocidad y si fuera preciso, detener el vehículo."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T513802.jpg"
    },
    {
        "text": "En caso de atropello a un niño, el mayor impacto se produce habitualmente...",
        "options": [
            "en las extremidades inferiores.",
            "en el tronco.",
            "en la cabeza o en partes vitales del cuerpo."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T514108.jpg"
    },
    {
        "text": "Una de las principales causas de accidente en personas jóvenes es...",
        "options": [
            "la falta de reflejos.",
            "la falta de confianza en su capacidad de conducción.",
            "el exceso de velocidad."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T508108.jpg"
    },
    {
        "text": "Los jóvenes suelen realizar más maniobras de riesgo...",
        "options": [
            "cuando van solos.",
            "tanto cuando van solos como cuando van acompañados.",
            "cuando van acompañados."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T505922.jpg"
    },
    {
        "text": "En materia de tráfico, ¿están los jóvenes muy influenciados por la publicidad?",
        "options": [
            "Sí, todos.",
            "Sí, principalmente por aquellos anuncios que incitan claramente al riesgo",
            "No, la publicidad no les afecta."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T506828.jpg"
    },
    {
        "text": "¿En qué situación suelen tener menos accidentes las personas mayores como peatones?",
        "options": [
            "Cuando van acompañadas de otra persona mayor.",
            "Cuando van acompañando a niños.",
            "Cuando van solas."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T504629.jpg"
    },
    {
        "text": "A las personas mayores, ¿qué problemas pueden afectarles en la conducción?",
        "options": [
            "El desconocimiento de las normas de tráfico.",
            "Los problemas de visión, audición y el consumo de medicamentos.",
            "La lentitud en los reflejos, principalmente."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T505930.jpg"
    },
    {
        "text": "Las personas mayores tienen mayor número de accidentes por...",
        "options": [
            "no conocer bien las señales.",
            "apreciar con dificultad los colores de los semáforos.",
            "cruzar frecuentemente sin mirar."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P2125.jpg"
    },
    {
        "text": "¿En qué situaciones complejas pueden tener más accidentes las personas mayores?",
        "options": [
            "En las que exijan una respuesta rápida.",
            "En los cambios de dirección.",
            "En los adelantamientos."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P2126.jpg"
    },
    {
        "text": "Al aproximarse a un invidente que pretende cruzar la calzada, ¿qué debe hacer?",
        "options": [
            "Tocar el claxon para que se aparte.",
            "Moderar la velocidad y detenerse si es necesario.",
            "Continuar circulando, ya que las personas invidentes no pueden cruzar la calzada sin acompañante."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T505513.jpg"
    },
    {
        "text": "Los accidentes de tráfico constituyen la principal causa de mortalidad en el intervalo entre los...",
        "options": [
            "15 y los 29 años.",
            "45 y los 55 años.",
            "5 y los 18 años."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P2129.jpg"
    },
    {
        "text": "Los accidentes causados por una distracción son más frecuentes en...",
        "options": [
            "jóvenes entre 18-25 años y los mayores de 70 años.",
            "mayores de 65 años.",
            "noveles."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T508822.jpg"
    },
    {
        "text": "La distracción es el factor de riesgo en la conducción que...",
        "options": [
            "causa uno de cada tres accidentes mortales.",
            "provoca accidentes con heridos, pero no con víctimas mortales.",
            "cada vez tiene menos incidencia en la accidentalidad."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T510128_250723.jpg"
    },
    {
        "text": "¿Qué grupo de usuarios es más proclive a sufrir un siniestro?",
        "options": [
            "Los conductores profesionales.",
            "Los ciclistas.",
            "Los conductores de entre 30 y 50 años."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T510106_150116.jpg"
    },
    {
        "text": "Para evitar atropellos a los ciclistas es conveniente...",
        "options": [
            "aumentar la velocidad para adelantarlos cuanto antes.",
            "al adelantarlos dejar en todo momento una separación lateral suficiente.",
            "hacerles señales acústicas para que se aparten."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T502925.jpg"
    },
    {
        "text": "¿Cuándo se producen más accidentes de ciclistas, en verano o en invierno?",
        "options": [
            "Es indiferente.",
            "En invierno, debido a las condiciones meteorológicas adversas.",
            "En verano, puesto que con la llegada del buen tiempo hay más ciclistas en las carreteras."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T512616.jpg"
    },
    {
        "text": "¿Cuál es el accidente más frecuente que sufren los ciclistas?",
        "options": [
            "La colisión frontal con otro vehículo.",
            "Los atropellos.",
            "Las salidas de vía."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T504413.jpg"
    },
    {
        "text": "Cuando son víctimas de atropello, las lesiones más graves en los ciclistas, que pueden incluso provocar la muerte, se localizan en…",
        "options": [
            "las piernas.",
            "la cabeza.",
            "las manos."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T504906.jpg"
    },
    {
        "text": "La conducción de un vehículo de dos ruedas suele ser más peligrosa porque...",
        "options": [
            "puede circular a más velocidad que los turismos.",
            "la posición del conductor es más elevada que en un turismo.",
            "es menos visible para los demás conductores."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T505510.jpg"
    },
    {
        "text": "El accidente de motocicleta más frecuente es...",
        "options": [
            "la colisión por alcance de vehículos que van a más velocidad.",
            "la colisión frontal o frontolateral con otro vehículo.",
            "la colisión frontal con otras motocicletas."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T505416.jpg"
    },
    {
        "text": "¿Es conveniente circular en paralelo junto a un vehículo de dos ruedas?",
        "options": [
            "Sí.",
            "No, salvo en vías urbanas o con mucho tráfico.",
            "No."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T514724.jpg"
    }
]
            
            ;

            const container = document.getElementById('test-container');
            const paginationRow1 = document.getElementById('pagination-row-1');
            const paginationRow2 = document.getElementById('pagination-row-2');

            // Generar preguntas
            questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.setAttribute('data-correct', question.correct);
                questionDiv.innerHTML = `
                    <div class="question-image">
                        <img src="${question.image}" alt="Imagen de la pregunta">
                    </div>
                    <div class="question-content">
                        <h3>${index + 1}. ${question.text}</h3>
                        <div class="options">
                            ${question.options.map((option, idx) => `
                                <div class="option" data-answer="${String.fromCharCode(65 + idx)}">
                                    <span class="option-circle">${String.fromCharCode(65 + idx)}</span>
                                    ${option}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                container.appendChild(questionDiv);
            });

            // Generar paginación
            for (let i = 0; i < questions.length; i++) {
                const button = document.createElement('button');
                button.textContent = `${i + 1}`;
                button.addEventListener('click', () => showQuestion(i));
                if (i < 15) {
                    paginationRow1.appendChild(button);
                } else {
                    paginationRow2.appendChild(button);
                }
            }

            // Mostrar la primera pregunta
            showQuestion(0);

            // Función para mostrar una pregunta específica
            function showQuestion(index) {
                document.querySelectorAll('.question').forEach((q, i) => {
                    q.style.display = i === index ? 'flex' : 'none';
                });
                document.querySelectorAll('.pagination button').forEach((btn, i) => {
                    btn.style.backgroundColor = i === index ? '#ff7aa2' : '#ffa5c3';
                });
            }

            // Evento para las opciones de respuesta
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const question = this.closest('.question');
                    const questionIndex = Array.from(container.children).indexOf(question);
                    const isCorrect = this.getAttribute('data-answer') === question.getAttribute('data-correct');
                    
                    if (question.dataset.answered) return;

                    question.dataset.answered = true;

                    question.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                        opt.style.pointerEvents = 'none';
                    });
                    
                    this.classList.add('selected', isCorrect ? 'correct' : 'incorrect');

                    if (!isCorrect) {
                        question.querySelector(`.option[data-answer="${question.getAttribute('data-correct')}"]`).classList.add('correct');
                    }

                    // Actualizar el botón de paginación
                    const paginationButton = questionIndex < 15 ? paginationRow1.children[questionIndex] : paginationRow2.children[questionIndex - 15];
                    paginationButton.classList.add(isCorrect ? 'correct' : 'incorrect');
                });
            });

            // Evento para corregir el test
            document.getElementById('correct-test').addEventListener('click', () => {
                let wrongAnswers = 0;
                document.querySelectorAll('.question').forEach((question, index) => {
                    const selected = question.querySelector('.option.selected');
                    const isCorrect = selected && selected.getAttribute('data-answer') === question.getAttribute('data-correct');
                    if (!isCorrect) {
                        wrongAnswers++;
                    }
                    // Actualizar el botón de paginación si no se ha respondido
                    if (!selected) {
                        const paginationButton = index < 15 ? paginationRow1.children[index] : paginationRow2.children[index - 15];
                        paginationButton.classList.add('incorrect');
                    }
                });
                const resultMessage = `Has fallado ${wrongAnswers} respuestas.`;

                const alert = document.getElementById('custom-alert');
                document.getElementById('alert-message').textContent = resultMessage;
                alert.style.display = 'block';
            });
        });

        function closeAlert() {
            document.getElementById('custom-alert').style.display = 'none';
        }
    </script>

    
</body>
</html>