<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Autoescuela</title>
    <link rel="stylesheet" href="../../../Assets/style.css">
</head>
<body>

    
    <div class="container">
        <h1 style="text-align: center; color: #ffa5c3;">Test de Autoescuela</h1>
        <div id="test-container">
            <!-- Aquí se generarán dinámicamente las preguntas -->
        </div>
        <div class="pagination">
            <div class="pagination-row" id="pagination-row-1"></div>
            <div class="pagination-row" id="pagination-row-2"></div>
        </div>
        <button id="correct-test">Corregir Test</button>
    </div>

    <!-- Custom Alert HTML -->
    <div class="custom-alert" id="custom-alert">
        <h2>Resultado del Test</h2>
        <p id="alert-message">Aquí irá el mensaje del resultado.</p>
        <button onclick="closeAlert()">Cerrar</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const questions = [
    {
        "text": "Los peatones tienen preferencia...",
        "options": [
            "en las zonas peatonales.",
            "al bajar de cualquier vehículo.",
            "en las vías urbanas."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T504418.jpg"
    },
    {
        "text": "En los pasos para peatones no regulados por semáforo o agente, ¿tienen preferencia los peatones?",
        "options": [
            "No, aunque por cortesía se les puede ceder el paso.",
            "Sí, en cualquier caso.",
            "Sí, solamente en vías urbanas."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P0522.jpg"
    },
    {
        "text": "Un peatón pretende cruzar por un paso de peatones debidamente señalizado, ¿cuándo debe penetrar en la calzada?",
        "options": [
            "Cuando el peatón lo decida, puesto que dispone de la preferencia de paso.",
            "Cuando la distancia y velocidad de los vehículos permitan hacerlo con seguridad.",
            "Solamente cuando no haya vehículos cerca."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P0523.jpg"
    },
    {
        "text": "Una fila de escolares está cruzando la calzada. ¿Debe cederles el paso?",
        "options": [
            "No, cuando no llevan paleta de STOP.",
            "Solamente en los pasos para peatones.",
            "Si."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T506505.jpg"
    },
    {
        "text": "Los vehículos tienen prioridad sobre los peatones, excepto cuando...",
        "options": [
            "se encuentren en la proximidad de un paso para peatones.",
            "los peatones se aproximen por la derecha.",
            "vayan a girar en una intersección para entrar en otra vía y haya peatones cruzándola."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P0524.jpg"
    },
    {
        "text": "Al cruzar un arcén por el que transitan peatones, ¿qué debe hacer?",
        "options": [
            "Cederles el paso solamente cuando formen un grupo.",
            "Avisarles con las señales acústicas para que se aparten.",
            "Cederles el paso si no disponen de zona peatonal."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T505226.jpg"
    },
    {
        "text": "Al salir de un garaje, ¿qué debe hacer?",
        "options": [
            "Moderar la velocidad por si hay peatones cruzando porque tienen prioridad.",
            "Aumentar la velocidad para salir lo antes posible.",
            "Detenerse siempre a la salida."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T500306.jpg"
    },
    {
        "text": "¿Cuándo tienen prioridad de paso los animales sobre los vehículos?",
        "options": [
            "Cuando se encuentren en una cañada debidamente señalizada.",
            "Si encuentra la señal de peligro por la proximidad de animales domésticos.",
            "Si se trata de un rebaño que circula como una unidad."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T505711.jpg"
    },
    {
        "text": "Si se encuentra con un rebaño en esta vía, ¿debe ceder el paso a los animales?",
        "options": [
            "No, los animales en la calzada no tienen prioridad de paso nunca.",
            "Sí, es un paso de animales domésticos y se debe ceder el paso.",
            "Sólo cuando ya estén cruzando."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T504303.jpg"
    },
    {
        "text": "Esta señal...",
        "options": [
            "prohíbe el paso de animales.",
            "advierte de peligro por proximidad de una zona de paso frecuente de animales domésticos.",
            "da prioridad a los animales."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P0525.jpg"
    },
    {
        "text": "Los conductores deben ceder el paso a los animales...",
        "options": [
            "siempre que se crucen sus trayectorias.",
            "cuando vayan a girar con su vehículo para entrar en otra vía y haya animales cruzándola, aunque no exista paso para éstos.",
            "únicamente en las cañadas debidamente señalizadas."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T500903.jpg"
    },
    {
        "text": "Si atraviesa un arcén por el que transitan animales, ¿qué debe hacer?",
        "options": [
            "Cederles el paso únicamente cuando ellos formen un grupo.",
            "Hacerles gestos a los animales para que crucen.",
            "Cederles el paso."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T513517.jpg"
    },
    {
        "text": "En un paso para ciclistas, ¿tienen éstos prioridad sobre otros vehículos?",
        "options": [
            "No.",
            "Sí, siempre.",
            "Sí, pero sólo si se aproximan por la derecha."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T504925.jpg"
    },
    {
        "text": "Un turismo quiere cruzar esta zona. ¿Deberá ceder el paso?",
        "options": [
            "Sí, a los ciclistas que circulan por el carril bici.",
            "No, porque el turismo tiene prioridad.",
            "Sí, pero sólo si el ciclista no puede frenar a tiempo."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T505417.jpg"
    },
    {
        "text": "Los ciclistas tienen prioridad de paso respecto a los vehículos de motor...",
        "options": [
            "cuando circulen por un carril bici debidamente señalizado.",
            "únicamente en los pasos para ciclistas.",
            "siempre que circulen en grupo."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P0529.jpg"
    },
    {
        "text": "En una intersección no señalizada, ¿qué vehículos tendrán prioridad sobre los demás usuarios?",
        "options": [
            "Los que circulan sobre raíles.",
            "Los trenes, pero no los tranvías.",
            "Los que tengan la izquierda libre."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T508719_2.jpg"
    },
    {
        "text": "En una intersección donde no esté señalizada la prioridad, ¿debe ceder el paso a un tranvía?",
        "options": [
            "Sí, el tranvía tiene prioridad tanto si se aproxima por la derecha como por la izquierda.",
            "No, ya que los tranvías no tienen prioridad de paso.",
            "Sólo debe ceder el paso al tranvía si se aproxima por la derecha."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P0516.jpg"
    },
    {
        "text": "¿Quién tiene preferencia de paso en esta intersección?",
        "options": [
            "El tranvía.",
            "El automóvil.",
            "El que circule por la vía principal."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T511923.jpg"
    },
    {
        "text": "En esta situación, ¿quién tiene preferencia de paso?",
        "options": [
            "El tranvía porque viene por la derecha.",
            "El tranvía, ya que circula sobre raíles.",
            "El turismo."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T510105_050117.jpg"
    },
    {
        "text": "Un turismo circula por una vía preferente y por la derecha se le aproxima un tranvía, ¿quién tiene preferencia de paso?",
        "options": [
            "El tranvía, porque circula sobre raíles.",
            "El turismo, porque circula por una vía preferente.",
            "El tranvía, porque se aproxima por la derecha del turismo."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T501902.jpg"
    },
    {
        "text": "Los vehículos prioritarios, ¿tienen prioridad de paso sobre el resto de los usuarios de la vía?",
        "options": [
            "Sí.",
            "No.",
            "Sólo cuando circulen en servicio de urgencia."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T514727.jpg"
    },
    {
        "text": "Cuando se acerque un vehículo prioritario en servicio urgente, los demás conductores deben...",
        "options": [
            "facilitarle el paso llegando a detenerse si es preciso.",
            "detener su vehículo.",
            "apartarse siempre a su derecha."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T500328.jpg"
    },
    {
        "text": "Los conductores de los vehículos prioritarios que circulen en servicio urgente...",
        "options": [
            "obedecerán los semáforos.",
            "procurarán no vulnerar la prioridad de paso en las intersecciones.",
            "están exentos de cumplir cualquier norma de circulación."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T506727.jpg"
    },
    {
        "text": "Un vehículo prioritario en servicio de urgencia, ¿tiene prioridad de paso en una intersección?",
        "options": [
            "Sí, si lleva la señalización encencida y comprueba que no existe peligro para otros usuarios.",
            "Sí, aunque no lleve la señalización encendida.",
            "No."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T511229.jpg"
    },
    {
        "text": "El vehículo de la fotografía tiene encendida únicamente la señalización luminosa, ¿tiene prioridad de paso?",
        "options": [
            "Sí, siempre que la omisión de la señal acústica no entrañe peligro alguno para los demás usuarios.",
            "Sí, porque está en una vía urbana.",
            "No, porque no lleva la señalización óptica y acústica simultáneamente."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T500427.jpg"
    },
    {
        "text": "A un vehículo de extinción de incendios que usa únicamente la señal especial luminosa, ¿se le debe ceder el paso?",
        "options": [
            "No, ya que siempre debe emplearla conjuntamente con la acústica.",
            "Sí.",
            "Sí, pero sólo cuando se trate de vía urbana."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T509117.jpg"
    },
    {
        "text": "¿Cuándo tiene preferencia de paso el vehículo de la foto?",
        "options": [
            "Sólo cuando circule en servicio urgente, y lo señalice debidamente.",
            "Sólo cuando circule utilizando la señal acústica y luminosa juntas.",
            "Siempre, es un coche de policía."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T513619.jpg"
    },
    {
        "text": "¿Cuál de los siguientes vehículos tienen la consideración de vehículo prioritario?",
        "options": [
            "Los vehículos de obras y servicios.",
            "Los vehículos de protección civil y salvamento.",
            "Los destinados al transporte escolar o de menores."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T504822.jpg"
    },
    {
        "text": "Una ambulancia que circula con las señales apagadas...",
        "options": [
            "tiene preferencia en las vías urbanas.",
            "no tiene preferencia.",
            "siempre tiene preferencia."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T502911.jpg"
    },
    {
        "text": "El conductor de un vehículo que se vea obligado a realizar un servicio de urgencia...",
        "options": [
            "no está obligado a respetar las normas de circulación, pero sí las señales.",
            "está obligado a respetar las normas y señales de circulación.",
            "está obligado a advertir su presencia con las señales de los vehículos prioritarios."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T510128.jpg"
    }
]
            
            ;

            const container = document.getElementById('test-container');
            const paginationRow1 = document.getElementById('pagination-row-1');
            const paginationRow2 = document.getElementById('pagination-row-2');

            // Generar preguntas
            questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.setAttribute('data-correct', question.correct);
                questionDiv.innerHTML = `
                    <div class="question-image">
                        <img src="${question.image}" alt="Imagen de la pregunta">
                    </div>
                    <div class="question-content">
                        <h3>${index + 1}. ${question.text}</h3>
                        <div class="options">
                            ${question.options.map((option, idx) => `
                                <div class="option" data-answer="${String.fromCharCode(65 + idx)}">
                                    <span class="option-circle">${String.fromCharCode(65 + idx)}</span>
                                    ${option}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                container.appendChild(questionDiv);
            });

            // Generar paginación
            for (let i = 0; i < questions.length; i++) {
                const button = document.createElement('button');
                button.textContent = `${i + 1}`;
                button.addEventListener('click', () => showQuestion(i));
                if (i < 15) {
                    paginationRow1.appendChild(button);
                } else {
                    paginationRow2.appendChild(button);
                }
            }

            // Mostrar la primera pregunta
            showQuestion(0);

            // Función para mostrar una pregunta específica
            function showQuestion(index) {
                document.querySelectorAll('.question').forEach((q, i) => {
                    q.style.display = i === index ? 'flex' : 'none';
                });
                document.querySelectorAll('.pagination button').forEach((btn, i) => {
                    btn.style.backgroundColor = i === index ? '#ff7aa2' : '#ffa5c3';
                });
            }

            // Evento para las opciones de respuesta
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const question = this.closest('.question');
                    const questionIndex = Array.from(container.children).indexOf(question);
                    const isCorrect = this.getAttribute('data-answer') === question.getAttribute('data-correct');
                    
                    if (question.dataset.answered) return;

                    question.dataset.answered = true;

                    question.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                        opt.style.pointerEvents = 'none';
                    });
                    
                    this.classList.add('selected', isCorrect ? 'correct' : 'incorrect');

                    if (!isCorrect) {
                        question.querySelector(`.option[data-answer="${question.getAttribute('data-correct')}"]`).classList.add('correct');
                    }

                    // Actualizar el botón de paginación
                    const paginationButton = questionIndex < 15 ? paginationRow1.children[questionIndex] : paginationRow2.children[questionIndex - 15];
                    paginationButton.classList.add(isCorrect ? 'correct' : 'incorrect');
                });
            });

            // Evento para corregir el test
            document.getElementById('correct-test').addEventListener('click', () => {
                let wrongAnswers = 0;
                document.querySelectorAll('.question').forEach((question, index) => {
                    const selected = question.querySelector('.option.selected');
                    const isCorrect = selected && selected.getAttribute('data-answer') === question.getAttribute('data-correct');
                    if (!isCorrect) {
                        wrongAnswers++;
                    }
                    // Actualizar el botón de paginación si no se ha respondido
                    if (!selected) {
                        const paginationButton = index < 15 ? paginationRow1.children[index] : paginationRow2.children[index - 15];
                        paginationButton.classList.add('incorrect');
                    }
                });
                const resultMessage = `Has fallado ${wrongAnswers} respuestas.`;

                const alert = document.getElementById('custom-alert');
                document.getElementById('alert-message').textContent = resultMessage;
                alert.style.display = 'block';
            });
        });

        function closeAlert() {
            document.getElementById('custom-alert').style.display = 'none';
        }
    </script>

    
</body>
</html>