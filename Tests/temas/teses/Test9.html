<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Autoescuela</title>
    <link rel="stylesheet" href="../../../Assets/style.css">
</head>
<body>

    
    <div class="container">
        <h1 style="text-align: center; color: #ffa5c3;">Test de Autoescuela</h1>
        <div id="test-container">
            <!-- Aquí se generarán dinámicamente las preguntas -->
        </div>
        <div class="pagination">
            <div class="pagination-row" id="pagination-row-1"></div>
            <div class="pagination-row" id="pagination-row-2"></div>
        </div>
        <button id="correct-test">Corregir Test</button>
    </div>

    <!-- Custom Alert HTML -->
    <div class="custom-alert" id="custom-alert">
        <h2>Resultado del Test</h2>
        <p id="alert-message">Aquí irá el mensaje del resultado.</p>
        <button onclick="closeAlert()">Cerrar</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const questions = [
    {
        "text": "En las intersecciones señalizadas, ¿cuál es la norma general que prevalece?",
        "options": [
            "Abstenerse del cumplimiento de la señalización.",
            "Cumplir lo que la señal indica.",
            "Ceder el paso siempre a la derecha."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P0510.jpg"
    },
    {
        "text": "En una intersección sin señalización expresa, la norma general de preferencia de paso es...",
        "options": [
            "ceder el paso a los vehículos que circulen por la izquierda.",
            "ceder el paso a los vehículos que se aproximen por la derecha.",
            "ceder el paso a los vehículos más rápidos, ciclistas y peatones."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P0511.jpg"
    },
    {
        "text": "En esta intersección no hay línea de detención. ¿Dónde hay que detenerse?",
        "options": [
            "A una distancia mínima de 5 metros antes de la intersección.",
            "Dentro de la intersección.",
            "Antes de entrar en la intersección."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P0519.jpg"
    },
    {
        "text": "¿Cuál debe ser su comportamiento al ceder el paso?",
        "options": [
            "Detenerse en las intersecciones si se acerca otro vehículo.",
            "Parar y comprobar si otro usuario de la vía tiene prioridad.",
            "No obligar al vehículo que tiene prioridad a modificar bruscamente su trayectoria o velocidad."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P0518.jpg"
    },
    {
        "text": "En una intersección en la que debe ceder el paso, ¿cuándo podrá reanudar la marcha?",
        "options": [
            "Cuando exista espacio suficiente para incorporarse.",
            "Cuando esté seguro de que no obliga al que tiene la prioridad a cambiar su trayectoria o velocidad.",
            "Inmediatamente después de que pase el vehículo al que cedo el paso."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P0520.jpg"
    },
    {
        "text": "En esta intersección, ¿qué turismo pasará primero?",
        "options": [
            "El amarillo.",
            "El rojo.",
            "El azul."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P0512.jpg"
    },
    {
        "text": "En este cruce, ¿qué vehículo tiene preferencia?",
        "options": [
            "El turismo.",
            "El camión.",
            "La motocicleta."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T510107_0512.jpg"
    },
    {
        "text": "En esta intersección ¿quién debe pasar primero?",
        "options": [
            "El ciclomotor, porque se incorpora a la vía preferente.",
            "El camión, porque se aproxima por la derecha.",
            "El turismo, porque tiene preferencia sobre el resto de vehículos."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P0513.jpg"
    },
    {
        "text": "¿Quién tiene preferencia en este cruce?",
        "options": [
            "El rojo.",
            "La motocicleta.",
            "El verde."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T507019.jpg"
    },
    {
        "text": "Si la trayectoria de los vehículos llegase a cortarse, ¿cuál pasaría primero?",
        "options": [
            "El vehículo azul.",
            "El vehículo rojo.",
            "El vehículo amarillo."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T512619.jpg"
    },
    {
        "text": "A la vista de esta situación, ¿qué vehículo pasará primero?",
        "options": [
            "El vehículo azul.",
            "El vehículo rojo.",
            "Los conductores tendrán que ponerse de acuerdo."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T509209.jpg"
    },
    {
        "text": "En esta intersección entre una vía pavimentada y otra sin pavimentar, ¿debe ceder el paso a este vehículo azul?",
        "options": [
            "Sí, porque se incorpora por la derecha.",
            "Sí, porque en las intersecciones sin señalizar debe ceder el paso a los vehículos que se aproximen por la derecha.",
            "No, ya que se incorpora desde una vía sin pavimentar."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T512817.jpg"
    },
    {
        "text": "El vehículo que sale de una vía no pavimentada, ¿a qué vehículos debe ceder el paso?",
        "options": [
            "Únicamente a los que se aproximen por la izquierda.",
            "A todos los que circulen por la vía pavimentada.",
            "Únicamente a los vehículos de motor que se aproximen por la derecha."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P0515.jpg"
    },
    {
        "text": "En una intersección un vehículo parece incumplir la prioridad de paso, ¿qué puede hacer para anticiparse a un posible peligro?",
        "options": [
            "Tener preparado el pie en el pedal de freno por si es necesario frenar.",
            "Acelerar para pasar antes.",
            "Continuar la marcha, porque en caso de accidente la culpa será del otro conductor."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T513808.jpg"
    },
    {
        "text": "En una intersección que no tiene señal de preferencia. ¿Cuándo debe ceder el paso a un vehículo de tracción animal?",
        "options": [
            "Nunca, porque no es un vehículo de motor.",
            "Siempre, porque tienen preferencia.",
            "Cuando entra por mi derecha."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P0527.jpg"
    },
    {
        "text": "En esta intersección sin señalizar se encuentra con un ciclista, ¿debe cederle el paso?",
        "options": [
            "Sí, porque los vehículos de dos ruedas siempre tienen preferencia.",
            "No, porque los vehículos de motor tienen preferencia sobre los ciclos de dos ruedas.",
            "Sí, porque se aproxima por la derecha."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T510119_050416.jpg"
    },
    {
        "text": "En esta situación, ¿debe ceder el paso a los ciclistas?",
        "options": [
            "No, los vehículos de motor tienen prioridad sobre las bicicletas.",
            "Sí, pero sólo a los dos primeros ciclistas que están dentro de la intersección.",
            "Sí."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P0528.jpg"
    },
    {
        "text": "Los conductores de bicicletas tienen prioridad de paso respecto a los vehículos de motor:",
        "options": [
            "Siempre.",
            "Nunca.",
            "Cuando, circulando en grupo, el primer ciclista haya iniciado ya el cruce o haya entrado en una glorieta."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P0530.jpg"
    },
    {
        "text": "En esta glorieta, ¿qué vehículos tienen prioridad?",
        "options": [
            "Los vehículos que se aproximan por la izquierda.",
            "Los vehículos que se aproximen a la glorieta por la derecha.",
            "Los vehículos que se encuentran circulando dentro de la glorieta."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P0514.jpg"
    },
    {
        "text": "Al entrar en la glorieta debe...",
        "options": [
            "ceder el paso al vehículo que está dentro de la glorieta.",
            "pasar antes que el vehículo que se aproxima por la izquierda.",
            "detenerme para observar el tráfico."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T504824.jpg"
    },
    {
        "text": "En una intersección sin señalizar, tienen prioridad de paso los vehículos que circulen por...",
        "options": [
            "un carril de uso exclusivo para determinados vehículos.",
            "la vía sin pavimentar.",
            "una glorieta sobre los que pretenden entrar en ella."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P0517.jpg"
    },
    {
        "text": "En esta glorieta, ¿quién tiene preferencia?",
        "options": [
            "El que primero llegue.",
            "El turismo.",
            "La motocicleta."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T514215.jpg"
    },
    {
        "text": "El vehículo que circula dentro de una glorieta. ¿Debe ceder el paso a un vehículo que quiere entrar por la derecha?",
        "options": [
            "Sí, cuando no hay señales de prioridad.",
            "Sí, porque el que entra tiene prioridad.",
            "No, porque tiene preferencia de paso."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T505811.jpg"
    },
    {
        "text": "En esta intersección con \"circulación giratoria”, que no es glorieta, ¿a qué vehículos debe ceder el paso?",
        "options": [
            "A los que están girando alrededor de la isleta.",
            "A los que entren por la izquierda.",
            "A los que entren por la derecha."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T510101_151021.jpg"
    },
    {
        "text": "Si circula por un carril de aceleración, ¿debe ceder el paso a los vehículos que circulan por la vía a la que pretende incorporarse?",
        "options": [
            "No, si me incorporo por la derecha.",
            "Sí.",
            "No, porque tengo prioridad."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T501815.jpg"
    },
    {
        "text": "Cuando se incorpore a la circulación, debe...",
        "options": [
            "ceder el paso a otros vehículos.",
            "hacerlo lo más rápido posible.",
            "evitar hacerlo sin el alumbrado de posición encendido."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T514523.jpg"
    },
    {
        "text": "Al salir de una zona privada para incorporarse a la circulación, ¿se debe ceder el paso?",
        "options": [
            "No, porque tiene prioridad sobre todos los vehículos que circulen por la vía a la que se accede.",
            "Sí, pero solo a los vehículos que vengan por la derecha.",
            "Sí, a todos los vehículos que circulen por la vía a la que se accede."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T513211.jpg"
    },
    {
        "text": "El turismo amarillo sale de una gasolinera para incorporarse a la circulación, en caso necesario, ¿cuándo tiene que ceder el paso?",
        "options": [
            "Cuando se incorpora por la derecha.",
            "Cuando se incorpora por la izquierda.",
            "Cuando se incorpore por la derecha o por la izquierda."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T512625.jpg"
    },
    {
        "text": "En un cambio de carril, ¿qué vehículo tiene preferencia de paso?",
        "options": [
            "El vehículo que cambia de carril, en cualquier caso.",
            "El vehículo que ya circulaba por el carril.",
            "El vehículo que cambia de carril, si circula a gran velocidad."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T507321.jpg"
    },
    {
        "text": "En este cruce, ¿puede pasar cuando se enciende la luz verde?",
        "options": [
            "Sí, pero debo esperar hasta poder pasar sin bloquearlo.",
            "Sí, pero debo ceder el paso a los vehículos de la derecha.",
            "Sí, siempre, porque tengo preferencia."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T504622.jpg"
    }
]
            
            ;

            const container = document.getElementById('test-container');
            const paginationRow1 = document.getElementById('pagination-row-1');
            const paginationRow2 = document.getElementById('pagination-row-2');

            // Generar preguntas
            questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.setAttribute('data-correct', question.correct);
                questionDiv.innerHTML = `
                    <div class="question-image">
                        <img src="${question.image}" alt="Imagen de la pregunta">
                    </div>
                    <div class="question-content">
                        <h3>${index + 1}. ${question.text}</h3>
                        <div class="options">
                            ${question.options.map((option, idx) => `
                                <div class="option" data-answer="${String.fromCharCode(65 + idx)}">
                                    <span class="option-circle">${String.fromCharCode(65 + idx)}</span>
                                    ${option}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                container.appendChild(questionDiv);
            });

            // Generar paginación
            for (let i = 0; i < questions.length; i++) {
                const button = document.createElement('button');
                button.textContent = `${i + 1}`;
                button.addEventListener('click', () => showQuestion(i));
                if (i < 15) {
                    paginationRow1.appendChild(button);
                } else {
                    paginationRow2.appendChild(button);
                }
            }

            // Mostrar la primera pregunta
            showQuestion(0);

            // Función para mostrar una pregunta específica
            function showQuestion(index) {
                document.querySelectorAll('.question').forEach((q, i) => {
                    q.style.display = i === index ? 'flex' : 'none';
                });
                document.querySelectorAll('.pagination button').forEach((btn, i) => {
                    btn.style.backgroundColor = i === index ? '#ff7aa2' : '#ffa5c3';
                });
            }

            // Evento para las opciones de respuesta
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const question = this.closest('.question');
                    const questionIndex = Array.from(container.children).indexOf(question);
                    const isCorrect = this.getAttribute('data-answer') === question.getAttribute('data-correct');
                    
                    if (question.dataset.answered) return;

                    question.dataset.answered = true;

                    question.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                        opt.style.pointerEvents = 'none';
                    });
                    
                    this.classList.add('selected', isCorrect ? 'correct' : 'incorrect');

                    if (!isCorrect) {
                        question.querySelector(`.option[data-answer="${question.getAttribute('data-correct')}"]`).classList.add('correct');
                    }

                    // Actualizar el botón de paginación
                    const paginationButton = questionIndex < 15 ? paginationRow1.children[questionIndex] : paginationRow2.children[questionIndex - 15];
                    paginationButton.classList.add(isCorrect ? 'correct' : 'incorrect');
                });
            });

            // Evento para corregir el test
            document.getElementById('correct-test').addEventListener('click', () => {
                let wrongAnswers = 0;
                document.querySelectorAll('.question').forEach((question, index) => {
                    const selected = question.querySelector('.option.selected');
                    const isCorrect = selected && selected.getAttribute('data-answer') === question.getAttribute('data-correct');
                    if (!isCorrect) {
                        wrongAnswers++;
                    }
                    // Actualizar el botón de paginación si no se ha respondido
                    if (!selected) {
                        const paginationButton = index < 15 ? paginationRow1.children[index] : paginationRow2.children[index - 15];
                        paginationButton.classList.add('incorrect');
                    }
                });
                const resultMessage = `Has fallado ${wrongAnswers} respuestas.`;

                const alert = document.getElementById('custom-alert');
                document.getElementById('alert-message').textContent = resultMessage;
                alert.style.display = 'block';
            });
        });

        function closeAlert() {
            document.getElementById('custom-alert').style.display = 'none';
        }
    </script>

    
</body>
</html>