<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Autoescuela</title>
    <link rel="stylesheet" href="../../../Assets/style.css">
</head>
<body>

    
    <div class="container">
        <h1 style="text-align: center; color: #ffa5c3;">Test de Autoescuela</h1>
        <div id="test-container">
            <!-- Aquí se generarán dinámicamente las preguntas -->
        </div>
        <div class="pagination">
            <div class="pagination-row" id="pagination-row-1"></div>
            <div class="pagination-row" id="pagination-row-2"></div>
        </div>
        <button id="correct-test">Corregir Test</button>
    </div>

    <!-- Custom Alert HTML -->
    <div class="custom-alert" id="custom-alert">
        <h2>Resultado del Test</h2>
        <p id="alert-message">Aquí irá el mensaje del resultado.</p>
        <button onclick="closeAlert()">Cerrar</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const questions = [
    {
        "text": "No se tendrán en cuenta, a efectos de la normal utilización, los carriles...",
        "options": [
            "reversibles.",
            "reservados a determinados vehículos.",
            "especiales, únicamente."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T510105_150316.jpg"
    },
    {
        "text": "La línea ancha discontinua, ¿qué indica?",
        "options": [
            "Que hay un carril reversible.",
            "Que hay una zona de estacionamiento.",
            "Que hay un carril especial."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P0301.jpg"
    },
    {
        "text": "La inscripción \"BUS\" dentro de un carril indica que es...",
        "options": [
            "un carril destinado al estacionamiento de autobuses.",
            "un carril reservado para la circulación de autobuses.",
            "una zona de la vía reservada sólo a turismos y autobuses."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P0302.jpg"
    },
    {
        "text": "¿Puede circular con su motocicleta por un carril bus?",
        "options": [
            "No, con carácter general.",
            "Sí, pero sólo para adelantar y durante el recorrido indispensable.",
            "Sí, en caso de circulación muy densa."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P0303.jpg"
    },
    {
        "text": "¿Está permitido que un turismo utilice un tramo de carril reservado para autobuses delimitado por una línea discontinua?",
        "options": [
            "Sí, para realizar cualquier maniobra que no sea parar, estacionar, cambiar de sentido o adelantar.",
            "No, siempre está prohibido.",
            "Sí, pero sólo para cambiar de dirección a la derecha."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P0304.jpg"
    },
    {
        "text": "Por el \"carril BUS\", ¿se puede circular para adelantar?",
        "options": [
            "Sí, pero debo adelantar rápidamente.",
            "Sí, cuando no circulan autobuses cerca.",
            "No, porque está prohibido."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T511807.jpg"
    },
    {
        "text": "Para girar a la derecha, ¿qué carril deberá utilizar?",
        "options": [
            "El carril de la derecha o el de la izquierda indistintamente.",
            "Necesariamente el carril de la derecha, porque tiene la línea discontinua.",
            "Necesariamente el carril de la izquierda, observando el tráfico y al girar tengo que ceder el paso al autobús."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P0305.jpg"
    },
    {
        "text": "¿Está permitido que las motocicletas circulen por un carril VAO?",
        "options": [
            "No, porque por estos carriles sólo pueden circular autobuses y turismos.",
            "No, porque las motocicletas no se consideran vehículos de alta ocupación.",
            "Sí, las motocicletas y turismos pueden utilizar este carril."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P0306.jpg"
    },
    {
        "text": "¿Está permitido que las motocicletas circulen por un carril reservado para vehículos con alta ocupación (VAO)?",
        "options": [
            "Solo si lleva algún ocupante, además del conductor.",
            "No.",
            "Sí."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T510123_250116.jpg"
    },
    {
        "text": "¿Podrá ser utilizado normalmente un carril VAO por un ciclomotor ocupado por dos personas?",
        "options": [
            "No.",
            "Sí, porque van dos personas.",
            "Sí, si circula por el arcén."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P0307.jpg"
    },
    {
        "text": "Cuando sólo lo ocupe su conductor, ¿puede un turismo circular por un carril para VAO?",
        "options": [
            "Sí, siempre que sea un vehículo no prioritario en servicio de urgencia.",
            "Sí, si el vehículo lleva la señal de minusválido.",
            "No, nunca."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P0309.jpg"
    },
    {
        "text": "En un carril VAO, ¿puede circular un turismo que arrastra un remolque de menos de 750 kg de M.M.A.?",
        "options": [
            "No.",
            "Sí, pero sólo de día",
            "Sí, siempre."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P0308.jpg"
    },
    {
        "text": "Un vehículo mixto en el que sólo viaja el conductor, ¿puede, en algún caso, circular por un carril para VAO?",
        "options": [
            "Sí, si el conductor es novel.",
            "No, porque debe estar ocupado por el número mínimo de personas que se fije.",
            "Sí, si el vehículo ostenta la señal de minusválidos."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P0310.jpg"
    },
    {
        "text": "Si los paneles de mensaje variable indican que los turismos con distintivo ambiental B pueden circular por un carril VAO, ¿qué ocupación mínima debe tener el vehículo?",
        "options": [
            "Un ocupante.",
            "Dos ocupantes, sin incluir al conductor.",
            "Dos ocupantes, incluido el conductor."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T510101_050719.jpg"
    },
    {
        "text": "Un turismo con el distintivo ambiental de la imagen, clasificado como “0” emisiones, ¿está autorizado a circular por el carril habilitado para vehículos de alta ocupación (VAO)?",
        "options": [
            "No, salvo que por los paneles de mensaje variable se autorice su acceso.",
            "Sí, siempre que esté ocupado por al menos dos personas, incluido el conductor.",
            "Sí, aunque vaya solo el conductor."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T510103_150623.jpg"
    },
    {
        "text": "La habilitación de uno o varios carriles para la circulación VAO, ¿será siempre temporal y con horario fijo?",
        "options": [
            "Sí, siempre estará habilitado a primera hora de la mañana hasta primera hora de la tarde.",
            "Sí, por razones de seguridad vial o fluidez de la circulación.",
            "No, podrá ser permanente y con un horario en función de las necesidades de la circulación."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T501118.jpg"
    },
    {
        "text": "Los carriles reversibles están delimitados por marcas longitudinales...",
        "options": [
            "dobles discontinuas a ambos lados.",
            "discontinuas con una separación sensiblemente más corta.",
            "discontinuas simples a ambos lados."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T512821.jpg"
    },
    {
        "text": "Cuando un carril está delimitado a ambos lados por doble línea discontinua, ¿qué deben hacer los conductores?",
        "options": [
            "Seguir las indicaciones marcadas por semáforos de carril, porque la circulación puede estar regulada en uno o en otro sentido.",
            "Utilizarlo sólo para adelantar.",
            "No circular por él porque la circulación está prohibida."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P1809.jpg"
    },
    {
        "text": "En un carril reversible...",
        "options": [
            "debe llevar encendida la luz de cruce, siempre.",
            "debe circular como máximo a 100 km/h.y como mínimo a 60 km/h.",
            "no debe cambiar nunca de carril salvo para adelantar."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P0311.jpg"
    },
    {
        "text": "¿Cuáles son los límites de velocidad que se aplican en los carriles reversibles?",
        "options": [
            "Se considerará como velocidad máxima permitida la de 80 km/h y como mínima permitida la de 60 km/h, siempre que no haya señales que indiquen lo contrario.",
            "Se considerará como máxima permitida los 70 km/h y como mínima los 50 km/h, como norma general.",
            "Se aplicarán los límites genéricos de la vía en la que se encuentre dicho carril."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P0312.jpg"
    },
    {
        "text": "El carril reversible está abierto. ¿Puede atravesar la línea doble discontinua de la izquierda para adelantar?",
        "options": [
            "Sí, porque el carril de la izquierda está libre.",
            "No.",
            "Sí, porque la línea es discontinua."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P0313.jpg"
    },
    {
        "text": "¿Qué vehículos pueden utilizar un carril adicional circunstancial?",
        "options": [
            "Todos los vehículos autorizados a circular por la calzada de esa vía",
            "Todos los vehículos de motor, excepto los camiones cuya MMA supere los 3.500kg.",
            "Sólo podrán utilizar el carril adicional los turismos sin remolque y las motocicletas, estando prohibido para cualquier otro tipo de vehículo."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P0314.jpg"
    },
    {
        "text": "Cuando en una carretera se ha habilitado un carril adicional circunstancial, ¿qué vehículos están obligados a utilizar la luz de cruce tanto de día como de noche?",
        "options": [
            "Los vehículos que circulen por el carril adicional circunstancial.",
            "Todos los vehículos que circulen por la vía.",
            "Los vehículos que circulen por los arcenes."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P0315.jpg"
    },
    {
        "text": "En esta vía se ha habilitado un carril adicional, ¿a qué velocidad como máximo circulará el vehículo amarillo?",
        "options": [
            "A 80 kilómetros por hora.",
            "A 60 kilómetros por hora.",
            "A la genérica de la vía."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T512405.jpg"
    },
    {
        "text": "En un carril habilitado en sentido contrario al habitual por trabajos en la calzada, ¿qué vehículos tienen permitido utilizarlo?",
        "options": [
            "Automóviles que no superen los 3.500 kg de M.M.A. y motocicletas.",
            "Todos los que estén autorizados a circular por la vía.",
            "Sólo turismos y motocicletas."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T511403.jpg"
    },
    {
        "text": "Estos vehículos circulan por un carril habilitado en sentido contrario al habitual, ¿pueden desplazarse al carril normal de circulación?",
        "options": [
            "Sí, siempre que al hacerlo, no derriben los conos que delimitan ese carril.",
            "No, ni siquiera para adelantar.",
            "Sí, pero sólo para adelantar."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P0316.jpg"
    },
    {
        "text": "Cuando hay un carril habilitado en sentido contrario al habitual, ¿qué vehículos deben llevar encendida, al menos, la luz de cruce?",
        "options": [
            "Los que circulan por los carriles normales de circulación.",
            "Todos.",
            "Los que circulan por el carril habilitado en sentido contrario al habitual y los que circulan por el carril contiguo a éste en sentido opuesto."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T513213.jpg"
    },
    {
        "text": "En una autovía, hay un carril abierto para circular en sentido contrario al normal, para mejorar la fluidez. ¿A qué velocidad máxima se puede circular en ese carril?",
        "options": [
            "A 100 kilómetros por hora.",
            "A 90 kilómetros por hora.",
            "A 80 kilómetros por hora."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P0317.jpg"
    },
    {
        "text": "Un carril de utilización en sentido contrario al habitual, habilitado por razones de fluidez de la circulación, ¿puede ser utilizado por una motocicleta?",
        "options": [
            "No, estos carriles sólo los pueden utilizar los turismos",
            "Sí, puede ser utilizado por todos los vehículos de motor.",
            "Sí."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T510107_251016.jpg"
    },
    {
        "text": "Un turismo con remolque, ¿puede circular por un carril abierto a la circulación en sentido contrario al normal?",
        "options": [
            "Sí, siempre.",
            "Si, cuando haya sido abierto por razones de fluidez de la circulación.",
            "Sí, cuando haya sido abierto por obras en la calzada."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P0320.jpg"
    }
]
            
            ;

            const container = document.getElementById('test-container');
            const paginationRow1 = document.getElementById('pagination-row-1');
            const paginationRow2 = document.getElementById('pagination-row-2');

            // Generar preguntas
            questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.setAttribute('data-correct', question.correct);
                questionDiv.innerHTML = `
                    <div class="question-image">
                        <img src="${question.image}" alt="Imagen de la pregunta">
                    </div>
                    <div class="question-content">
                        <h3>${index + 1}. ${question.text}</h3>
                        <div class="options">
                            ${question.options.map((option, idx) => `
                                <div class="option" data-answer="${String.fromCharCode(65 + idx)}">
                                    <span class="option-circle">${String.fromCharCode(65 + idx)}</span>
                                    ${option}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                container.appendChild(questionDiv);
            });

            // Generar paginación
            for (let i = 0; i < questions.length; i++) {
                const button = document.createElement('button');
                button.textContent = `${i + 1}`;
                button.addEventListener('click', () => showQuestion(i));
                if (i < 15) {
                    paginationRow1.appendChild(button);
                } else {
                    paginationRow2.appendChild(button);
                }
            }

            // Mostrar la primera pregunta
            showQuestion(0);

            // Función para mostrar una pregunta específica
            function showQuestion(index) {
                document.querySelectorAll('.question').forEach((q, i) => {
                    q.style.display = i === index ? 'flex' : 'none';
                });
                document.querySelectorAll('.pagination button').forEach((btn, i) => {
                    btn.style.backgroundColor = i === index ? '#ff7aa2' : '#ffa5c3';
                });
            }

            // Evento para las opciones de respuesta
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const question = this.closest('.question');
                    const questionIndex = Array.from(container.children).indexOf(question);
                    const isCorrect = this.getAttribute('data-answer') === question.getAttribute('data-correct');
                    
                    if (question.dataset.answered) return;

                    question.dataset.answered = true;

                    question.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                        opt.style.pointerEvents = 'none';
                    });
                    
                    this.classList.add('selected', isCorrect ? 'correct' : 'incorrect');

                    if (!isCorrect) {
                        question.querySelector(`.option[data-answer="${question.getAttribute('data-correct')}"]`).classList.add('correct');
                    }

                    // Actualizar el botón de paginación
                    const paginationButton = questionIndex < 15 ? paginationRow1.children[questionIndex] : paginationRow2.children[questionIndex - 15];
                    paginationButton.classList.add(isCorrect ? 'correct' : 'incorrect');
                });
            });

            // Evento para corregir el test
            document.getElementById('correct-test').addEventListener('click', () => {
                let wrongAnswers = 0;
                document.querySelectorAll('.question').forEach((question, index) => {
                    const selected = question.querySelector('.option.selected');
                    const isCorrect = selected && selected.getAttribute('data-answer') === question.getAttribute('data-correct');
                    if (!isCorrect) {
                        wrongAnswers++;
                    }
                    // Actualizar el botón de paginación si no se ha respondido
                    if (!selected) {
                        const paginationButton = index < 15 ? paginationRow1.children[index] : paginationRow2.children[index - 15];
                        paginationButton.classList.add('incorrect');
                    }
                });
                const resultMessage = `Has fallado ${wrongAnswers} respuestas.`;

                const alert = document.getElementById('custom-alert');
                document.getElementById('alert-message').textContent = resultMessage;
                alert.style.display = 'block';
            });
        });

        function closeAlert() {
            document.getElementById('custom-alert').style.display = 'none';
        }
    </script>

    
</body>
</html>