<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Autoescuela</title>
    <link rel="stylesheet" href="../../../Assets/style.css">
</head>
<body>

    
    <div class="container">
        <h1 style="text-align: center; color: #ffa5c3;">Test de Autoescuela</h1>
        <div id="test-container">
            <!-- Aquí se generarán dinámicamente las preguntas -->
        </div>
        <div class="pagination">
            <div class="pagination-row" id="pagination-row-1"></div>
            <div class="pagination-row" id="pagination-row-2"></div>
        </div>
        <button id="correct-test">Corregir Test</button>
    </div>

    <!-- Custom Alert HTML -->
    <div class="custom-alert" id="custom-alert">
        <h2>Resultado del Test</h2>
        <p id="alert-message">Aquí irá el mensaje del resultado.</p>
        <button onclick="closeAlert()">Cerrar</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const questions = [
    {
        "text": "¿Qué es una detención?",
        "options": [
            "La inmovilización del vehículo por necesidades de la circulación.",
            "Una parada por cualquier causa.",
            "Un estacionamiento sin bajarse del vehículo."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P1004.jpg"
    },
    {
        "text": "La parada y el estacionamiento en esta vía deben realizarse colocando el vehículo...",
        "options": [
            "en línea o en batería, según se aproveche mejor el espacio.",
            "paralelo al borde de la calzada.",
            "en batería."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T512425.jpg"
    },
    {
        "text": "En el borde izquierdo de una calzada, ¿se puede parar con carácter general?",
        "options": [
            "Sí, siempre que no obstaculice la circulación.",
            "No, en ningún caso.",
            "Sí, en vías urbanas de sentido único."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P1009.jpg"
    },
    {
        "text": "En una vía urbana de doble sentido de circulación, ¿está permitido realizar una parada o estacionamiento en el lado izquierdo?",
        "options": [
            "Si, para progamar el sistema de navegación del vehículo.",
            "Si para atender una llamada urgente de teléfono.",
            "No, en ningún caso."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T503719.jpg"
    },
    {
        "text": "¿Está permitido estacionar en el arcén transitable de una travesía?",
        "options": [
            "No, porque en la parte transitable del arcén no se puede parar ni estacionar.",
            "No, porque una travesía no es una vía urbana.",
            "Sí."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T511608.jpg"
    },
    {
        "text": "Como norma general, en una vía interurbana la parada y el estacionamiento se realizarán...",
        "options": [
            "siempre fuera de la calzada, en el lado derecho de la misma y dejando libre la parte transitable del arcén.",
            "en el arcén, cuando sea transitable y suficiente.",
            "siempre en el arcén."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T507120.jpg"
    },
    {
        "text": "En una vía interurbana de doble sentido de circulación, ¿está permitido realizar una parada o estacionamiento en el lado izquierdo?",
        "options": [
            "Sí, para programar el sistema de navegación del vehículo.",
            "Sí, para atender una llamada urgente de teléfono.",
            "No, en ningún caso."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T511713.jpg"
    },
    {
        "text": "En una autopista, ¿dónde se puede estacionar?",
        "options": [
            "En el arcén.",
            "Dentro de la mediana, pero fuera del arcén.",
            "En el área de descanso o de servicio."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T503825.jpg"
    },
    {
        "text": "En un carril reservado para uso exclusivo del transporte público urbano fuera del horario de servicio, ¿se puede estacionar?",
        "options": [
            "Sí, parar y estacionar.",
            "No.",
            "Sí, si conocemos perfectamente el horario de la línea de autobuses."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P1012.jpg"
    },
    {
        "text": "Sobre los railes de tranvía, ¿qué está prohibido?",
        "options": [
            "Parar y estacionar.",
            "Estacionar, solamente.",
            "Circular."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P1016.jpg"
    },
    {
        "text": "Con carácter general, ¿está permitido estacionar una motocicleta en la acera?",
        "options": [
            "No, porque está prohibido estacionar en la acera.",
            "Sí, los días laborables.",
            "Sí, sólo los días festivos."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P1017.jpg"
    },
    {
        "text": "En un paso para peatones, ¿está permitido parar o estacionar?",
        "options": [
            "No.",
            "Sí.",
            "Está permitido parar, pero está prohibido estacionar."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T502230.jpg"
    },
    {
        "text": "Hay muchos vehículos circulando y prevé que va a quedar detenido en el paso para peatones. ¿Debe entrar en el paso?",
        "options": [
            "Sí.",
            "No, porque corto el paso a los peatones.",
            "Sí, cuando el semáforo está verde."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P1005.jpg"
    },
    {
        "text": "En doble fila, ¿qué está prohibido?",
        "options": [
            "Estacionar.",
            "Parar.",
            "Parar y estacionar."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T510125_151215.jpg"
    },
    {
        "text": "¿Está prohibida la parada en las intersecciones y sus proximidades de las vías interurbanas?",
        "options": [
            "Sí, en cualquier vía.",
            "Sí, cuando se genere peligro por falta de visibilidad.",
            "No."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T510107_250716.jpg"
    },
    {
        "text": "En las intersecciones y sus proximidades, si se dificulta el giro a otros vehículos, está prohibido...",
        "options": [
            "parar, únicamente.",
            "estacionar, solamente.",
            "parar y estacionar."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T513319.jpg"
    },
    {
        "text": "En un cambio de rasante, ¿está prohibido parar y estacionar?",
        "options": [
            "No, salvo en los de visibilidad reducida.",
            "Sí.",
            "Parar no, pero estacionar sí."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T101050616_19.jpg"
    },
    {
        "text": "¿Está permitido estacionar en una zona señalizada para uso exclusivo de personas con movilidad reducida?",
        "options": [
            "No, está prohibido.",
            "Sí, siempre que no esté siendo utilizada por un vehículo autorizado.",
            "Solo si se estaciona durante menos de 30 minutos."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T510119_150616.jpg"
    },
    {
        "text": "¿Está permitido realizar una parada delante de un vado señalizado?",
        "options": [
            "Sí.",
            "No.",
            "Sí, únicamente para subir o bajar pasajeros."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T505004.jpg"
    },
    {
        "text": "En una entrada de garaje, ¿está permitido estacionar el vehículo?",
        "options": [
            "Sí.",
            "Sí, pero debo encender la luz de emergencia.",
            "No."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T500429.jpg"
    },
    {
        "text": "Se considera que una parada puede obstaculizar la circulación si la distancia entre el vehículo y el borde opuesto de la calzada es inferior a...",
        "options": [
            "3,5 metros.",
            "4 metros.",
            "3 metros."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P1018.jpg"
    },
    {
        "text": "¿En qué caso el estacionamiento perturba gravemente la circulación?",
        "options": [
            "Cuando la distancia entre el vehículo y el borde opuesto de la calzada sea inferior a 5 metros.",
            "Cuando se efectúa en las medianas, separadores, isletas u otros elementos de canalización del tráfico.",
            "En una zona reservada a carga y descarga, fuera de las horas de utilización."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P1020.jpg"
    },
    {
        "text": "¿Cuándo se considera que un vehículo estacionado constituye un grave obstáculo para la circulación?",
        "options": [
            "Cuando el tiempo de estacionamiento exceda de 15 minutos.",
            "Cuando se efectúe en una zona reservada a carga o descarga, fuera de las horas señaladas.",
            "Cuando se efectúe en doble fila sin conductor."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P1019.jpg"
    },
    {
        "text": "En esta curva de visibilidad reducida, ¿está permitido parar o estacionar?",
        "options": [
            "Sí, siempre que lo haga en el arcén.",
            "No.",
            "Sí, ya que no hay señal que lo prohíba."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T511507.jpg"
    },
    {
        "text": "Si queda detenido en el interior de un túnel más de dos minutos...",
        "options": [
            "debe encender las luces de emergencia.",
            "debe apagar el motor y las luces.",
            "debe apagar el motor y dejar el alumbrado de posición encendido."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P1008.jpg"
    },
    {
        "text": "¿Está prohibido estacionar en un túnel?",
        "options": [
            "Sí, siempre.",
            "No, cuando la calzada tiene dos carriles de circulación para cada sentido.",
            "No, si el túnel está suficientemente iluminado."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P1013.jpg"
    },
    {
        "text": "En esta zona señalizada para carga y descarga, ¿está permitido estacionar?",
        "options": [
            "Sí, en cualquier caso.",
            "No.",
            "Sí, pero sólo fuera de las horas de utilización."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P1014.jpg"
    },
    {
        "text": "En un estacionamiento con limitación horaria, ¿está permitido estacionar sin colocar el ticket correspondiente?",
        "options": [
            "No, y únicamente puede ser sancionado.",
            "No, y además de la sanción, los agentes pueden inmovilizar el vehículo.",
            "Sí, si es por un corto espacio de tiempo."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T506317.jpg"
    },
    {
        "text": "Estaciona su vehículo en pendiente descendente (en bajada). ¿Qué velocidad debe dejar puesta?",
        "options": [
            "Ninguna, el freno de mano solamente.",
            "La marcha atrás.",
            "La primera velocidad."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T513905.jpg"
    },
    {
        "text": "Al estacionar un vehículo con remolque en una pendiente ascendente, si no dispone de calzos, ¿qué debe hacer?",
        "options": [
            "Apoyar una de las ruedas delanteras en el bordillo, orientada hacia el centro de la calzada.",
            "Utilizar como calzos elementos naturales como piedras, maderos, etc.",
            "Es suficiente que deje engranada la marcha atrás o la primera velocidad."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T511219.jpg"
    }
]
            
            ;

            const container = document.getElementById('test-container');
            const paginationRow1 = document.getElementById('pagination-row-1');
            const paginationRow2 = document.getElementById('pagination-row-2');

            // Generar preguntas
            questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.setAttribute('data-correct', question.correct);
                questionDiv.innerHTML = `
                    <div class="question-image">
                        <img src="${question.image}" alt="Imagen de la pregunta">
                    </div>
                    <div class="question-content">
                        <h3>${index + 1}. ${question.text}</h3>
                        <div class="options">
                            ${question.options.map((option, idx) => `
                                <div class="option" data-answer="${String.fromCharCode(65 + idx)}">
                                    <span class="option-circle">${String.fromCharCode(65 + idx)}</span>
                                    ${option}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                container.appendChild(questionDiv);
            });

            // Generar paginación
            for (let i = 0; i < questions.length; i++) {
                const button = document.createElement('button');
                button.textContent = `${i + 1}`;
                button.addEventListener('click', () => showQuestion(i));
                if (i < 15) {
                    paginationRow1.appendChild(button);
                } else {
                    paginationRow2.appendChild(button);
                }
            }

            // Mostrar la primera pregunta
            showQuestion(0);

            // Función para mostrar una pregunta específica
            function showQuestion(index) {
                document.querySelectorAll('.question').forEach((q, i) => {
                    q.style.display = i === index ? 'flex' : 'none';
                });
                document.querySelectorAll('.pagination button').forEach((btn, i) => {
                    btn.style.backgroundColor = i === index ? '#ff7aa2' : '#ffa5c3';
                });
            }

            // Evento para las opciones de respuesta
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const question = this.closest('.question');
                    const questionIndex = Array.from(container.children).indexOf(question);
                    const isCorrect = this.getAttribute('data-answer') === question.getAttribute('data-correct');
                    
                    if (question.dataset.answered) return;

                    question.dataset.answered = true;

                    question.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                        opt.style.pointerEvents = 'none';
                    });
                    
                    this.classList.add('selected', isCorrect ? 'correct' : 'incorrect');

                    if (!isCorrect) {
                        question.querySelector(`.option[data-answer="${question.getAttribute('data-correct')}"]`).classList.add('correct');
                    }

                    // Actualizar el botón de paginación
                    const paginationButton = questionIndex < 15 ? paginationRow1.children[questionIndex] : paginationRow2.children[questionIndex - 15];
                    paginationButton.classList.add(isCorrect ? 'correct' : 'incorrect');
                });
            });

            // Evento para corregir el test
            document.getElementById('correct-test').addEventListener('click', () => {
                let wrongAnswers = 0;
                document.querySelectorAll('.question').forEach((question, index) => {
                    const selected = question.querySelector('.option.selected');
                    const isCorrect = selected && selected.getAttribute('data-answer') === question.getAttribute('data-correct');
                    if (!isCorrect) {
                        wrongAnswers++;
                    }
                    // Actualizar el botón de paginación si no se ha respondido
                    if (!selected) {
                        const paginationButton = index < 15 ? paginationRow1.children[index] : paginationRow2.children[index - 15];
                        paginationButton.classList.add('incorrect');
                    }
                });
                const resultMessage = `Has fallado ${wrongAnswers} respuestas.`;

                const alert = document.getElementById('custom-alert');
                document.getElementById('alert-message').textContent = resultMessage;
                alert.style.display = 'block';
            });
        });

        function closeAlert() {
            document.getElementById('custom-alert').style.display = 'none';
        }
    </script>

    
</body>
</html>