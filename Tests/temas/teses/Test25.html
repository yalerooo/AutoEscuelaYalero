<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Autoescuela</title>
    <link rel="stylesheet" href="../../../Assets/style.css">
</head>
<body>

    
    <div class="container">
        <h1 style="text-align: center; color: #ffa5c3;">Test de Autoescuela</h1>
        <div id="test-container">
            <!-- Aquí se generarán dinámicamente las preguntas -->
        </div>
        <div class="pagination">
            <div class="pagination-row" id="pagination-row-1"></div>
            <div class="pagination-row" id="pagination-row-2"></div>
        </div>
        <button id="correct-test">Corregir Test</button>
    </div>

    <!-- Custom Alert HTML -->
    <div class="custom-alert" id="custom-alert">
        <h2>Resultado del Test</h2>
        <p id="alert-message">Aquí irá el mensaje del resultado.</p>
        <button onclick="closeAlert()">Cerrar</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const questions = [
    {
        "text": "Como norma general las señales se aplican...",
        "options": [
            "a toda la vía.",
            "sólo al carril derecho.",
            "a toda la anchura de la calzada."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P1201.jpg"
    },
    {
        "text": "Modificar la señalización de la vía...",
        "options": [
            "está prohibido, salvo por causa justificada.",
            "no está prohibido, pero no es recomendable.",
            "está permitido siempre que la modificación ayude a aclarar el sentido de la señalización."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P1202.jpg"
    },
    {
        "text": "Es obligatorio que las obras que dificulten la circulación estén señalizadas...",
        "options": [
            "sólo de noche.",
            "tanto de día como de noche.",
            "sólo de día."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P1203.jpg"
    },
    {
        "text": "Entre los siguientes tipos de señales, ¿cuál es el orden de prioridad?",
        "options": [
            "Señales verticales, agentes y semáforos.",
            "Semáforos, agentes y señales verticales.",
            "Agentes, semáforos y señales verticales."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T513525.jpg"
    },
    {
        "text": "El orden de prioridad entre los distintos tipos de las señales es...",
        "options": [
            "agentes, semáforos y marcas viales.",
            "agentes, marcas viales y semaforos.",
            "semáforos, agentes y marcas viales."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T507625.jpg"
    },
    {
        "text": "¿Cuál es el orden de prioridad entre estos tipos de señales?",
        "options": [
            "Verticales, marcas viales y balizamiento.",
            "Balizamiento, verticales y marcas viales.",
            "Verticales, balizamiento y marcas viales."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T507409.jpg"
    },
    {
        "text": "Cuando las indicaciones de un semáforo y una señal de balizamiento se contradicen prevalece...",
        "options": [
            "el semáforo.",
            "la señal de balizamiento, por orden de prioridad.",
            "la señal más restrictiva."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T510117_050416.jpg"
    },
    {
        "text": "Cuando una señal vertical contradice a una señal de balizamiento fijo prevalece la señal...",
        "options": [
            "vertical.",
            "de balizamiento fijo.",
            "más restrictiva."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T506009.jpg"
    },
    {
        "text": "La señalización vertical prevalece sobre...",
        "options": [
            "los semáforos.",
            "las señales horizontales.",
            "las señales de balizamiento."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T514425.jpg"
    },
    {
        "text": "En el supuesto en el que existan dos señales del mismo tipo con indicaciones que parezcan estar en contradicción, ¿cuál de ellas tendrá prioridad?",
        "options": [
            "La menos restrictiva.",
            "La más restrictiva.",
            "La más próxima."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T5010101_051121.jpg"
    },
    {
        "text": "Si sobre el carril por el que circula hay un semáforo cuadrado con una flecha verde, ¿debe obedecer una señal de stop o de ceda el paso?",
        "options": [
            "No, porque la flecha verde da prioridad de paso.",
            "Sí.",
            "No, porque el semáforo tiene prioridad sobre las señales verticales."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T514019.jpg"
    },
    {
        "text": "Ante estas diferentes señales, ¿qué deben hacer los conductores en el cruce?",
        "options": [
            "Detenerse porque así lo indica el agente de circulación.",
            "Detenerse porque así lo indica la señal vertical de STOP.",
            "Pasar porque el semáforo está verde."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T510109_051116.jpg"
    },
    {
        "text": "Si al llegar a la intersección nos encontramos que junto a la señal vertical de \"stop\" tenemos un semáforo que está en fase de amarillo intermitente, ¿qué debemos hacer?",
        "options": [
            "Detenernos para cumplir con la señal de stop.",
            "Pasar con precaución porque el semáforo prevalece sobre el stop. ",
            "Si giro a la derecha, respetaré la señal de stop. "
        ],
        "correct": "A",
        "image": "../../../Assets/img/P1204.jpg"
    },
    {
        "text": "A la vista de la situación, para seguir de frente, ¿hay que detenerse?",
        "options": [
            "Sí, cuando vienen vehículos por la vía transversal.",
            "Sí.",
            "No, porque el semáforo prevalece sobre la señal de stop."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T510121_251016.jpg"
    },
    {
        "text": "En esta vía, deben obedecer sólo a las indicaciones situadas a su izquierda los que pretendan...",
        "options": [
            "seguir de frente o girar a la derecha.",
            "girar a la izquierda solamente.",
            "girar a la izquierda o seguir de frente."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T512709.jpg"
    },
    {
        "text": "Si conduce el turismo rojo y quiere girar a la derecha, ¿qué debe hacer?",
        "options": [
            "Esperar a que el semáforo de la izquierda se ponga verde.",
            "Girar a la derecha porque me lo permite el semáforo.",
            "Continuar de frente."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T514625.jpg"
    },
    {
        "text": "El semáforo de la derecha está verde y el de la izquierda está rojo; para continuar de frente, ¿qué se debe hacer?",
        "options": [
            "Seguir de frente porque me lo permite el de la derecha.",
            "Cambiar al carril izquierdo y esperar a que se ponga verde el de la izquierda.",
            "Esperar a que se pongan los dos verdes."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T513829.jpg"
    },
    {
        "text": "Ante esta situación, ¿qué señal debe respetar usted si su intención es continuar de frente y está circulando por el carril derecho de la vía?",
        "options": [
            "Respetaré la señal de stop por ser la más restrictiva, ya que entran en contradicción las dos señales verticales.",
            "Respetaré el ceda el paso porque circulo por el carril derecho y voy a continuar de frente.",
            "Respetaré la señal de stop porque no voy a cambiar de dirección a la derecha."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P1207.jpg"
    },
    {
        "text": "Si existen señales verticales distintas a la derecha y a la izquierda de la vía, ¿a qué señal debe obedecer para continuar de frente?",
        "options": [
            "La señal situada a la derecha.",
            "La señal situada a la izquierda.",
            "La que aconseje la circulación por la vía transversal."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T512323.jpg"
    },
    {
        "text": "En esta situación, ¿qué debe hacer?",
        "options": [
            "Ceder el paso y si es necesario, detenerse.",
            "Obedecer a la señal de Stop.",
            "Ceder el paso sin sobrepasar la línea de detención."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T510121_050723.jpg"
    },
    {
        "text": "En una intersección hay una señal vertical de stop y una marca vial de ceda el paso, ¿cuál debe obedecer?",
        "options": [
            "La señal vertical de stop.",
            "Ninguna de las dos, en éste caso se aplicará la norma general de prioridad.",
            "La marca vial de ceda el paso."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T510121_150316.jpg"
    },
    {
        "text": "Una señal de prohibición junto a una señal de localización de población, ¿prohíbe en toda la población?",
        "options": [
            "Prohíbe sólamente en la travesía.",
            "No.",
            "Sí, pero dentro de la población puede haber otras señales que cambien la prohibición anterior."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T505623.jpg"
    },
    {
        "text": "Estas señales indican la velocidad máxima...",
        "options": [
            "aconsejada en la curva.",
            "permitida en toda la vía.",
            "permitida en la curva."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T506323.jpg"
    },
    {
        "text": "¿Qué le indican estas señales?",
        "options": [
            "Que a partir de la señal rigen las normas de zona urbana y que está prohibida la circulación de camiones.",
            "Que los camiones deben circular a 50 KM/h.",
            "Que está prohibida la circulación de camiones de más de 3,5 T. de M.M.A."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T511819.jpg"
    },
    {
        "text": "¿Qué significan estas señales?",
        "options": [
            "Que en caso de niebla, no puedo superar la velocidad indicada.",
            "Que si llueve, no puedo superar la velocidad indicada.",
            "Que no puedo superar la velocidad indicada si la calzada está inundada."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T510115_250216.jpg"
    },
    {
        "text": "Estas señales indican peligro por...",
        "options": [
            "cercanía de un paso a nivel con barreras.",
            "proximidad de un paso a nivel con barreras.",
            "proximidad de un paso a nivel sin barreras."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T503926.jpg"
    },
    {
        "text": "La prohibición de circular a más de 60 kilómetros por hora, finaliza...",
        "options": [
            "cuando encuentre una señal de Fin de limitación de velocidad.",
            "cuando encuentre la señal de Ceda el paso.",
            "después de pasar la intersección con prioridad de paso."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T514125.jpg"
    },
    {
        "text": "A la vista de esta situación, ¿cuándo finaliza la limitación de velocidad impuesta por la señal?",
        "options": [
            "Cuando finalice el peligro indicado.",
            "No antes de alcanzar una señal de fin de limitación de velocidad o fin de prohibiciones.",
            "No antes de atravesar una intersección con vía preferente."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P1209.jpg"
    },
    {
        "text": "¿Cuándo termina la prohibición de adelantar?",
        "options": [
            "Cuando llegue al estrechamiento.",
            "Cuando salga del estrechamiento.",
            "Cuando rebase la vertical de la señal de fin de prohibición de adelantamiento."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P1208.jpg"
    },
    {
        "text": "Ante la señalización que observamos en la fotografía, ¿qué vehículos son los que deben respetar la limitación de velocidad impuesta por la señal de reglamentación?",
        "options": [
            "Aquellos que vayan a tomar el primer desvío, pero sólo cuando ya se encuentren en él.",
            "Esta señal afectaría a todos los vehículos que circulan por esta vía.",
            "Aquellos que vayan a tomar el primer desvío, circulen por el carril que circulen en este momento, y a partir del punto ocupado por la señal."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P1210.jpg"
    }
]
            
            ;

            const container = document.getElementById('test-container');
            const paginationRow1 = document.getElementById('pagination-row-1');
            const paginationRow2 = document.getElementById('pagination-row-2');

            // Generar preguntas
            questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.setAttribute('data-correct', question.correct);
                questionDiv.innerHTML = `
                    <div class="question-image">
                        <img src="${question.image}" alt="Imagen de la pregunta">
                    </div>
                    <div class="question-content">
                        <h3>${index + 1}. ${question.text}</h3>
                        <div class="options">
                            ${question.options.map((option, idx) => `
                                <div class="option" data-answer="${String.fromCharCode(65 + idx)}">
                                    <span class="option-circle">${String.fromCharCode(65 + idx)}</span>
                                    ${option}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                container.appendChild(questionDiv);
            });

            // Generar paginación
            for (let i = 0; i < questions.length; i++) {
                const button = document.createElement('button');
                button.textContent = `${i + 1}`;
                button.addEventListener('click', () => showQuestion(i));
                if (i < 15) {
                    paginationRow1.appendChild(button);
                } else {
                    paginationRow2.appendChild(button);
                }
            }

            // Mostrar la primera pregunta
            showQuestion(0);

            // Función para mostrar una pregunta específica
            function showQuestion(index) {
                document.querySelectorAll('.question').forEach((q, i) => {
                    q.style.display = i === index ? 'flex' : 'none';
                });
                document.querySelectorAll('.pagination button').forEach((btn, i) => {
                    btn.style.backgroundColor = i === index ? '#ff7aa2' : '#ffa5c3';
                });
            }

            // Evento para las opciones de respuesta
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const question = this.closest('.question');
                    const questionIndex = Array.from(container.children).indexOf(question);
                    const isCorrect = this.getAttribute('data-answer') === question.getAttribute('data-correct');
                    
                    if (question.dataset.answered) return;

                    question.dataset.answered = true;

                    question.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                        opt.style.pointerEvents = 'none';
                    });
                    
                    this.classList.add('selected', isCorrect ? 'correct' : 'incorrect');

                    if (!isCorrect) {
                        question.querySelector(`.option[data-answer="${question.getAttribute('data-correct')}"]`).classList.add('correct');
                    }

                    // Actualizar el botón de paginación
                    const paginationButton = questionIndex < 15 ? paginationRow1.children[questionIndex] : paginationRow2.children[questionIndex - 15];
                    paginationButton.classList.add(isCorrect ? 'correct' : 'incorrect');
                });
            });

            // Evento para corregir el test
            document.getElementById('correct-test').addEventListener('click', () => {
                let wrongAnswers = 0;
                document.querySelectorAll('.question').forEach((question, index) => {
                    const selected = question.querySelector('.option.selected');
                    const isCorrect = selected && selected.getAttribute('data-answer') === question.getAttribute('data-correct');
                    if (!isCorrect) {
                        wrongAnswers++;
                    }
                    // Actualizar el botón de paginación si no se ha respondido
                    if (!selected) {
                        const paginationButton = index < 15 ? paginationRow1.children[index] : paginationRow2.children[index - 15];
                        paginationButton.classList.add('incorrect');
                    }
                });
                const resultMessage = `Has fallado ${wrongAnswers} respuestas.`;

                const alert = document.getElementById('custom-alert');
                document.getElementById('alert-message').textContent = resultMessage;
                alert.style.display = 'block';
            });
        });

        function closeAlert() {
            document.getElementById('custom-alert').style.display = 'none';
        }
    </script>

    
</body>
</html>