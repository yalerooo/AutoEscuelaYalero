<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Autoescuela</title>
    <link rel="stylesheet" href="../../../Assets/style.css">
</head>
<body>

    
    <div class="container">
        <h1 style="text-align: center; color: #ffa5c3;">Test de Autoescuela</h1>
        <div id="test-container">
            <!-- Aquí se generarán dinámicamente las preguntas -->
        </div>
        <div class="pagination">
            <div class="pagination-row" id="pagination-row-1"></div>
            <div class="pagination-row" id="pagination-row-2"></div>
        </div>
        <button id="correct-test">Corregir Test</button>
    </div>

    <!-- Custom Alert HTML -->
    <div class="custom-alert" id="custom-alert">
        <h2>Resultado del Test</h2>
        <p id="alert-message">Aquí irá el mensaje del resultado.</p>
        <button onclick="closeAlert()">Cerrar</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const questions = [
    {
        "text": "¿Qué indica esta señal?",
        "options": [
            "Lugar reservado para taxis.",
            "Aparcamiento reservado a determinados vehículos.",
            "Calzada en la que sólo se puede salir por el lugar de entrada."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T510127.jpg"
    },
    {
        "text": "Esta señal...",
        "options": [
            "permite cambiar de dirección pero no de sentido.",
            "prohíbe cambiar de dirección y de sentido.",
            "indica sentido obligatorio en una vía de uno o más carriles."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T511615.jpg"
    },
    {
        "text": "Esta señal indica...",
        "options": [
            "la entrada a una autopista o autovía de dos carriles.",
            "una calzada de sentido único y dos carriles.",
            "que se permite la circulación en paralelo."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T502903.jpg"
    },
    {
        "text": "Esta señal indica...",
        "options": [
            "Lugar reservado para el estacionamiento exclusivo de vehículos policiales.",
            "Emplazamiento donde está autorizado el estacionamiento de vehículos.",
            "Puesto de peaje."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T514928.jpg"
    },
    {
        "text": "Esta señal indica...",
        "options": [
            "carril reservado para la circulación de taxis.",
            "lugar reservado a la parada y el estacionamiento de taxis.",
            "carril reservado para autobuses y taxis."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T514415.jpg"
    },
    {
        "text": "Esta señal indica...",
        "options": [
            "carril reservado para autobuses.",
            "vía obligatoria para los autobuses.",
            "parada de autobuses."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T510103_051016.jpg"
    },
    {
        "text": "¿Qué indica esta señal?",
        "options": [
            "Vía con circulación reservada a autobuses.",
            "Parada de autobuses.",
            "Carril reservado a autobuses."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T510130_0512.jpg"
    },
    {
        "text": "Circula conduciendo un turismo por una autovía. ¿Cuál es la velocidad máxima permitida a partir de esta señal?",
        "options": [
            "100 km/h.",
            "60 km/h.",
            "120 km/h."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T510115_050916.jpg"
    },
    {
        "text": "Circula con su turismo por una carretera en la que aparece esta señal de restricción con un panel de color amarillo que nos indica que no se permite circular a...",
        "options": [
            "Cualquier vehículo de más de 3.500 kg.",
            "Camiones de M.M.A mayor de 3.500 kg ni vehículos articulados.",
            "Camiones de M.M.A menor de 3.500 kg ni conjuntos de vehículos."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T510115_150217.jpg"
    },
    {
        "text": "¿Cuál es la velocidad máxima permitida a partir de esta señal?",
        "options": [
            "30 km/h.",
            "60 km/h.",
            "90 km/h."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T510103_250516.jpg"
    },
    {
        "text": "Si encuentra esta señal en un tramo o puerto de montaña, ¿le está permitido pasar?",
        "options": [
            "Sí.",
            "No."
        ],
        "correct": "B",
        "image": "../../../Assets/img/601508.jpg"
    },
    {
        "text": "Se encuentra esta señal en un tramo o puerto de montaña. ¿Le está permitido continuar?",
        "options": [
            "Sí.",
            "No."
        ],
        "correct": "A",
        "image": "../../../Assets/img/601312.jpg"
    },
    {
        "text": "Será obligatorio el uso de cadenas o neumáticos especiales para circular cuando el panel 1 de la señal sea de color...",
        "options": [
            "Amarillo.",
            "Rojo.",
            "Verde."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T510115_050616.jpg"
    },
    {
        "text": "Esta señal indica que...",
        "options": [
            "hay una salida a través de la cual podrá hacerse un cambio de sentido a distinto nivel.",
            "existe un túnel.",
            "próximamente existe una entrada a una autopista."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T502616.jpg"
    },
    {
        "text": "Esta señal informa de la distancia a un tramo en el que se puede efectuar un cambio de sentido...",
        "options": [
            "al mismo nivel.",
            "a distinto nivel.",
            "y un cambio de dirección."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T504327.jpg"
    },
    {
        "text": "En una autovía la señal indica que...",
        "options": [
            "existe una intersección a 300 metros.",
            "existe un paso inferior a 300 metros.",
            "la próxima salida está a la derecha y a 300 metros de distancia."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T510113_050416.jpg"
    },
    {
        "text": "A la vista de la señalización existente, ¿a qué velocidad máxima se  puede circular por esta vía?",
        "options": [
            "Por esta vía está prohibida la circulación de vehículos.",
            "Podría circular, como máximo, a 20km/h.",
            "Podría circular, como máximo, a 50km/h."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T501823.jpg"
    },
    {
        "text": "¿Qué indica la señal?",
        "options": [
            "Fin de travesía.",
            "Fin de calle residencial.",
            "Fin de zona urbana."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T510121_250116.jpg"
    },
    {
        "text": "¿Qué indica la señal?",
        "options": [
            "La velocidad recomendada en una travesía.",
            "La velocidad máxima en una zona donde tienen preferencia los peatones.",
            "El límite de velocidad en zona de curvas."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T512227.jpg"
    },
    {
        "text": "¿Cuál de estas dos señales concede prioridad a los peatones sobre los vehículos?",
        "options": [
            "Las dos.",
            "Sólo la de la izquierda.",
            "Ninguna de ellas."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P1704.jpg"
    },
    {
        "text": "Esta señal indica la situación de...",
        "options": [
            "un paraje de interés paisajístico.",
            "un apartadero en un túnel.",
            "un lugar desde el que puede realizar un cambio de sentido."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T502025.jpg"
    },
    {
        "text": "El conductor de un turismo, tras ver esta señal...",
        "options": [
            "tiene la obligación de encender el alumbrado de corto alcance.",
            "tiene la obligación de apagar el alumbrado de corto alcance.",
            "puede apagar el alumbrado de corto alcance, siempre que no sea necesario por circunstancias de visibilidad."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T511215.jpg"
    },
    {
        "text": "¿Alguna de estas señales indica que finaliza un carril destinado a la circulación?",
        "options": [
            "Sí, la señal A.",
            "Sí, la señal B.",
            "No, ninguna de las dos."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T505028.jpg"
    },
    {
        "text": "A la vista de la señal, ¿puede circular un turismo a más de 70 km/h por el carril de la derecha?",
        "options": [
            "No, porque el carril derecho es para circulación lenta.",
            "Sí, porque debo circular por la derecha siempre que sea posible.",
            "Sí, porque los carriles de la izquierda son para los vehículos que circulan a menos de 70 km/h."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T502612.jpg"
    },
    {
        "text": "¿Qué indica esta señal?",
        "options": [
            "Que en el carril central y en el izquierdo se deberá circular a 70 Km/hora como mínimo.",
            "Que en el carril central y en el izquierdo está prohibido circular a más de 70 km/hora.",
            "Que en el carril de la derecha no se debe sobrepasar la velocidad de 70 Km/hora."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T503227.jpg"
    },
    {
        "text": "¿Qué indica esta señal?",
        "options": [
            "El paso de dos a tres carriles, con señalización de velocidad máxima permitida.",
            "El paso de uno a dos carriles, con carril especial obligatorio para vehículos lentos.",
            "El paso de dos a tres carriles, con señalización de velocidad máxima aconsejada."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T501009.jpg"
    },
    {
        "text": "¿Qué indica esta señal?",
        "options": [
            "Que me acerco a una vía de dos sentidos.",
            "Que me acerco a un intersección sin preferencia.",
            "Que en la vía de doble sentido va a finalizar el carril de la derecha."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T512101.jpg"
    },
    {
        "text": "Esta señal, ¿qué indica?",
        "options": [
            "Que hay un carril para circulación lenta.",
            "Que se termina el carril izquierdo y que hay obras.",
            "Que hay una salida obligatoria a la derecha."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T510115_250116.jpg"
    },
    {
        "text": "Esta señal indica...",
        "options": [
            "proximidad de salida de la autovía.",
            "bifurcación hacia la derecha en calzada de tres carriles.",
            "bifurcación hacia la izquierda en calzada de tres carriles."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T500824.jpg"
    },
    {
        "text": "¿Qué indica la señal?",
        "options": [
            "Que por el carril derecho se llega a una senda ciclable.",
            "Que el carril derecho sólo puede ser utilizado por ciclos.",
            "Que el carril derecho sólo puede ser utilizado por ciclos y ciclomotores."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T502210.jpg"
    }
]
            
            ;

            const container = document.getElementById('test-container');
            const paginationRow1 = document.getElementById('pagination-row-1');
            const paginationRow2 = document.getElementById('pagination-row-2');

            // Generar preguntas
            questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.setAttribute('data-correct', question.correct);
                questionDiv.innerHTML = `
                    <div class="question-image">
                        <img src="${question.image}" alt="Imagen de la pregunta">
                    </div>
                    <div class="question-content">
                        <h3>${index + 1}. ${question.text}</h3>
                        <div class="options">
                            ${question.options.map((option, idx) => `
                                <div class="option" data-answer="${String.fromCharCode(65 + idx)}">
                                    <span class="option-circle">${String.fromCharCode(65 + idx)}</span>
                                    ${option}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                container.appendChild(questionDiv);
            });

            // Generar paginación
            for (let i = 0; i < questions.length; i++) {
                const button = document.createElement('button');
                button.textContent = `${i + 1}`;
                button.addEventListener('click', () => showQuestion(i));
                if (i < 15) {
                    paginationRow1.appendChild(button);
                } else {
                    paginationRow2.appendChild(button);
                }
            }

            // Mostrar la primera pregunta
            showQuestion(0);

            // Función para mostrar una pregunta específica
            function showQuestion(index) {
                document.querySelectorAll('.question').forEach((q, i) => {
                    q.style.display = i === index ? 'flex' : 'none';
                });
                document.querySelectorAll('.pagination button').forEach((btn, i) => {
                    btn.style.backgroundColor = i === index ? '#ff7aa2' : '#ffa5c3';
                });
            }

            // Evento para las opciones de respuesta
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const question = this.closest('.question');
                    const questionIndex = Array.from(container.children).indexOf(question);
                    const isCorrect = this.getAttribute('data-answer') === question.getAttribute('data-correct');
                    
                    if (question.dataset.answered) return;

                    question.dataset.answered = true;

                    question.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                        opt.style.pointerEvents = 'none';
                    });
                    
                    this.classList.add('selected', isCorrect ? 'correct' : 'incorrect');

                    if (!isCorrect) {
                        question.querySelector(`.option[data-answer="${question.getAttribute('data-correct')}"]`).classList.add('correct');
                    }

                    // Actualizar el botón de paginación
                    const paginationButton = questionIndex < 15 ? paginationRow1.children[questionIndex] : paginationRow2.children[questionIndex - 15];
                    paginationButton.classList.add(isCorrect ? 'correct' : 'incorrect');
                });
            });

            // Evento para corregir el test
            document.getElementById('correct-test').addEventListener('click', () => {
                let wrongAnswers = 0;
                document.querySelectorAll('.question').forEach((question, index) => {
                    const selected = question.querySelector('.option.selected');
                    const isCorrect = selected && selected.getAttribute('data-answer') === question.getAttribute('data-correct');
                    if (!isCorrect) {
                        wrongAnswers++;
                    }
                    // Actualizar el botón de paginación si no se ha respondido
                    if (!selected) {
                        const paginationButton = index < 15 ? paginationRow1.children[index] : paginationRow2.children[index - 15];
                        paginationButton.classList.add('incorrect');
                    }
                });
                const resultMessage = `Has fallado ${wrongAnswers} respuestas.`;

                const alert = document.getElementById('custom-alert');
                document.getElementById('alert-message').textContent = resultMessage;
                alert.style.display = 'block';
            });
        });

        function closeAlert() {
            document.getElementById('custom-alert').style.display = 'none';
        }
    </script>

    
</body>
</html>