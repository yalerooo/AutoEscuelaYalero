<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Autoescuela</title>
    <link rel="stylesheet" href="../../../Assets/style.css">
</head>
<body>

    
    <div class="container">
        <h1 style="text-align: center; color: #ffa5c3;">Test de Autoescuela</h1>
        <div id="test-container">
            <!-- Aquí se generarán dinámicamente las preguntas -->
        </div>
        <div class="pagination">
            <div class="pagination-row" id="pagination-row-1"></div>
            <div class="pagination-row" id="pagination-row-2"></div>
        </div>
        <button id="correct-test">Corregir Test</button>
    </div>

    <!-- Custom Alert HTML -->
    <div class="custom-alert" id="custom-alert">
        <h2>Resultado del Test</h2>
        <p id="alert-message">Aquí irá el mensaje del resultado.</p>
        <button onclick="closeAlert()">Cerrar</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const questions = [
    {
        "text": "¿Qué debe hacer un conductor para que los demás usuarios puedan anticiparse a sus intenciones?",
        "options": [
            "Señalizar siempre las maniobras con antelación.",
            "Permanecer en el ángulo muerto de los retrovisores de otro vehículo.",
            "No debe hacer nada, el resto de usuarios debe estar atento a su velocidad y trayectoria."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T510117_150316.jpg"
    },
    {
        "text": "Advertir a otros usuarios de que se va a realizar una maniobra, ¿es obligatorio?",
        "options": [
            "No, sólo es obligatorio advertir a los conductores.",
            "No, pero es siempre muy aconsejable.",
            "Sí, siempre."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T503819.jpg"
    },
    {
        "text": "¿Cuándo debe iniciar las advertencias para realizar una maniobra?",
        "options": [
            "Justo antes de iniciar la maniobra.",
            "Cuando haya iniciado la maniobra.",
            "Con antelación suficiente a la iniciación de la maniobra."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P0706.jpg"
    },
    {
        "text": "Debe señalizar toda maniobra que suponga realizar...",
        "options": [
            "desplazamientos laterales o inmovilizar el vehículo, únicamente.",
            "un desplazamiento lateral o marcha atrás, inmovilizar el vehículo o frenar la marcha.",
            "desplazamientos laterales, únicamente."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T513217.jpg"
    },
    {
        "text": "Como norma general, las maniobras deben advertirse utilizando...",
        "options": [
            "preferentemente el brazo.",
            "preferentemente la señalización luminosa del vehículo.",
            "indistintamente el brazo o las señales luminosas."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P0705.jpg"
    },
    {
        "text": "Las señales para advertir las maniobras realizadas con el brazo, ¿son siempre válidas?",
        "options": [
            "No, en ningún caso.",
            "Sí, cuando se realizan en vía urbana.",
            "No, ya que deben ser visibles por los demás usuarios y efectuarse correctamente."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T512307.jpg"
    },
    {
        "text": "El conductor del vehículo de la fotografía está indicando que va a...",
        "options": [
            "desplazarse hacia la izquierda.",
            "desplazarse hacia la derecha.",
            "frenar."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T513811.jpg"
    },
    {
        "text": "El conductor de este vehículo está indicando que va a...",
        "options": [
            "frenar.",
            "desplazarse a la derecha.",
            "desplazarse a la izquierda."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T514817.jpg"
    },
    {
        "text": "El conductor del vehículo que circula delante ha extendido el brazo y ha comenzado a moverlo alternativamente de arriba abajo con movimientos cortos y rápidos, ¿qué está indicando?",
        "options": [
            "Que va a girar a la izquierda.",
            "Que va a girar a la derecha.",
            "Que va a disminuir la velocidad."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T510129_050216.jpg"
    },
    {
        "text": "¿Qué está indicando este conductor con el brazo?",
        "options": [
            "Que va a ir marcha atrás.",
            "Que va a empezar a circular.",
            "Que va a girar a la izquierda"
        ],
        "correct": "A",
        "image": "../../../Assets/img/P0709.jpg"
    },
    {
        "text": "En este caso en que la señalización se contradice, prevalece la señal...",
        "options": [
            "más restrictiva.",
            "realizada con el brazo.",
            "luminosa."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T512407.jpg"
    },
    {
        "text": "En el caso de que el camión no pueda ceñirse al borde derecho de la calzada, ¿cómo indicará su conductor que puede ser adelantado con seguridad?",
        "options": [
            "Moviendo el brazo extendido de atrás hacia adelante.",
            "Con el intermitente izquierdo.",
            "Reduciendo bruscamente la marcha."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P0711.jpg"
    },
    {
        "text": "Si tiene que reducir considerablemente la velocidad del vehículo que conduce, ¿cómo debe avisar a los vehículos que circulan detrás?",
        "options": [
            "Encendiendo las luces de posición.",
            "Sólo con el intermitente derecho.",
            "Mediante el empleo reiterado de las luces de frenado."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P0712.jpg"
    },
    {
        "text": "Encender el intermitente, ¿da preferencia siempre para hacer maniobras?",
        "options": [
            "Sí, pero debo hacer la maniobra rápidamente.",
            "No.",
            "Sí, porque he avisado."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P0715.jpg"
    },
    {
        "text": "Va a girar a la derecha, y lo señaliza con el indicador luminoso correspondiente, ¿hasta cuando es necesario mantenerlo encendido?",
        "options": [
            "Hasta que sepa con seguridad que el que me sigue ha visto la indicación.",
            "Hasta que finalice la maniobra.",
            "El menor tiempo posible."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P0713.jpg"
    },
    {
        "text": "La señalización luminosa para indicar el cambio de carril, ¿cuándo deberá concluir?",
        "options": [
            "Una vez haya rebasado al vehículo adelantado.",
            "Cuando el vehículo haya adoptado la nueva trayectoria.",
            "Cuando compruebe que los demás usuarios han percibido la señalización."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P0714.jpg"
    },
    {
        "text": "En un poblado, ¿está permitido usar las advertencias acústicas?",
        "options": [
            "Sí, exclusivamente para evitar un accidente.",
            "No.",
            "Sí, para evitar un accidente o avisar a los demás usuarios de que se realiza un servicio de urgencia."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P0720.jpg"
    },
    {
        "text": "Las señales acústicas deben ser...",
        "options": [
            "de cualquier sonido.",
            "de sonido muy agudo.",
            "de sonido no estridente."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P0722.jpg"
    },
    {
        "text": "Las señales acústicas, ¿se pueden utilizar para evitar un posible accidente?",
        "options": [
            "Sí, pero sólo en vías estrechas con muchas curvas.",
            "Sí, en cualquier tipo de vía.",
            "No."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T512217.jpg"
    },
    {
        "text": "Un vehículo no prioritario que circule en servicio de urgencia, ¿tiene permitido utilizar las señales acústicas?",
        "options": [
            "Sí, pero únicamente en poblado.",
            "Sí, para avisar de su presencia a los demás usuarios.",
            "No, sólo puede utilizar la señalización óptica."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T504610.jpg"
    },
    {
        "text": "Las advertencias acústicas se pueden utilizar...",
        "options": [
            "para advertir el propósito de adelantar únicamente dentro de poblado.",
            "en vías estrechas con muchas curvas.",
            "en vías anchas con pocas curvas."
        ],
        "correct": "B",
        "image": "../../../Assets/img/P0718.jpg"
    },
    {
        "text": "¿Cómo puede advertirse previamente al conductor del vehículo que circula delante de la intención de adelantarle?",
        "options": [
            "Mediante las oportunas señales acústicas u ópticas tanto dentro como fuera de poblado.",
            "Mediante las oportunas señales acústicas, fuera de poblado.",
            "Mediante los intermitentes."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T508013.jpg"
    },
    {
        "text": "El conductor de un vehículo puede utilizar las señales acústicas para advertir su presencia a otros usuarios...",
        "options": [
            "sólo en vías urbanas.",
            "tanto en vías urbanas como en vías interurbanas.",
            "únicamente en vías interurbanas."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T511707.jpg"
    },
    {
        "text": "Un semáforo cambia de rojo a verde. ¿Está permitido emplear el claxon para advertir a otro conductor que ya se puede pasar?",
        "options": [
            "No, en ningún caso.",
            "Sí, cuando se trate de una vía interurbana.",
            "Sí, cuando se trate de una vía urbana."
        ],
        "correct": "A",
        "image": "../../../Assets/img/P0719.jpg"
    },
    {
        "text": "Si es necesario avisar a un ciclista con señales acústicas, ¿cómo deben realizarse?",
        "options": [
            "Es indiferente.",
            "Cerca del ciclista.",
            "A cierta distancia del ciclista, para evitar que se asuste."
        ],
        "correct": "C",
        "image": "../../../Assets/img/P0721.jpg"
    },
    {
        "text": "Dentro de poblado, ¿se pueden utilizar los alumbrados de corto o largo alcance alternativamente a intervalos muy cortos?",
        "options": [
            "Sí, para evitar un posible accidente.",
            "No, está prohibido.",
            "Dentro de poblado en ningún caso, fuera sí."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T506205.jpg"
    },
    {
        "text": "Con las luces de corto alcance, ¿está permitido hacer ráfagas?",
        "options": [
            "Sí, sólo en vías urbanas.",
            "Sí, tanto en vías urbanas como en vías interurbanas.",
            "Sí, sólo en vías interurbanas."
        ],
        "correct": "B",
        "image": "../../../Assets/img/T501017.jpg"
    },
    {
        "text": "Cuando se circula por una vía donde sólo hay peatones, ¿debe advertir la maniobra de giro a la derecha?",
        "options": [
            "Sí, las maniobras deben advertirse a todos los usuarios.",
            "No, sólo debe advertirlas a otros vehículos.",
            "No es obligatorio pero es muy recomendable."
        ],
        "correct": "A",
        "image": "../../../Assets/img/T514609.jpg"
    },
    {
        "text": "En un paso de peatones, ¿hay que hacer señales a los peatones para que crucen la calzada?",
        "options": [
            "Sí, pero sólo si van a cruzar por él.",
            "Sí, porque así los peatones pueden cruzar con seguridad.",
            "No, porque los demás conductores pueden no haberse dado cuenta de su presencia."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T505607.jpg"
    },
    {
        "text": "Realizar advertencias luminosas de forma intermitente con las luces de corto o largo, o ambas alternativamente (ráfagas), para advertir a otros conductores sobre la presencia de los agentes de tráfico... ¿Es correcto?",
        "options": [
            "No, porque está siempre prohibido hacer ráfagas con las luces del vehículo.",
            "Sí, siempre que no se deslumbre a los vehículos que circulan de frente.",
            "No, sólo se pueden hacer ráfagas para los casos establecidos reglamentariamente."
        ],
        "correct": "C",
        "image": "../../../Assets/img/T505917.jpg"
    }
]
            
            ;

            const container = document.getElementById('test-container');
            const paginationRow1 = document.getElementById('pagination-row-1');
            const paginationRow2 = document.getElementById('pagination-row-2');

            // Generar preguntas
            questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.setAttribute('data-correct', question.correct);
                questionDiv.innerHTML = `
                    <div class="question-image">
                        <img src="${question.image}" alt="Imagen de la pregunta">
                    </div>
                    <div class="question-content">
                        <h3>${index + 1}. ${question.text}</h3>
                        <div class="options">
                            ${question.options.map((option, idx) => `
                                <div class="option" data-answer="${String.fromCharCode(65 + idx)}">
                                    <span class="option-circle">${String.fromCharCode(65 + idx)}</span>
                                    ${option}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                container.appendChild(questionDiv);
            });

            // Generar paginación
            for (let i = 0; i < questions.length; i++) {
                const button = document.createElement('button');
                button.textContent = `${i + 1}`;
                button.addEventListener('click', () => showQuestion(i));
                if (i < 15) {
                    paginationRow1.appendChild(button);
                } else {
                    paginationRow2.appendChild(button);
                }
            }

            // Mostrar la primera pregunta
            showQuestion(0);

            // Función para mostrar una pregunta específica
            function showQuestion(index) {
                document.querySelectorAll('.question').forEach((q, i) => {
                    q.style.display = i === index ? 'flex' : 'none';
                });
                document.querySelectorAll('.pagination button').forEach((btn, i) => {
                    btn.style.backgroundColor = i === index ? '#ff7aa2' : '#ffa5c3';
                });
            }

            // Evento para las opciones de respuesta
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const question = this.closest('.question');
                    const questionIndex = Array.from(container.children).indexOf(question);
                    const isCorrect = this.getAttribute('data-answer') === question.getAttribute('data-correct');
                    
                    if (question.dataset.answered) return;

                    question.dataset.answered = true;

                    question.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                        opt.style.pointerEvents = 'none';
                    });
                    
                    this.classList.add('selected', isCorrect ? 'correct' : 'incorrect');

                    if (!isCorrect) {
                        question.querySelector(`.option[data-answer="${question.getAttribute('data-correct')}"]`).classList.add('correct');
                    }

                    // Actualizar el botón de paginación
                    const paginationButton = questionIndex < 15 ? paginationRow1.children[questionIndex] : paginationRow2.children[questionIndex - 15];
                    paginationButton.classList.add(isCorrect ? 'correct' : 'incorrect');
                });
            });

            // Evento para corregir el test
            document.getElementById('correct-test').addEventListener('click', () => {
                let wrongAnswers = 0;
                document.querySelectorAll('.question').forEach((question, index) => {
                    const selected = question.querySelector('.option.selected');
                    const isCorrect = selected && selected.getAttribute('data-answer') === question.getAttribute('data-correct');
                    if (!isCorrect) {
                        wrongAnswers++;
                    }
                    // Actualizar el botón de paginación si no se ha respondido
                    if (!selected) {
                        const paginationButton = index < 15 ? paginationRow1.children[index] : paginationRow2.children[index - 15];
                        paginationButton.classList.add('incorrect');
                    }
                });
                const resultMessage = `Has fallado ${wrongAnswers} respuestas.`;

                const alert = document.getElementById('custom-alert');
                document.getElementById('alert-message').textContent = resultMessage;
                alert.style.display = 'block';
            });
        });

        function closeAlert() {
            document.getElementById('custom-alert').style.display = 'none';
        }
    </script>

    
</body>
</html>